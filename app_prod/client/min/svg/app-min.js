var $N=$N||{};$N.env={};if(!window.define){window.define=function(c,a,d){var g,b=0,e=[],f=function(h){var l=$N,k=0;h=h.replace("jsfw/","");h=h.split("/");if(h[0].toLowerCase()==="gui"){l.gui=l.gui||{};l=l.gui[h[h.length-1]];}else{for(k=0;k<h.length;k++){l[h[k]]=l[h[k]]||{};l=l[h[k]];}}return l;};for(b=0;b<a.length;b++){e.push(f(a[b]));}g=f(c);g=d;g.apply(this,e);};}if(!window.require){window.require=function(a,b){b.apply(this);};}define("jsfw/apps/util/Util",[],function(){var a={};a.lookup=function(e,g,f){var c=null;var d=g[f];if(d!==null&&d!==undefined){var h=e[d];if(h){c=h;}}return c;};a.removeSpaces=function(c){if(c){c=String(c).split(" ").join("");}return c||null;};a.isHardDriveAvailable=function(){return(CCOM&&CCOM.recorder!==null&&typeof CCOM.recorder!=="undefined"&&CCOM.recorder.spaceTotal!==null&&typeof CCOM.recorder.spaceTotal!=="undefined"&&CCOM.recorder.spaceTotal>0);};a.extend=function(e,c){var d=function(){};d.prototype=c.prototype;e.prototype=new d();e.prototype.constructor=e;e.superConstructor=c;e.superClass=c.prototype;};a.arrayContains=function(c,f){var d=0,e=0;if(c&&f){for(d=0;d<c.length;d++){if(c[d]===f){e++;}}}return e;};a.isInputChar=function(c){var d=/^[0-9A-Za-z\-]$/;return d.test(c);};a.getObjectAttributes=function(f){var c=[],d;for(d in f){if(typeof f[d]!=="function"){c.push({name:d,obj:f[d],parent:f});}}return c;};a.formatDate=function(c,q,v,n,o,f){var y=null;var x=null;var m=null;var p=null;var r=null;var t=null;var d=null;var u=null;var k=null;var h=null;var l=null;var e=q.toUpperCase();var w;var s;var g;v=v||["January","February","March","April","May","June","July","August","September","October","November","December"];n=n||["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];o=o||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];f=f||["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"];y=c.getMonth()+1;x=c.getDate();m=c.getFullYear();r=m.toString();p=r.substring(r.length-2,r.length);t=o[c.getDay()];d=f[c.getDay()];u=v[y-1];k=n[y-1];if(y<10){h="0"+y.toString();}else{h=y.toString();}if(x<10){l="0"+x.toString();}else{l=x.toString();}w=[{formatStr:"DAY",value:t},{formatStr:"DD",value:l},{formatStr:"DY",value:d},{formatStr:"D",value:x.toString()},{formatStr:"MONTH",value:u},{formatStr:"MON",value:k},{formatStr:"MM",value:h},{formatStr:"M",value:y.toString()},{formatStr:"YYYY",value:m.toString()},{formatStr:"YY",value:p}];for(s=0;s<w.length;s++){g=e.indexOf(w[s].formatStr);if(g!==-1&&e[g-1]!=="$"){e=this.replaceSubStr(e,w[s].formatStr,"$"+w[s].formatStr+"#");}}for(s=0;s<w.length;s++){e=this.replaceSubStr(e,"$"+w[s].formatStr+"#",w[s].value);}return e;};a.formatTime=function b(r,l,g,o){var d=l.toUpperCase();var p=/^(?:H|HH)(?::MM)(?::SS)?(?: AM)?$/;var n="0"+r.getMinutes().toString();var f="0"+r.getSeconds().toString();var m=r.getHours().toString();var k="0"+m;var e="am";var h="pm";var q="";var c="";if(g){if(g.length){e=g[0];h=g[1];}else{if(g.am){e=g.am;}if(g.pm){h=g.pm;}}}if(!p.test(d)){d="H:MM AM";}n=n.substring(n.length-2,n.length);f=f.substring(f.length-2,f.length);k=k.substring(k.length-2,k.length);if(d.indexOf("AM")!==-1){c=e;if(k==="00"){k="12";c=e;}else{if(k==="12"){c=h;}}if(parseInt(k,10)>12){c=h;m=String(parseInt(k,10)-12);k="0"+m;k=k.substring(k.length-2,k.length);}}if(d.indexOf("HH")===-1){if(m==="0"){m="12";}q+=m+":"+n;}else{q+=k+":"+n;}if(d.indexOf("SS")!==-1){q+=":"+f;}if(d.indexOf("AM")!==-1){if(o){q=c+" "+q;}else{q=q+" "+c;}}return q;};a.getTimeRoundedToMinute=function(d){var c=new Date(d);if(c.getUTCSeconds()>=30){c.setUTCMinutes(c.getUTCMinutes()+1);}return Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes());};a.replaceSubStr=function(g,e,f,c){var k=g.indexOf(e),h,d;if(c){while(k!==-1){h=g.substring(0,k);d=g.substring(k+e.length,g.length);g=h+f+d;k=g.indexOf(e);}}else{if(k>=0){h=g.substring(0,k);d=g.substring(k+e.length,g.length);g=h+f+d;}}return g;};a.timeString=function(d){var f="";if(d){if(typeof d==="number"){d=new Date(d);}var c=d.getHours();var e=d.getMinutes();c=(c<10)?("0"+c.toString()):c.toString();e=(e<10)?("0"+e.toString()):e.toString();f=String(c)+":"+String(e);}return f;};a.dateString=function(f,d){if(typeof f==="number"){f=new Date(f);}var c=f.getDate().toString();var g=d.monthNames[f.getMonth()];var e=f.getFullYear().toString();return(c+" "+g+" "+e);};a.probeObject=function(f,g){var e,d,c="";g=g||0;for(d=0;d<g;d++){c+="    ";}for(e in f){if(f.hasOwnProperty(e)){if(typeof f[e]==="object"){alert(c+e+" : {");this.probeObject(f[e],g+1);alert(c+"}");}else{alert(c+e+" : "+f[e]);}}}};a.getDateFromISOString=function(c){var d=c.indexOf("Z")>1?c.substring(0,c.indexOf("Z")):c;var f=d.split("T");var e=f[0].split("-");var g=f[1].split(":");return new Date(e[0],parseInt(e[1],10)-1,e[2],g[0],g[1],g[2]);};a.hexToAscii=function(e){var d=e;var c="";while(d.length>0){if(d.length<2){break;}c=String.fromCharCode(parseInt(d.substr(-2),16))+c;d=d.substr(0,d.length-2);}return c;};a.convertFromBytes=function(d,f,h){var m=[{denary:" bytes",binary:" bytes"},{denary:" kB",binary:" KiB"},{denary:" MB",binary:" MiB"},{denary:" GB",binary:" GiB"},{denary:" TB",binary:" TiB"},{denary:" PB",binary:" PiB"},{denary:" EB",binary:" EiB"},{denary:" ZB",binary:" ZiB"},{denary:" YB",binary:" YiB"}],e=" bytes",g=parseInt(d,10),n=((f>=0)?f:0),c=h?1024:1000,l=0,k=m.length-1,o=g;while(o>=c){o/=c;l++;}o=o.toFixed(n);if(l<=k){e=h?m[l].binary:m[l].denary;}else{if(l>k){e=h?m[k].binary:m[k].denary;}}return(o.toString()+e);};a.augmentWithLog=function(e,f){var g;var d;var c;f=f||this;for(g in f){if(f.hasOwnProperty(g)){d=f[g];if(typeof d==="function"){c=arguments;f[g]=(function(h,k){return function(){alert(e+" "+h+" in..");return k.apply(this,arguments);};}(g,d));}}}};a.remapRelativeFilePath=function(d,p,e){var f=d.lastIndexOf("/");var h=p.substring(f+1);var o=h.split("/");var m=e.split("/");var c=[];var n;var g;var k=Math.max(o.length,m.length);var l=e.indexOf(".")<0;for(g=0;g<k-1;g++){if(m[g]!==o[g]){if(g<o.length-1){c.unshift("..");}if(g<m.length-1||(g===k-1&&l)){c.push(m[g]);}}}c.push(m[m.length-1]);n=c.join("/");return n;};a.getMemberCount=function(d){var c=0;var e;if(!d){return -1;}for(e in d){if(d.hasOwnProperty(e)){c++;}}return c;};a.getFirstMember=function(c){var d;if(!c){return null;}for(d in c){if(c.hasOwnProperty(d)){return d;}}return null;};a.upcaseFirstLetter=function(e){var d,c="",f=e.split(" ");for(d=0;d<f.length;d++){c+=f[d].substr(0,1).toUpperCase()+f[d].substr(1);if(d<f.length-1){c+=" ";}}return c;};a.isEmptyObject=function(c){var d;for(d in c){if(c.hasOwnProperty(d)){return false;}}return true;};a.isPlatformNMPPlugin=function(){var d=document.getElementsByTagName("object"),c;for(c=0;c<d.length;c++){if(d[c].drmAgent){return true;}}return false;};$N.apps=$N.apps||{};$N.apps.util=$N.apps.util||{};$N.apps.util.Util=a;return $N.apps.util.Util;});define("jsfw/apps/core/Log",["jsfw/apps/util/Util"],function(d){window.$N=$N||{};if(!window.console){window.console={log:function(){}};}var c=navigator.userAgent.indexOf("Ekioh")>-1?"SVG":"HTML",b={SVG:{log:function(h,f,k,g,e){alert(h+"["+f+"."+k+"] "+g);}},HTML:{log:function(h,f,k,g,e){if($N.apps.log4javascript){$N.apps.log4javascript[e](h,"["+f+"."+k+"] "+g);}else{}}}}[c];function a(f,e){return function(k,h,g){if(!g){g="debug";}if(a.Config.isLogToBeOutput(f,e,k,g)){}};}a.LOG_ERROR="error";a.LOG_WARN="warn";a.LOG_DEBUG="debug";a.LOG_INFO="info";a.Config={isEnabled:true,defaultValues:1,loggingLevels:{error:1,warn:1,debug:1,info:1},moduleLogging:{},classLogging:{},methodLogging:{},_isLevelEnabled:function(e){if((this.defaultValues===1&&(this.loggingLevels[e]===1||this.loggingLevels[e]===undefined))||(this.defaultValues===0&&this.loggingLevels[e]===1)){return true;}return false;},setEnableLogging:function(e){this.isEnabled=e;},setDefaultValues:function(e){this.defaultValues=e;},setLoggingLevels:function(e){this.loggingLevels=e;},setModuleLogging:function(e){this.moduleLogging=e;},setClassLogging:function(e){this.classLogging=e;},setMethodLogging:function(e){this.methodLogging=e;},configure:function(g){var f,h=null;for(h in g){if(g.hasOwnProperty(h)){f=this["set"+$N.apps.util.Util.upcaseFirstLetter(h)];if(f){f.call(this,g[h]);}else{throw ("Log.Config configure - no setter method for attribute "+h);}}}},isLogToBeOutput:function(e,g,f,h){if(this.isEnabled&&this._isLevelEnabled(h)){if(this.defaultValues===0){if((this.moduleLogging[e]===1&&this.classLogging[g]!==0&&this.methodLogging[f]!==0)||(this.classLogging[g]===1&&this.classLogging[f]!==0)||this.methodLogging[f]===1){return true;}}else{if((this.moduleLogging[e]===undefined||this.moduleLogging[e]===1)&&(this.classLogging[g]===undefined||this.classLogging[g]===1)&&(this.methodLogging[f]===undefined||this.methodLogging[f]===1)){return true;}}}return false;}};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.Log=a;return a;});define("jsfw/Config",["jsfw/apps/util/Util"],function(a){window.$N=$N||{};if(!$N.Config||$N.apps.util.Util.isEmptyObject($N.Config)){$N.Config={DRM:false,TRACKS:false,PERSISTENT_CACHE:false,ADVERTS:false,PRESENTATION_MANAGER:false,PROMOTIONS:false,PLUGIN_VER_PREFIX:""};}return $N.Config;});var $N=$N||{};$N.data=$N.data||{};define("jsfw/data/EPGEvent",[],function(){$N.data.EPGEvent={SOURCE:{EIT:"E",SDP:"S",MDS:"S",GATEWAY:"G"}};return $N.data.EPGEvent;});var $N=$N||{};$N.data=$N.data||{};define("jsfw/data/EPGService",[],function(){$N.data.EPGService={SERVICE_TYPE:{TV:1,RADIO:2,TELETEXT:3,DATA:4,OTHER:5},DELIVERY_TYPE:{DVB:1,IP:2,GATEWAY:3}};return $N.data.EPGService;});var $N=$N||{};$N.data=$N.data||{};define("jsfw/data/Recording",[],function(){$N.data.Recording={RECORDING_TYPE:{SINGLE:0,SERIES:1}};return $N.data.Recording;});define("jsfw/services/sdp/RequestWorker",["jsfw/apps/core/Log"],function(Log){var log=new $N.apps.core.Log("sdp","RequestWorker"),fallbackToJquery=false,onReadyStateChangedTimer=null,TIME_TO_CHECK_XHR_STATE_CHANGE_MS=1000,firstTime=true,isEkioh=navigator.userAgent.indexOf("Ekioh")>-1;function isMdsRequest(method){return(method.indexOf("btv/")!==-1||method.indexOf("vod/")!==-1||method.indexOf("offers/")!==-1||method.indexOf("/search")!==-1||method.indexOf("/suggest")!==-1);}function isMdsAdaptorURL(url){return(url.indexOf("adaptor")!==-1);}function isHDMS(service){return(service==="homeDomainManagerService");}function getReturnValue(response,serviceName){if(isHDMS(serviceName)){return response.token;}return response;}function xssRequest(url,completeParams,serviceName,methodName,successCallback,failCallback,toQueue){var returnValue=null,req,xdr,isGetRequest=false;toQueue=(toQueue!==undefined&&toQueue!==null)?toQueue:false;if(!toQueue){if(window.XDomainRequest){xdr=new XDomainRequest();completeParams=(completeParams&&url.indexOf("?")===-1?("?"+completeParams):"");xdr.open("GET",url+completeParams);xdr.onerror=function(e){log("_statechange","("+serviceName+"."+methodName+") Request incomplete - HTTP Response Code: "+String(e||null));failCallback();};xdr.onload=function(){var returnValue=null;try{returnValue=eval("("+xdr.responseText+")");}catch(e){}returnValue=getReturnValue(returnValue,serviceName);if(returnValue&&(isMdsRequest(methodName)||returnValue.resultCode==="0")){log("_statechange","("+serviceName+"."+methodName+") Request complete.");successCallback(returnValue);}else{log("_statechange","("+serviceName+"."+methodName+") Request incomplete: "+String(returnValue));failCallback(returnValue);}};xdr.onprogress=function(){};xdr.ontimeout=function(){};setTimeout(function(){xdr.send();},0);return xdr;}if(!fallbackToJquery||isEkioh){req=new XMLHttpRequest();req.onreadystatechange=function(){firstTime=false;if(onReadyStateChangedTimer){clearTimeout(onReadyStateChangedTimer);onReadyStateChangedTimer=null;}switch(req.readyState){case 0:log("_statechange","("+serviceName+"."+methodName+") Request Unitiliased");break;case 1:log("_statechange","("+serviceName+"."+methodName+") Request Open");break;case 4:log("_statechange","("+serviceName+"."+methodName+") Request data received");returnValue=null;try{returnValue=eval("returnValue = "+req.responseText+";");}catch(error){}if(req.status===0&&req.getAllResponseHeaders()){fallbackToJquery=true;failCallback(returnValue,true);}else{if(req.status===200){returnValue=getReturnValue(returnValue,serviceName);if(returnValue&&(isMdsRequest(methodName)||returnValue.resultCode==="0")){log("_statechange","("+serviceName+"."+methodName+") Request complete.");successCallback(returnValue);}else{log("_statechange","("+serviceName+"."+methodName+") Request incomplete - HTTP Response Code: "+String(req.status));failCallback(returnValue);}}else{log("_statechange","("+serviceName+"."+methodName+") Request incomplete - HTTP Response Code: "+String(req.status));failCallback(returnValue);}}break;}};if((serviceName==="acquiredContentListService"||serviceName==="bookmarkService")&&isMdsAdaptorURL(url)){completeParams=(completeParams?("?"+completeParams):"");isGetRequest=true;req.open("GET",url+completeParams,true);}else{if(isMdsRequest(methodName)||isHDMS(serviceName)){isGetRequest=true;req.open("GET",url,true);}else{req.open("POST",url,true);}}if(completeParams){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}try{if(!isGetRequest){req.send(completeParams);}else{req.send();}}catch(e){if(req.status!==0&&e.code===11){req.abort();log("_statechange","("+serviceName+"."+methodName+") Request incomplete - HTTP Response Code: "+String(req.status));failCallback(returnValue);}}if(firstTime&&!isEkioh){onReadyStateChangedTimer=setTimeout(function(){fallbackToJquery=true;failCallback({},true);},TIME_TO_CHECK_XHR_STATE_CHANGE_MS);}return req;}completeParams=(completeParams?("?"+completeParams):"");return $.get(url+completeParams,null,null,"text").done(function(data){var returnValue;try{returnValue=eval("("+data+")");}catch(e){}returnValue=getReturnValue(returnValue,serviceName);successCallback(returnValue);}).fail(function(jqxhr,status,error){failCallback();});}}function RequestWorker(token,serviceName,methodName,url,callbackObj,successCallback,failureCallback,params,reRequest,toQueue,postResponseCallback){this._serviceName=serviceName;this._methodName=methodName;this._sentTime=new Date().getTime();this._url=url;this._requestContext={callbackObj:callbackObj,successCallback:successCallback,failureCallback:failureCallback};this._params=params;this._reRequest=reRequest;this._callPostResponse=function(){if(postResponseCallback){postResponseCallback.apply(callbackObj,arguments);}else{RequestWorker._postResponseCallback.apply(callbackObj,arguments);}};this._isMdsRequest=isMdsRequest(methodName);var completeParams=token?params+"&token="+token:params,thisObj=this,failCallback=function(obj,reRequest){if(reRequest){thisObj._req=xssRequest(url,completeParams,serviceName,methodName,function(obj){thisObj._requestSuccess(obj);},failCallback,toQueue);return;}thisObj._requestFail(obj);};this._req=xssRequest(url,completeParams,serviceName,methodName,function(obj){thisObj._requestSuccess(obj);},failCallback,toQueue);}var proto=RequestWorker.prototype;RequestWorker.setPostResponseCallback=function(callback){RequestWorker._postResponseCallback=callback;};RequestWorker._postResponseCallback=function(responseCode,requestWorker,data){};RequestWorker.TIMEOUT_DURATION=120000;RequestWorker.SUCCESS=0;RequestWorker.FAILED=1;RequestWorker.NOT_AUTHORISED=2;proto._requestSuccess=function(returnValue){var token=returnValue.token||null,result=(this._isMdsRequest?returnValue:returnValue.result);if(this.hasTimedOut()){log("_requestSuccess","("+this._serviceName+"."+this._methodName+")  ignoring response which arrived after timeout period (because has already been signalled as failed).");return;}if(!result){log("_requestSuccess","("+this._serviceName+"."+this._methodName+") No data received in response!");}this._callPostResponse(RequestWorker.SUCCESS,this,returnValue);this._requestContext.successCallback.apply(this._requestContext.callbackObj,[result,token]);};proto._requestFail=function(rv){var resultCode="-1",result="";if(rv){resultCode=this._isMdsRequest?resultCode:rv.resultCode;result=this._isMdsRequest?rv:rv.result;}if(this._hasTokenExpired(resultCode)&&!this._reRequest){this._callPostResponse(RequestWorker.NOT_AUTHORISED,this,rv);return;}this._callPostResponse(RequestWorker.FAILED,this,rv);if(this._requestContext.failureCallback){this._requestContext.failureCallback.apply(this._requestContext.callbackObj,["["+resultCode+"]"+result]);}};proto._hasTokenExpired=function(resultCode){var errorCodes=resultCode?resultCode.split(":"):[],i;for(i=0;i<errorCodes.length;i++){if(errorCodes[i]==="403"){return true;}}return false;};proto.getServiceName=function(){return this._serviceName;};proto.getMethodName=function(){return this._methodName;};proto.hasTimedOut=function(){return(new Date().getTime()-this._sentTime)>RequestWorker.TIMEOUT_DURATION;};proto.reIssueRequest=function(newToken){var newParams=newToken?this._params+"&token="+newToken:this._params;return new RequestWorker(this._useInlineToken,this._serviceName,this._methodName,this._url,this._requestContext.callbackObj,this._requestContext.successCallback,this._requestContext.failureCallback,newParams,true);};proto.abortRequest=function(){if(this._req&&this._req.abort){this._req.abort();}};proto.failRequest=function(){this._requestContext.failureCallback.apply(this._requestContext.callbackObj);};window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.RequestWorker=RequestWorker;return RequestWorker;});define("jsfw/services/sdp/BaseService",["jsfw/apps/core/Log","jsfw/Config","jsfw/services/sdp/RequestWorker"],function(b,a,c){var d=function(){this.securityRequired=false;};var e=new $N.apps.core.Log("sdp","BaseService");d._HUE_GATEWAY_URL="";d._USE_INLINE_AUTH_TOKEN=true;d._AUTH_TOKEN="";d._SECURITY_PORT=null;d._REAP_FREQ_MILLIS=30000;d._RE_AUTHORISE_REQUEST=null;d._RE_AUTHORISING=false;d._QSP_PATH="/qsp/gateway/http/js";d._SIGNED_ON=false;d._SIGNON_REQUEST_FAILED=false;d._securityRequired=false;d.ONLY_ALLOW_SIGNON=true;d._outstandingRequests=[];d._requestsPendingSignon=[];d.getOutstandingRequestCount=function(){return d._outstandingRequests.length;};d.getNumberOfRequestsPendingSignon=function(){return d._requestsPendingSignon.length;};d.init=function(n,l,k,h,g,o,m){d._HUE_GATEWAY_URL=n;d._USE_INLINE_AUTH_TOKEN=(l===false||l===true)?l:d._USE_INLINE_AUTH_TOKEN;if(k){d._SECURITY_PORT=k;}d._REAP_FREQ_MILLIS=h||d._REAP_FREQ_MILLIS;d._QSP_PATH=(g!==null&&g!==undefined)?g:"/qsp/gateway/http/js";d.ONLY_ALLOW_SIGNON=(o!==undefined&&o!==null)?o:true;if(d._reaperTimeout){clearInterval(d._reaperTimeout);}d._reaperTimeout=setInterval(function(){d._reapTimedOutRequests();},d._REAP_FREQ_MILLIS);d._securityRequired=m||false;};d.initialise=function(n,l,k,h,g,o,m){d.init(n,l,k,h,g,o,m);};d.setAuthToken=function(g){d._AUTH_TOKEN=g;return this;};d.getServerURL=function(){return d._HUE_GATEWAY_URL;};$N.services.sdp.RequestWorker.setPostResponseCallback(function(g,k,h){switch(g){case $N.services.sdp.RequestWorker.SUCCESS:if(h.token){d._AUTH_TOKEN=h.token;}if(k.getServiceName()==="signonService"||k.getServiceName()==="homeDomainManagerService"){d._RE_AUTHORISE_REQUEST=k;d.ONLY_ALLOW_SIGNON=false;d._RE_AUTHORISING=false;d._SIGNED_ON=true;d._SIGNON_REQUEST_FAILED=false;d._processPendingRequests();}break;case $N.services.sdp.RequestWorker.FAILED:if(k.getServiceName()==="signonService"||k.getServiceName()==="homeDomainManagerService"){d._abortPendingRequests();d._RE_AUTHORISING=false;d._SIGNED_ON=false;d._SIGNON_REQUEST_FAILED=true;}break;case $N.services.sdp.RequestWorker.NOT_AUTHORISED:if(d._RE_AUTHORISE_REQUEST&&!d._RE_AUTHORISING){d._outstandingRequests.push(d._RE_AUTHORISE_REQUEST.reIssueRequest());d._RE_AUTHORISING=true;}d._requestsPendingSignon.push(k);break;}d._removeFromOutstanding(k);});d._abortPendingRequests=function(){var g;for(g=0;g<d._requestsPendingSignon.length;g++){d._requestsPendingSignon[g].failRequest();}d._requestsPendingSignon=[];};d._processPendingRequests=function(){var g;for(g=0;g<d._requestsPendingSignon.length;g++){d._requestsPendingSignon[g].reIssueRequest(d._AUTH_TOKEN);}d._requestsPendingSignon=[];};d._removeFromOutstanding=function(h){var g;for(g=0;g<d._outstandingRequests.length;g++){if(d._outstandingRequests[g]===h){d._outstandingRequests[g]=null;d._outstandingRequests.splice(g,1);}}};d._reapTimedOutRequests=function(){e("_reapTimedOutRequests","Enter ("+String(d._outstandingRequests.length)+" requests outstanding)");var h=[].concat(d._outstandingRequests),g;for(g=0;g<h.length;g++){if(h[g].hasTimedOut()){e("_reapTimedOutRequests","("+h[g].getServiceName()+"."+h[g].getMethodName()+") Request has timed out");h[g].abortRequest();}}e("_reapTimedOutRequests","Exit ("+String(d._outstandingRequests.length)+" requests outstanding)");};var f=d.prototype;f.invokeMethod=function(l,m,k,r){var n=d._QSP_PATH;if(this._serviceName==="signonService"){d._SIGNED_ON=false;d._AUTH_TOKEN="";}var g="",p="",o="",h="",q;if(r==="tearDown"||r==="getBookmarkForOrigin"||r==="setBookmarkForOrigin"||r==="deleteBookmarkByUid"){n="/hue-gateway/gateway/http/js";}else{if(this._isAdapted){n="/adaptor/hue-gateway/gateway/http/js";}}e("invokeMethod","HUE GATEWAY URL: "+d._HUE_GATEWAY_URL+", is security required: "+String(this.securityRequired));if((this.securityRequired===true&&d._SECURITY_PORT)||d._securityRequired){o=this._updatePortForSecurity(d._HUE_GATEWAY_URL,d._SECURITY_PORT);g="https://"+o+n;}else{g="http://"+d._HUE_GATEWAY_URL+n;}g+="/"+this._serviceName+"/"+r;for(q=4;q<arguments.length;q++){if(h!==""){h+="&";}if((this._serviceName==="acquiredContentListService"&&r==="getByAccountUID"&&q===6)||(this._isAdapted&&this._serviceName==="acquiredContentListService"&&r==="getByAccountUIDAndItemType"&&q===7)||(this._serviceName==="bookmarkService"&&r==="setBookmarkForContent"&&q===7)||(this._serviceName==="bookmarkService"&&r==="getBookmarkForContent"&&q===6)){h+="locale="+encodeURIComponent(arguments[q]);}else{h+="arg"+String(q-4)+"="+encodeURIComponent(arguments[q]);}}if(d._USE_INLINE_AUTH_TOKEN){p=d._AUTH_TOKEN;}e("invokeMethod","("+this._serviceName+"."+r+") Request: "+h);e("invokeMethod","("+this._serviceName+"."+r+") URL: "+g);e("invokeMethod","("+this._serviceName+"."+r+") Token: "+p);if(d._SIGNED_ON||this._serviceName==="signonService"||this._serviceName==="provisionService"){d._outstandingRequests.push(new $N.services.sdp.RequestWorker(p,this._serviceName,r,g,l,m,k,h,false));}else{if(!d.ONLY_ALLOW_SIGNON&&!d._SIGNON_REQUEST_FAILED){d._requestsPendingSignon.push(new $N.services.sdp.RequestWorker(p,this._serviceName,r,g,l,m,k,h,false,true));}}return this;};f._updatePortForSecurity=function(h,g){var k=h;if(h.indexOf(":")!==-1){k=h.substring(0,h.indexOf(":")+1);k=k+g;e("_updatePortForSecurity","isSet: "+String(this.securityRequired));}else{k=h+":"+g;}return k;};window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.BaseService=d;window.BaseService=$N.services.sdp.BaseService;return d;});define("jsfw/apps/core/XssRequest",["jsfw/apps/core/Log"],function(Log){var log=new $N.apps.core.Log("apps.util","XssRequest"),XssTransport;function XssRequest(verb,url,successCallback,failureCallback){var xssRequest=this;this.transport=new XssTransport(verb,url,success,failure);this._failureCallback=failureCallback;function success(data){if(xssRequest._timeout){clearTimeout(xssRequest._timeout);}try{var contentType=xssRequest.transport._request.getResponseHeader?xssRequest.transport._request.getResponseHeader("Content-Type"):xssRequest.transport._request.contentType;if(contentType&&contentType.indexOf("application/json")>-1&&xssRequest.transport._request.status!==204&&xssRequest.transport._request.status!==201){data=eval("("+data+")");}}catch(e){failureCallback(new XssRequest.XssError(e.message,e,this.httpStatus,this.responseText));return;}successCallback(data);}function failure(e){if(xssRequest._timeout){clearTimeout(xssRequest._timeout);}failureCallback(e);}}XssRequest.prototype.send=function(body){body=body||null;log("send","Sending with"+(body===null?"out":"")+" a request body");this.transport.send(body);};XssRequest.prototype.setContentType=function(type){this.transport.setContentType(type);};XssRequest.prototype.setTimeout=function(timeout){var xssRequest=this;timeout=timeout||60000;this._timeout=setTimeout(function(){xssRequest.transport._hasTimedOut=true;xssRequest.transport._request.abort();xssRequest._failureCallback(new XssRequest.XssError("Timeout",null,0,xssRequest.transport._request.responseText));},timeout);};function XHRTransport(verb,url,successCallback,failureCallback){var transport=this;this._request=new XMLHttpRequest();this._request.onreadystatechange=function(){if(this.readyState===4&&!transport._hasTimedOut){if(this.readyState===4&&this.status>=200&&this.status<300){successCallback(this.responseText);}else{if(this.status===0&&this.getAllResponseHeaders()){failureCallback(new XssRequest.XssError("X-Origin error",null,0));}else{failureCallback(new XssRequest.XssError("Bad HTTP response status",null,this.status,this.responseText));}}}};this._request.open(verb,url,true);}XHRTransport.prototype.send=function(body){this._request.send(body);};XHRTransport.prototype.setContentType=function(type){this._request.setRequestHeader("Content-Type",type);};function XDomainTransport(verb,url,successCallback,failureCallback){var transport=this;this._verb=verb;this._url=url;if(verb===XssRequest.Verbs.PUT||verb===XssRequest.Verbs.DELETE){throw new Error("Invalid HTTP verb when using XDomainRequest");}this._request=new window.XDomainRequest();this._request.onload=function(){successCallback(this.responseText);};this._request.onerror=function(e){if(!transport._hasTimedOut){if(e){failureCallback(new XssRequest.XssError(e.type,e,undefined,this.responseText));}else{failureCallback(new XssRequest.XssError("Unknown HTTP error",null,undefined,this.responseText));}}};this._request.onprogress=function(){};this._request.ontimeout=function(){};}XDomainTransport.prototype.send=function(body){var transport=this;if(this._convertPostToGet){this._request.open(XssRequest.Verbs.GET,this._url+"?"+body);body=null;}else{this._request.open(this._verb,this._url);}setTimeout(function(){transport._request.send(body);},0);};XDomainTransport.prototype.setContentType=function(type){if(this._verb===XssRequest.Verbs.POST&&type.indexOf("x-www-form-urlencoded")>-1){this._convertPostToGet=true;}else{log("XDomainTransport.setContentType","Ignoring content type (unsupported)");}};if((window.XDomainRequest)&&navigator.userAgent.indexOf("MSIE 10.0")===-1){XssTransport=XDomainTransport;}else{XssTransport=XHRTransport;}XssRequest.XssError=function(message,e,code,responseText){this.message=message;this.error=e;this.httpStatus=code;this.responseText=responseText;};XssRequest.XssError.prototype=Error;XssRequest.Verbs={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD"};window.$N=window.$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.XssRequest=XssRequest;return $N.apps.core.XssRequest;});define("jsfw/services/sdp/stubs/allServices",["jsfw/services/sdp/BaseService"],function(a){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.stubs=$N.services.sdp.stubs||{};$N.services.sdp.stubs.allServices=(function(){function aO(){}aO.prototype=new a();aO.prototype.init=function(){this.securityRequired=true;this._serviceName="aLaCarteService";};aO.prototype.getAlaCarteProductList=function(b4,b8,b9,b7,b6,b5){this.invokeMethod(b4,b8,b9,"getAlaCarteProductList",b7,b6,b5);};aO.prototype.getProductListByChannel=function(b4,b9,ca,b8,b6,b7,b5){this.invokeMethod(b4,b9,ca,"getProductListByChannel",b8,b6,b7,b5);};aO.prototype.getPagedAlaCarteProductList=function(cb,b8,ca,b7,b6,b4,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedAlaCarteProductList",b7,b6,b4,b5,b9);};aO.prototype.getChannelListByProduct=function(b4,b7,b8,b9,b6,b5){this.invokeMethod(b4,b7,b8,"getChannelListByProduct",b9,b6,b5);};aO.prototype.getPagedChannelListByProduct=function(cb,b7,b9,ca,b6,b4,b5,b8){this.invokeMethod(cb,b7,b9,"getPagedChannelListByProduct",ca,b6,b4,b5,b8);};aO.prototype.subscribeToAlaCarteProduct=function(b5,ca,cb,b4,b8,b6,b7,b9){this.invokeMethod(b5,ca,cb,"subscribeToAlaCarteProduct",b4,b8,b6,b7,b9);};aO.prototype.unSubscribeAlaCarteProduct=function(b5,ca,cb,b4,b8,b6,b7,b9){this.invokeMethod(b5,ca,cb,"unSubscribeAlaCarteProduct",b4,b8,b6,b7,b9);};aO.prototype.getPagedProductListByChannel=function(b6,b8,b9,cb,b7,cc,b5,b4,ca){this.invokeMethod(b6,b8,b9,"getPagedProductListByChannel",cb,b7,cc,b5,b4,ca);};function G(){}G.prototype=new a();G.prototype.init=function(){this._serviceName="accessPointService";};G.prototype.getAllAccessPoints=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAllAccessPoints");};G.prototype.getDeviceGroups=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getDeviceGroups",b4);};G.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bl(){}bl.prototype=new a();bl.prototype.init=function(){this._serviceName="accountAggregateService";};function F(){}F.prototype=new a();F.prototype.init=function(){this._serviceName="accountService";};F.prototype.getAccByUserUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAccByUserUID",b6);};F.prototype.getByAccountNumber=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByAccountNumber",b6);};F.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};F.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function c(){}c.prototype=new a();c.prototype.init=function(){this._serviceName="acquiredContentListService";};c.prototype.getByAccountUID=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"getByAccountUID",b8,b6);};c.prototype.getByAccountUIDWithDate=function(b5,b8,b4,b7,b9,b6){this.invokeMethod(b5,b8,b4,"getByAccountUIDWithDate",b7,b9,b6);};c.prototype.getByAccountUIDWithDateAndStatus=function(b5,b8,ca,b7,b9,b6,b4){this.invokeMethod(b5,b8,ca,"getByAccountUIDWithDateAndStatus",b7,b9,b6,b4);};c.prototype.getByUserUID=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getByUserUID",b6,b7);};c.prototype.getByUserUIDWithDate=function(b5,b9,b4,b8,b6,b7){this.invokeMethod(b5,b9,b4,"getByUserUIDWithDate",b8,b6,b7);};c.prototype.getByAccountUIDAndItemType=function(b5,b8,b4,b9,b7,b6){this.invokeMethod(b5,b8,b4,"getByAccountUIDAndItemType",b9,b7,b6);};c.prototype.getByUserUIDAndItemType=function(b5,b9,b4,b6,b8,b7){this.invokeMethod(b5,b9,b4,"getByUserUIDAndItemType",b6,b8,b7);};c.prototype.getByAccountUIDAndItemTypeWithDate=function(b5,b9,b4,b8,ca,b7,b6){this.invokeMethod(b5,b9,b4,"getByAccountUIDAndItemTypeWithDate",b8,ca,b7,b6);};c.prototype.getByUserUIDAndItemTypeWithDate=function(b5,ca,b4,b9,b6,b8,b7){this.invokeMethod(b5,ca,b4,"getByUserUIDAndItemTypeWithDate",b9,b6,b8,b7);};c.prototype.getByItemAndAccountUID=function(b5,b8,ca,b9,b7,b4,b6){this.invokeMethod(b5,b8,ca,"getByItemAndAccountUID",b9,b7,b4,b6);};c.prototype.getByItemAndAccountUIDSmartCard=function(b5,b8,cb,ca,b7,b4,b6,b9){this.invokeMethod(b5,b8,cb,"getByItemAndAccountUIDSmartCard",ca,b7,b4,b6,b9);};c.prototype.getByItemAndAccountUIDWithDate=function(b5,b8,cb,ca,b7,b4,b6,b9){this.invokeMethod(b5,b8,cb,"getByItemAndAccountUIDWithDate",ca,b7,b4,b6,b9);};c.prototype.getByItemAndAccountUIDWithDateSmartCard=function(b5,b7,b8,ca,cc,b4,b9,cb,b6){this.invokeMethod(b5,b7,b8,"getByItemAndAccountUIDWithDateSmartCard",ca,cc,b4,b9,cb,b6);};c.prototype.getValidAClByItemAndAccountUID=function(b5,b8,cb,ca,b7,b4,b6,b9){this.invokeMethod(b5,b8,cb,"getValidAClByItemAndAccountUID",ca,b7,b4,b6,b9);};c.prototype.getBySmartcard=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getBySmartcard",b7,b6);};c.prototype.getByItemAndSmartcard=function(b5,ca,b4,b9,b6,b7,b8){this.invokeMethod(b5,ca,b4,"getByItemAndSmartcard",b9,b6,b7,b8);};c.prototype.getByItemAndSmartcardWithDate=function(b5,b9,cb,b7,b8,b4,b6,ca){this.invokeMethod(b5,b9,cb,"getByItemAndSmartcardWithDate",b7,b8,b4,b6,ca);};c.prototype.getByItemTypeAndSmartcardValidForDates=function(b6,b8,b9,b4,b5,b7,ca,cc,cb){this.invokeMethod(b6,b8,b9,"getByItemTypeAndSmartcardValidForDates",b4,b5,b7,ca,cc,cb);};c.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};c.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function h(){}h.prototype=new a();h.prototype.init=function(){this._serviceName="adLogService";};h.prototype.createAdAdvertLog=function(b5,ca,cb,b7,b9,b8,b4,b6){this.invokeMethod(b5,ca,cb,"createAdAdvertLog",b7,b9,b8,b4,b6);};h.prototype.createAdAssetLog=function(b9,cc,cd,b4,ce,cb,ca,b5,cf,b6,b7,b8){this.invokeMethod(b9,cc,cd,"createAdAssetLog",b4,ce,cb,ca,b5,cf,b6,b7,b8);};h.prototype.createAdPolLog=function(b8,b9,ca,b4,b7,b5,cf,ce,cc,cd,b6,cb){this.invokeMethod(b8,b9,ca,"createAdPolLog",b4,b7,b5,cf,ce,cc,cd,b6,cb);};h.prototype.getLogsByAssetType=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLogsByAssetType",b6);};h.prototype.getLogsByEntertainmentAssetUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLogsByEntertainmentAssetUID",b6);};h.prototype.getLogsByAdvertAssetUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLogsByAdvertAssetUID",b6);};h.prototype.getLogsByAccountUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLogsByAccountUID",b6);};h.prototype.getLogsByPolGrpUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getLogsByPolGrpUID",b7);};h.prototype.getLogsByAccountAndAssetUID=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLogsByAccountAndAssetUID",b6,b7);};h.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aQ(){}aQ.prototype=new a();aQ.prototype.init=function(){this._serviceName="adManagementService";};aQ.prototype.addPreAdvertisement=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"addPreAdvertisement",b6,b7);};aQ.prototype.addPostAdvertisement=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"addPostAdvertisement",b6,b7);};aQ.prototype.addPreAndPostAdvertisements=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"addPreAndPostAdvertisements",b6,b7,b8);};aQ.prototype.addAnAdvertisement=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"addAnAdvertisement",b6,b7,b8);};aQ.prototype.addBulkAdvertisements=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"addBulkAdvertisements",b7);};aQ.prototype.deletePreAdvertisement=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"deletePreAdvertisement",b6,b7);};aQ.prototype.deletePostAdvertisement=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"deletePostAdvertisement",b6,b7);};aQ.prototype.deletePreAndPostAdvertisements=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"deletePreAndPostAdvertisements",b6,b7,b8);};aQ.prototype.deleteAnAdvertisement=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"deleteAnAdvertisement",b6,b7,b8);};aQ.prototype.deleteAdvertisements=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deleteAdvertisements",b6);};aQ.prototype.deleteBulkAdvertisements=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"deleteBulkAdvertisements",b7);};aQ.prototype.getCurrentPreAdvertisement=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getCurrentPreAdvertisement",b6);};aQ.prototype.getCurrentPostAdvertisement=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getCurrentPostAdvertisement",b6);};aQ.prototype.getPreAdvertisementsByDate=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"getPreAdvertisementsByDate",b6,b7,b8);};aQ.prototype.getPostAdvertisementsByDate=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"getPostAdvertisementsByDate",b6,b7,b8);};aQ.prototype.getPreAdvertisements=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getPreAdvertisements",b6);};aQ.prototype.getPostAdvertisements=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getPostAdvertisements",b6);};function x(){}x.prototype=new a();x.prototype.init=function(){this._serviceName="adMetadataService";};x.prototype.create=function(b7,b8,b9,cb,b4,b6,b5,ca,cc){this.invokeMethod(b7,b8,b9,"create",cb,b4,b6,b5,ca,cc);};x.prototype.update=function(b7,b9,cb,b8,cd,b4,b6,b5,cc,ce,ca){this.invokeMethod(b7,b9,cb,"update",b8,cd,b4,b6,b5,cc,ce,ca);};x.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};x.prototype.getMetPlgList=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getMetPlgList",b6,b5);};x.prototype.addPolicyGroup=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"addPolicyGroup",b6,b7);};x.prototype.removePolicyGroup=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"removePolicyGroup",b6,b7);};x.prototype.getByPolicyGroupUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByPolicyGroupUID",b6,b5);};x.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function l(){}l.prototype=new a();l.prototype.init=function(){this._serviceName="advertDecisionService";};function t(){}t.prototype=new a();t.prototype.init=function(){this._serviceName="advertMaintenanceService";};t.prototype.associateAdvertToTargetArea=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"associateAdvertToTargetArea",b6,b8);};t.prototype.getAdvertsByTargetArea=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getAdvertsByTargetArea",b6,b5);};t.prototype.disassociateAdvertAndTargetArea=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"disassociateAdvertAndTargetArea",b6,b8);};function bZ(){}bZ.prototype=new a();bZ.prototype.init=function(){this.securityRequired=true;this._serviceName="alaCarteValidationService";};function bX(){}bX.prototype=new a();bX.prototype.init=function(){this._serviceName="aladdinSmsGwCasIntegrationFactoryService";};function at(){}at.prototype=new a();at.prototype.init=function(){this._serviceName="applicationServerTelemetryService";};at.prototype.getSystemList=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getSystemList");};at.prototype.getRAGStatusList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getRAGStatusList",b5);};at.prototype.getRAGStatus=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getRAGStatus",b6);};at.prototype.getTelemetry=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getTelemetry",b6);};function aa(){}aa.prototype=new a();aa.prototype.init=function(){this._serviceName="assetGroupService";};aa.prototype.create=function(cf,b5,b4,cd,b9,cb,b8,cj,cn,cs,ci,cp,ce,cr,cw,ck,ca,cq,cv,co,b6,cc,cm,cl,ch,ct,cg,cu,b7){this.invokeMethod(cf,b5,b4,"create",cd,b9,cb,b8,cj,cn,cs,ci,cp,ce,cr,cw,ck,ca,cq,cv,co,b6,cc,cm,cl,ch,ct,cg,cu,b7);};aa.prototype.update=function(cg,b6,b5,cm,ce,ca,cc,b9,cj,ci,cp,cf,cr,cv,ck,cb,cq,cu,co,b7,cd,cn,cl,b4,cs,ch,ct,b8){this.invokeMethod(cg,b6,b5,"update",cm,ce,ca,cc,b9,cj,ci,cp,cf,cr,cv,ck,cb,cq,cu,co,b7,cd,cn,cl,b4,cs,ch,ct,b8);};aa.prototype.getByOriginAnyServiceProvider=function(b4,b7,b9,b8,b6,b5){this.invokeMethod(b4,b7,b9,"getByOriginAnyServiceProvider",b8,b6,b5);};aa.prototype.getList=function(b4,b6,b9,b5,b7,b8){this.invokeMethod(b4,b6,b9,"getList",b5,b7,b8);};aa.prototype.getAvailableAssetGroupListCount=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getAvailableAssetGroupListCount",b5);};aa.prototype.getAssets=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAssets",b6);};aa.prototype.getAssetGroupsByScheduleUID=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getAssetGroupsByScheduleUID",b4,b5);};aa.prototype.getPagedList=function(b9,b6,b8,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedList",b4,b5,b7);};aa.prototype.getPagedAssets=function(b4,b7,b9,b6,b5,b8){this.invokeMethod(b4,b7,b9,"getPagedAssets",b6,b5,b8);};aa.prototype.getPagedAssetGroupsByCatalogueUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetGroupsByCatalogueUID",b6,b4,b5,b8);};aa.prototype.getPagedAssetGroupsByAssetUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetGroupsByAssetUID",b6,b4,b5,b8);};aa.prototype.getPagedAssetGroupsByScheduleUID=function(b9,b6,b8,ca,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedAssetGroupsByScheduleUID",ca,b4,b5,b7);};aa.prototype.getPagedAssetGroupsByCODCategoryUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetGroupsByCODCategoryUID",b6,b4,b5,b8);};aa.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bJ(){}bJ.prototype=new a();bJ.prototype.init=function(){this._serviceName="assetSearchService";};bJ.prototype.searchByTitle=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"searchByTitle",b6,b5);};bJ.prototype.searchCataloguedByTitle=function(b9,b7,b8,b6,b4,b5){this.invokeMethod(b9,b7,b8,"searchCataloguedByTitle",b6,b4,b5);};function bw(){}bw.prototype=new a();bw.prototype.init=function(){this._serviceName="assetService";};bw.prototype.create=function(cA,cG,cs,ci,cr,ca,cj,cc,cu,cm,cn,cg,cC,cl,cp,cE,b5,cz,cF,cd,b6,cq,cx,co,cB,ch,cH,b7,ce,cD,ck,cf,b4,ct,cv,cy,b8,cw,cb,b9){this.invokeMethod(cA,cG,cs,"create",ci,cr,ca,cj,cc,cu,cm,cn,cg,cC,cl,cp,cE,b5,cz,cF,cd,b6,cq,cx,co,cB,ch,cH,b7,ce,cD,ck,cf,b4,ct,cv,cy,b8,cw,cb,b9);};bw.prototype.update=function(cy,cE,cq,cB,ca,ch,cc,cs,ck,cl,cf,cA,cj,cn,cC,b5,cx,cD,cd,b6,co,cv,cm,cz,cg,cF,b7,ci,ce,b4,cr,ct,cw,b8,cp,cu,cb,b9){this.invokeMethod(cy,cE,cq,"update",cB,ca,ch,cc,cs,ck,cl,cf,cA,cj,cn,cC,b5,cx,cD,cd,b6,co,cv,cm,cz,cg,cF,b7,ci,ce,b4,cr,ct,cw,b8,cp,cu,cb,b9);};bw.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bw.prototype.addAudioPid=function(b5,b8,ca,b6,b4,b7,b9){this.invokeMethod(b5,b8,ca,"addAudioPid",b6,b4,b7,b9);};bw.prototype.modifyAudioPid=function(b5,b8,ca,b6,cb,b7,b4,b9){this.invokeMethod(b5,b8,ca,"modifyAudioPid",b6,cb,b7,b4,b9);};bw.prototype.removeAudioPid=function(b5,b8,b9,b6,b7,b4){this.invokeMethod(b5,b8,b9,"removeAudioPid",b6,b7,b4);};bw.prototype.getByOriginID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByOriginID",b6,b5);};bw.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};bw.prototype.getAvailableList=function(ca,b6,b9,b4,b7,b8,b5){this.invokeMethod(ca,b6,b9,"getAvailableList",b4,b7,b8,b5);};bw.prototype.getAssetsByAssetGroupUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getAssetsByAssetGroupUID",b6,b5);};bw.prototype.getAssetsByScheduleUID=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getAssetsByScheduleUID",b4,b5);};bw.prototype.getAssetAudioPids=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAssetAudioPids",b6);};bw.prototype.getPagedAssetsByOriginID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetsByOriginID",b6,b4,b5,b8);};bw.prototype.getPagedList=function(b9,b6,b8,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedList",b4,b5,b7);};bw.prototype.getAvailablePagedAssetList=function(b9,b6,b8,ca,b4,b7,b5){this.invokeMethod(b9,b6,b8,"getAvailablePagedAssetList",ca,b4,b7,b5);};bw.prototype.getAvailableAssetListCount=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getAvailableAssetListCount",b4,b5);};bw.prototype.getPagedAssetsByCatalogueUID=function(b9,b6,b8,ca,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedAssetsByCatalogueUID",ca,b4,b5,b7);};bw.prototype.getPagedAssetsByAssetGroupUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetsByAssetGroupUID",b6,b4,b5,b8);};bw.prototype.getPagedAssetsByScheduleUID=function(b9,b6,b8,ca,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedAssetsByScheduleUID",ca,b4,b5,b7);};bw.prototype.getPagedAssetsByCODCategoryUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAssetsByCODCategoryUID",b6,b4,b5,b8);};bw.prototype.getAssetListByTrailerUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getAssetListByTrailerUID",b6,b5);};bw.prototype.getTrailersForAssetUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getTrailersForAssetUID",b7);};bw.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function a6(){}a6.prototype=new a();a6.prototype.init=function(){this.securityRequired=true;this._serviceName="authnEchoService";};a6.prototype.echo=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"echo");};function be(){}be.prototype=new a();be.prototype.init=function(){this._serviceName="BTVService";};be.prototype.getChannelsByCatAndPkgUID=function(b4,b9,ca,b7,b6,b5,b8){this.invokeMethod(b4,b9,ca,"getChannelsByCatAndPkgUID",b7,b6,b5,b8);};be.prototype.getPagedChannelsByCatAndPkgUID=function(b7,b8,b9,b5,ca,b4,b6,cc,cb){this.invokeMethod(b7,b8,b9,"getPagedChannelsByCatAndPkgUID",b5,ca,b4,b6,cc,cb);};be.prototype.getDetEvtsByPkgUIDIndexedByChannel=function(cb,b8,ca,b6,b9,b4,b5,b7){this.invokeMethod(cb,b8,ca,"getDetEvtsByPkgUIDIndexedByChannel",b6,b9,b4,b5,b7);};be.prototype.getPagedDetEvtsByPkgUIDIndexedByChannel=function(b8,b9,ca,b6,b4,cb,b5,b7,cd,cc){this.invokeMethod(b8,b9,ca,"getPagedDetEvtsByPkgUIDIndexedByChannel",b6,b4,cb,b5,b7,cd,cc);};be.prototype.getDetEvtsByPkgPatternIndexedByChannel=function(cb,b8,ca,b6,b9,b4,b5,b7){this.invokeMethod(cb,b8,ca,"getDetEvtsByPkgPatternIndexedByChannel",b6,b9,b4,b5,b7);};be.prototype.getPagedDetEvtsByPkgPatternIndexedByChannel=function(b7,b8,b9,cb,b4,ca,b5,b6,cd,cc){this.invokeMethod(b7,b8,b9,"getPagedDetEvtsByPkgPatternIndexedByChannel",cb,b4,ca,b5,b6,cd,cc);};be.prototype.getDetEvtsByCatAndPkgUIDIndexedByChannel=function(b8,b9,ca,b6,cb,b4,cc,b5,b7){this.invokeMethod(b8,b9,ca,"getDetEvtsByCatAndPkgUIDIndexedByChannel",b6,cb,b4,cc,b5,b7);};be.prototype.getPagedDetEvtsByCatAndPkgUIDIndexedByChannel=function(b8,b9,ca,b6,cb,b4,cc,b5,b7,ce,cd){this.invokeMethod(b8,b9,ca,"getPagedDetEvtsByCatAndPkgUIDIndexedByChannel",b6,cb,b4,cc,b5,b7,ce,cd);};be.prototype.getDetEvtsByChannelList=function(ca,b7,b9,cb,b8,b4,b5,b6){this.invokeMethod(ca,b7,b9,"getDetEvtsByChannelList",cb,b8,b4,b5,b6);};be.prototype.getPagedDetEvtsByChannelList=function(b7,b9,ca,b8,b4,cb,b5,b6,cd,cc){this.invokeMethod(b7,b9,ca,"getPagedDetEvtsByChannelList",b8,b4,cb,b5,b6,cd,cc);};be.prototype.getChannelsByPkgPattern=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getChannelsByPkgPattern",b6,b5);};be.prototype.getPagedChannelsByPkgPattern=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedChannelsByPkgPattern",b6,b4,b5,b8);};be.prototype.getChannelsByPkgPatternAndCategory=function(b4,b7,b9,b6,b8,b5){this.invokeMethod(b4,b7,b9,"getChannelsByPkgPatternAndCategory",b6,b8,b5);};be.prototype.getPagedChannelsByPkgPatternAndCategory=function(cb,b7,ca,b6,b8,b4,b5,b9){this.invokeMethod(cb,b7,ca,"getPagedChannelsByPkgPatternAndCategory",b6,b8,b4,b5,b9);};be.prototype.getDetEventsByChannelUIDTimeAndType=function(b4,b9,cb,b6,b8,ca,b7,b5){this.invokeMethod(b4,b9,cb,"getDetEventsByChannelUIDTimeAndType",b6,b8,ca,b7,b5);};be.prototype.getSOCUEventsByIdentifierTimeAndType=function(b4,b9,cb,b6,b8,ca,b7,b5){this.invokeMethod(b4,b9,cb,"getSOCUEventsByIdentifierTimeAndType",b6,b8,ca,b7,b5);};be.prototype.getPackagesByAccountUID=function(b5,b6,b4,b8,b7){this.invokeMethod(b5,b6,b4,"getPackagesByAccountUID",b8,b7);};be.prototype.subscribeToChannel=function(b7,b9,ca,cb,cc,b5,b4,b8,b6){this.invokeMethod(b7,b9,ca,"subscribeToChannel",cb,cc,b5,b4,b8,b6);};be.prototype.unsubscribeChannel=function(b4,b7,ca,b9,b6,b8,b5){this.invokeMethod(b4,b7,ca,"unsubscribeChannel",b9,b6,b8,b5);};be.prototype.subscribeToPolicyGroup=function(b4,b8,ca,b7,b6,cb,b9,b5){this.invokeMethod(b4,b8,ca,"subscribeToPolicyGroup",b7,b6,cb,b9,b5);};be.prototype.subscribeToEvent=function(ca,cc,cd,b7,b9,b4,b5,b8,cb,b6){this.invokeMethod(ca,cc,cd,"subscribeToEvent",b7,b9,b4,b5,b8,cb,b6);};be.prototype.subscribeToPackage=function(b7,b9,ca,cb,cc,b5,b4,b8,b6){this.invokeMethod(b7,b9,ca,"subscribeToPackage",cb,cc,b5,b4,b8,b6);};be.prototype.unsubscribePackage=function(b4,b7,ca,b9,b6,b8,b5){this.invokeMethod(b4,b7,ca,"unsubscribePackage",b9,b6,b8,b5);};be.prototype.getSPChannelsByPkgUID=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getSPChannelsByPkgUID",b6,b5,b7);};be.prototype.getSPChannelsByChannelUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getSPChannelsByChannelUID",b6);};be.prototype.getSPChannelList=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getSPChannelList");};be.prototype.getSPChannelsByPkgPattern=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getSPChannelsByPkgPattern",b6,b5);};be.prototype.getPagedSPChannelsByPkgPattern=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedSPChannelsByPkgPattern",b6,b4,b5,b8);};be.prototype.getSPChannelsByPkgPatternAndCategory=function(b4,b7,b9,b6,b8,b5){this.invokeMethod(b4,b7,b9,"getSPChannelsByPkgPatternAndCategory",b6,b8,b5);};be.prototype.getPagedSPChannelsByPkgPatternAndCategory=function(cb,b7,ca,b6,b8,b4,b5,b9){this.invokeMethod(cb,b7,ca,"getPagedSPChannelsByPkgPatternAndCategory",b6,b8,b4,b5,b9);};be.prototype.getPagedDetEventsByChannelUIDTimeAndType=function(b7,b9,ca,cb,b5,b8,b6,b4,cd,cc){this.invokeMethod(b7,b9,ca,"getPagedDetEventsByChannelUIDTimeAndType",cb,b5,b8,b6,b4,cd,cc);};be.prototype.getPagedSOCUEventsByIdentifierTimeAndType=function(b8,ca,cb,b4,b6,b9,b7,b5,cd,cc){this.invokeMethod(b8,ca,cb,"getPagedSOCUEventsByIdentifierTimeAndType",b4,b6,b9,b7,b5,cd,cc);};function a7(){}a7.prototype=new a();a7.prototype.init=function(){this._serviceName="billingService";};a7.prototype.getByAccountUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByAccountUID",b7);};a7.prototype.getByAccountUIDAndUser=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"getByAccountUIDAndUser",b8,b6);};a7.prototype.getByAccountUIDAndRange=function(b4,b7,b9,b8,b5,b6){this.invokeMethod(b4,b7,b9,"getByAccountUIDAndRange",b8,b5,b6);};a7.prototype.getByAccountUIDAndStatus=function(b5,b6,b8,b7,b4){this.invokeMethod(b5,b6,b8,"getByAccountUIDAndStatus",b7,b4);};a7.prototype.getByAccountUIDStatusAndRange=function(b4,b7,b9,b8,ca,b5,b6){this.invokeMethod(b4,b7,b9,"getByAccountUIDStatusAndRange",b8,ca,b5,b6);};a7.prototype.getMoneySpentByAccountAndDateAndBillType=function(b4,b7,b9,b8,b5,b6,ca){this.invokeMethod(b4,b7,b9,"getMoneySpentByAccountAndDateAndBillType",b8,b5,b6,ca);};a7.prototype.getMoneySpentInLastNDaysByAccountAndBillType=function(b5,b6,b9,b8,b7,b4){this.invokeMethod(b5,b6,b9,"getMoneySpentInLastNDaysByAccountAndBillType",b8,b7,b4);};a7.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};a7.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function p(){}p.prototype=new a();p.prototype.init=function(){this._serviceName="blockingService";};p.prototype.create=function(b4,b7,b9,cb,cd,b5,ca,b8,ce,b6,cf,cc){this.invokeMethod(b4,b7,b9,"create",cb,cd,b5,ca,b8,ce,b6,cf,cc);};p.prototype.update=function(b4,b8,cb,b6,cd,ce,b5,cc,b9,cf,b7,ca){this.invokeMethod(b4,b8,cb,"update",b6,cd,ce,b5,cc,b9,cf,b7,ca);};p.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};p.prototype.getBlockedStatusForItem=function(b4,b8,ca,b9,b6,b5,b7){this.invokeMethod(b4,b8,ca,"getBlockedStatusForItem",b9,b6,b5,b7);};p.prototype.getByOriginUID=function(b5,b7,b4,b8,b9,b6){this.invokeMethod(b5,b7,b4,"getByOriginUID",b8,b9,b6);};p.prototype.getList=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"getList",b8,b6);};p.prototype.getBlockedItemList=function(b5,b8,b4,b9,b6,b7){this.invokeMethod(b5,b8,b4,"getBlockedItemList",b9,b6,b7);};p.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};p.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bF(){}bF.prototype=new a();bF.prototype.init=function(){this._serviceName="bocAssetService";};function aU(){}aU.prototype=new a();aU.prototype.init=function(){this._serviceName="bocContentTypeService";};aU.prototype.getByContentId=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByContentId",b6);};function bv(){}bv.prototype=new a();bv.prototype.init=function(){this._serviceName="bocLicenseCRUDService";};bv.prototype.getByUID=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getByUID",b4);};bv.prototype.getByLicenseReference=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByLicenseReference",b7);};bv.prototype.getByCasnAndContentId=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getByCasnAndContentId",b7,b6);};bv.prototype.getByCasnAndContentIdWithoutSP=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getByCasnAndContentIdWithoutSP",b7,b6);};bv.prototype.getByCasnAndStatus=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"getByCasnAndStatus",b6,b4);};bv.prototype.getByNuidAndContentId=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getByNuidAndContentId",b7,b6);};bv.prototype.getByNuidAndContentIdWithoutSP=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getByNuidAndContentIdWithoutSP",b7,b6);};bv.prototype.getByMediaPlayerIdAndContentId=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getByMediaPlayerIdAndContentId",b5,b6);};bv.prototype.getByMediaPlayerIdAndContentIdWithoutSP=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getByMediaPlayerIdAndContentIdWithoutSP",b5,b6);};bv.prototype.getByNuidAndStatus=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"getByNuidAndStatus",b6,b4);};bv.prototype.getByMediaPlayerIdAndStatus=function(b4,b6,b7,b5,b8){this.invokeMethod(b4,b6,b7,"getByMediaPlayerIdAndStatus",b5,b8);};bv.prototype.getByAccountNumberAndStatusForDates=function(b4,b8,b9,b6,ca,b5,b7){this.invokeMethod(b4,b8,b9,"getByAccountNumberAndStatusForDates",b6,ca,b5,b7);};bv.prototype.getByContentIdAndStatusForDates=function(b4,b8,b9,b6,ca,b5,b7){this.invokeMethod(b4,b8,b9,"getByContentIdAndStatusForDates",b6,ca,b5,b7);};bv.prototype.getByCasnAndStatusForDates=function(b4,b8,b9,b7,ca,b5,b6){this.invokeMethod(b4,b8,b9,"getByCasnAndStatusForDates",b7,ca,b5,b6);};bv.prototype.getByNuidAndStatusForDates=function(b4,b8,b9,b7,ca,b5,b6){this.invokeMethod(b4,b8,b9,"getByNuidAndStatusForDates",b7,ca,b5,b6);};bv.prototype.getByMediaPlayerIdAndStatusForDates=function(ca,b7,b8,b4,b9,b5,b6){this.invokeMethod(ca,b7,b8,"getByMediaPlayerIdAndStatusForDates",b4,b9,b5,b6);};function ad(){}ad.prototype=new a();ad.prototype.init=function(){this._serviceName="bocLicenseProxyService";};function X(){}X.prototype=new a();X.prototype.init=function(){this.securityRequired=true;this._serviceName="bocPurchaseService";};X.prototype.purchasePolicy=function(b5,b9,b4,b8,b7,b6){this.invokeMethod(b5,b9,b4,"purchasePolicy",b8,b7,b6);};X.prototype.purchasePolicyAndGetLicense=function(b5,ca,b4,b9,b8,b7,b6){this.invokeMethod(b5,ca,b4,"purchasePolicyAndGetLicense",b9,b8,b7,b6);};X.prototype.getPaymentOptionsForAccount=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getPaymentOptionsForAccount",b7,b6);};X.prototype.purchasePolicyAndPay=function(b5,b9,ca,b8,b4,b7,b6){this.invokeMethod(b5,b9,ca,"purchasePolicyAndPay",b8,b4,b7,b6);};X.prototype.purchasePolicyPayAndGetLicense=function(b5,b9,cb,b8,b4,b7,ca,b6){this.invokeMethod(b5,b9,cb,"purchasePolicyPayAndGetLicense",b8,b4,b7,ca,b6);};X.prototype.getExternalPaymentSignature=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getExternalPaymentSignature",b6);};X.prototype.purchasePolicyWithProofOfPayment=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"purchasePolicyWithProofOfPayment",b6);};X.prototype.acquireZeroPricedPolicy=function(b5,b8,b9,b7,b4,b6){this.invokeMethod(b5,b8,b9,"acquireZeroPricedPolicy",b7,b4,b6);};function aB(){}aB.prototype=new a();aB.prototype.init=function(){this._serviceName="bookmarkService";};aB.prototype.deleteBookmarkByUid=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deleteBookmarkByUid",b6);};aB.prototype.setBookmarkForOrigin=function(b5,ca,b6,b9,b8,b7,cb,b4){this.invokeMethod(b5,ca,b6,"setBookmarkForOrigin",b9,b8,b7,cb,b4);};aB.prototype.getBookmarkForOrigin=function(b4,b9,b5,b8,b7,b6,ca){this.invokeMethod(b4,b9,b5,"getBookmarkForOrigin",b8,b7,b6,ca);};aB.prototype.getBookmarkForContent=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getBookmarkForContent",b6,b7);};aB.prototype.setBookmarkForContent=function(b4,b8,b9,b6,b7,b5){this.invokeMethod(b4,b8,b9,"setBookmarkForContent",b6,b7,b5);};aB.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};aB.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function ak(){}ak.prototype=new a();ak.prototype.init=function(){this._serviceName="btvBrowsingService";};ak.prototype.getChannels=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getChannels",b6);};ak.prototype.getChannelsCount=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getChannelsCount",b6);};function bn(){}bn.prototype=new a();bn.prototype.init=function(){this._serviceName="btvConaxAzmiLicenseService";};function bD(){}bD.prototype=new a();bD.prototype.init=function(){this._serviceName="btvConaxOESLicenseService";};function bA(){}bA.prototype=new a();bA.prototype.init=function(){this._serviceName="btvLicenseValidityService";};function K(){}K.prototype=new a();K.prototype.init=function(){this._serviceName="btvNagraDVSLicenseService";};K.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};K.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};K.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};K.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};K.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function z(){}z.prototype=new a();z.prototype.init=function(){this._serviceName="btvViaccessLicenseService";};function y(){}y.prototype=new a();y.prototype.init=function(){this._serviceName="CDNService";};y.prototype.getCdnUrl=function(b5,b8,ca,b4,cc,b6,b7,b9,cd,cb){this.invokeMethod(b5,b8,ca,"getCdnUrl",b4,cc,b6,b7,b9,cd,cb);};y.prototype.validateToken=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"validateToken",b6);};function bg(){}bg.prototype=new a();bg.prototype.init=function(){this.securityRequired=true;this._serviceName="CODService";};bg.prototype.getCatalogueChildAssetGroupsNodes=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getCatalogueChildAssetGroupsNodes",b6,b5);};bg.prototype.getCatalogueChildCatalogueNodes=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getCatalogueChildCatalogueNodes",b6,b5);};bg.prototype.subscribeToAsset=function(b7,b9,cb,b4,b6,b5,ca,cc,b8){this.invokeMethod(b7,b9,cb,"subscribeToAsset",b4,b6,b5,ca,cc,b8);};bg.prototype.subscribeToAssetGroup=function(b6,b9,cb,b4,b5,ca,b7,cc,b8){this.invokeMethod(b6,b9,cb,"subscribeToAssetGroup",b4,b5,ca,b7,cc,b8);};bg.prototype.isSubscribed=function(b8,cb,cc,b4,b9,b6,b7,ca,b5){this.invokeMethod(b8,cb,cc,"isSubscribed",b4,b9,b6,b7,ca,b5);};bg.prototype.getSubscribedPolicyGroups=function(b5,b9,cb,b8,b4,b6,ca,b7){this.invokeMethod(b5,b9,cb,"getSubscribedPolicyGroups",b8,b4,b6,ca,b7);};bg.prototype.subscribeToPolicyGroup=function(b5,b9,cb,b4,b7,b8,b6,ca){this.invokeMethod(b5,b9,cb,"subscribeToPolicyGroup",b4,b7,b8,b6,ca);};bg.prototype.getCataloguesByAccountUID=function(b5,b6,b4,b8,b7){this.invokeMethod(b5,b6,b4,"getCataloguesByAccountUID",b8,b7);};bg.prototype.subscribeToCatalogue=function(b6,b8,ca,b4,b5,cb,b9,cc,b7){this.invokeMethod(b6,b8,ca,"subscribeToCatalogue",b4,b5,cb,b9,cc,b7);};bg.prototype.getPagedCatalogueChildAssetGroupsNodes=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedCatalogueChildAssetGroupsNodes",b6,b4,b5,b8);};bg.prototype.getPagedCatalogueChildCatalogueNodes=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedCatalogueChildCatalogueNodes",b6,b4,b5,b8);};bg.prototype.getSubscribedBaseCatalogues=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getSubscribedBaseCatalogues",b5);};bg.prototype.unsubscribePolicyGroup=function(b5,b7,b9,b4,b6,b8){this.invokeMethod(b5,b7,b9,"unsubscribePolicyGroup",b4,b6,b8);};bg.prototype.purchaseContentAndGetLicense=function(b7,b8,b9,cc,cd,b4,ca,b5,cb,b6){this.invokeMethod(b7,b8,b9,"purchaseContentAndGetLicense",cc,cd,b4,ca,b5,cb,b6);};bg.prototype.purchaseContentAndGetLicenseWithAdditionalInfo=function(b8,b9,ca,ce,cf,b4,cb,b6,cc,b7,b5,cd){this.invokeMethod(b8,b9,ca,"purchaseContentAndGetLicenseWithAdditionalInfo",ce,cf,b4,cb,b6,cc,b7,b5,cd);};bg.prototype.getPagedPolicyForCatAndAssetGroupAndAsset=function(b6,b8,b9,ca,b7,b5,cb,b4,ce,cd,cc){this.invokeMethod(b6,b8,b9,"getPagedPolicyForCatAndAssetGroupAndAsset",ca,b7,b5,cb,b4,ce,cd,cc);};bg.prototype.getAssetGroupAssetCountByCat=function(b4,b8,ca,b6,b7,b5,b9){this.invokeMethod(b4,b8,ca,"getAssetGroupAssetCountByCat",b6,b7,b5,b9);};bg.prototype.getAssetGroupCountByCatAndGenre=function(b4,b6,b9,b7,b8,ca,b5){this.invokeMethod(b4,b6,b9,"getAssetGroupCountByCatAndGenre",b7,b8,ca,b5);};bg.prototype.getPagedAssetGroupsByCatAndGenre=function(b5,b7,b8,ca,b9,b6,b4,cc,cb){this.invokeMethod(b5,b7,b8,"getPagedAssetGroupsByCatAndGenre",ca,b9,b6,b4,cc,cb);};bg.prototype.isSubscribedSpidKnown=function(b8,cc,cd,b4,b9,b6,b7,ca,b5,cb){this.invokeMethod(b8,cc,cd,"isSubscribedSpidKnown",b4,b9,b6,b7,ca,b5,cb);};function bY(){}bY.prototype=new a();bY.prototype.init=function(){this._serviceName="casConfigurationService";};function bu(){}bu.prototype=new a();bu.prototype.init=function(){this._serviceName="casInstanceService";};function s(){}s.prototype=new a();s.prototype.init=function(){this._serviceName="casIntegrationFactoryService";};function bt(){}bt.prototype=new a();bt.prototype.init=function(){this._serviceName="catalogueService";};bt.prototype.getCatalogueTree=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"getCatalogueTree",b6,b4);};bt.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};bt.prototype.getAllCatalogues=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAllCatalogues");};bt.prototype.getByName=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByName",b7,b5);};bt.prototype.getBaseCataloguesByAccptUid=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getBaseCataloguesByAccptUid",b7,b5);};bt.prototype.getCataloguesByCatUidAndByAccptUid=function(b9,b6,b8,b4,b7,b5){this.invokeMethod(b9,b6,b8,"getCataloguesByCatUidAndByAccptUid",b4,b7,b5);};bt.prototype.getCataloguesByScheduleUID=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getCataloguesByScheduleUID",b4,b5);};bt.prototype.getPagedCatalogueTree=function(b4,b7,b9,b6,ca,b5,b8){this.invokeMethod(b4,b7,b9,"getPagedCatalogueTree",b6,ca,b5,b8);};bt.prototype.getPagedList=function(b9,b6,b8,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedList",b4,b5,b7);};bt.prototype.getPagedCatalogues=function(b4,b6,b8,b5,b7){this.invokeMethod(b4,b6,b8,"getPagedCatalogues",b5,b7);};bt.prototype.getPagedCatsBySbscrProfUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedCatsBySbscrProfUID",b6,b4,b5,b8);};bt.prototype.getPagedCataloguesByCatalogueUid=function(b9,b6,b8,ca,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedCataloguesByCatalogueUid",ca,b4,b5,b7);};bt.prototype.getPagedCataloguesByNodeUidAndType=function(cb,b7,b9,b6,ca,b4,b5,b8){this.invokeMethod(cb,b7,b9,"getPagedCataloguesByNodeUidAndType",b6,ca,b4,b5,b8);};bt.prototype.getPagedCataloguesByScheduleUID=function(b9,b6,b8,ca,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedCataloguesByScheduleUID",ca,b4,b5,b7);};bt.prototype.getRootCatalogue=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getRootCatalogue");};bt.prototype.getCataloguesByAccpt=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getCataloguesByAccpt",b7);};bt.prototype.getParentCatalogue=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getParentCatalogue",b6,b8);};bt.prototype.getPossibleChildrenCatalogueList=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPossibleChildrenCatalogueList",b6,b5);};bt.prototype.getSubscribedBaseCatalogues=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getSubscribedBaseCatalogues",b7);};bt.prototype.getPagedSubscribedBaseCatalogues=function(b5,b6,b4,b7,b8,b9){this.invokeMethod(b5,b6,b4,"getPagedSubscribedBaseCatalogues",b7,b8,b9);};bt.prototype.getProfIdForCatalogue=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getProfIdForCatalogue",b6);};bt.prototype.getAssetCountByCatalogueUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getAssetCountByCatalogueUID",b6,b5);};bt.prototype.getBaseChildCataloguesByAccptUidAndName=function(b4,b9,cb,ca,b6,b5,b8,b7){this.invokeMethod(b4,b9,cb,"getBaseChildCataloguesByAccptUidAndName",ca,b6,b5,b8,b7);};bt.prototype.getBaseChildCataloguesByAccptUidAndNameCount=function(b4,b7,b9,b8,b6,b5){this.invokeMethod(b4,b7,b9,"getBaseChildCataloguesByAccptUidAndNameCount",b8,b6,b5);};bt.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function b2(){}b2.prototype=new a();b2.prototype.init=function(){this._serviceName="categoryService";};b2.prototype.create=function(b7,b8,b9,cc,b4,b6,ca,cb,b5){this.invokeMethod(b7,b8,b9,"create",cc,b4,b6,ca,cb,b5);};b2.prototype.update=function(b5,b9,b4,b8,b6,b7){this.invokeMethod(b5,b9,b4,"update",b8,b6,b7);};b2.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};b2.prototype.addChannel=function(b5,b7,b8,b4,b6){this.invokeMethod(b5,b7,b8,"addChannel",b4,b6);};b2.prototype.removeChannel=function(b5,b7,b8,b4,b6){this.invokeMethod(b5,b7,b8,"removeChannel",b4,b6);};b2.prototype.addMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b9,b6,b5);};b2.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b9,b6,b5,cb);};b2.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};b2.prototype.getAllCategories=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getAllCategories",b5);};b2.prototype.getByOriginUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByOriginUID",b6,b5);};b2.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function M(){}M.prototype=new a();M.prototype.init=function(){this._serviceName="ccaCcomService";};function ay(){}ay.prototype=new a();ay.prototype.init=function(){this._serviceName="cdnTokenService";};ay.prototype.create=function(b5,b8,b9,cd,cb,b6,b7,b4,ca,cc,ce){this.invokeMethod(b5,b8,b9,"create",cd,cb,b6,b7,b4,ca,cc,ce);};ay.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};ay.prototype.update=function(b5,b8,b9,ca,cc,cb,b6,b7,b4){this.invokeMethod(b5,b8,b9,"update",ca,cc,cb,b6,b7,b4);};ay.prototype.getAccountUIDByGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAccountUIDByGeneratedURL",b6);};ay.prototype.getDeviceUIDByGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDeviceUIDByGeneratedURL",b6);};ay.prototype.getSpidByGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getSpidByGeneratedURL",b6);};ay.prototype.getOriginalURLByGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getOriginalURLByGeneratedURL",b6);};ay.prototype.incrementSuccessCountOnGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"incrementSuccessCountOnGeneratedURL",b6);};ay.prototype.incrementFailureCountOnGeneratedURL=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"incrementFailureCountOnGeneratedURL",b6);};ay.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bR(){}bR.prototype=new a();bR.prototype.init=function(){this._serviceName="challengeAggregateService";};bR.prototype.acquireSecureChallenge=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"acquireSecureChallenge");};bR.prototype.acquireSecureChallengeWithAdditionalInfo=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"acquireSecureChallengeWithAdditionalInfo",b7,b6);};bR.prototype.verifySecureChallengeWithContext=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"verifySecureChallengeWithContext",b6);};function a3(){}a3.prototype=new a();a3.prototype.init=function(){this._serviceName="challengeService";};a3.prototype.del=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"delete",b7);};a3.prototype.getByChallengeID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByChallengeID",b6);};a3.prototype.getByDeviceUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByDeviceUID",b6);};a3.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function a1(){}a1.prototype=new a();a1.prototype.init=function(){this._serviceName="channelService";};a1.prototype.getAllChannelsByLocale=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getAllChannelsByLocale",b5);};a1.prototype.getAllChannels=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getAllChannels",b5,b6);};a1.prototype.getAllChannelsAllLocales=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAllChannelsAllLocales");};a1.prototype.getByCatUID=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getByCatUID",b6,b5,b7);};a1.prototype.getByPkgUID=function(b4,b8,b9,b7,b5,b6){this.invokeMethod(b4,b8,b9,"getByPkgUID",b7,b5,b6);};a1.prototype.getByOriginUID=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getByOriginUID",b6,b5,b7);};a1.prototype.getChannelType=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getChannelType",b6);};a1.prototype.getByPkgPattern=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByPkgPattern",b6,b5);};a1.prototype.getPagedChannels=function(ca,b7,b9,b4,b6,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedChannels",b4,b6,b5,b8);};a1.prototype.getPagedChannelsByCatUID=function(cb,b8,ca,b6,b4,b7,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedChannelsByCatUID",b6,b4,b7,b5,b9);};a1.prototype.getPagedChannelsByPkgUID=function(cb,b8,ca,b6,b4,b7,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedChannelsByPkgUID",b6,b4,b7,b5,b9);};a1.prototype.getPagedChannelsByOriginUID=function(cb,b8,ca,b6,b4,b7,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedChannelsByOriginUID",b6,b4,b7,b5,b9);};a1.prototype.getPagedChannelsByPkgPattern=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedChannelsByPkgPattern",b6,b4,b5,b8);};a1.prototype.getByNumber=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByNumber",b6,b5);};a1.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bW(){}bW.prototype=new a();bW.prototype.init=function(){this._serviceName="codAclFinderService";};function az(){}az.prototype=new a();az.prototype.init=function(){this._serviceName="codBrowsingService";};az.prototype.getScheduledItemsForCurrentContext=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledItemsForCurrentContext",b4);};az.prototype.getScheduledItemsForCurrentContextCount=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledItemsForCurrentContextCount",b4);};az.prototype.getScheduledItems=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledItems",b4);};az.prototype.getScheduledItemsCount=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledItemsCount",b4);};az.prototype.getScheduledAssetGroupsForCurrentContext=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledAssetGroupsForCurrentContext",b4);};az.prototype.getScheduledAssetGroupsForCurrentContextCount=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledAssetGroupsForCurrentContextCount",b4);};az.prototype.getScheduledAssetGroups=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledAssetGroups",b4);};az.prototype.getScheduledAssetGroupsCount=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getScheduledAssetGroupsCount",b4);};az.prototype.getTrailerItems=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getTrailerItems",b4);};az.prototype.getTrailerItemsForCurrentContext=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getTrailerItemsForCurrentContext",b4);};az.prototype.getCurrentContext=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getCurrentContext");};function o(){}o.prototype=new a();o.prototype.init=function(){this._serviceName="codBuyService";};function I(){}I.prototype=new a();I.prototype.init=function(){this._serviceName="codCategoryService";};I.prototype.create=function(b7,b8,ca,b5,b9,cc,b4,b6,cd,cb){this.invokeMethod(b7,b8,ca,"create",b5,b9,cc,b4,b6,cd,cb);};I.prototype.update=function(b5,b8,ca,b7,b4,b6,b9){this.invokeMethod(b5,b8,ca,"update",b7,b4,b6,b9);};I.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};I.prototype.addMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b5,b9,b6);};I.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b5,b9,b6,cb);};I.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};I.prototype.addAssetGroup=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"addAssetGroup",b8,b6);};I.prototype.removeAsset=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"removeAsset",b8,b6);};I.prototype.removeAssetGroup=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"removeAssetGroup",b8,b6);};I.prototype.getAssetUIDList=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAssetUIDList",b7);};I.prototype.getAssetGroupUIDList=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAssetGroupUIDList",b7);};I.prototype.getCategoryList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getCategoryList",b5);};I.prototype.getCategoryListByItemUidAndType=function(b4,b8,b9,b7,b6,b5){this.invokeMethod(b4,b8,b9,"getCategoryListByItemUidAndType",b7,b6,b5);};I.prototype.getByName=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByName",b7,b5);};I.prototype.getPagedCategoryList=function(b9,b6,b8,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedCategoryList",b4,b5,b7);};I.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bq(){}bq.prototype=new a();bq.prototype.init=function(){this._serviceName="codConaxAzmiLicenseService";};bq.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};bq.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};bq.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};bq.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};bq.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function bp(){}bp.prototype=new a();bp.prototype.init=function(){this._serviceName="codConaxOESLicenseService";};bp.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};bp.prototype.getLicenseWithChipsetInfo=function(b5,b9,b4,b6,b7,b8){this.invokeMethod(b5,b9,b4,"getLicenseWithChipsetInfo",b6,b7,b8);};bp.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};bp.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};function aY(){}aY.prototype=new a();aY.prototype.init=function(){this._serviceName="codFilterScheduleService";};aY.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bO(){}bO.prototype=new a();bO.prototype.init=function(){this._serviceName="codFilterService";};function aK(){}aK.prototype=new a();aK.prototype.init=function(){this._serviceName="codHelperService";};aK.prototype.hasPurchaseAllAvailableForCatAndTvodAssetGroup=function(b4,b7,b9,b8,b6,b5){this.invokeMethod(b4,b7,b9,"hasPurchaseAllAvailableForCatAndTvodAssetGroup",b8,b6,b5);};function b0(){}b0.prototype=new a();b0.prototype.init=function(){this._serviceName="codLicenseService";};b0.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};b0.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};b0.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};b0.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};function bo(){}bo.prototype=new a();bo.prototype.init=function(){this._serviceName="codLicenseValidityService";};function d(){}d.prototype=new a();d.prototype.init=function(){this._serviceName="codNagraDVSLicenseService";};d.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};d.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};d.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};d.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};d.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function ah(){}ah.prototype=new a();ah.prototype.init=function(){this._serviceName="codNoopLicenseService";};ah.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};ah.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};ah.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};function J(){}J.prototype=new a();J.prototype.init=function(){this._serviceName="codScheduleService";};J.prototype.create=function(b5,b8,b9,b7,b6,b4){this.invokeMethod(b5,b8,b9,"create",b7,b6,b4);};J.prototype.update=function(b5,b9,ca,b8,b7,b6,b4){this.invokeMethod(b5,b9,ca,"update",b8,b7,b6,b4);};J.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};J.prototype.getValidPagedList=function(b4,b6,b9,b7,b5,b8){this.invokeMethod(b4,b6,b9,"getValidPagedList",b7,b5,b8);};J.prototype.getPagedList=function(b4,b6,b8,b5,b7){this.invokeMethod(b4,b6,b8,"getPagedList",b5,b7);};J.prototype.getPagedAvailableScheduleList=function(b4,b6,b8,b5,b7){this.invokeMethod(b4,b6,b8,"getPagedAvailableScheduleList",b5,b7);};J.prototype.addPolicyGroup=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"addPolicyGroup",b6,b7);};J.prototype.removePolicyGroup=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"removePolicyGroup",b6,b7);};J.prototype.getSchedulesByPolicyGroupUid=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getSchedulesByPolicyGroupUid",b6);};J.prototype.getSchedulesByPolicyGroupUidSpidKnown=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getSchedulesByPolicyGroupUidSpidKnown",b7,b6);};J.prototype.getAssetValidInterval=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAssetValidInterval",b6);};J.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function a5(){}a5.prototype=new a();a5.prototype.init=function(){this._serviceName="codSubscriptionBuyService";};function bb(){}bb.prototype=new a();bb.prototype.init=function(){this._serviceName="codSubscriptionConsumService";};function bU(){}bU.prototype=new a();bU.prototype.init=function(){this._serviceName="codViaccessLicenseService";};bU.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};bU.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};bU.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};function bs(){}bs.prototype=new a();bs.prototype.init=function(){this._serviceName="companionMessageService";};bs.prototype.getMessage=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getMessage");};bs.prototype.getAccountDevices=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAccountDevices");};bs.prototype.postMessage=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"postMessage",b6,b7);};function b3(){}b3.prototype=new a();b3.prototype.init=function(){this._serviceName="conax";};function U(){}U.prototype=new a();U.prototype.init=function(){this._serviceName="conaxAzmiGatewayService";};function q(){}q.prototype=new a();q.prototype.init=function(){this._serviceName="conaxAzmiLicenseService";};q.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};q.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};q.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};q.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};q.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};function ax(){}ax.prototype=new a();ax.prototype.init=function(){this._serviceName="conaxCasIntegrationFactoryService";};function r(){}r.prototype=new a();r.prototype.init=function(){this._serviceName="conaxOESLicenseService";};r.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};r.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};r.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};r.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};r.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function au(){}au.prototype=new a();au.prototype.init=function(){this._serviceName="conaxOESgwService";};function aE(){}aE.prototype=new a();aE.prototype.init=function(){this._serviceName="configurationService";};function bf(){}bf.prototype=new a();bf.prototype.init=function(){this._serviceName="contentConsumptionService";};bf.prototype.create=function(ca,ce,cf,b6,b7,cd,ch,ci,b4,b8,cb,b5,cj,cc,b9,cg){this.invokeMethod(ca,ce,cf,"create",b6,b7,cd,ch,ci,b4,b8,cb,b5,cj,cc,b9,cg);};bf.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bI(){}bI.prototype=new a();bI.prototype.init=function(){this._serviceName="contentUsageService";};function m(){}m.prototype=new a();m.prototype.init=function(){this._serviceName="contextService";};m.prototype.getCurrentContext=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getCurrentContext");};function bT(){}bT.prototype=new a();bT.prototype.init=function(){this._serviceName="cpvrOperationService";};bT.prototype.create=function(cb,b5,b4,cf,ch,b8,cd,b7,b9,cj,cc,cg,ce,cl,ca,b6,ck,ci){this.invokeMethod(cb,b5,b4,"create",cf,ch,b8,cd,b7,b9,cj,cc,cg,ce,cl,ca,b6,ck,ci);};bT.prototype.update=function(b6,b9,cb,b8,ce,cg,cf,b4,cj,cc,b5,ck,b7,ci,ch,cd,ca){this.invokeMethod(b6,b9,cb,"update",b8,ce,cg,cf,b4,cj,cc,b5,ck,b7,ci,ch,cd,ca);};bT.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bT.prototype.getByAccount=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByAccount",b7);};bT.prototype.getByAccountVerbose=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByAccountVerbose",b7);};bT.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bN(){}bN.prototype=new a();bN.prototype.init=function(){this._serviceName="cpvrService";};bN.prototype.create=function(b7,b9,cb,cf,ce,b4,cj,ca,b6,ck,cg,cc,b8,ch,b5,ci,cd){this.invokeMethod(b7,b9,cb,"create",cf,ce,b4,cj,ca,b6,ck,cg,cc,b8,ch,b5,ci,cd);};bN.prototype.update=function(b6,b9,cb,b8,cf,ce,b4,ci,cc,b5,cj,b7,ch,cg,cd,ca){this.invokeMethod(b6,b9,cb,"update",b8,cf,ce,b4,ci,cc,b5,cj,b7,ch,cg,cd,ca);};bN.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bN.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};bN.prototype.getByAccount=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getByAccount");};bN.prototype.getByAccountVerbose=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getByAccountVerbose");};function aP(){}aP.prototype=new a();aP.prototype.init=function(){this._serviceName="dataextractService";};aP.prototype.getPublicKeyList=function(b5,b7,b9,b6,b8,b4){this.invokeMethod(b5,b7,b9,"getPublicKeyList",b6,b8,b4);};function al(){}al.prototype=new a();al.prototype.init=function(){this._serviceName="deviceAggregateService";};al.prototype.updateDeviceWithNewAccount=function(b5,b9,cb,ca,b8,b7,b6,b4){this.invokeMethod(b5,b9,cb,"updateDeviceWithNewAccount",ca,b8,b7,b6,b4);};al.prototype.deleteSTB=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"deleteSTB",b6,b7);};al.prototype.rebootSTB=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"rebootSTB",b7,b6);};al.prototype.deleteMp=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deleteMp",b6);};function B(){}B.prototype=new a();B.prototype.init=function(){this._serviceName="deviceClassifierService";};B.prototype.create=function(b6,b8,ca,ce,b9,b5,b7,cb,cd,cf,b4,cg,cc){this.invokeMethod(b6,b8,ca,"create",ce,b9,b5,b7,cb,cd,cf,b4,cg,cc);};B.prototype.update=function(b6,b9,cc,b7,cf,ca,b5,b8,cd,ce,cg,b4,cb){this.invokeMethod(b6,b9,cc,"update",b7,cf,ca,b5,b8,cd,ce,cg,b4,cb);};B.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};B.prototype.getList=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getList");};B.prototype.getListOrderedByMatchingOrderAnyServiceProvider=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getListOrderedByMatchingOrderAnyServiceProvider");};B.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bC(){}bC.prototype=new a();bC.prototype.init=function(){this._serviceName="deviceService";};bC.prototype.getDeviceByCASN=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDeviceByCASN",b6);};bC.prototype.getDeviceByNUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getDeviceByNUID",b7);};bC.prototype.getDeviceByMACAddress=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDeviceByMACAddress",b6);};bC.prototype.getDeviceBySmartcardID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getDeviceBySmartcardID",b7);};bC.prototype.updateMpName=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"updateMpName",b6,b8);};bC.prototype.updateMpState=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"updateMpState",b7,b6);};bC.prototype.getMpById=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getMpById",b6);};function aw(){}aw.prototype=new a();aw.prototype.init=function(){this._serviceName="devicegroupService";};aw.prototype.create=function(b7,b8,b9,cb,b4,b5,ca,b6,cc){this.invokeMethod(b7,b8,b9,"create",cb,b4,b5,ca,b6,cc);};aw.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};aw.prototype.update=function(b5,cb,b4,b6,ca,b7,b9,b8){this.invokeMethod(b5,cb,b4,"update",b6,ca,b7,b9,b8);};aw.prototype.addDevice=function(b5,b8,b4,b9,b7,b6){this.invokeMethod(b5,b8,b4,"addDevice",b9,b7,b6);};aw.prototype.removeDevice=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"removeDevice",b6,b4);};aw.prototype.getAllDeviceGroups=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAllDeviceGroups");};aw.prototype.getDevices=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getDevices",b4);};aw.prototype.getDevicesByDeviceUID=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getDevicesByDeviceUID",b6,b8);};aw.prototype.getByAccessPointUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByAccessPointUID",b6);};aw.prototype.getDeviceGroupByDeviceUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDeviceGroupByDeviceUID",b6);};aw.prototype.getStreamingServerDeviceGroups=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getStreamingServerDeviceGroups");};aw.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aV(){}aV.prototype=new a();aV.prototype.init=function(){this._serviceName="drmService";};aV.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function a2(){}a2.prototype=new a();a2.prototype.init=function(){this.securityRequired=true;this._serviceName="drmworkflowservice";};a2.prototype.getMarlinMs3Token=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getMarlinMs3Token",b5,b6);};function ac(){}ac.prototype=new a();ac.prototype.init=function(){this._serviceName="dynamicAdvertsService";};ac.prototype.getAdverts=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getAdverts",b6,b8);};function v(){}v.prototype=new a();v.prototype.init=function(){this._serviceName="eventService";};v.prototype.create=function(b7,ca,cd,cc,b9,b5,b4,cb,ce,b8,cf,b6){this.invokeMethod(b7,ca,cd,"create",cc,b9,b5,b4,cb,ce,b8,cf,b6);};v.prototype.update=function(b7,ca,cd,b6,cc,b9,b5,b4,cb,ce,b8,cf){this.invokeMethod(b7,ca,cd,"update",b6,cc,b9,b5,b4,cb,ce,b8,cf);};v.prototype.getEvtsByPkgUID=function(b5,b8,b4,b7,b6,b9){this.invokeMethod(b5,b8,b4,"getEvtsByPkgUID",b7,b6,b9);};v.prototype.getEvtsByChnUID=function(b4,b7,b9,b5,b6,b8){this.invokeMethod(b4,b7,b9,"getEvtsByChnUID",b5,b6,b8);};v.prototype.getEvtsByAllChnls=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getEvtsByAllChnls",b6,b8);};v.prototype.getEvtsByCatUID=function(b5,b8,b4,b6,b7,b9){this.invokeMethod(b5,b8,b4,"getEvtsByCatUID",b6,b7,b9);};v.prototype.getEvtsByPgmUID=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getEvtsByPgmUID",b6,b5,b7);};v.prototype.getEvtsByChnlAcct=function(b4,b7,b9,b5,b6,b8){this.invokeMethod(b4,b7,b9,"getEvtsByChnlAcct",b5,b6,b8);};v.prototype.getEvtsByPkgAcct=function(b4,b7,b9,b5,b6,b8){this.invokeMethod(b4,b7,b9,"getEvtsByPkgAcct",b5,b6,b8);};v.prototype.getEvtsByOriginUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getEvtsByOriginUID",b6);};v.prototype.getDetEvtByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getDetEvtByUID",b6,b5);};v.prototype.getDetEvtsByPkgUID=function(b4,b9,cb,b8,b6,ca,b5,b7){this.invokeMethod(b4,b9,cb,"getDetEvtsByPkgUID",b8,b6,ca,b5,b7);};v.prototype.getDetEvtsByPkgPattern=function(b4,b9,cb,b8,b6,ca,b5,b7){this.invokeMethod(b4,b9,cb,"getDetEvtsByPkgPattern",b8,b6,ca,b5,b7);};v.prototype.getDetEvtsByChnUID=function(cb,b8,ca,b4,b6,b9,b5,b7){this.invokeMethod(cb,b8,ca,"getDetEvtsByChnUID",b4,b6,b9,b5,b7);};v.prototype.getDetEvtsByAllChnls=function(b4,b8,ca,b6,b9,b5,b7){this.invokeMethod(b4,b8,ca,"getDetEvtsByAllChnls",b6,b9,b5,b7);};v.prototype.getDetEvtsByCatUID=function(b4,b9,cb,b6,b7,ca,b5,b8){this.invokeMethod(b4,b9,cb,"getDetEvtsByCatUID",b6,b7,ca,b5,b8);};v.prototype.getDetEvtsByChnlAcct=function(cb,b8,ca,b4,b6,b9,b5,b7){this.invokeMethod(cb,b8,ca,"getDetEvtsByChnlAcct",b4,b6,b9,b5,b7);};v.prototype.getDetEvtsByPkgAcct=function(cb,b8,ca,b4,b6,b9,b5,b7){this.invokeMethod(cb,b8,ca,"getDetEvtsByPkgAcct",b4,b6,b9,b5,b7);};v.prototype.getDetEvtsMultiLanguageList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDetEvtsMultiLanguageList",b6);};v.prototype.search=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"search",b6);};v.prototype.addPolicyGroup=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"addPolicyGroup",b8,b6);};v.prototype.removePolicyGroup=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"removePolicyGroup",b8,b6);};v.prototype.getPagedEventsByPkgUID=function(b4,b8,cb,b7,b6,ca,b5,b9){this.invokeMethod(b4,b8,cb,"getPagedEventsByPkgUID",b7,b6,ca,b5,b9);};v.prototype.getPagedEventsByChnUID=function(cb,b7,ca,b4,b6,b9,b5,b8){this.invokeMethod(cb,b7,ca,"getPagedEventsByChnUID",b4,b6,b9,b5,b8);};v.prototype.getPagedEventsByAllChnls=function(b4,b7,ca,b6,b9,b5,b8){this.invokeMethod(b4,b7,ca,"getPagedEventsByAllChnls",b6,b9,b5,b8);};v.prototype.getPagedEventsByCatUID=function(b4,b8,cb,b6,b7,ca,b5,b9){this.invokeMethod(b4,b8,cb,"getPagedEventsByCatUID",b6,b7,ca,b5,b9);};v.prototype.getPagedEventsByPgmUID=function(cb,b8,ca,b6,b4,b7,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedEventsByPgmUID",b6,b4,b7,b5,b9);};v.prototype.getPagedEventsByChnlAcct=function(cb,b7,ca,b4,b6,b9,b5,b8){this.invokeMethod(cb,b7,ca,"getPagedEventsByChnlAcct",b4,b6,b9,b5,b8);};v.prototype.getPagedEventsByPkgAcct=function(cb,b7,ca,b4,b6,b9,b5,b8){this.invokeMethod(cb,b7,ca,"getPagedEventsByPkgAcct",b4,b6,b9,b5,b8);};v.prototype.getPagedDetailEventsByPkgUID=function(b6,b8,ca,b9,b7,cb,b4,b5,cd,cc){this.invokeMethod(b6,b8,ca,"getPagedDetailEventsByPkgUID",b9,b7,cb,b4,b5,cd,cc);};v.prototype.getPagedDetailEventsByPkgPattern=function(b7,b9,ca,b5,b8,cb,b4,b6,cd,cc){this.invokeMethod(b7,b9,ca,"getPagedDetailEventsByPkgPattern",b5,b8,cb,b4,b6,cd,cc);};v.prototype.getPagedDetailEventsByChnUID=function(b7,b9,ca,b4,b8,cb,b5,b6,cd,cc){this.invokeMethod(b7,b9,ca,"getPagedDetailEventsByChnUID",b4,b8,cb,b5,b6,cd,cc);};v.prototype.getPagedSOCUEventsByChnIdentifier=function(b6,b8,b9,ca,b7,cb,b4,b5,cd,cc){this.invokeMethod(b6,b8,b9,"getPagedSOCUEventsByChnIdentifier",ca,b7,cb,b4,b5,cd,cc);};v.prototype.getPagedDetailEventsByAllChnls=function(b6,b8,b9,b7,ca,b4,b5,cc,cb){this.invokeMethod(b6,b8,b9,"getPagedDetailEventsByAllChnls",b7,ca,b4,b5,cc,cb);};v.prototype.getPagedDetailEventsByCatUID=function(b6,b8,b9,ca,b7,cb,b4,b5,cd,cc){this.invokeMethod(b6,b8,b9,"getPagedDetailEventsByCatUID",ca,b7,cb,b4,b5,cd,cc);};v.prototype.getPagedDetailEventsByChnlAcct=function(b6,b9,ca,b8,b7,cb,b4,b5,cd,cc){this.invokeMethod(b6,b9,ca,"getPagedDetailEventsByChnlAcct",b8,b7,cb,b4,b5,cd,cc);};v.prototype.getPagedDetailEventsByPkgAcct=function(b6,b9,ca,b8,b7,cb,b4,b5,cd,cc){this.invokeMethod(b6,b9,ca,"getPagedDetailEventsByPkgAcct",b8,b7,cb,b4,b5,cd,cc);};v.prototype.getPagedDetailEventsMultiLanguageList=function(b4,b7,b9,b6,b5,b8){this.invokeMethod(b4,b7,b9,"getPagedDetailEventsMultiLanguageList",b6,b5,b8);};v.prototype.getByPolicyGroupUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByPolicyGroupUID",b6);};v.prototype.getByMediaFileName=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByMediaFileName",b6);};v.prototype.getPpvEventPolicyGroupByEvent=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getPpvEventPolicyGroupByEvent",b6);};v.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aR(){}aR.prototype=new a();aR.prototype.init=function(){this._serviceName="externalGroupService";};aR.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bS(){}bS.prototype=new a();bS.prototype.init=function(){this._serviceName="externalSystemStatusService";};bS.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function by(){}by.prototype=new a();by.prototype.init=function(){this._serviceName="favouriteService";};by.prototype.create=function(b4,b6,b7,ca,b5,b8,cb,cc,b9){this.invokeMethod(b4,b6,b7,"create",ca,b5,b8,cb,cc,b9);};by.prototype.update=function(b4,b7,b9,b6,cb,b5,ca,cc,b8){this.invokeMethod(b4,b7,b9,"update",b6,cb,b5,ca,cc,b8);};by.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};by.prototype.getFavouriteStatusForItem=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getFavouriteStatusForItem",b6,b5,b7);};by.prototype.getByOriginUID=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"getByOriginUID",b8,b6);};by.prototype.getList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getList",b6);};by.prototype.getFavouriteItemList=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getFavouriteItemList",b6,b7);};by.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};by.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function Y(){}Y.prototype=new a();Y.prototype.init=function(){this._serviceName="featureService";};Y.prototype.create=function(b7,ca,cb,cd,b5,b9,b8,b6,b4,cc,ce){this.invokeMethod(b7,ca,cb,"create",cd,b5,b9,b8,b6,b4,cc,ce);};Y.prototype.update=function(b7,cb,cd,b9,ce,b5,ca,b8,b6,b4,cc){this.invokeMethod(b7,cb,cd,"update",b9,ce,b5,ca,b8,b6,b4,cc);};Y.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};Y.prototype.getByName=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByName",b7);};Y.prototype.getByType=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByType",b6);};Y.prototype.getFeaturesByProfUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getFeaturesByProfUID",b6);};Y.prototype.getByUids=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUids",b6);};Y.prototype.getByTypeAndNames=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getByTypeAndNames",b6,b7);};Y.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bh(){}bh.prototype=new a();bh.prototype.init=function(){this._serviceName="firmwareRegistrationService";};function Z(){}Z.prototype=new a();Z.prototype.init=function(){this._serviceName="firmwareUpgradeService";};function b1(){}b1.prototype=new a();b1.prototype.init=function(){this._serviceName="initialisationService";};b1.prototype.getInitDataBySmartCardId=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getInitDataBySmartCardId",b7);};b1.prototype.getInitDataByCASN=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getInitDataByCASN",b6);};b1.prototype.getInitDataByMacAddress=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getInitDataByMacAddress",b6);};b1.prototype.getAccountPreferences=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAccountPreferences",b7);};b1.prototype.getAccountCatalogues=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAccountCatalogues",b7);};b1.prototype.getAccountPackages=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAccountPackages",b7);};b1.prototype.getAccountBlockings=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getAccountBlockings",b7);};b1.prototype.getUsers=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getUsers",b7);};b1.prototype.getUserFavourites=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getUserFavourites",b7);};b1.prototype.getActivePurchases=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getActivePurchases",b7);};function bj(){}bj.prototype=new a();bj.prototype.init=function(){this._serviceName="intervalService";};bj.prototype.create=function(b9,ca,cb,ce,b4,b7,cc,b5,b8,cf,cd,b6){this.invokeMethod(b9,ca,cb,"create",ce,b4,b7,cc,b5,b8,cf,cd,b6);};bj.prototype.update=function(b7,b8,cb,b9,b5,cc,b4,b6,ca){this.invokeMethod(b7,b8,cb,"update",b9,b5,cc,b4,b6,ca);};bj.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bj.prototype.addMultiLanguage=function(b4,b8,ca,b6,b9,b7,b5){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b6,b9,b7,b5);};bj.prototype.modifyMultiLanguage=function(b4,b8,ca,b6,b9,b7,b5,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b6,b9,b7,b5,cb);};bj.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};bj.prototype.getByName=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByName",b7,b5);};bj.prototype.getByType=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByType",b6,b5);};bj.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};bj.prototype.getListByTypeValueFrequency=function(b4,ca,cb,b9,b6,b8,b7,b5){this.invokeMethod(b4,ca,cb,"getListByTypeValueFrequency",b9,b6,b8,b7,b5);};bj.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bQ(){}bQ.prototype=new a();bQ.prototype.init=function(){this._serviceName="licenseCRUDService";};bQ.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};bQ.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function ae(){}ae.prototype=new a();ae.prototype.init=function(){this._serviceName="licenseService";};ae.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};ae.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};ae.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};ae.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};ae.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function n(){}n.prototype=new a();n.prototype.init=function(){this._serviceName="licenseValidityService";};n.prototype.calculateNagraDvsLicenseValidityInformation=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"calculateNagraDvsLicenseValidityInformation",b7,b6);};function bL(){}bL.prototype=new a();bL.prototype.init=function(){this._serviceName="linkedStbService";};bL.prototype.joinHomeDomain=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"joinHomeDomain",b6,b8);};bL.prototype.refurbish=function(b5,b9,b4,b8,ca,b6,b7){this.invokeMethod(b5,b9,b4,"refurbish",b8,ca,b6,b7);};function ai(){}ai.prototype=new a();ai.prototype.init=function(){this._serviceName="loggingService";};ai.prototype.log=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"log",b6,b7);};function e(){}e.prototype=new a();e.prototype.init=function(){this._serviceName="merlinSmsGwCasIntegrationFactoryService";};function aF(){}aF.prototype=new a();aF.prototype.init=function(){this._serviceName="NPVRService";};aF.prototype.npvrSearch=function(b7,ca,cb,b4,b9,b8,cc,b6,ce,b5,cd){this.invokeMethod(b7,ca,cb,"npvrSearch",b4,b9,b8,cc,b6,ce,b5,cd);};aF.prototype.npvrSearchByDate=function(b7,cb,cc,b4,ca,b8,cd,b6,cf,cg,b9,b5,ce){this.invokeMethod(b7,cb,cc,"npvrSearchByDate",b4,ca,b8,cd,b6,cf,cg,b9,b5,ce);};aF.prototype.cancelRecordingByAccAndDevice=function(b5,b7,b9,b4,b6,b8){this.invokeMethod(b5,b7,b9,"cancelRecordingByAccAndDevice",b4,b6,b8);};aF.prototype.cancelRecordingByAccount=function(b5,b7,b9,b4,b6,b8){this.invokeMethod(b5,b7,b9,"cancelRecordingByAccount",b4,b6,b8);};aF.prototype.fetchRecordingsByAccAndDevice=function(b5,b6,b4,b7,b8){this.invokeMethod(b5,b6,b4,"fetchRecordingsByAccAndDevice",b7,b8);};aF.prototype.fetchRecordingsByAccount=function(b5,b6,b4,b7,b8){this.invokeMethod(b5,b6,b4,"fetchRecordingsByAccount",b7,b8);};aF.prototype.setRecording=function(b5,b7,b9,b4,b6,b8){this.invokeMethod(b5,b7,b9,"setRecording",b4,b6,b8);};aF.prototype.fetchNPVREventsByAccAndDevice=function(b4,b6,b9,b5,b7,b8){this.invokeMethod(b4,b6,b9,"fetchNPVREventsByAccAndDevice",b5,b7,b8);};aF.prototype.fetchNPVREventsByAccount=function(b4,b6,b9,b5,b7,b8){this.invokeMethod(b4,b6,b9,"fetchNPVREventsByAccount",b5,b7,b8);};function aA(){}aA.prototype=new a();aA.prototype.init=function(){this._serviceName="nagraDVSLicenseService";};aA.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};aA.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};aA.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};aA.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};aA.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function E(){}E.prototype=new a();E.prototype.init=function(){this._serviceName="nagraDVSgwService";};function aS(){}aS.prototype=new a();aS.prototype.init=function(){this._serviceName="NmpExtendedService";};aS.prototype.initializeDevice=function(b4,b8,b9,b6,b7,b5){this.invokeMethod(b4,b8,b9,"initializeDevice",b6,b7,b5);};aS.prototype.getEntitlements=function(b4,b9,ca,b6,b8,b5,b7){this.invokeMethod(b4,b9,ca,"getEntitlements",b6,b8,b5,b7);};aS.prototype.transformEntitlements=function(b4,b9,ca,b6,b8,b5,b7){this.invokeMethod(b4,b9,ca,"transformEntitlements",b6,b8,b5,b7);};function k(){}k.prototype=new a();k.prototype.init=function(){this._serviceName="NmpOperatorService";};function ap(){}ap.prototype=new a();ap.prototype.init=function(){this._serviceName="NmpsCoreService";};function w(){}w.prototype=new a();w.prototype.init=function(){this._serviceName="noop";};function L(){}L.prototype=new a();L.prototype.init=function(){this._serviceName="noopLicenseService";};L.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};L.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};L.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};L.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};L.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function a0(){}a0.prototype=new a();a0.prototype.init=function(){this._serviceName="npvrSearchService";};function ba(){}ba.prototype=new a();ba.prototype.init=function(){this._serviceName="npvrrecordingService";};ba.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function O(){}O.prototype=new a();O.prototype.init=function(){this._serviceName="nullObjectCASIntegrationService";};function H(){}H.prototype=new a();H.prototype.init=function(){this._serviceName="nvodChannelService";};H.prototype.create=function(ce,b8,b7,ca,b4,cb,cm,cc,ck,cg,ci,b9,cf,b6,b5,cj,cd,cl,ch){this.invokeMethod(ce,b8,b7,"create",ca,b4,cb,cm,cc,ck,cg,ci,b9,cf,b6,b5,cj,cd,cl,ch);};H.prototype.update=function(b9,cc,ce,cb,ch,cg,b7,b5,ci,ca,b6,b4,b8,cj,cf,cd){this.invokeMethod(b9,cc,ce,"update",cb,ch,cg,b7,b5,ci,ca,b6,b4,b8,cj,cf,cd);};H.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};H.prototype.addMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b5,b9,b6);};H.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b5,b9,b6,cb);};H.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};H.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};H.prototype.getByOrigin=function(b4,b6,b9,b8,b7,b5){this.invokeMethod(b4,b6,b9,"getByOrigin",b8,b7,b5);};H.prototype.getByOriginUID=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByOriginUID",b7,b5);};H.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};H.prototype.getMultiLanguageList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getMultiLanguageList",b6);};H.prototype.isNvodChannel=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"isNvodChannel",b6);};function ao(){}ao.prototype=new a();ao.prototype.init=function(){this._serviceName="nvodEventService";};ao.prototype.create=function(b5,b8,b9,b4,b6,cb,b7,cc,ca){this.invokeMethod(b5,b8,b9,"create",b4,b6,cb,b7,cc,ca);};ao.prototype.update=function(b5,b9,cb,b7,b4,b6,cc,b8,ca){this.invokeMethod(b5,b9,cb,"update",b7,b4,b6,cc,b8,ca);};ao.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};ao.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};ao.prototype.getByOrigin=function(b5,b6,b4,b8,b7){this.invokeMethod(b5,b6,b4,"getByOrigin",b8,b7);};ao.prototype.getDetailsByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getDetailsByUID",b6,b5);};ao.prototype.getByOriginUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByOriginUID",b7);};ao.prototype.getDetailedList=function(b4,b7,b9,b6,b8,b5){this.invokeMethod(b4,b7,b9,"getDetailedList",b6,b8,b5);};ao.prototype.getDetailedListForChannel=function(b4,b8,ca,b6,b7,b9,b5){this.invokeMethod(b4,b8,ca,"getDetailedListForChannel",b6,b7,b9,b5);};function R(){}R.prototype=new a();R.prototype.init=function(){this._serviceName="nvodProgramService";};R.prototype.create=function(cd,b8,b7,ca,b4,cb,cq,ch,b6,cj,b5,ce,cl,cg,cc,cn,ck,cp,b9,cf,cm,co,ci){this.invokeMethod(cd,b8,b7,"create",ca,b4,cb,cq,ch,b6,cj,b5,ce,cl,cg,cc,cn,ck,cp,b9,cf,cm,co,ci);};R.prototype.update=function(ca,b8,b6,ce,cm,cf,b5,ch,b4,cb,cj,cd,b9,ck,ci,cl,b7,cc,cg){this.invokeMethod(ca,b8,b6,"update",ce,cm,cf,b5,ch,b4,cb,cj,cd,b9,ck,ci,cl,b7,cc,cg);};R.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};R.prototype.addMultiLanguage=function(cb,b8,ca,b7,b4,b9,b6,b5){this.invokeMethod(cb,b8,ca,"addMultiLanguage",b7,b4,b9,b6,b5);};R.prototype.modifyMultiLanguage=function(b6,b8,b9,b7,b5,cc,b4,ca,cb){this.invokeMethod(b6,b8,b9,"modifyMultiLanguage",b7,b5,cc,b4,ca,cb);};R.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};R.prototype.addAltAudioPID=function(b4,b8,b9,b7,b5,b6,ca){this.invokeMethod(b4,b8,b9,"addAltAudioPID",b7,b5,b6,ca);};R.prototype.modifyAltAudioPID=function(b4,b8,ca,b7,b5,b6,cb,b9){this.invokeMethod(b4,b8,ca,"modifyAltAudioPID",b7,b5,b6,cb,b9);};R.prototype.removeAltAudioPID=function(b5,b8,b9,b7,b6,b4){this.invokeMethod(b5,b8,b9,"removeAltAudioPID",b7,b6,b4);};R.prototype.getSimpleProgramByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getSimpleProgramByUID",b6,b5);};R.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};R.prototype.getByOrigin=function(b4,b6,b9,b8,b7,b5){this.invokeMethod(b4,b6,b9,"getByOrigin",b8,b7,b5);};R.prototype.getByOriginUID=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByOriginUID",b7,b5);};R.prototype.getMultiLanguageList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getMultiLanguageList",b6);};R.prototype.getAltAudioPIDList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAltAudioPIDList",b6);};function av(){}av.prototype=new a();av.prototype.init=function(){this._serviceName="openEchoService";};av.prototype.echo=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"echo");};function T(){}T.prototype=new a();T.prototype.init=function(){this._serviceName="originToUidService";};function D(){}D.prototype=new a();D.prototype.init=function(){this._serviceName="originToUid_v1_1Service";};function bH(){}bH.prototype=new a();bH.prototype.init=function(){this._serviceName="ottSessionService";};bH.prototype.setUp=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"setUp",b6,b7);};bH.prototype.tearDown=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"tearDown",b6);};bH.prototype.getMPDevicesWithOpenSessions=function(b5,b6,b4,b7,b8){this.invokeMethod(b5,b6,b4,"getMPDevicesWithOpenSessions",b7,b8);};function u(){}u.prototype=new a();u.prototype.init=function(){this._serviceName="ottUpgradeService";};u.prototype.upgrade=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"upgrade",b6,b4);};function bE(){}bE.prototype=new a();bE.prototype.init=function(){this._serviceName="PAVService";};bE.prototype.getPlayListByMacAddress=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getPlayListByMacAddress",b7,b6);};bE.prototype.getPlayListBySmartCard=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getPlayListBySmartCard",b7,b6);};function br(){}br.prototype=new a();br.prototype.init=function(){this._serviceName="PPVService";};br.prototype.getPagedPPVEventList=function(b6,b9,ca,b7,cd,cc,b8,b4,cb,b5){this.invokeMethod(b6,b9,ca,"getPagedPPVEventList",b7,cd,cc,b8,b4,cb,b5);};br.prototype.getPPVEventList=function(cb,b9,ca,b6,b8,b4,b7,b5){this.invokeMethod(cb,b9,ca,"getPPVEventList",b6,b8,b4,b7,b5);};br.prototype.getPagedPPVEventListByChannel=function(b6,b9,ca,b7,cd,cc,b8,ce,b4,cb,b5){this.invokeMethod(b6,b9,ca,"getPagedPPVEventListByChannel",b7,cd,cc,b8,ce,b4,cb,b5);};br.prototype.getPPVEventListByChannel=function(b5,b8,b9,b6,cb,ca,b7,cc,b4){this.invokeMethod(b5,b8,b9,"getPPVEventListByChannel",b6,cb,ca,b7,cc,b4);};br.prototype.getPagedChannelListWithPPVEvents=function(b6,b9,ca,b7,cc,b8,b4,cb,b5){this.invokeMethod(b6,b9,ca,"getPagedChannelListWithPPVEvents",b7,cc,b8,b4,cb,b5);};br.prototype.getChannelListWithPPVEvents=function(ca,b8,b9,b6,b4,b7,b5){this.invokeMethod(ca,b8,b9,"getChannelListWithPPVEvents",b6,b4,b7,b5);};br.prototype.getPagedPurchasedPPVEventList=function(b6,b9,ca,b7,cd,cc,b8,b4,cb,b5){this.invokeMethod(b6,b9,ca,"getPagedPurchasedPPVEventList",b7,cd,cc,b8,b4,cb,b5);};br.prototype.getPurchasedPPVEventList=function(cb,b9,ca,b6,b8,b4,b7,b5){this.invokeMethod(cb,b9,ca,"getPurchasedPPVEventList",b6,b8,b4,b7,b5);};br.prototype.purchasePPVEventByProduct=function(b4,ca,cb,b6,b9,b7,b8,b5){this.invokeMethod(b4,ca,cb,"purchasePPVEventByProduct",b6,b9,b7,b8,b5);};br.prototype.purchasePPVEventByPolicyGroup=function(b4,ca,cb,b6,b8,b7,b9,b5){this.invokeMethod(b4,ca,cb,"purchasePPVEventByPolicyGroup",b6,b8,b7,b9,b5);};function bP(){}bP.prototype=new a();bP.prototype.init=function(){this._serviceName="packageService";};bP.prototype.create=function(b7,b9,ca,cc,b4,cf,cg,cd,b8,cb,b5,ce,b6){this.invokeMethod(b7,b9,ca,"create",cc,b4,cf,cg,cd,b8,cb,b5,ce,b6);};bP.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bP.prototype.update=function(b4,b6,b7,cb,cc,b9,ca,b5,b8){this.invokeMethod(b4,b6,b7,"update",cb,cc,b9,ca,b5,b8);};bP.prototype.addMultiLanguage=function(b4,b9,ca,b5,b8,b6,b7){this.invokeMethod(b4,b9,ca,"addMultiLanguage",b5,b8,b6,b7);};bP.prototype.modifyMultiLanguage=function(b4,b9,ca,b7,b8,b6,b5){this.invokeMethod(b4,b9,ca,"modifyMultiLanguage",b7,b8,b6,b5);};bP.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};bP.prototype.addChannel=function(b4,b8,b9,b6,b7,b5){this.invokeMethod(b4,b8,b9,"addChannel",b6,b7,b5);};bP.prototype.updateChannel=function(b4,b8,b9,b6,b7,b5){this.invokeMethod(b4,b8,b9,"updateChannel",b6,b7,b5);};bP.prototype.removeChannel=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"removeChannel",b6,b7);};bP.prototype.getQspDefaultPackage=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getQspDefaultPackage",b5);};bP.prototype.getAllPackages=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getAllPackages",b5);};bP.prototype.getPkgsByChanUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPkgsByChanUID",b6,b5);};bP.prototype.getChannels=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getChannels",b6,b5);};bP.prototype.getPkgMapsByPkgPattern=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPkgMapsByPkgPattern",b6,b5);};bP.prototype.getPkgMapsByPkgID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPkgMapsByPkgID",b6,b5);};bP.prototype.getPkgMapsByPkgPatternAndCatUID=function(b4,b8,b9,b7,b6,b5){this.invokeMethod(b4,b8,b9,"getPkgMapsByPkgPatternAndCatUID",b7,b6,b5);};bP.prototype.getByOriginUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByOriginUID",b6,b5);};bP.prototype.getPkgBySbscrProfUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPkgBySbscrProfUID",b6,b5);};bP.prototype.getPagedPackages=function(b9,b6,b8,b4,b5,b7){this.invokeMethod(b9,b6,b8,"getPagedPackages",b4,b5,b7);};bP.prototype.getALaCartePackages=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getALaCartePackages",b5);};bP.prototype.getPagedPkgsByChanUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPkgsByChanUID",b6,b4,b5,b8);};bP.prototype.getPagedChannels=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedChannels",b6,b4,b5,b8);};bP.prototype.getPagedPkgMapsByPkgPattern=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPkgMapsByPkgPattern",b6,b4,b5,b8);};bP.prototype.getPagedPkgMapsByPkgID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPkgMapsByPkgID",b6,b4,b5,b8);};bP.prototype.getPagedPkgMapsByPkgPatternAndCatUID=function(cb,b8,ca,b7,b6,b4,b5,b9){this.invokeMethod(cb,b8,ca,"getPagedPkgMapsByPkgPatternAndCatUID",b7,b6,b4,b5,b9);};bP.prototype.getPagedPkgsBySbscrProfUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPkgsBySbscrProfUID",b6,b4,b5,b8);};bP.prototype.getPagedPkgsByOriginUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPkgsByOriginUID",b6,b4,b5,b8);};bP.prototype.getPagedPackagesByChannelUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedPackagesByChannelUID",b6,b4,b5,b8);};bP.prototype.getPagedAlacartePackagesByChannelNetCarry=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAlacartePackagesByChannelNetCarry",b6,b4,b5,b8);};bP.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function b(){}b.prototype=new a();b.prototype.init=function(){this._serviceName="passwordHashService";};function bc(){}bc.prototype=new a();bc.prototype.init=function(){this._serviceName="payWizardCardService";};function a8(){}a8.prototype=new a();a8.prototype.init=function(){this._serviceName="paymentGatewayService";};function Q(){}Q.prototype=new a();Q.prototype.init=function(){this._serviceName="pingService";};Q.prototype.ping=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"ping");};function aH(){}aH.prototype=new a();aH.prototype.init=function(){this._serviceName="policyGroupService";};aH.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};aH.prototype.addMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b9,b6,b5);};aH.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b9,b6,b5,cb);};aH.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};aH.prototype.getByName=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByName",b7,b5);};aH.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};aH.prototype.getMultiLanguageList=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getMultiLanguageList",b6);};aH.prototype.getByBasePriceUID=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getByBasePriceUID",b4,b5);};aH.prototype.getByPolicyUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByPolicyUID",b6,b5);};aH.prototype.addAccessPoint=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"addAccessPoint",b4,b5);};aH.prototype.removeAccessPoint=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"removeAccessPoint",b4,b5);};aH.prototype.getPolicyGroupsByAccpt=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getPolicyGroupsByAccpt",b5);};aH.prototype.getPolicyGroupsBySchedule=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getPolicyGroupsBySchedule",b6);};aH.prototype.getPolicyGroupsByScheduleAndLocale=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getPolicyGroupsByScheduleAndLocale",b6,b5);};aH.prototype.getScheduledValidPolicyGroups=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getScheduledValidPolicyGroups");};aH.prototype.getPolicyGroupsByScheduleAndAccessPoint=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getPolicyGroupsByScheduleAndAccessPoint",b6,b8);};aH.prototype.getPolicyGroupsByScheduleAndAccessPointAndLocale=function(b4,b7,b9,b6,b8,b5){this.invokeMethod(b4,b7,b9,"getPolicyGroupsByScheduleAndAccessPointAndLocale",b6,b8,b5);};aH.prototype.getByEvent=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByEvent",b7,b5);};aH.prototype.getDefaultQspZeroPrice=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getDefaultQspZeroPrice",b5);};aH.prototype.getByType=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByType",b7);};aH.prototype.getByTypeLocaleAndValidity=function(cb,b7,ca,b8,b4,b6,b5,b9){this.invokeMethod(cb,b7,ca,"getByTypeLocaleAndValidity",b8,b4,b6,b5,b9);};aH.prototype.getPagedPolicyForCatAndAssetGroupAndAsset=function(b6,b9,ca,cb,b7,b5,cc,b4,ce,cd,b8){this.invokeMethod(b6,b9,ca,"getPagedPolicyForCatAndAssetGroupAndAsset",cb,b7,b5,cc,b4,ce,cd,b8);};aH.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function a4(){}a4.prototype=new a();a4.prototype.init=function(){this._serviceName="policyGrpSubscriptionAggreService";};a4.prototype.subscribeToPolicyGroup=function(b5,b9,cb,b4,b7,b8,b6,ca){this.invokeMethod(b5,b9,cb,"subscribeToPolicyGroup",b4,b7,b8,b6,ca);};function bd(){}bd.prototype=new a();bd.prototype.init=function(){this._serviceName="policyService";};bd.prototype.create=function(cb,cc,cd,cf,b5,ca,b6,b7,b4,b8,cg,ce,b9){this.invokeMethod(cb,cc,cd,"create",cf,b5,ca,b6,b7,b4,b8,cg,ce,b9);};bd.prototype.createBasePrice=function(cc,cd,ce,ch,b6,b7,b5,b8,ci,cf,ca,cb,b4,cg,b9){this.invokeMethod(cc,cd,ce,"createBasePrice",ch,b6,b7,b5,b8,ci,cf,ca,cb,b4,cg,b9);};bd.prototype.update=function(b9,ca,cc,cd,b8,b5,b6,b4,b7,cb){this.invokeMethod(b9,ca,cc,"update",cd,b8,b5,b6,b4,b7,cb);};bd.prototype.updateBasePrice=function(ca,cb,cd,cf,b6,b5,b7,b8,b9,b4,ce,cc){this.invokeMethod(ca,cb,cd,"updateBasePrice",cf,b6,b5,b7,b8,b9,b4,ce,cc);};bd.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bd.prototype.deleteBasePrice=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"deleteBasePrice",b5);};bd.prototype.addMultiLanguage=function(b4,b9,cb,b6,ca,b7,b5,b8){this.invokeMethod(b4,b9,cb,"addMultiLanguage",b6,ca,b7,b5,b8);};bd.prototype.modifyMultiLanguage=function(b7,b8,b9,ca,cc,b4,b5,cb,b6){this.invokeMethod(b7,b8,b9,"modifyMultiLanguage",ca,cc,b4,b5,cb,b6);};bd.prototype.removeMultiLanguage=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"removeMultiLanguage",b6,b5,b7);};bd.prototype.getByUIDAndType=function(b4,b8,b9,b6,b5,b7){this.invokeMethod(b4,b8,b9,"getByUIDAndType",b6,b5,b7);};bd.prototype.getByName=function(b4,b7,b9,b8,b5,b6){this.invokeMethod(b4,b7,b9,"getByName",b8,b5,b6);};bd.prototype.getByType=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByType",b6,b5);};bd.prototype.getByPolicyGroupUID=function(b4,b8,b9,b6,b7,b5){this.invokeMethod(b4,b8,b9,"getByPolicyGroupUID",b6,b7,b5);};bd.prototype.isPolicyApplied=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"isPolicyApplied",b6,b7);};bd.prototype.getMultiLanguageListByType=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getMultiLanguageListByType",b6,b7);};bd.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bi(){}bi.prototype=new a();bi.prototype.init=function(){this._serviceName="postPaidService";};function bk(){}bk.prototype=new a();bk.prototype.init=function(){this._serviceName="preferenceService";};bk.prototype.create=function(b4,b6,b7,b9,b8,cc,b5,cb,cd,ce,ca){this.invokeMethod(b4,b6,b7,"create",b9,b8,cc,b5,cb,cd,ce,ca);};bk.prototype.update=function(b4,b7,b9,b5,cb,ca,cc,b6,cd,ce,b8){this.invokeMethod(b4,b7,b9,"update",b5,cb,ca,cc,b6,cd,ce,b8);};bk.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bk.prototype.getByOriginUID=function(b5,b8,b4,b9,ca,b7,b6){this.invokeMethod(b5,b8,b4,"getByOriginUID",b9,ca,b7,b6);};bk.prototype.getList=function(b5,b8,b4,b9,b7,b6){this.invokeMethod(b5,b8,b4,"getList",b9,b7,b6);};bk.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aL(){}aL.prototype=new a();aL.prototype.init=function(){this._serviceName="presenceService";};aL.prototype.addUserToAccount=function(b8,b9,ca,cc,b4,ci,cg,ch,ce,b7,b5,b6,cd,cb,cf){this.invokeMethod(b8,b9,ca,"addUserToAccount",cc,b4,ci,cg,ch,ce,b7,b5,b6,cd,cb,cf);};aL.prototype.removeUserFromAccount=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"removeUserFromAccount",b4);};aL.prototype.removeUserByNameAndAccountNumber=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"removeUserByNameAndAccountNumber",b8,b6);};function aG(){}aG.prototype=new a();aG.prototype.init=function(){this._serviceName="productService";};aG.prototype.create=function(b7,b8,b9,b6,cc,b5,b4,cb,ca){this.invokeMethod(b7,b8,b9,"create",b6,cc,b5,b4,cb,ca);};aG.prototype.update=function(b5,b8,b4,b7,b6,b9){this.invokeMethod(b5,b8,b4,"update",b7,b6,b9);};aG.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};aG.prototype.addMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b5,b9,b6);};aG.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b5,b9,b6,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b5,b9,b6,cb);};aG.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};aG.prototype.associateEvent=function(b5,b8,b9,b7,b4,b6){this.invokeMethod(b5,b8,b9,"associateEvent",b7,b4,b6);};aG.prototype.dissociateEvent=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"dissociateEvent",b6,b4);};aG.prototype.getByOriginUID=function(b4,b6,b8,b7,b5){this.invokeMethod(b4,b6,b8,"getByOriginUID",b7,b5);};aG.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};aG.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function bG(){}bG.prototype=new a();bG.prototype.init=function(){this._serviceName="profileService";};bG.prototype.create=function(b7,b9,ca,cc,b5,b8,b6,b4,cb,cd){this.invokeMethod(b7,b9,ca,"create",cc,b5,b8,b6,b4,cb,cd);};bG.prototype.update=function(b7,ca,cc,b9,cd,b5,b8,b6,b4,cb){this.invokeMethod(b7,ca,cc,"update",b9,cd,b5,b8,b6,b4,cb);};bG.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bG.prototype.getByName=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByName",b7);};bG.prototype.getByType=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByType",b6);};bG.prototype.getALaCarteProfiles=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getALaCarteProfiles");};bG.prototype.getEmptyProfiles=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getEmptyProfiles",b6);};bG.prototype.getEmptyProfileUids=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getEmptyProfileUids",b6);};bG.prototype.getPagedAlacarteProfilesByChannelNetCarry=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedAlacarteProfilesByChannelNetCarry",b6,b4,b5,b8);};bG.prototype.getProfiles=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getProfiles",b6,b8);};bG.prototype.getByFeatureUIDAndProfileType=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getByFeatureUIDAndProfileType",b5,b6);};bG.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function a9(){}a9.prototype=new a();a9.prototype.init=function(){this._serviceName="programService";};a9.prototype.create=function(cc,b9,b5,cv,cp,co,ct,cm,cn,cr,cq,cu,cj,cw,b6,cg,b4,ci,cb,cx,ce,cf,ck,cl,b7,ca,ch,cs,b8,cd){this.invokeMethod(cc,b9,b5,"create",cv,cp,co,ct,cm,cn,cr,cq,cu,cj,cw,b6,cg,b4,ci,cb,cx,ce,cf,ck,cl,b7,ca,ch,cs,b8,cd);};a9.prototype.update=function(cd,cb,b7,ci,cm,cq,ck,cl,co,cn,cs,ch,ct,b8,cf,b6,cg,b4,cr,cj,b9,cc,b5,cp,ca,ce){this.invokeMethod(cd,cb,b7,"update",ci,cm,cq,ck,cl,co,cn,cs,ch,ct,b8,cf,b6,cg,b4,cr,cj,b9,cc,b5,cp,ca,ce);};a9.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};a9.prototype.addMultiLanguage=function(b9,cb,cc,ca,cd,b5,b7,b6,b8,ce,b4){this.invokeMethod(b9,cb,cc,"addMultiLanguage",ca,cd,b5,b7,b6,b8,ce,b4);};a9.prototype.modifyMultiLanguage=function(b9,cb,cc,ca,cd,b5,b7,b6,cf,b8,ce,b4){this.invokeMethod(b9,cb,cc,"modifyMultiLanguage",ca,cd,b5,b7,b6,cf,b8,ce,b4);};a9.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};a9.prototype.addProgramAltAudioPID=function(b4,b8,b9,b5,b6,b7,ca){this.invokeMethod(b4,b8,b9,"addProgramAltAudioPID",b5,b6,b7,ca);};a9.prototype.modifyProgramAltAudioPID=function(b4,b9,ca,b5,b6,b7,cb,b8){this.invokeMethod(b4,b9,ca,"modifyProgramAltAudioPID",b5,b6,b7,cb,b8);};a9.prototype.removeProgramAltAudioPID=function(b4,b7,b8,b5,b6,b9){this.invokeMethod(b4,b7,b8,"removeProgramAltAudioPID",b5,b6,b9);};a9.prototype.getSimpleProgramByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getSimpleProgramByUID",b6,b5);};a9.prototype.getVerboseProgramByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getVerboseProgramByUID",b6,b5);};a9.prototype.getVerboseProgramByEventUID=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getVerboseProgramByEventUID",b7,b6);};a9.prototype.getAudioPIDsByPgmUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAudioPIDsByPgmUID",b6);};a9.prototype.getVerboseProgramByOriginUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getVerboseProgramByOriginUID",b6,b5);};a9.prototype.getPagedVerboseProgramsByOriginUID=function(ca,b7,b9,b6,b4,b5,b8){this.invokeMethod(ca,b7,b9,"getPagedVerboseProgramsByOriginUID",b6,b4,b5,b8);};a9.prototype.getPagedPgmAltAudioPIDsByPgmUID=function(b4,b7,b9,b6,b5,b8){this.invokeMethod(b4,b7,b9,"getPagedPgmAltAudioPIDsByPgmUID",b6,b5,b8);};a9.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function ar(){}ar.prototype=new a();ar.prototype.init=function(){this.securityRequired=true;this._serviceName="protectedFirmwareService_v1_0";};ar.prototype.getShroudedFirmwareKey=function(b5,b8,b4,b9,b7,b6){this.invokeMethod(b5,b8,b4,"getShroudedFirmwareKey",b9,b7,b6);};function ag(){}ag.prototype=new a();ag.prototype.init=function(){this.securityRequired=true;this._serviceName="provisionService";};ag.prototype.postProvisionByMACAddress=function(b4,b9,ca,b5,b6,b7,b8){this.invokeMethod(b4,b9,ca,"postProvisionByMACAddress",b5,b6,b7,b8);};ag.prototype.postProvisionBySmartcardID=function(b4,b9,cb,b5,b6,b8,b7,ca){this.invokeMethod(b4,b9,cb,"postProvisionBySmartcardID",b5,b6,b8,b7,ca);};ag.prototype.postProvisionCardless=function(b4,ca,cb,b5,b6,b8,b9,b7){this.invokeMethod(b4,ca,cb,"postProvisionCardless",b5,b6,b8,b9,b7);};ag.prototype.postProvisionCardbased=function(b4,b9,cb,b5,b6,b8,b7,ca){this.invokeMethod(b4,b9,cb,"postProvisionCardbased",b5,b6,b8,b7,ca);};ag.prototype.fullPostProvision=function(b7,cb,cc,cf,b6,cd,ca,ce,b5,b8,ch,ci,b9,b4,cg,cj){this.invokeMethod(b7,cb,cc,"fullPostProvision",cf,b6,cd,ca,ce,b5,b8,ch,ci,b9,b4,cg,cj);};ag.prototype.fullPostProvisionCardless=function(b7,ca,cb,ce,b6,cc,b9,cd,b5,cg,ch,b8,b4,cf,ci){this.invokeMethod(b7,ca,cb,"fullPostProvisionCardless",ce,b6,cc,b9,cd,b5,cg,ch,b8,b4,cf,ci);};ag.prototype.provisionMediaPlayer=function(b4,b8,ca,b6,b5,b9,b7){this.invokeMethod(b4,b8,ca,"provisionMediaPlayer",b6,b5,b9,b7);};function P(){}P.prototype=new a();P.prototype.init=function(){this._serviceName="qamService";};P.prototype.createServiceGroup=function(b8,b9,cb,b5,cg,b7,b4,ce,b6,cf,ca,ci,cc,ch,cd){this.invokeMethod(b8,b9,cb,"createServiceGroup",b5,cg,b7,b4,ce,b6,cf,ca,ci,cc,ch,cd);};P.prototype.createServiceGroupResource=function(b7,b9,cb,b8,ce,cc,b6,b4,ca,ch,cf,ci,b5,cd,cj,cg){this.invokeMethod(b7,b9,cb,"createServiceGroupResource",b8,ce,cc,b6,b4,ca,ch,cf,ci,b5,cd,cj,cg);};P.prototype.createQamLog=function(b6,b8,ca,b7,b5,b4,cc,b9,cb){this.invokeMethod(b6,b8,ca,"createQamLog",b7,b5,b4,cc,b9,cb);};P.prototype.updateServiceGroup=function(b8,ca,cd,b9,b5,ch,b7,b4,cf,b6,cg,cb,ci,cc,ce){this.invokeMethod(b8,ca,cd,"updateServiceGroup",b9,b5,ch,b7,b4,cf,b6,cg,cb,ci,cc,ce);};P.prototype.updateServiceGroupResource=function(b7,ca,cd,b8,b9,cg,cf,b6,b4,cb,cj,ch,ce,ck,b5,cc,ci){this.invokeMethod(b7,ca,cd,"updateServiceGroupResource",b8,b9,cg,cf,b6,b4,cb,cj,ch,ce,ck,b5,cc,ci);};P.prototype.deleteServiceGroup=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deleteServiceGroup",b6);};P.prototype.deleteServiceGroupResource=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deleteServiceGroupResource",b6);};P.prototype.getServiceGroups=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getServiceGroups");};P.prototype.getServiceGroupReport=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getServiceGroupReport",b6);};P.prototype.getServiceGroupsByQamUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getServiceGroupsByQamUID",b7);};P.prototype.getServiceGroupsResourceByServiceGroupUID=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getServiceGroupsResourceByServiceGroupUID",b5);};P.prototype.getServiceGroupsResourceByServiceGroupFreq=function(b4,b7,b8,b5,b6){this.invokeMethod(b4,b7,b8,"getServiceGroupsResourceByServiceGroupFreq",b5,b6);};P.prototype.getServiceGroupsResourceByServiceGroupFreqIpPort=function(b4,b8,b9,b5,b6,b7,ca){this.invokeMethod(b4,b8,b9,"getServiceGroupsResourceByServiceGroupFreqIpPort",b5,b6,b7,ca);};P.prototype.getServiceGroupResourceByQamUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getServiceGroupResourceByQamUID",b7);};P.prototype.getServiceGroupByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getServiceGroupByUID",b6);};P.prototype.getNodeGroupByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getNodeGroupByUID",b6);};P.prototype.getServiceGroupByOrigin=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getServiceGroupByOrigin",b6,b7);};P.prototype.getServiceGroupByErm=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getServiceGroupByErm",b5);};P.prototype.getServiceGroupByQamSvcGrpID=function(b5,b7,b8,b4,b6){this.invokeMethod(b5,b7,b8,"getServiceGroupByQamSvcGrpID",b4,b6);};P.prototype.getServiceGroupResources=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getServiceGroupResources");};P.prototype.getServiceGroupRscByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getServiceGroupRscByUID",b6);};P.prototype.getServiceGroupRscBySessionID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getServiceGroupRscBySessionID",b6);};P.prototype.deAllocateResource=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"deAllocateResource",b6);};P.prototype.getQamLogs=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getQamLogs");};P.prototype.getQamLogsBySmartcardID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getQamLogsBySmartcardID",b7);};P.prototype.getQamLogsBySessionID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getQamLogsBySessionID",b6);};P.prototype.getQamLogsByRscUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getQamLogsByRscUID",b6);};P.prototype.getQamLogsByStreamingServerUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getQamLogsByStreamingServerUID",b6);};P.prototype.getQamLogsWithCreationDateByServiceGroupUIDAndTime=function(b5,b6,b9,b4,b7,b8){this.invokeMethod(b5,b6,b9,"getQamLogsWithCreationDateByServiceGroupUIDAndTime",b4,b7,b8);};P.prototype.getQamLogsByServiceGroupUIDAndTime=function(b5,b6,b9,b4,b7,b8){this.invokeMethod(b5,b6,b9,"getQamLogsByServiceGroupUIDAndTime",b4,b7,b8);};P.prototype.getAvailableSvcGrpRsc=function(b5,b6,b8,b7,b4){this.invokeMethod(b5,b6,b8,"getAvailableSvcGrpRsc",b7,b4);};P.prototype.getServiceGroupByName=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getServiceGroupByName",b7);};P.prototype.createNodeGroup=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"createNodeGroup",b6);};P.prototype.getNodeGroupsByServiceGroup=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getNodeGroupsByServiceGroup",b6);};P.prototype.getServiceGroupsByNodeGroupName=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getServiceGroupsByNodeGroupName",b6);};function aM(){}aM.prototype=new a();aM.prototype.init=function(){this._serviceName="ratingService";};aM.prototype.create=function(b8,b9,ca,cd,b7,b5,cc,cb,b6,b4){this.invokeMethod(b8,b9,ca,"create",cd,b7,b5,cc,cb,b6,b4);};aM.prototype.update=function(b8,b9,ca,cc,ce,b7,b5,cd,cb,b6,b4){this.invokeMethod(b8,b9,ca,"update",cc,ce,b7,b5,cd,cb,b6,b4);};aM.prototype.del=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"delete",b5);};aM.prototype.addMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5){this.invokeMethod(b4,b8,ca,"addMultiLanguage",b7,b9,b6,b5);};aM.prototype.modifyMultiLanguage=function(b4,b8,ca,b7,b9,b6,b5,cb){this.invokeMethod(b4,b8,ca,"modifyMultiLanguage",b7,b9,b6,b5,cb);};aM.prototype.removeMultiLanguage=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"removeMultiLanguage",b6,b5);};aM.prototype.getList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getList",b5);};aM.prototype.getDefaultRating=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getDefaultRating",b5);};aM.prototype.getRatingByRatingCode=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getRatingByRatingCode",b4,b5);};aM.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function aC(){}aC.prototype=new a();aC.prototype.init=function(){this._serviceName="rolloutManagerClientService";};function aI(){}aI.prototype=new a();aI.prototype.init=function(){this._serviceName="rtspsessionService";};aI.prototype.createRtspSessionDetails=function(ca,cc,ce,b7,b5,b9,b4,cg,cd,b6,b8,cb,cf,ch){this.invokeMethod(ca,cc,ce,"createRtspSessionDetails",b7,b5,b9,b4,cg,cd,b6,b8,cb,cf,ch);};aI.prototype.createRtspSession=function(b9,cc,ce,b6,b4,b8,cb,cg,cd,b5,b7,ca,cf,ch){this.invokeMethod(b9,cc,ce,"createRtspSession",b6,b4,b8,cb,cg,cd,b5,b7,ca,cf,ch);};aI.prototype.updateRtspSession=function(ca,ce,cg,cc,b6,b4,b8,cd,ci,cf,b5,b7,cb,ch,cj,b9){this.invokeMethod(ca,ce,cg,"updateRtspSession",cc,b6,b4,b8,cd,ci,cf,b5,b7,cb,ch,cj,b9);};aI.prototype.endRtspSession=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"endRtspSession",b6);};aI.prototype.endRtspSessionBySessionUuid=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"endRtspSessionBySessionUuid",b4);};aI.prototype.getRtspSessionByClientID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getRtspSessionByClientID",b6);};aI.prototype.getRtspSessionBySessionID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getRtspSessionBySessionID",b6);};aI.prototype.getRtspSessionBySessionUuid=function(b5,b6,b7,b4){this.invokeMethod(b5,b6,b7,"getRtspSessionBySessionUuid",b4);};aI.prototype.getUniqueClientIDsBySmartcardID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getUniqueClientIDsBySmartcardID",b7);};aI.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bz(){}bz.prototype=new a();bz.prototype.init=function(){this._serviceName="sPChannelMapService";};bz.prototype.create=function(b5,b8,b4,b6,b7,b9,ca){this.invokeMethod(b5,b8,b4,"create",b6,b7,b9,ca);};bz.prototype.update=function(b5,b9,b4,b8,b6,b7,ca){this.invokeMethod(b5,b9,b4,"update",b8,b6,b7,ca);};bz.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};bz.prototype.getByChannelUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByChannelUID",b6);};bz.prototype.isChannelNumberUsed=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"isChannelNumberUsed",b6);};bz.prototype.getList=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getList");};bz.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function bV(){}bV.prototype=new a();bV.prototype.init=function(){this._serviceName="scsLogService";};bV.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function V(){}V.prototype=new a();V.prototype.init=function(){this._serviceName="scsSessionService";};V.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aX(){}aX.prototype=new a();aX.prototype.init=function(){this.securityRequired=true;this._serviceName="secureEchoService";};aX.prototype.echo=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"echo");};function N(){}N.prototype=new a();N.prototype.init=function(){this._serviceName="setTopBoxTelemetryService";};N.prototype.getSystemList=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getSystemList");};N.prototype.getRAGStatusList=function(b4,b6,b7,b5){this.invokeMethod(b4,b6,b7,"getRAGStatusList",b5);};N.prototype.getRAGStatus=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getRAGStatus",b6);};N.prototype.getTelemetry=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getTelemetry",b6);};function bM(){}bM.prototype=new a();bM.prototype.init=function(){this.securityRequired=true;this._serviceName="signonService";};bM.prototype.signonByMACAddress=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"signonByMACAddress",b6);};bM.prototype.signonBySmartcardID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"signonBySmartcardID",b7);};bM.prototype.signonByCASN=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"signonByCASN",b6);};bM.prototype.signonByMpDeviceId=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"signonByMpDeviceId",b6);};bM.prototype.signonByMpDeviceIdAndUser=function(b5,b8,b4,b6,b7,b9){this.invokeMethod(b5,b8,b4,"signonByMpDeviceIdAndUser",b6,b7,b9);};bM.prototype.signonByUser=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"signonByUser",b6,b8);};bM.prototype.updateTokenWithMediaPlayer=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"updateTokenWithMediaPlayer",b6);};bM.prototype.signonInitialByUserAndSpid=function(b5,b8,b4,b6,b9,b7){this.invokeMethod(b5,b8,b4,"signonInitialByUserAndSpid",b6,b9,b7);};bM.prototype.signonByUserMpIdAndSpid=function(b5,b9,b4,b7,ca,b8,b6){this.invokeMethod(b5,b9,b4,"signonByUserMpIdAndSpid",b7,ca,b8,b6);};function aD(){}aD.prototype=new a();aD.prototype.init=function(){this._serviceName="smartCardService";};aD.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aT(){}aT.prototype=new a();aT.prototype.init=function(){this._serviceName="smsServiceCasDecorator";};function S(){}S.prototype=new a();S.prototype.init=function(){this._serviceName="smsServiceCrudDecorator";};function bK(){}bK.prototype=new a();bK.prototype.init=function(){this._serviceName="smsServiceProductManager";};function aj(){}aj.prototype=new a();aj.prototype.init=function(){this._serviceName="smsServiceValidationDecorator";};function aJ(){}aJ.prototype=new a();aJ.prototype.init=function(){this.securityRequired=true;this._serviceName="smsservice";};function W(){}W.prototype=new a();W.prototype.init=function(){this._serviceName="specificationLookupService";};function aZ(){}aZ.prototype=new a();aZ.prototype.init=function(){this._serviceName="statisticsCollectionService";};function an(){}an.prototype=new a();an.prototype.init=function(){this._serviceName="statisticsReportingService";};function bm(){}bm.prototype=new a();bm.prototype.init=function(){this._serviceName="subscriptionProfileService";};bm.prototype.subscribeProfile=function(b4,b9,cb,ca,b7,b8,b6,b5){this.invokeMethod(b4,b9,cb,"subscribeProfile",ca,b7,b8,b6,b5);};bm.prototype.unsubscribeProfile=function(b5,b8,b4,b9,b7,b6){this.invokeMethod(b5,b8,b4,"unsubscribeProfile",b9,b7,b6);};bm.prototype.subscribeCatalogue=function(b5,b7,b9,b8,b6,b4){this.invokeMethod(b5,b7,b9,"subscribeCatalogue",b8,b6,b4);};bm.prototype.subscribePackage=function(b5,b7,b4,b8,b6,b9){this.invokeMethod(b5,b7,b4,"subscribePackage",b8,b6,b9);};bm.prototype.unsubscribeCatalogue=function(b5,b6,b8,b7,b4){this.invokeMethod(b5,b6,b8,"unsubscribeCatalogue",b7,b4);};bm.prototype.unsubscribePackage=function(b5,b7,b4,b8,b6){this.invokeMethod(b5,b7,b4,"unsubscribePackage",b8,b6);};bm.prototype.getProfilesByAccountUID=function(b5,b6,b4,b8,b7){this.invokeMethod(b5,b6,b4,"getProfilesByAccountUID",b8,b7);};function ab(){}ab.prototype=new a();ab.prototype.init=function(){this._serviceName="subscriptionService";};ab.prototype.getCalculatedPrice=function(b4,b8,b9,b7,b6,b5){this.invokeMethod(b4,b8,b9,"getCalculatedPrice",b7,b6,b5);};function C(){}C.prototype=new a();C.prototype.init=function(){this._serviceName="targetAreaService";};C.prototype.create=function(b8,ca,cb,b6,b9,b5,cc,b4,b7,cd){this.invokeMethod(b8,ca,cb,"create",b6,b9,b5,cc,b4,b7,cd);};C.prototype.update=function(b5,b8,b4,b7,b9,b6,ca){this.invokeMethod(b5,b8,b4,"update",b7,b9,b6,ca);};C.prototype.del=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"delete",b6);};C.prototype.associatePostCode=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"associatePostCode",b6,b5);};C.prototype.associatePostCodeList=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"associatePostCodeList",b6,b4);};C.prototype.associateAsset=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"associateAsset",b6,b7);};C.prototype.associateAssetList=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"associateAssetList",b6,b4);};C.prototype.disassociatePostCode=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"disassociatePostCode",b6,b5);};C.prototype.disassociatePostCodeList=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"disassociatePostCodeList",b6,b4);};C.prototype.disassociateAsset=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"disassociateAsset",b6,b7);};C.prototype.disassociateAssetList=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"disassociateAssetList",b6,b4);};C.prototype.getByAssetUid=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByAssetUid",b6,b5);};C.prototype.getByPostCode=function(b8,b6,b7,b4,b5){this.invokeMethod(b8,b6,b7,"getByPostCode",b4,b5);};C.prototype.getAssetUids=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getAssetUids",b6);};C.prototype.getPostCodes=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getPostCodes",b7);};C.prototype.getByUID=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"getByUID",b6,b5);};function A(){}A.prototype=new a();A.prototype.init=function(){this._serviceName="tlsSupportService";};function af(){}af.prototype=new a();af.prototype.init=function(){this._serviceName="tunerService";};af.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aW(){}aW.prototype=new a();aW.prototype.init=function(){this._serviceName="userManagementService";};aW.prototype.changePinByUserUid=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"changePinByUserUid",b6,b7);};aW.prototype.changePinByAccNumAndUserName=function(b5,b9,b4,b7,b8,b6){this.invokeMethod(b5,b9,b4,"changePinByAccNumAndUserName",b7,b8,b6);};aW.prototype.getAccountUsers=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getAccountUsers");};aW.prototype.getSignedInUser=function(b5,b6,b4){this.invokeMethod(b5,b6,b4,"getSignedInUser");};aW.prototype.createUser=function(b7,b9,ca,cc,cb,b4,b6,b5,b8){this.invokeMethod(b7,b9,ca,"createUser",cc,cb,b4,b6,b5,b8);};aW.prototype.removeUser=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"removeUser",b6);};aW.prototype.updatePassword=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"updatePassword",b7,b6);};aW.prototype.setAsDefault=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"setAsDefault",b6);};aW.prototype.updateLogin=function(b5,b7,b8,b6,b4){this.invokeMethod(b5,b7,b8,"updateLogin",b6,b4);};aW.prototype.updateRatingId=function(b9,b7,b8,b6,b4,b5){this.invokeMethod(b9,b7,b8,"updateRatingId",b6,b4,b5);};aW.prototype.updateType=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"updateType",b6,b8);};aW.prototype.updateDateOfBirth=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"updateDateOfBirth",b6,b8);};aW.prototype.updatePurchaseAbility=function(b4,b7,b8,b6,b5){this.invokeMethod(b4,b7,b8,"updatePurchaseAbility",b6,b5);};function g(){}g.prototype=new a();g.prototype.init=function(){this._serviceName="userService";};g.prototype.getByAcctUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByAcctUID",b6);};g.prototype.getByOriginUID=function(b5,b6,b4,b7){this.invokeMethod(b5,b6,b4,"getByOriginUID",b7);};g.prototype.getDefaultUserByAcctUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getDefaultUserByAcctUID",b6);};g.prototype.getByLoginIDAndPin=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getByLoginIDAndPin",b6,b8);};g.prototype.getByLoginIdAndPasswordAfterPwdProcessing=function(b5,b7,b4,b6,b8){this.invokeMethod(b5,b7,b4,"getByLoginIdAndPasswordAfterPwdProcessing",b6,b8);};g.prototype.getByNameAndPin=function(b5,b6,b4,b7,b8){this.invokeMethod(b5,b6,b4,"getByNameAndPin",b7,b8);};g.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};g.prototype.getByUID=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getByUID",b6);};function aq(){}aq.prototype=new a();aq.prototype.init=function(){this._serviceName="verimatrix";};function f(){}f.prototype=new a();f.prototype.init=function(){this._serviceName="verimatrixCasIntegrationFactoryService";};function am(){}am.prototype=new a();am.prototype.init=function(){this._serviceName="viaccessLicenseService";};am.prototype.getLicense=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"getLicense",b6);};am.prototype.getLicenseWithContext=function(b5,b8,b4,b7,b6){this.invokeMethod(b5,b8,b4,"getLicenseWithContext",b7,b6);};am.prototype.getLicenseWithChallengeAuthentication=function(b5,b8,b4,b6,b7){this.invokeMethod(b5,b8,b4,"getLicenseWithChallengeAuthentication",b6,b7);};am.prototype.getLicenseWithAdditionalInfo=function(b5,ca,b4,b6,b7,b9,b8){this.invokeMethod(b5,ca,b4,"getLicenseWithAdditionalInfo",b6,b7,b9,b8);};am.prototype.linkAuxiliarySTB=function(b5,b8,ca,b6,b7,b9,b4){this.invokeMethod(b5,b8,ca,"linkAuxiliarySTB",b6,b7,b9,b4);};function bB(){}bB.prototype=new a();bB.prototype.init=function(){this._serviceName="workflowSubscriptionService";};bB.prototype.updateSubscription=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"updateSubscription",b6);};bB.prototype.createSubscription=function(b5,b7,b4,b6){this.invokeMethod(b5,b7,b4,"createSubscription",b6);};bB.prototype.createSmartCardSubscription=function(b6,ca,cb,b8,cd,cc,b5,b7,b9,b4){this.invokeMethod(b6,ca,cb,"createSmartCardSubscription",b8,cd,cc,b5,b7,b9,b4);};bB.prototype.createNewSubscription=function(b5,b9,ca,b7,cc,b4,cb,b6,b8){this.invokeMethod(b5,b9,ca,"createNewSubscription",b7,cc,b4,cb,b6,b8);};function bx(){}bx.prototype=new a();bx.prototype.init=function(){this._serviceName="workflowSwapDevicesService";};function aN(){}aN.prototype=new a();aN.prototype.init=function(){this._serviceName="VisitorService";};aN.prototype.getValues=function(b4,b7,b5,ca,b8,b9,b6){this.invokeMethod(b4,b7,b5,"getValues",ca,b8,b9,b6);};aN.prototype.getValue=function(b4,b7,b5,ca,b8,b9,b6){this.invokeMethod(b4,b7,b5,"getValue",ca,b8,b9,b6);};aN.prototype.getValueAsInt=function(b4,b7,b5,ca,b8,b9,b6){this.invokeMethod(b4,b7,b5,"getValueAsInt",ca,b8,b9,b6);};aN.prototype.getGroup=function(b5,b7,b6,ca,b8,b4,b9){this.invokeMethod(b5,b7,b6,"getGroup",ca,b8,b4,b9);};aN.prototype.getByUID=function(b4,b6,b5,b7){this.invokeMethod(b4,b6,b5,"getByUID",b7);};aN.prototype.getByOrigin=function(b4,b7,b5,b6,b8){this.invokeMethod(b4,b7,b5,"getByOrigin",b6,b8);};window.ALaCarteService=aO;window.AccessPointService=G;window.AccountAggregateService=bl;window.AccountService=F;window.AcquiredContentListService=c;window.AdLogService=h;window.AdManagementService=aQ;window.AdMetadataService=x;window.AdvertDecisionService=l;window.AdvertMaintenanceService=t;window.AlaCarteValidationService=bZ;window.AladdinSmsGwCasIntegrationFactoryService=bX;window.ApplicationServerTelemetryService=at;window.AssetGroupService=aa;window.AssetSearchService=bJ;window.AssetService=bw;window.AuthnEchoService=a6;window.BTVService=be;window.BillingService=a7;window.BlockingService=p;window.BocAssetService=bF;window.BocContentTypeService=aU;window.BocLicenseCRUDService=bv;window.BocLicenseProxyService=ad;window.BocPurchaseService=X;window.BookmarkService=aB;window.BtvBrowsingService=ak;window.BtvConaxAzmiLicenseService=bn;window.BtvConaxOESLicenseService=bD;window.BtvLicenseValidityService=bA;window.BtvNagraDVSLicenseService=K;window.BtvViaccessLicenseService=z;window.CDNService=y;window.CODService=bg;window.CasConfigurationService=bY;window.CasInstanceService=bu;window.CasIntegrationFactoryService=s;window.CatalogueService=bt;window.CategoryService=b2;window.CcaCcomService=M;window.CdnTokenService=ay;window.ChallengeAggregateService=bR;window.ChallengeService=a3;window.ChannelService=a1;window.CodAclFinderService=bW;window.CodBrowsingService=az;window.CodBuyService=o;window.CodCategoryService=I;window.CodConaxAzmiLicenseService=bq;window.CodConaxOESLicenseService=bp;window.CodFilterScheduleService=aY;window.CodFilterService=bO;window.CodHelperService=aK;window.CodLicenseService=b0;window.CodLicenseValidityService=bo;window.CodNagraDVSLicenseService=d;window.CodNoopLicenseService=ah;window.CodScheduleService=J;window.CodSubscriptionBuyService=a5;window.CodSubscriptionConsumService=bb;window.CodViaccessLicenseService=bU;window.CompanionMessageService=bs;window.Conax=b3;window.ConaxAzmiGatewayService=U;window.ConaxAzmiLicenseService=q;window.ConaxCasIntegrationFactoryService=ax;window.ConaxOESLicenseService=r;window.ConaxOESgwService=au;window.ConfigurationService=aE;window.ContentConsumptionService=bf;window.ContentUsageService=bI;window.ContextService=m;window.CpvrOperationService=bT;window.CpvrService=bN;window.DataextractService=aP;window.DeviceAggregateService=al;window.DeviceClassifierService=B;window.DeviceService=bC;window.DevicegroupService=aw;window.DrmService=aV;window.Drmworkflowservice=a2;window.DynamicAdvertsService=ac;window.EventService=v;window.ExternalGroupService=aR;window.ExternalSystemStatusService=bS;window.FavouriteService=by;window.FeatureService=Y;window.FirmwareRegistrationService=bh;window.FirmwareUpgradeService=Z;window.InitialisationService=b1;window.IntervalService=bj;window.LicenseCRUDService=bQ;window.LicenseService=ae;window.LicenseValidityService=n;window.LinkedStbService=bL;window.LoggingService=ai;window.MerlinSmsGwCasIntegrationFactoryService=e;window.NPVRService=aF;window.NagraDVSLicenseService=aA;window.NagraDVSgwService=E;window.NmpExtendedService=aS;window.NmpOperatorService=k;window.NmpsCoreService=ap;window.Noop=w;window.NoopLicenseService=L;window.NpvrSearchService=a0;window.NpvrrecordingService=ba;window.NullObjectCASIntegrationService=O;window.NvodChannelService=H;window.NvodEventService=ao;window.NvodProgramService=R;window.OpenEchoService=av;window.OriginToUidService=T;window.OriginToUid_v1_1Service=D;window.OttSessionService=bH;window.OttUpgradeService=u;window.PAVService=bE;window.PPVService=br;window.PackageService=bP;window.PasswordHashService=b;window.PayWizardCardService=bc;window.PaymentGatewayService=a8;window.PingService=Q;window.PolicyGroupService=aH;window.PolicyGrpSubscriptionAggreService=a4;window.PolicyService=bd;window.PostPaidService=bi;window.PreferenceService=bk;window.PresenceService=aL;window.ProductService=aG;window.ProfileService=bG;window.ProgramService=a9;window.ProtectedFirmwareService_v1_0=ar;window.ProvisionService=ag;window.QamService=P;window.RatingService=aM;window.RolloutManagerClientService=aC;window.RtspsessionService=aI;window.SPChannelMapService=bz;window.ScsLogService=bV;window.ScsSessionService=V;window.SecureEchoService=aX;window.SetTopBoxTelemetryService=N;window.SignonService=bM;window.SmartCardService=aD;window.SmsServiceCasDecorator=aT;window.SmsServiceCrudDecorator=S;window.SmsServiceProductManager=bK;window.SmsServiceValidationDecorator=aj;window.Smsservice=aJ;window.SpecificationLookupService=W;window.StatisticsCollectionService=aZ;window.StatisticsReportingService=an;window.SubscriptionProfileService=bm;window.SubscriptionService=ab;window.TargetAreaService=C;window.TlsSupportService=A;window.TunerService=af;window.UserManagementService=aW;window.UserService=g;window.Verimatrix=aq;window.VerimatrixCasIntegrationFactoryService=f;window.ViaccessLicenseService=am;window.WorkflowSubscriptionService=bB;window.WorkflowSwapDevicesService=bx;window.VisitorService=aN;}());return $N.services.sdp.stubs.allServices;});define("jsfw/services/sdp/Signon",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/Config"],function(Log,ServiceFactory,Config){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.Signon=(function(){var log=new $N.apps.core.Log("sdp","Signon"),authToken=null,signonService,HDMS,state=null,listeners=[],signonFailedCallback=function(){},retryInterval=60000,retryTimeout=null,signonParameters=[],homeDomainSignonDetails={},retryCount=0,retryMax=8,retryBackOff=2,deviceInitialisedResponse=null,signonForNMP=false,signonProperties={},platform,isHomeDomainSignon=false,upgradeRecommended=false,upgradeData={};function applyListeners(){var i,param=[];if(signonForNMP&&upgradeRecommended){param.push({upgradeRecommended:true,upgradeData:upgradeData});}for(i=listeners.length-1;i>=0;i--){listeners[i].listener.apply(listeners[i].listeningObject,param);}upgradeRecommended=false;upgradeData={};}function signonSuccess(result,token){if(token){authToken=token;}else{}state=$N.services.sdp.Signon.STATE_SIGNED_ON;applyListeners();signonForNMP=false;}function setFailedSignonToPending(signonMethod,parameters){var actualRetryInterval=retryInterval*Math.pow(retryBackOff,retryCount);retryCount++;if(retryCount<=retryMax){log("setFailedSignonToPending","Will retry signon in: "+String((actualRetryInterval/1000)/60)+" minute(s).","warn");retryTimeout=setTimeout(function(){state=$N.services.sdp.Signon.STATE_NOT_SIGNED;signonMethod(parameters[0],parameters[1],parameters[2]);},actualRetryInterval);}else{$N.services.sdp.Signon.cancelOutstandingSignon();state=$N.services.sdp.Signon.STATE_NOT_SIGNED;}}function signonFailureMAC(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}setFailedSignonToPending($N.services.sdp.Signon.signonByMACAddress,signonParameters);}function signonFailureSCID(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}setFailedSignonToPending($N.services.sdp.Signon.signonBySmartcardID,signonParameters);}function signonFailureCASN(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}setFailedSignonToPending($N.services.sdp.Signon.signonByCASN,signonParameters);}function signonFailureUserID(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}if(result.indexOf("code=23017")===-1){setFailedSignonToPending($N.services.sdp.Signon.signonByUser,signonParameters);}else{state=$N.services.sdp.Signon.STATE_NOT_SIGNED;}}function signonFailureUserDeviceID(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}if(result.indexOf("code=23017")===-1){setFailedSignonToPending($N.services.sdp.Signon.signonByUserAndDevice,signonParameters);}else{state=$N.services.sdp.Signon.STATE_NOT_SIGNED;}}function signonOrInitializationForNMPFailure(failType,result){switch(failType){case $N.services.sdp.Signon.ERROR.SIGNON_BY_USER:case $N.services.sdp.Signon.ERROR.SIGNON_BY_USER_DEVICE_ID:case $N.services.sdp.Signon.ERROR.MAXIMUM_DEVICES_REACHED:case $N.services.sdp.Signon.ERROR.DEVICE_LIMIT_REACHED:case $N.services.sdp.Signon.ERROR.DEVICE_CLASS_LIMIT_REACHED:case $N.services.sdp.Signon.ERROR.DEVICE_ACTIVATION_LIMIT_REACHED:if(typeof result==="String"&&result.indexOf("code=23017")===-1){setFailedSignonToPending($N.services.sdp.Signon.signonByUserAndDevice,signonParameters);}else{state=$N.services.sdp.Signon.STATE_NOT_SIGNED;}authToken=null;break;}if(signonFailedCallback){signonFailedCallback({response:result,failure:failType});}}function signonFailureHomeDomain(result){authToken=null;if(signonFailedCallback){signonFailedCallback(result);}}function setDeviceId(deviceId){signonProperties.deviceId=deviceId;$N.env.deviceId=deviceId;}function isInitializationSuccessful(data){upgradeRecommended=false;upgradeData={};switch(data.status){case"OK":return true;case"PLAYER_UPGRADE_RECOMMENDED":upgradeRecommended=true;upgradeData=data;return true;case"MAXIMUM_DEVICE_PER_ACCOUNT_REACHED":signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.MAXIMUM_DEVICES_REACHED,data);break;case"PLAYER_UPGRADE_REQUIRED":signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.PLAYER_UPGRADE_REQUIRED,data);break;case"DEVICE_LIMIT_REACHED":signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.DEVICE_LIMIT_REACHED,data);break;case"DEVICE_CLASS_LIMIT_REACHED":signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.DEVICE_CLASS_LIMIT_REACHED,data);break;case"DEVICE_ACTIVATION_LIMIT_REACHED":signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.DEVICE_ACTIVATION_LIMIT_REACHED,data);break;default:signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.INITIALIZE_DEVICE,data);}return false;}function initialiseDRMAgent(result,token){drmAgent.initialize(deviceInitialisedResponse.response);if(signonProperties&&signonProperties.deviceName){$N.services.sdp.Signon.setDeviceNameForNMPId(signonProperties.deviceId,signonProperties.deviceName,function(){signonSuccess(result,token);},function(result){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SET_DEVICE_NAME,result);});}else{signonSuccess(result,token);}}function signedOnByDeviceCallback(result,token){var intialiseDeviceCallback=function(data){if(isInitializationSuccessful(data)){deviceInitialisedResponse=data;initialiseDRMAgent(result,token);}};if(token){authToken=token;}if(!deviceInitialisedResponse){$N.services.sdp.ServiceFactory.get("NmpExtendedService").initializeDevice(this,intialiseDeviceCallback,function(result){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.INITIALIZE_DEVICE,result);},signonProperties.playerVersion,signonProperties.playerType,signonProperties.initializationPayload);}else{initialiseDRMAgent(result,token);}}function GetAttributesCallback(){this.attributes=function(attributes){signonProperties.initializationPayload=attributes.initializationPayloadForServer;setDeviceId(attributes.deviceId);doSDPOrHomeDomainSignon();};}function getGlobalAttributes(){$N.services.sdp.Signon._getAttributesCallbackInstance=new GetAttributesCallback();drmAgent.getGlobalAttributes("$N.services.sdp.Signon._getAttributesCallbackInstance");}function signedOnByUserCallback(result,token){var drmAgentInitialised=false;var intialiseDeviceCallback=function(data){var initialisedCallback;if(isInitializationSuccessful(data)){deviceInitialisedResponse=data;if(signonProperties.deviceId===""){if(platform==="IOS"||platform==="ANDROID"){$N.services.sdp.Signon._drmInitializedCallback={initialized:function(sessions){if(!drmAgentInitialised){drmAgent.unregisterEventListener("$N.services.sdp.Signon._drmInitializedCallback");getGlobalAttributes();drmAgentInitialised=true;}}};drmAgent.registerEventListener("$N.services.sdp.Signon._drmInitializedCallback");drmAgent.initialize(deviceInitialisedResponse.response);}else{if(platform==="PC"){drmAgent.initialized.connect(function(){if(!drmAgentInitialised){setDeviceId(drmAgent.deviceId);doSDPOrHomeDomainSignon();drmAgentInitialised=true;}});drmAgent.initialize(deviceInitialisedResponse.response);}else{if(platform==="NMP_PLUGIN"){initialisedCallback=function(){if(!drmAgentInitialised){setDeviceId(drmAgent.deviceId);drmAgent.removeEventListener("initialized",initialisedCallback);doSDPOrHomeDomainSignon();drmAgentInitialised=true;}};if(navigator.userAgent.indexOf("MSIE")===-1&&navigator.userAgent.indexOf("Trident")===-1){drmAgent.addEventListener("initialized",initialisedCallback,false);}else{drmAgent.attachEvent("oninitialized",initialisedCallback);}drmAgent.initialize(deviceInitialisedResponse.response);}}}}else{doSDPOrHomeDomainSignon();}}};if(token){authToken=token;}$N.services.sdp.ServiceFactory.get("NmpExtendedService").initializeDevice(this,intialiseDeviceCallback,function(result){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.INITIALIZE_DEVICE,result);},signonProperties.playerVersion,signonProperties.playerType,signonProperties.initializationPayload);}function GetUserAgentCallback(){this.attributes=function(attributes){if(typeof attributes==="string"){attributes=eval(attributes);attributes=attributes[0];}signonProperties.playerType=attributes.platform;signonProperties.playerVersion=attributes.version;};}function setPlatformVersion(){var videoTag,objectElements=document.getElementsByTagName("object"),i;for(i=0;i<objectElements.length;i++){if(objectElements[i].drmAgent){videoTag=objectElements[i];platform="NMP_PLUGIN";signonProperties.playerType=videoTag.userAgent.platform;signonProperties.playerVersion=$N.Config.PLUGIN_VER_PREFIX+videoTag.userAgent.version;}}if(!platform){if(navigator.userAgent.indexOf("Windows")!==-1&&window.userAgent){platform="PC";signonProperties.playerVersion=window.userAgent.version;signonProperties.playerType=window.userAgent.platform;}else{if(navigator.userAgent.indexOf("Android")!==-1&&window.userAgent){platform="ANDROID";$N.services.sdp.Signon._userAgentAttributesCallbackInstance=new GetUserAgentCallback();userAgent.getGlobalAttributes("$N.services.sdp.Signon._userAgentAttributesCallbackInstance");}else{if((navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPhone")!==-1)&&window.userAgent){platform="IOS";$N.services.sdp.Signon._userAgentAttributesCallbackInstance=new GetUserAgentCallback();userAgent.getGlobalAttributes("$N.services.sdp.Signon._userAgentAttributesCallbackInstance");}}}}}function doSDPOrHomeDomainSignon(){var signonDetails={};if(isHomeDomainSignon){signonDetails.username=signonProperties.username;signonDetails.password=signonProperties.password;signonDetails.smartcardId=signonProperties.smartcardId;if($N.env.deviceId){signonDetails.deviceId=$N.env.deviceId;signonDetails.provisioned=true;HDMS.signon(this,signonSuccess,signonFailureHomeDomain,signonDetails);}else{signonDetails.provisioned=false;HDMS.signon(this,signedOnByUserCallback,signonFailureHomeDomain,signonDetails);}}else{if(signonProperties.deviceId!==""&&signonProperties.username){$N.services.sdp.Signon.signonByUserAndDevice(signonProperties.username,signonProperties.password,signonProperties.deviceId);}else{if(signonProperties.deviceId===""&&signonProperties.username){$N.services.sdp.Signon.signonByUser(signonProperties.username,signonProperties.password);}else{if(signonProperties.deviceId!==""){$N.services.sdp.Signon.signonByDevice(signonProperties.deviceId);}else{signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.INVALID_DEVICE_ID,"");}}}}}function getDrmAgentProperties(){if(platform==="IOS"||platform==="ANDROID"){getGlobalAttributes();}else{if(platform==="PC"){signonProperties.initializationPayload=drmAgent.initializationPayloadForServer;setDeviceId(drmAgent.deviceId);doSDPOrHomeDomainSignon();}else{signonProperties.initializationPayload=drmAgent.initializationPayloadForServer;setDeviceId(drmAgent.deviceId);doSDPOrHomeDomainSignon();}}}function isConnectionError(result){if(result==="[-1]"){return true;}return false;}return{STATE_SIGNING_ON:0,STATE_SIGNED_ON:1,STATE_NOT_SIGNED:2,ERROR:{SERVER_CONNECTION:-1,SIGNON_BY_USER:1,INITIALIZE_DEVICE:2,PERSONALIZE_DEVICE:3,SIGNON_BY_USER_DEVICE_ID:4,SIGNON_BY_DEVICE_ID:5,INVALID_DEVICE_ID:6,MAXIMUM_DEVICES_REACHED:7,SET_DEVICE_NAME:8,PLAYER_UPGRADE_REQUIRED:9,DEVICE_LIMIT_REACHED:10,DEVICE_CLASS_LIMIT_REACHED:11,DEVICE_ACTIVATION_LIMIT_REACHED:12},init:function(initialInterval,maximumRetries,backoffValue){signonService=$N.services.sdp.ServiceFactory.get("SignonService");HDMS=$N.services.sdp.ServiceFactory.get("HomeDomainManagerService");state=$N.services.sdp.Signon.STATE_NOT_SIGNED;retryInterval=initialInterval||retryInterval;retryMax=(maximumRetries!==undefined)?maximumRetries:retryMax;retryBackOff=backoffValue||retryBackOff;setPlatformVersion();},setSignonFailedCallback:function(callback){signonFailedCallback=callback;},signonByMACAddress:function(macAddress){if(macAddress){if(state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[0]=macAddress;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonByMACAddress(this,signonSuccess,signonFailureMAC,macAddress);}else{}}else{}},signonBySmartcardID:function(scid){if(scid){scid=scid.replace(/\s*/g,"");if(state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[0]=scid;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonBySmartcardID(this,signonSuccess,signonFailureSCID,scid);}else{}}else{}},signonByCASN:function(casn){if(casn){casn=casn.replace(/\s*/g,"");if(state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[0]=casn;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonByCASN(this,signonSuccess,signonFailureCASN,casn);}else{}}else{}},getAuthorisationToken:function(){return authToken;},cancelOutstandingSignon:function(){signonParameters=[];retryCount=0;if(retryTimeout){clearTimeout(retryTimeout);}state=$N.services.sdp.Signon.STATE_NOT_SIGNED;},isSignedOn:function(){return(state===$N.services.sdp.Signon.STATE_SIGNED_ON);},registerListener:function(listener,listeningObject){listeners.push({listener:listener,listeningObject:listeningObject});},unregisterListener:function(listener){var i;for(i=0;i<listeners.length;i++){if(listeners[i].listener===listener){listeners.splice(i,1);break;}}},signonByUser:function(userID,password){var signonSuccessCallback=signonForNMP?signedOnByUserCallback:signonSuccess;if(userID&&password){if(state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[0]=userID;signonParameters[1]=password;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonByUser(this,signonSuccessCallback,function(result){if(signonForNMP){if(isConnectionError(result)){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SERVER_CONNECTION,result);}else{signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SIGNON_BY_USER,result);}}else{signonFailureUserID(result);}},userID,password);}else{}}else{}},signonByUserAndDevice:function(userID,password,deviceID){var signonSuccessCallback=signonForNMP?signedOnByDeviceCallback:signonSuccess;if(userID&&password&&deviceID){if(signonForNMP||state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[0]=userID;signonParameters[1]=password;signonParameters[2]=deviceID;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonByMpDeviceIdAndUser(this,signonSuccessCallback,function(result){if(signonForNMP){if(isConnectionError(result)){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SERVER_CONNECTION,result);}else{signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SIGNON_BY_USER_DEVICE_ID,result);}}else{signonFailureUserDeviceID(result);}},deviceID,userID,password);}else{}}else{}},signonByDevice:function(deviceID){var signonSuccessCallback=signonForNMP?signedOnByDeviceCallback:signonSuccess;if(deviceID){if(signonForNMP||state!==$N.services.sdp.Signon.STATE_SIGNING_ON){signonParameters=[];signonParameters[1]=deviceID;state=$N.services.sdp.Signon.STATE_SIGNING_ON;signonService.signonByMpDeviceId(this,signonSuccessCallback,function(result){if(signonForNMP){if(isConnectionError(result)){signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SERVER_CONNECTION,result);}else{signonOrInitializationForNMPFailure($N.services.sdp.Signon.ERROR.SIGNON_BY_DEVICE_ID,result);}}else{signonFailureUserDeviceID(result);}},deviceID);}else{}}else{}},signonAndInitialiseForNMP:function(userId,password,deviceName){signonProperties.username=userId;signonProperties.password=password;signonProperties.deviceName=deviceName;signonForNMP=true;getDrmAgentProperties();},signonToHomeDomain:function(signonDetails){if(signonDetails){if(signonDetails.nuId||(signonDetails.username&&signonDetails.password&&signonDetails.smartcardId)){if(signonDetails.nuId){signonDetails.provisioned=(signonDetails.provisioned===null||signonDetails.provisioned===undefined)?true:signonDetails.provisioned;HDMS.signon(this,signonSuccess,signonFailureHomeDomain,signonDetails);}else{signonForNMP=true;signonProperties.username=signonDetails.username;signonProperties.password=signonDetails.password;signonProperties.smartcardId=signonDetails.smartcardId;isHomeDomainSignon=true;getDrmAgentProperties();}}else{signonFailureHomeDomain();}}},setDeviceNameForNMPId:function(deviceId,deviceName,success,failure){$N.services.sdp.ServiceFactory.get("DeviceService").updateMpName(this,success,failure,deviceId,deviceName);}};}());return $N.services.sdp.Signon;});define("jsfw/services/sdp/ServiceFactory",["jsfw/apps/core/Log","jsfw/services/sdp/stubs/allServices","jsfw/services/sdp/HomeDomainManagerService"],function(b,a,c){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.ServiceFactory=(function(){var h={};var g=new $N.apps.core.Log("sdp","ServiceFactory");function f(l){try{return new window[l]();}catch(m){}}function k(m,l){h[m]=l;}function e(n){g("get",n+": "+(h[n]?"returning existing instance":"creating new instance"));var m=1,o,l;if(h[n]){return h[n];}l=f.apply(this,arguments);k(n,l);if(l&&l.init){o=[];for(m=1;m<arguments.length;m++){o.push(arguments[m]);}l.init.apply(l,o);}return l;}function d(){e("BTVService");e("ChannelService");e("UserService");e("FavouriteService");e("IntervalService");e("AcquiredContentListService");e("CODService");e("CodHelperService");e("NPVRService");e("AssetService");e("CatalogueService");e("EventService");e("BillingService");e("DeviceService");e("PackageService");e("PreferenceService");e("AccountService");e("RatingService");e("SubscriptionService");e("BookmarkService");e("LicenseService");e("ProvisionService");e("ContextService");e("BocPurchaseService");}return{preCache:d,get:e,set:k};}());return $N.services.sdp.ServiceFactory;});define("jsfw/services/sdp/MetadataService",["jsfw/apps/core/Log","jsfw/apps/core/XssRequest","jsfw/apps/util/JSON","jsfw/services/sdp/stubs/allServicesPatch"],function(a,c,d,b){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.MetadataService=(function(){var p=false,D=false,I="",Q=null,x=30000,F=[],u=[],J=[],w=[["title",1]],T=[["nodeOrder",1]],f={skip:0,hints:true,hintLevel:20,pretty:false,reversed:false},o=new $N.apps.core.Log("sdp","MetadataService"),K,s="",e="json",G="",g="/metadata/delivery",C="/metadata/solr",r="btv/services",P="btv/editorials",R="btv/programmes",v="vod/nodes",H="vod/editorials",z="vod/products",S="vod/series",m="vod/promotions",k="offers/promotions",E="/search",L="/suggest",t=null,h="en_GB",A="",y="",l={},M,q={SHOW_PUBLISHED:1,HIDE_PUBLISHED:2,DISABLED:3},N=9999;function n(){s=y||"";if(A){if(s.indexOf("|")===-1){s+="|";}s+=A;}}function O(){var V=p?"https://":"http://",W=G.indexOf("/"),U;if(!G){return"";}if(W){U=[G.slice(0,W),(Q?(":"+Q):""),G.slice(W)].join("");}else{U=G+(Q?(":"+Q):"");}return V+U;}function B(W,U,X){var V=new c("GET",W,U,function(Y){X(Y.responseText);});V.setTimeout(x);V.send();}return{init:function(aa,X,Z,ab,Y,ae,ac,W,U,af,V,ad){if(!D||ad===true){K=window.JSON||$N.apps.util.JSON;G=aa;Q=X||null;g=Z||g;C=U||C;t=ab;x=Y||x;h=ae||h;A=ac||"";y=W||"";n();D=true;p=af||false;M=V||q.DISABLED;}},initialise:function(aa,X,Z,ab,Y,ae,ac,W,U,af,V,ad){this.init(aa,X,Z,ab,Y,ae,ac,W,U,af,V,ad);},setVODSortOrder:function(U){w=U;return this;},setVODNodeSortOrder:function(U){T=U;return this;},setVODFieldList:function(U){J=U;return this;},setEPGSortOrder:function(U){u=U;return this;},setServiceProviderId:function(U){t=U;return this;},setEPGFieldList:function(U){F=U;return this;},setLocale:function(U){if(U&&U!==h){h=U;}return this;},setRegion:function(U){if(U&&U!==A){A=U;n();}return this;},setDeviceType:function(U){if(U&&U!==y){y=U;n();}return this;},setPublishToUserDevicesStatus:function(U){M=U;},getData:function(Y,Z,V,ae,W,X,ab,ac,aa,ad){var U;I=ae;U=O()+g+"/"+t.toUpperCase()+"/"+I;if(!G||G===""){V("No server configured.");}else{f.filter=W||l;if(ad!==false&&(!W||!W.locale)){f.filter.locale=h;}if(M&&M!==q.DISABLED){f.filter.publishToEndUserDevices=M===q.SHOW_PUBLISHED?true:false;}f.limit=(ac!==null&&ac!==undefined)?ac:N;f.skip=(aa!==undefined&&aa!==null)?aa:0;if(ae.indexOf(k)<0){switch(ae){case r:case R:f.fieldList=ab&&ab.length?ab:F;f.sortOrder=X&&X.length?X:u;break;case m:case H:f.filter["technical.deviceType"]="STB";f.fieldList=ab&&ab.length?ab:J;f.sortOrder=X&&X.length?X:w;break;case v:f.fieldList=ab&&ab.length?ab:J;f.sortOrder=X&&X.length?X:T;break;case z:case S:f.fieldList=ab&&ab.length?ab:J;f.sortOrder=X&&X.length?X:w;break;}U+="?filter="+K.stringify(f.filter);if(f.limit!==null){U+="&limit="+f.limit;}if(f.skip){U+="&offset="+f.skip;}U+="&fields="+K.stringify(f.fieldList);U+="&sort="+K.stringify(f.sortOrder);}B(U,Z,V);}},getEPGData:function(X,Y,U,ac,V,W,aa,ab,Z){this.getData(X,Y,U,ac,V,W,aa,ab,Z);},getVODData:function(X,Y,U,ac,V,W,aa,ab,Z,ad){this.getData(X,Y,U,ac,V,W,aa,ab,Z,ad);},getOfferData:function(Y,Z,U,W,V,X,ab,ac,aa){this.getData(Y,Z,U,W,V,X,ab,ac,aa);},doSearch:function(Y,Z,W,aa,af,ad,X,ah,ab,ag,V){var U=O()+C+"/"+t.toUpperCase()+E+"?q=",ac,ae={};if(aa){U+=encodeURIComponent(aa);}if(V){U+="&qf="+encodeURIComponent(V);}U+="&fq="+encodeURIComponent("locale:"+h);U+=s?(encodeURIComponent("+AND+domain:"+s)):"";if(af&&af.length){for(ac=0;ac<af.length;ac++){U+="+AND+"+encodeURIComponent(af[ac]);}}if(ad){U+="&fl="+encodeURIComponent(ad);}if(X){U+="&sort="+encodeURIComponent(X);}U+="&wt="+(ah||e);if(ab){U+="&rows="+ab;}if(ag){U+="&start="+ag;}B(U,function(ai){ae.numberFound=ai&&ai.response&&ai.response.numFound?ai.response.numFound:0;ae.start=ai&&ai.response&&ai.response.start?ai.response.start:0;ae.docs=ai&&ai.response&&ai.response.docs?ai.response.docs:[];Z(ae,ai&&ai.responseHeader?ai.responseHeader:{});},W);},fetchSuggestions:function(X,Y,W,Z,ac){var V=O()+C+"/"+t.toUpperCase()+L+"?q=",aa,ab={},U=100;if(Z){V+=encodeURIComponent(Z);}if(ac&&ac.length){V+="&fq="+encodeURIComponent(ac[0]);for(aa=1;aa<ac.length;aa++){V+="+AND+"+encodeURIComponent(ac[aa]);}}V+="&rows="+U;B(V,Y,W);},RequestType:{Channels:r,Programmes:P,Events:R,Catalogues:v,Assets:H,Products:z,Series:S,Promotions:k,Search:E,Trailers:m},PUBLISH_TO_USER_DEVICES_STATUS:q};}());return $N.services.sdp.MetadataService;});define("jsfw/services/sdp/BootStrap",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/services/sdp/BaseService","jsfw/Config"],function(b,d,c,a){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.BootStrap=(function(){var g=new $N.apps.core.Log("sdp","BootStrap");var l=null,p=null,k=true;function h(w){var B=true,v,z,A,y="";try{if(w.accountUID===null||w.accountUID===""){throw"Invalid accountUID returned from getInit data";}if(!w.users||w.users.length===0){throw"Invalid or empty users list returned from getInit data";}if(w.publicAddressSTS===null){throw"No publicAddressSTS (access point) returned from getInit data";}}catch(u){B=false;}if(k){g("bootstrapSuccess","initialising MetadataService with "+$N.services.sdp.BaseService.getServerURL());v=w.defaultLocale;z=v.indexOf("_");if(w.accountPreferences&&w.accountPreferences[0]){A=w.accountPreferences[0].serviceProviderID;}else{A=w.users[0].serviceProviderID;}y=v.substr(0,z+1)+v.substr(z+1).toUpperCase();require(["jsfw/services/sdp/MetadataService"],function(x){$N.services.sdp.MetadataService.init($N.services.sdp.BaseService.getServerURL(),null,"",A,null,y);$N.services.sdp.ServiceFactory.preCache();if(l){l(w,B);}});}else{$N.services.sdp.ServiceFactory.preCache();if(l){l(w,B);}}}function m(u){}function s(v,w,u){p=v;l=w;k=(u!==undefined&&u!==null)?u:k;}function q(v,w,u){s(v,w,u);}function o(w,x,v){var u=$N.services.sdp.ServiceFactory.get("InitialisationService");if(x){l=x;}k=(v!==undefined&&v!==null)?v:k;u.getInitDataByMacAddress(this,h,m,w);}function e(w,x,v){var u=$N.services.sdp.ServiceFactory.get("InitialisationService");if(x){l=x;}k=(v!==undefined&&v!==null)?v:k;u.getInitDataByCASN(this,h,m,w);}function r(u,x,w){var v=$N.services.sdp.ServiceFactory.get("InitialisationService");if(x){l=x;}k=(w!==undefined&&w!==null)?w:k;v.getInitDataBySmartCardId(this,h,m,u);}function n(w,u){var v=drmAgent.deviceId;k=(u!==undefined&&u!==null)?u:k;if(!v){v=$N.env?$N.env.deviceId:null;}if(v){if(w){l=w;}$N.services.sdp.ServiceFactory.get("DeviceService").getMpById(this,h,m,v);}else{m("");}}function t(){o(p);}function f(u){l=u;}return{init:s,initialise:q,setPostBootCallback:f,startBootStrap:t,startBootStrapByMac:o,startBootStrapBySmartCard:r,startBootStrapForNMP:n,startBootStrapByCASN:e};}());return $N.services.sdp.BootStrap;});var $N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.EPG=(function(){var a,f,k,c=true,g=new $N.apps.core.Log("sdp","EPG"),n=3*3600*1000*1000;function b(p){var o={};o.serviceRef=p.channelId;if(p.startTime){o["period.start"]={"$gte":p.startTime/1000};}if(p.endTime){o["period.end"]={"$lte":p.endTime/1000};}return o;}function h(p){var o={};o.serviceRef=p.channelId;if(p.startTime){o["period.start"]={"$gte":p.startTime/1000};}return o;}function d(p){var o={};if(p.channelIds.length===1){o.serviceRef=p.channelIds[0];}else{o.serviceRef={"$in":p.channelIds};}if(p.endTime){o["period.start"]={"$lt":p.endTime/1000};}if(p.startTime){o["period.end"]={"$gt":p.startTime/1000};}return o;}function m(p){var o={};if(p.channelId){o.serviceRef=p.channelId;}return o;}function l(u,t){var p,o,s,r={},q=[];for(p=0;p<u.length;p++){r[u[p]]=[];}for(p=0;p<t.length;p++){if(t[p]&&r[t[p].serviceId]){r[t[p].serviceId].push(t[p]);}}for(s in r){if(r.hasOwnProperty(s)&&r[s]){q=q.concat(r[s]);}}return q;}function e(o){if(c){$N.platform.btv.EPGCache.cacheEvent(o);}}return{initialise:function(o,p){f=o||null;k=p||"en_GB";a=$N.services.sdp.MetadataService;},fetchAllChannels:function(o,r){var q={},p=function(u){var t=[];if(u&&u.services&&u.services.length>0){t=$N.services.sdp.EPGServiceFactory.mapArray(u.services);o(t);}else{o(null);}},s=function(t){r(t);};a.getEPGData(this,p,s,a.RequestType.Channels,q,[["Title",1]],null);},fetchLatestEvent:function(u,r){var s={},q,p,o=function(v){if(v&&v.programmes&&v.programmes.length>0){q=$N.services.sdp.EPGEventFactory.mapObject(v.programmes[0]);u(q);}else{u(null);}},t=function(v){g("fetchLatestEvent failure","processFailure response = "+String(v));u(null);};if(r){s.channelId=$N.app.ChannelManager.getServiceRef(r);}p=m(s);a.getEPGData(this,o,t,a.RequestType.Events,p,[["period.end",-1]],null,1,null);},fetchEarliestEvent:function(u,q){var r={},t,p,o=function(v){if(v&&v.programmes&&v.programmes.length>0){t=$N.services.sdp.EPGEventFactory.mapObject(v.programmes[0]);u(t);}else{u(null);}},s=function(v){g("fetchEarliestEvent failure","processFailure response = "+String(v));u(null);};if(q){r.channelId=$N.app.ChannelManager.getServiceRef(q);}else{r.channelId="SPOSNYHD";}p=m(r);a.getEPGData(this,o,s,a.RequestType.Events,p,[["period.start",1]],null,1,null);},fetchEventById:function(r,o,t){var s,q={},p=function(v){if(v&&v.programmes&&v.programmes.length>0){s=$N.services.sdp.EPGEventFactory.mapObject(v.programmes[0]);o(s);}else{o();}},u=function(v){g("fetchEventById failure","processFailure response = "+String(v));if(t){t();}};q.id=r;a.getEPGData(this,p,u,a.RequestType.Events,q,null,null,1,null);},fetchCurrentEventForService:function(w,s,o){var x={},q,p,r=new Date(),t=new Date(),u=new Date(),v=function(z){if(z&&z.programmes&&z.programmes.length>0){q=$N.services.sdp.EPGEventFactory.mapObject(z.programmes[0]);e(q);s(q);}else{s(null);}},y=function(z){g("fetchCurrentEventForService failure","processFailure response = "+String(z));};if(w){t.setMinutes(0,0,0);x.channelId=w;x.startTime=t.getTime();x.endTime=t.getTime()+n;p=b(x);a.getEPGData(this,v,y,a.RequestType.Events,p,[["period.start",1]],null,1,null);}},fetchNextEventForService:function(u,q,o){var s=this,p,w,v={},t=function(B){var z,x,A=function(C){if(C&&C.programmes.length>0){w=$N.services.sdp.EPGEventFactory.mapObject(C.programmes[0]);e(w);q(w);}else{q(null);}},y=function(C){};if(B){z=B.endTime;x=B.endTime+(60*1000);v.channelId=u;v.startTime=z;p=h(v);a.getEPGData(this,A,y,a.RequestType.Events,p,[["period.start",1]],null,1);}else{q(null);}},r=function(x){};if(u){s.fetchCurrentEventForService(u,t,r);}},fetchEventsByWindow:function(y,s,w,t,p){var r,v,q={},z=[],x=function(B){if(B&&B.programmes&&B.programmes.length>0){z=$N.services.sdp.EPGEventFactory.mapArray(B.programmes);t(l(y,z));}else{t([]);}},A=function(B){g("fetchEventsByWindow failure","processFailure response = "+String(B));t([]);};if(y.length>0){var u=[];for(v=0;v<y.length;v++){var o=$N.app.ChannelManager.getServiceRef(y[v]);if(o!==undefined){u.push(o);}}if(u.length>0){q.channelIds=u;q.startTime=s;q.endTime=w;r=d(q);a.getEPGData(this,x,A,a.RequestType.Events,r,[["period.start",1]],null,100);}else{A();}}},fetchEventsForChannelWithDummyEvents:function(r,q,p,o,s){}};}());define("jsfw/services/sdp/IPDataLoader",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/services/sdp/EPG","jsfw/platform/btv/PersistentCache","jsfw/platform/btv/EPGCache","jsfw/Config","jsfw/services/sdp/Subscriptions"],function(b,f,g,d,e,a,c){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.IPDataLoader=(function(){var q=new $N.apps.core.Log("sdp","IPDataLoader"),n="info",B="error",Z=3,t=2,C=3,I,V,l=12,J=[],Q=[],z,U,L,o,D,R,A,K=false,N=null,s=function(){},G,S,h,m=false,W=true,E=12*3600000,x=null,H;function T(aa){return(aa&&aa.length>8&&aa.substr(0,4)==="dvb:")?true:false;}function k(){var aa;for(aa=(Q.length-1);aa>=0;aa--){Q[aa].callback.apply(Q[aa].callerContext,[]);}}function y(ab,ad,ac){setTimeout(function aa(){if(ab&&ab.length>0){var ae=ab.shift();ad(ae,ac);setTimeout(aa,Z);}else{ac();}},Z);}function w(aa){y(aa,function(ab){A.cacheEvent(ab);},function(){if(!K&&N){K=true;N();}Y();});}function F(aa){Y();}function Y(){var aa=o+I;if(aa<R&&W){o=aa;D=o+I;$N.services.sdp.EPG.fetchEventsByWindow(L,o,D,w,F);}else{m=false;k();setTimeout(function(){m=true;R+=l;Y();},l);}}function P(){L=[];if(W){A.fetchServices(function(aa){var ac=aa.length,ab,ad=new Date();for(ab=0;ab<ac;ab++){if(!T(aa[ab].uri)){L.push(aa[ab].serviceId+"");}}ad.setMinutes(0,0,0);if(G===undefined){o=ad.getTime();}else{o=G.getTime();}D=o+I;R=o+V;q("loadDetEvtsByChannelList","Window: "+new Date(o)+" - "+new Date(D));$N.services.sdp.EPG.fetchEventsByWindow(L,o,D,w,F);});}}function r(af){var ad={},ag={},ab=af.length,ac,ai=A.getServices(),aa=ai.length,ae,ah;for(ac=0;ac<ab;ac++){ad[af[ac].uid]=af[ac];if(af[ac].carryingNetwork){ag[af[ac].carryingNetwork]=af[ac];}}for(ac=0;ac<aa;ac++){ae=ai[ac];ah=ag[ae.serviceId];if(ah&&T(ae.uri)){ae.isNPVR=true;ae.sdpUID=ah.uid;}else{if(ad[ae.serviceId]){ae.isNPVR=true;}else{ae.isNPVR=false;}}A.updateService(ai[ac].serviceId,ae);}if(aa>0&&ab>0){k();}}function v(aa){}function u(af){var ae={},ag=af.length,ac="",ad,aa,ab;q("getNPVRSubscriptionSuccess","Total number of packages: "+ag.toString());for(ab=0;ab<ag;ab++){aa=af[ab];ad=aa.purchasedItemUID;if(!ae[ad]){ae[ad]=aa;ac+=ad+",";}}ac=ac.substr(0,ac.length-1);h.getChannelsByPkgPattern(this,r,v,ac,z);}function M(aa){}function X(ad){var ab,ac,aa=0;m=true;A.removeEPGServicesUpdatedListener(U);if(ad.length===0){s();}else{for(ab=0;ab<ad.length;ab++){ac=ad[ab];A.cacheService(ac,function(){aa++;if(aa===ad.length){A.addEPGServicesUpdatedListener(U);$N.services.sdp.Subscriptions.refreshSubscriptions(function(){s();O();});setTimeout(function(){P();},1000);}});}}}function p(aa){}function O(){if(H){clearInterval(H);H=null;}H=setInterval(function(){$N.services.sdp.Subscriptions.refreshSubscriptions();},x);}return{init:function(ac){var aa,ab=10000;S=$N.services.sdp.ServiceFactory.get("AcquiredContentListService");h=$N.services.sdp.ServiceFactory.get("BTVService");if($N.Config.PERSISTENT_CACHE&&$N.platform.btv.PersistentCache.isDBAvailable()&&(!ac||!ac.forceRAMCache)){A=$N.platform.btv.PersistentCache;}else{A=$N.platform.btv.EPGCache;}if(!ac){ac={refreshInterval:12,maxDays:7,fetchDuration:2,locale:"en_gb",cacheEvents:true,refreshSubscriptionsInterval:E};if(A===$N.platform.btv.PersistentCache){ac.forceRAMCache=false;}else{ac.forceRAMCache=true;}}if(ac.cacheEvents===false){W=false;}x=ac.refreshSubscriptionsInterval?ac.refreshSubscriptionsInterval*3600000:E;if(A){z=ac.locale;G=ac.epgStart;l=ac.refreshInterval*3600*1000;C=ac.maxDays;t=ac.fetchDuration;I=t*3600*1000;V=C*((24/t)*I);U=function(){if(aa){clearTimeout(aa);}aa=setTimeout(function(){$N.services.sdp.Subscriptions.refreshSubscriptions(function(){});O();},ab);};A.addEPGServicesUpdatedListener(U);}else{if(s){s(false);}if(N){N(false);}}},registerListener:function(ab,aa){Q.push({callerContext:aa,callback:ab});},unregisterListener:function(aa){var ab;for(ab=0;ab<Q.length;ab++){if(Q[ab].callback===aa){Q.splice(ab,1);q("unregisterListener","Unregistered listener: "+aa.toString());break;}}},loadIPData:function(){if(A){$N.services.sdp.EPG.fetchAllChannels(X,p);}},loadNPVRData:function(){if(A&&S&&S.getByProductType){S.getByProductType(this,u,M,"NPVR");}else{}},setInitialEventsLoadedCallback:function(aa){N=aa;},setChannelsLoadedCallback:function(aa){if(!aa){aa=function(){};}s=aa;},isFetchingEvents:function(){return m;}};}());return $N.services.sdp.IPDataLoader;});define("jsfw/services/sdp/Ratings",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/apps/util/Util"],function(a,c,b){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.Ratings=(function(){var g=new $N.apps.core.Log("sdp","Ratings");var k;var d=null;var p=null;var m="en_gb";var f={};var e={};var o=[];var h={};function l(q){var r;f={};e={};h={};o=[];for(r=0;r<q.length;r++){f[q[r].uid]=q[r];e[q[r].precedenceValue]=q[r];o.push(q[r]);h[String(q[r].ratingCode)]=q[r];}o.sort(function(t,s){return s.precedenceValue-t.precedenceValue;});if(d){d();}}function n(q){m=q||m;k.getList(this,l,function(){f={};e={};o=[];h={};if(p){p();}},m);}return{cacheRatingTable:function(r,q,s){d=q;p=s;k=$N.services.sdp.ServiceFactory.get("RatingService");n(r);},isCached:function(){if($N.apps.util.Util.isEmptyObject(f)){return false;}return true;},getRatingLookup:function(){return f;},getRatingLookupByPrecedence:function(){return e;},getRatingLookupByCode:function(){return h;},getRatingLookupOrderedByPrecedence:function(){return o;},getUserAgeRatingForRatingId:function(q){return f[q]?f[q].ratingCode:null;}};}());return $N.services.sdp.Ratings;});var $N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.EPGEventFactory=(function(){var c;if(Object.defineProperty){c=function(g,e,f){Object.defineProperty(g,e,{get:f,enumerable:true});};}else{c=function(g,e,f){g.__defineGetter__(e,f);};}function b(g){if(g){try{return $N.apps.util.JSON.parse(g);}catch(f){return $N.app.StringUtil.extractObject(g,";","=");}}else{return"";}}function d(g){var e={_data:g},h=null,f=null;c(e,"eventId",function(){if(!f){f=$N.app.ChannelManager.getServiceIdFromMainChannelId(e._data.serviceRef)+$N.app.GeneralUtil.convertNumberToHexString(e._data.eventId,4);}return f;});c(e,"broadcastEventId",function(){return String(e._data.eventId);});c(e,"uniqueEventId",function(){var k=String(e._data.id).split("-");return k[k.length-1];});c(e,"serviceId",function(){return $N.app.ChannelManager.getServiceIdFromMainChannelId(e._data.serviceRef);});c(e,"startTime",function(){return new Date(e._data.period.start*1000).getTime();});c(e,"endTime",function(){return new Date(e._data.period.end*1000).getTime();});c(e,"title",function(){return e._data.Title;});c(e,"seriesName",function(){return e._data.ShortTitle;});c(e,"shortDesc",function(){return e._data.Description;});c(e,"longDesc",function(){return e._data.Description;});c(e,"parentalRating",function(){var k=e._data.editorial?parseInt(e._data.editorial.Rating.precedence):null;if(k&&k>=4&&k<7){k=7;}return k;});c(e,"seriesId",function(){return e._data.editorial?e._data.editorial.seriesRef:null;});c(e,"episodeId",function(){return e._data.editorial&&e._data.editorial.episodeNumber?String(e._data.editorial.episodeNumber):null;});c(e,"promoImage",function(){var k=e._data.PromoImages&&e._data.PromoImages.length?e._data.PromoImages[0]:"";if(k){k=k.replace("epg.jpg","epg_poster.jpg");}return k;});c(e,"definition",function(){return"";});c(e,"actors",function(){return e._data.Actors?e._data.Actors.join(", "):"";});c(e,"directors",function(){return e._data.Directors?e._data.Directors.join(", "):"";});c(e,"year",function(){return e._data.Year;});c(e,"country",function(){return(e._data.Countries&&e._data.Countries.length)?e._data.Countries[0]:"";});c(e,"source",function(){return $N.data.EPGEvent.SOURCE.MDS;});c(e,"genres",function(){return $N.app.genreUtil.getGenreObjectFromGenreString(e._data.DvbCategories);});c(e,"isCatchUp",function(){return e._data.isCatchUp;});c(e,"isStartOver",function(){return e._data.isStartOver;});c(e,"id",function(){return e._data.id;});c(e,"contentRef",function(){return e._data.contentRef;});c(e,"originalName",function(){if(!h){h=h||b(e._data.PrivateMetadata);}return h.Originalname;});c(e,"epOriginalName",function(){if(!h){h=h||b(e._data.PrivateMetadata);}return h.epOriginalname;});c(e,"displaySeasonEpisode",function(){if(!h){h=h||b(e._data.PrivateMetadata);}return(h.DisplaySeasonEpisode!=="0");});return e;}function a(h){var f,e,g=[];if(h.length>0){for(f=0;f<h.length;f++){e=d(h[f]);g.push(e);}}return g;}return{mapObject:function(f){var e=null;if(f){e=d(f);}else{e=null;}return e;},mapArray:function(e){if(e){return a(e);}else{return[];}}};}());var $N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.EPGServiceFactory=(function(){var f="dvb://",h="igmp://",b,d=new $N.apps.core.Log("sdp","EPGServiceFactory");if(Object.defineProperty){b=function(m,k,l){Object.defineProperty(m,k,{get:l});};}else{b=function(m,k,l){m.__defineGetter__(k,l);};}function e(k){return $N.data.EPGService.SERVICE_TYPE.TV;}function c(k){var m="";if(k&&k.indexOf("://")>-1){return m;}else{if(k&&k.indexOf(".")!==-1){var l=k.replace(new RegExp("[^.]","g"),"").length;if(l===2){m=f;}else{if(l===3){m=h;}else{}}}}return m;}function g(l){var k={_data:l};b(k,"serviceId",function(){return String(k._data.editorial.id);});b(k,"logicalChannelNum",function(){return k._data.editorial.tvChannel;});b(k,"serviceType",function(){return e(k._data);});b(k,"deliveryMethod",function(){return $N.data.EPGService.DELIVERY_TYPE.IP;});b(k,"serviceName",function(){return k._data.editorial.longName;});b(k,"uri",function(){return c(k._data.technical.NetworkLocation)+k._data.technical.NetworkLocation;});b(k,"parentalRating",function(){return $N.services.sdp.Ratings?$N.services.sdp.Ratings.getUserAgeRatingForRatingId(k._data.editorial.Rating):null;});k.isSubscribed=false;b(k,"casId",function(){return k._data.technical.drmId;});b(k,"logo",function(){return k._data.technical.PromoImages?k._data.technical.PromoImages[0]:"";});return k;}function a(n){var l,k,m=[];if(n.length>0){for(l=0;l<n.length;l++){k=g(n[l]);m.push(k);}}return m;}return{mapObject:function(l){var k=null;if(l){k=g(l);}else{k=null;}return k;},mapArray:function(k){if(k){return a(k);}else{return[];}}};}());define("jsfw/services/sdp/VOD",["jsfw/apps/core/Log","jsfw/services/sdp/Ratings","jsfw/services/sdp/ServiceFactory","jsfw/services/sdp/MetadataService","jsfw/services/sdp/Promotions","jsfw/apps/util/JSON"],function(a,b,e,c,f,d){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.VOD=(function(){var v=new $N.apps.core.Log("sdp","VOD"),ai,S,E,ao,ae=null,ag=1,l,ap,ay=null,G=[],W=[],q={},av=9999;function aq(az){ao=az;return this;}function ax(az){E=az;return this;}function aw(az){ap=az;return this;}function an(az){var aA;q={};for(aA=0;aA<az.length;aA++){q[az[aA].ratingCode]=az[aA];}}function n(az){if($N.services.sdp.Ratings&&$N.services.sdp.Ratings.getRatingLookupByCode()){q=$N.services.sdp.Ratings.getRatingLookupByCode();}else{$N.services.sdp.ServiceFactory.get("RatingService").getList(this,an,function(){},az);}}function au(az){var aB,aA="";if(az){aB=az.indexOf("_");aA=az.substr(0,aB+1)+az.substr(aB+1).toUpperCase();}return aA;}function r(az){l=az;n(l.toLowerCase());c.setLocale(au(l));return this;}function P(){return ao;}function aj(){return E;}function z(){return ap;}function k(){return l;}function I(){return ay;}function Z(){ai.getCurrentContext(this,function(az){ay=az;ay.featureNameList=W||null;},function(){});}function O(az){W=az;return this;}function x(){return W;}function ak(az){if(G.indexOf(az)===-1){G.push(az);}return this;}function T(aA){var az=G.indexOf(aA);if(az!==-1){G.splice(az,1);}return this;}function X(){G=[];return this;}function ab(){return G;}function al(aF,aC,aB,aE,az,aD){var aA;c=$N.services.sdp.MetadataService;ao=aF||null;E=aC||null;ap=aB||null;l=az||null;aA=au(az);if(aE!==undefined&&aE!==null){ae=aE;}if(az){n(az.toLowerCase());c.setLocale(aA);}ai=$N.services.sdp.ServiceFactory.get("ContextService");S=$N.services.sdp.ServiceFactory.get("BocPurchaseService");if(aD&&aD.length>0){O(aD);}}function J(aE,aB,aA,aD,az,aC){al(aE,aB,aA,aD,az,aC);}function ac(aB,aA,az){if(!az){az={};}if(aA){az[aB]=aA;}return az;}function R(aA,aC,az,aB){if(!aB){aB={};}if(aA&&aA.length){aB=ac("technical.deviceType",{"$in":aA},aB);}if(aC){aB=ac("voditem.node",aC,aB);}if(az){aB=ac("editorial.Title",{"$regex":az},aB);}aB=ac("isPurchasable",true,aB);aB=ac("isVisible",true,aB);return aB;}function w(aE){var aC,aA,aD,aG,aF,aB,az=function(aI,aH){return aI.price.value-aH.price.value;};for(aC=0;aC<aE.length;aC++){aD=aE[aC];if($N.Config.PROMOTIONS&&$N.services.sdp.Promotions.isPromotionAvailableForAsset(aD)){aD.isPromotionAvailable=true;}else{aD.isPromotionAvailable=false;}for(aA=0;aA<aD.technicals.length;aA++){aG=aD.technicals[aA].products;aG.sort(az);aF=aG[0].price;if(!aB||aF.value<aB.value){aB=aF;}}aD.lowestPrice=aB;}return aE;}function L(aC){var az=[],aA=0,aB;for(aA=0;aA<aC.length;aA++){aB=aC[aA];aB.parentalRatingValue=q[aB.Rating]?q[aB.Rating].precedenceValue:null;az.push(aB);}return az;}function ad(aA,aB,aD){var az=function(aE){if(aA){aA(aE.nodes,aE.z);}if(aB){aB(aE.nodes,aE.z);}},aC={isRoot:true};if(G&&G.length>0){aC.title={"$nin":G};}c.getVODData(this,az,aD,c.RequestType.Catalogues,aC);}function V(aC,aB,aA,aE){var aD={},az=function(aG){if(aC){aC(aG.total_records);}},aF=function(aG){if(aB){aB(aG);}};aD=R(W,aA,aE,aD);c.getVODData(this,az,aF,c.RequestType.Assets,aD,null,["id"],av,0);}function at(aB,aA,aC,aE){var aD={},az=function(aG){if(aB){aB(aG.total_records);}},aF=function(aG){if(aA){aA(aG);}};if(W&&W.length){aD["technical.deviceType"]={"$in":W};}if(aE){aD["editorial.Title"]={"$regex":aE};}aD["product.id"]=aC;c.getVODData(this,az,aF,c.RequestType.Assets,aD,null,["id"],av,0);}function K(aB,aC,aE,aA){var aD={},az=function(aF){if(aB){aB(aF.nodes,aF.z);}if(aC){aC(aF.nodes,aF.z);}};aD=ac("parent",aA,aD);c.getVODData(this,az,aE,c.RequestType.Catalogues,aD);}function t(aK,az,aB,aJ,aE,aI,aF,aG){var aA,aD,aH,aC=function(aL){var aM=L(aL.editorials);if(aK){aK(aM);}if(az){az(w(aM));}};aH=aI||0;aD=(aF-aI)||null;aA=R(W,aJ,null,aA);c.getVODData(this,aC,aB,c.RequestType.Assets,aA,aG,null,aD,aH);}function C(aK,az,aB,aH,aE,aJ,aF,aG){var aA={},aD,aI,aC=function(aL){var aM=L(aL.editorials);if(aK){aK(aM);}if(az){az(w(aM));}};aI=aJ||0;aD=(aF-aJ)||null;aA["product.id"]=aH;aA=R(W,null,aE,aA);c.getVODData(this,aC,aB,c.RequestType.Assets,aA,aG,null,aD,aI);}function N(aA,aE,aB,aD){var aC,az=function(aG){if(aE){aE(aG.editorials);}},aF=function(aG){if(aD){aD(aG);}else{v("getAssets","failure callback "+$N.apps.util.JSON.stringify(aG));}};if(aA&&aA.length){aC=ac("product.id",{"$in":aA},aC);}aC=R(W,null,null,aC);c.getVODData(this,az,aF,c.RequestType.Assets,aC,aB);}function m(aB,aE,aA,aD){var aC,az=function(aG){if(aE){aE(aG.editorials);}},aF=function(aG){if(aD){aD(aG);}else{v("getAssets","failure callback "+$N.apps.util.JSON.stringify(aG));}};if(aB&&aB.length){aC=ac("voditem.node",{"$in":aB},aC);aC=ac("product.type","subscription",aC);}aC=R(W,null,null,aC);c.getVODData(this,az,aF,c.RequestType.Assets,aC,aA,null,50);}function U(aA,aE,aB,aD){var aC,az=function(aG){if(aE){aE(aG.editorials);}},aF=function(aG){if(aD){aD(aG);}else{v("getAssets","failure callback "+$N.apps.util.JSON.stringify(aG));}};aC=R(W,aA,null,aC);c.getVODData(this,az,aF,c.RequestType.Assets,aC,aB);}function ar(aG,aB,aF,aA,aE,aC){var az=function(aH){var aI=aH.editorials;if(aG){aG(aI,aH.z);}if(aB){aB(w(aI));}},aD;aD=R(W,aA,aE,aD);c.getVODData(this,az,aF,c.RequestType.Assets,aD,aC);}function o(aC,aA,aE,aB){var az=function(aF){aA(aF.editorials);},aD=ac("editorial.id",aC,{});aD=R(W,null,null,aD);c.getVODData(this,az,aE,c.RequestType.Assets,aD,aB);}function h(aB,aA,aE,aD){aD=(aD!==undefined&&aD!==null)?aD:true;var az=function(aF){var aG=aF.editorials;if(aD){aG=L(w(aG));}if(aG&&aG.length>0){aA(aG[0]);}else{if(aE){aE();}}},aC=ac("editorial.id",aB,{});if(aA){aC=R(W,null,null,aC);c.getVODData(this,az,aE,c.RequestType.Assets,aC);}}function Q(aC,aA,aE,aD){aD=(aD!==undefined&&aD!==null)?aD:true;var az=function(aJ){var aL={},aK=[],aG={},aI,aF,aH;if(aD){aJ.editorials=L(w(aJ.editorials));}for(aH=0,aI=aJ.editorials.length;aH<aI;aH++){aL[aJ.editorials[aH].id]=aJ.editorials[aH];}for(aH=0,aI=aC.length;aH<aI;aH++){aF=aL[aC[aH]];if(aF){aK.push(aF);}}aG.totalRecords=aJ.totalRecords;aG.version=aJ.version;aG.editorials=aK;if(aA){aA(aG);}},aB={};aB["editorial.id"]={"$in":aC};aB=R(W,null,null,aB);c.getVODData(this,az,aE,c.RequestType.Assets,aB);}function ah(aE,aA,aD,aC){aC=(aC!==undefined&&aC!==null)?aC:true;var az=function(aF){var aG=aF.editorials;if(aC){aG=L(w(aG));}if(aA){aA(aG[0]);}},aB=ac("technical.id",aE,{});aB=R(W,null,null,aB);c.getVODData(this,az,aD,c.RequestType.Assets,aB);}function B(aD,aA,aC){var az=function(aE){if(aE.error){if(aC){aC();}}else{var aF=aE.editorials;if(aA){aA(aF[0]);}}},aB=ac("editorial.id",aD,{});aB=R(W,null,null,aB);c.getVODData(this,az,aC,c.RequestType.Assets,aB);}function am(aB,aA,aD){var az=function(aE){if(aE.error){if(aD){aD();}}else{var aF=aE.editorials;if(aA){aA(aF[0]);}}},aC=ac("technical.media.AV_EncryptedTS.fileName",aB,{});aC=R(W,null,null,aC);c.getVODData(this,az,aD,c.RequestType.Assets,aC,1);}function aa(aB,aA,aD){var az=function(aE){if(aE.error){if(aD){aD();}}else{var aF=aE.editorials;if(aA){aA(aF);}}},aC=ac("technical.media.AV_EncryptedTS.fileName",{"$in":aB});aC=R(W,null,null,aC);c.getVODData(this,az,aD,c.RequestType.Assets,aC,1);}function g(aB,aA,aF,aE,aC){aE=(aE!==undefined&&aE!==null)?aE:true;var az=function(aG){var aH=aG.editorials;if(aE){aH=L(w(aH));}if(aA){aA(aG);}},aD=ac("product.promotions",aB,{});aD=R(W,null,null,aD);c.getVODData(this,az,aF,c.RequestType.Assets,aD,aC);}function A(aJ,aB,az,aG,aF,aI,aE){var aA={},aC,aH,aD=function(aK){var aL=aK.editorials;if(aG){aL=L(w(aL));}if(aB){aB(aK);}};aH=aI||0;aC=(aE-aI)||null;aA=ac("product.promotions",aJ,{});aA=R(W,null,null,aA);c.getVODData(this,aD,az,c.RequestType.Assets,aA,aF,null,aC,aH);}function af(aD,aC,aB,aF,aA){var az={},aE;ai.getCurrentContext(this,function(aG){ay=$N.apps.util.JSON.stringify(aG);if(aA){az=$N.apps.util.JSON.stringify({polgrpOriginKey:aD,polgrpOriginId:ag,offerId:aA});}else{az=$N.apps.util.JSON.stringify({polgrpOriginKey:aD,polgrpOriginId:ag});}aE=$N.apps.util.JSON.stringify("ACCOUNT");S.purchasePolicy(this,aB,aF,ay,az,aE);},aF);}function M(aB,aC,aA,az,aD){af(aC.id,this,az,aD);}function u(aB,aD,aA,az,aC){}function s(aD,aB,aA,az,aC){}function D(aC,aA,az,aB){}function y(az){}function H(aC,aA,aB,az,aD){}function F(aB,az,aD){var aA,aC=function(aE){if(az){az(aE);}};aA=ac("id",aB.seriesRef,{});if(aB.seriesRef){c.getVODData(this,aC,aD,c.RequestType.Series,aA);}else{aD("No series reference for asset");}}function p(aD,aA,aE,aB){var aC,az=function(aF){if(aA){aA(aF);}};if(aD.seriesRef){aC=ac("editorial.seriesRef",aD.seriesRef,{});aC=R(W,null,null,aC);c.getVODData(this,az,aE,c.RequestType.Assets,aC,aB);}else{aE("No series reference for asset");}}function Y(az,aG,aE,aC,aB,aA,aD,aF){c.getVODData(this,az,aG,aE,R(W,null,null,aC),aB,aA,aD,aF);}return{init:al,initialise:J,setAccountId:aq,setUserId:ax,setSmartCardId:aw,setLocale:r,setFeatureNameList:O,getFeatureNameList:x,refreshContext:Z,getAccountId:P,getUserId:aj,getSmartCardId:z,getLocale:k,getContext:I,getPurchasedAssetsByProductIdArray:N,getSampleAssetsFromNodeArray:m,getAssets:U,addFilteredCatalogue:ak,removeFilteredCatalogue:T,clearFilteredCatalogues:X,getAssetSchedulesByUid:o,getDetailedAssetByUid:h,getDetailedAssetByTechnicalId:ah,getAssetsByIds:Q,getAssetsByPromotionId:g,getPagedAssetsByPromotionId:A,getFilteredCatalogues:ab,getRootCatalogues:ad,getDetailedCatalogues:K,getDetailedAssets:ar,getPagedDetailedAssets:t,getPagedDetailedAssetsByProduct:C,getCommonPolicyGroupsForAssets:y,getPolicyByPolicyGroupId:H,subscribeToAsset:s,subscribeToPolicyGroup:af,subscribeToAssetUsingPolicy:u,subscribeToAssetUsingOffer:M,unsubscribeAsset:D,getCatalogueScheduleCount:V,getCatalogueScheduleCountByProduct:at,getSeriesForAsset:F,getAssetsInSeriesForAsset:p,getVODData:Y,getAssetByProductId:B,getAssetByFilename:am,getAssetsByFilename:aa};}());$N.services.sdp.VOD.POLICY_FREQUENCY={};$N.services.sdp.VOD.POLICY_FREQUENCY.IMPULSE="IMP";$N.services.sdp.VOD.POLICY_FREQUENCY.SUBSCRIPTION="REC";$N.services.sdp.VOD.POLICY_FREQUENCY.BUNDLE="MUL";return $N.services.sdp.VOD;});define("jsfw/services/sdp/AcquiredContent",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/services/sdp/VOD","jsfw/services/sdp/MetadataService"],function(a,d,c,b){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.AcquiredContent=(function(){var m=new $N.apps.core.Log("sdp","AcquiredContent");var S=100,G=2000;var B=null,g="en_gb";var l,n;var r=[],s={},E={};var p={},D={},e={},K={};var L=0,R=0,W=0,Q=0;var k=null;var z=null;function v(){if(z){if(L<R||W<Q){setTimeout(function(){v();},S);}else{z();}}}function O(Y){var Z,ac,ab,X,aa;L++;if(Y){Z=Y;ac=Z.technicals[0];if(ac){ab=ac.id;if(!s[ab]){for(aa=r.length-1;aa>=0;aa--){if(r[aa]&&r[aa].purchasedItemOriginKey===ab){X=r[aa].expiryDate;if(!ac.expiryDate||ac.expiryDate<X){ac.expiryDate=X;Z.expiryDate=X;D[Z.id]=true;}break;}}s[ab]=Z;}}else{}}else{}}function t(Y,ab,X,aa){var ac,Z;if(Y){L++;if(aa){W++;}if(Y.length){Y.forEach(function(ad){var ae;if(aa){K[ad.id]=true;}else{D[ad.id]=true;}for(Z=ad.technicals.length-1;Z>=0;Z--){ae=ad.technicals[Z];if(aa){e[ae.id]=true;}else{if(!s[ae.id]){if(!ae.expiryDate||ae.expiryDate<X){ae.expiryDate=X;ad.expiryDate=X;D[ad.id]=true;}s[ae.id]=ad;}}ac=ae.products[0];if(!E[ab]&&ac.id===ab){ac.expiryDate=X;E[ab]=ac;E[ab].frequencyType=p[ab];}}});}else{}}else{}}function V(X){r=X;s={};D={};E={};p={};e={};K={};L=0;R=0;W=0;Q=0;var aa=null,Z=function(ad){},ab=function(ad){};if(r&&r.length){r.forEach(function(ae){var ad=false;if(ae.purchasedItemType==="AST"){R++;$N.services.sdp.VOD.getDetailedAssetByTechnicalId(ae.purchasedItemOriginKey,O,Z,false);}else{if(ae.purchasedItemType==="PLG"){p[ae.purchasedItemOriginKey]=ae.frequencyType;R++;if(ae.frequencyType===$N.services.sdp.AcquiredContent.POLICY_GROUP_SUBSCRIPTION){Q++;ad=true;}$N.services.sdp.VOD.getPagedDetailedAssetsByProduct(function(af){t(af,ae.purchasedItemOriginKey,ae.expiryDate,ad);},null,ab,ae.purchasedItemOriginKey,"",0,G);}}if(aa===null||ae.expiryDate<aa){aa=ae.expiryDate;}});}if(aa){var Y=new Date().getTime();var ac=aa-Y;if(ac<0){ac=120000;}if(k){clearTimeout(k);}if(ac<43200000){k=setTimeout(function(){U();},ac);}}v();}function A(X){}function f(X){return s[X]?true:false;}function H(X){return D[X]?true:false;}function q(X){return e[X]?true:false;}function y(X){return K[X]?true:false;}function M(X){if(s[X]||e[X]){return true;}return false;}function T(X){return p[X]?true:false;}function F(){var X=[],Z,Y;for(Z in s){if(s.hasOwnProperty(Z)){Y=s[Z].technicals[0];X.push(Y);}}return X;}function o(){var X=[],Y;for(Y in s){if(s.hasOwnProperty(Y)){X.push(s[Y]);}}return X;}function w(Y){var X=[],Z;if(Y){for(Z in E){if(E.hasOwnProperty(Z)&&E[Z].frequencyType===Y){X.push(E[Z]);}}}else{for(Z in E){if(E.hasOwnProperty(Z)){X.push(E[Z]);}}}return X;}function x(X){return s[X]?s[X].technicals[0].expiryDate:null;}function J(X){return E[X]?(E[X].endValidity*1000):null;}function P(Y){var X=r.filter(function(Z){return(!Y||Z.productType===Y);});return X;}function I(X){z=X;}function C(){z=null;}function U(){l.getByAccountUID(this,V,A,B,"CURRENT",g);}function h(X){g=X;}function N(Y,X){l=$N.services.sdp.ServiceFactory.get("AcquiredContentListService");B=Y;h(X||g);U();n=$N.services.sdp.MetadataService;}function u(Y,X){N(Y,X);}return{init:N,initialise:u,refresh:U,isAssetPurchased:f,doesContainPurchasedAsset:H,isAssetSubscribed:q,doesContainSubscribedAsset:y,isAssetPurchasedOrSubscribed:M,isPolicyGroupPurchased:T,getAssets:F,getAssetsWithEditorialData:o,getPolicyGroups:w,getAssetExpiryDate:x,getPolicyGroupExpiryDate:J,getAclItemsByProductType:P,registerAclChangeCallBack:I,removeAclChangeCallback:C,setLocale:h,POLICY_GROUP_IMPULSE:"IMP",POLICY_GROUP_SUBSCRIPTION:"REC",POLICY_GROUP_BUNDLE:"MUL",PRODUCT_NPVR:"NPVR"};}());return $N.services.sdp.AcquiredContent;});define("jsfw/services/sdp/StartOver",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/platform/btv/EPG"],function(a,b,c){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.StartOver=(function(){var h=new $N.apps.core.Log("sdp","StartOver");var k=1;var p=0;var s=48;var r=60;var t=0;var v=1;var l=2;var m=3;var w=3000;var f=null;var d=t;var g=null;var u=null;var q=null;var n=function(y){f={};if(y){f=y;}d=l;};var x=function(z){var y=this;d=l;setTimeout(y.fetchSOEvents,r*60*1000);};var o=function(){var A=this;if(f){d=m;}else{d=v;}var B=new Date().getTime()-p*60*60*1000;var z=new Date().getTime()+s*60*60*1000;var D=[];var F=$N.platform.btv.EPG.getAllChannels();var G=F.length;var y;var E;for(y=0;y<G;y++){E=F[y];if(E.isNPVR){D.push(E.serviceId);}}var C=D.join();if(C){u.getSOCUEventsByIdentifierTimeAndType(A,n,x,C,B,z,"SO",q);}else{d=l;}};var e=function(y){if(d===l){if(g){clearTimeout(g);}g=setTimeout(function(){o();},w);}};return{init:function(A,y){var z=this;if(d!==t){return;}u=A||$N.services.sdp.ServiceFactory.get("BTVService");y=y||"en_gb";o();$N.platform.btv.EPG.registerRefreshCallback(e,this);setInterval(o,k*3600*1000);},getSOEvents:function(){if(d===t){}if(d===v){}if(d===m){}return f;},getSOEventForServiceAndTime:function(C,B,y){var A,D=null,z;if(d===t){}if(d===v){}if(d===m){}if(f){z=f[C];if(z){for(A=0;A<z.length;A++){if(z[A].startTime===B){if(!y){D=z[A];break;}else{if(z[A].endTime===y){D=z[A];break;}}}}}}return D;},isStartOverEvent:function(A,z){var y=this.getSOEventForServiceAndTime(A,z.startTime,z.endTime);return(y!==null);},setLocale:function(y){q=y;}};}());return $N.services.sdp.StartOver;});define("jsfw/services/sdp/Bookmark",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory"],function(a,f){var c=new $N.apps.core.Log("SDP","Bookmark");var b;var e=function(){this._bookMarkService=$N.services.sdp.ServiceFactory.get("BookmarkService");this._bookMarkUid=null;this._contentUid=null;this._contentType=null;this._duration=0;this._acctUID=null;this._locale="en_gb";};e.ContentTypes={AST:"AST",ASSET:"ASSET",RECORDING:"RECORDING"};e.init=function(g){b=new e();b.setAccountId(g);};e.getBookmarkForContent=function(l,k,h,g){b.setContentUid(l);b.setContentType(k);b.setLocale(g);b.getCurrentBookmark(h);};e.deleteOrBookmarkCurrentPositionForContent=function(h,k,n,m,l,g){b.setContentUid(n);b.setContentType(m);b.setContentDuration(k);b.setLocale(g);b.deleteOrBookmarkCurrentPosition(h,l);};e.deleteBookmarkForContent=function(l,k,h,g){b.setContentUid(l);b.setContentType(k);b.setLocale(g);b.getCurrentBookmark(function(m){if(m!==0){b.deleteBookmark(h);}else{if(h){h(0);}}});};e.BOOKMARKABLE_CONTENT_RATIO=0.96;var d=e.prototype;d.getContentUid=function(){return this._contentUid;};d.setLocale=function(g){if(g){this._locale=g;}return this;};d.setContentUid=function(g){this._contentUid=g;return this;};d.setContentType=function(g){this._contentType=g;return this;};d.setAccountId=function(g){this._acctUID=g;return this;};d.init=function(l,h,k,g){this.setContentUid(l);this.setContentType(h);this.setAccountId(k);this.setLocale(g);return this;};d.setContentDuration=function(g){this._duration=parseInt(g,10);};d.getCurrentBookmark=(function(){var h,l;var k=function(m,n){if(m&&m.position>0){if(m.uID&&!m.uid){m.uid=m.uID;}c("getBookmarkForAccountAndContentSuccess","The Position is  "+String(m.position));l._bookMarkUid=m.uid;l._bookmarkPosition=m.position;h(l._bookmarkPosition,n);}else{h(0,n);}};var g=function(m,n){h(0,n);};return function(m){l=this;h=m;if(this._contentType==="ASSET"||this._contentType==="AST"){this._bookMarkService.getBookmarkForContent(this,function(n){k(n,l._contentUid);},function(n){g(n,l._contentUid);},this._contentUid,this._contentType,this._locale);}else{this._bookMarkService.getBookmarkForOrigin(this,function(n){k(n,l._contentUid);},function(n){g(n,l._contentUid);},2,this._contentUid,this._contentType,e.ContentTypes.ASSET);}};}());d.isCurrentPositionBookmarkable=function(g){var h=this._duration*e.BOOKMARKABLE_CONTENT_RATIO;return(g<h);};d.bookmarkCurrentPosition=function(g,h){if(!h){h=function(){};}if(this._contentUid){if(this._contentType==="ASSET"||this._contentType==="AST"){this._bookMarkService.setBookmarkForContent(this,function(k){h(true);},function(k){h(false);},this._contentUid,this._contentType,parseInt(g,10),this._locale);}else{this._bookMarkService.setBookmarkForOrigin(this,function(k){h(true);},function(k){h(false);},2,this._contentUid,this._contentType,e.ContentTypes.ASSET,parseInt(g,10));}}else{}};d.deleteOrBookmarkCurrentPosition=function(g,h){if(!h){h=function(){};}if(this.isCurrentPositionBookmarkable(g)){this.bookmarkCurrentPosition(g,h);return true;}this.deleteBookmark(h);return false;};d.deleteBookmark=function(g){if(!g){g=function(){};}if(this._bookMarkUid){this._bookMarkService.deleteBookmarkByUid(this,function(h){g(true);},function(h){g(false);},this._bookMarkUid);}};window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.Bookmark=e;return e;});define("jsfw/services/sdp/Preferences",["jsfw/services/sdp/ServiceFactory"],function(a){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.Preferences=(function(){var b="";var k="";var g;var m=100;var c="_LENGTH";function n(p,r,o){var q=function(u){var t;var s=null;for(t=0;t<u.length;t++){if(u[t].paramName===p){s=u[t];break;}}if(s){r(s);}else{o();}};g.getList(this,q,o,b,null,k);}function d(s,w,u,r,z,o){var x=w.length,q=Math.ceil(w.length/m),v,p=0,y=function(){p++;if(p===q+1){z();}};for(var t=0;t<q;t++){v=w.substring(t*m,(t+1)*m);h(s+"_"+t,v,u,r,y,y,true);}h(s+c,t,u,r,y,y,true);}function h(q,w,u,p,x,o,v){p=p?p.toUpperCase():null;q=q.toUpperCase();var t=this;var r=function(){if(w.length>m){d(q,w,u,p,x,o);}else{if(!v){e(q,function(){g.create(t,x,o,b,p,k,q,w,u,null,null);},function(){g.create(t,x,o,b,p,k,q,w,u,null,null);});}else{g.create(t,x,o,b,p,k,q,w,u,null,null);}}};var s=function(A){var z;var y=null;for(z=0;z<A.length;z++){if(A[z].paramName===q){y=A[z].uid;break;}}if(y){g.del(this,r,o,y);}else{r();}};g.getList(this,s,o,b,null,k);}function e(p,q,o){n(p+c,function(r){g.del(this,q,o,r.uid);},o);}function f(r,q,w,o){var s,t=[],v=0,u,x=function(y){n(r+"_"+y,function(z){p(y,z);},function(){o();});},p=function(y,z){v++;t[y]=z.paramValue;if(v===q){w(t.join(""));}};for(s=0;s<q;s++){x(s);}}function l(o,u){var q;var s=0;var p;var r=function(){s++;if(s===p){e(o,u,u);}};var t=function(v){n(v,function(w){g.del(this,r,r,w.uid);},r);};n(o+c,function(v){p=parseInt(v.paramValue,10);if(p>0){for(q=0;q<p;q++){t(o+"_"+q);}}},u);}return{init:function(p,o){g=$N.services.sdp.ServiceFactory.get("PreferenceService");b=p;k=o;},initialise:function(p,o){this.init(p,o);},get:function(q,s,o){var u=function(v){s(v.paramValue);};var t=function(){if(o){o();}};var r=function(v){var w=parseInt(v.paramValue,10);if(w>0){f(q,w,s,o);}};var p=function(){n(q,u,t);};n(q+c,r,p);},set:function(p,t,r,s,u,o){var q=function(){h(p,t,r,s,u,o);};l(p,q,q);},deletePreference:function(p,q,o){var r=function(s){g.del(this,q,o,s.uid);};l(p,function(){n(p,r,o);},function(){n(p,r,o);});}};}());return $N.services.sdp.Preferences;});define("jsfw/services/sdp/Provision",["jsfw/apps/core/Log","jsfw/services/sdp/ServiceFactory","jsfw/apps/util/Util","jsfw/platform/system/Device"],function(a,g,f,b){var c=new $N.apps.core.Log("sdp","Provision"),d="info",e=false;var h=function(k,l){this._accountNumber=k;this._accountPassword=l;};h.prototype.init=function(k,l,m){this._provisionService=$N.services.sdp.ServiceFactory.get("ProvisionService");this._macAddress=l;this._stbSN=$N.apps.util.Util.removeSpaces(k);this._caSN=$N.apps.util.Util.removeSpaces(m);};h.prototype.postProvisionCardless=function(m,k){var l=this;c("postProvisionCardless","ACCNO: "+this._accountNumber+" PWD: "+this._accountPassword+" MACADDR: "+this._macAddress+" STBSN: "+this._stbSN+" CASN: "+this._caSN);setTimeout(function(){l._provisionService.postProvisionCardless(l,m,k,l._accountNumber,l._accountPassword,l._macAddress,l._stbSN,l._caSN);},0);};h.prototype.postProvisionByMACAddress=function(m,l){var k=this;c("["+this._APP_NAME+"serialNumber == "+$N.platform.system.Device.getSerialNumber());c("postProvisionByMACAddress","ACCNO: "+this._accountNumber+" PWD: "+this._accountPassword+" MACADDR: "+this._macAddress+" STBSN: "+this._stbSN);setTimeout(function(){k._provisionService.postProvisionByMACAddress(k,m,l,k._accountNumber,k._accountPassword,k._macAddress,k._stbSN);},0);};h.prototype.postProvisionCardbased=function(n,m,k){var l=this;c("postProvisionCardbased","ACCNO: "+this._accountNumber+" PWD: "+this._accountPassword+" STBSN: "+this._stbSN+" CASN: "+this._caSN+" SCID: "+n);setTimeout(function(){l._provisionService.postProvisionCardbased(l,m,k,l._accountNumber,l._accountPassword,l._stbSN,l._caSN,n);},0);};window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.Provision=h;return h;});define("jsfw/services/sdp/VODSearch",["jsfw/services/sdp/VOD","jsfw/services/sdp/MetadataService","jsfw/apps/util/JSON"],function(e,c,d){var a;function b(){this._maxPagedResults=50;this._successCallback=function(){};this._failureCallback=function(){};this._metaDataService=$N.services.sdp.MetadataService;a=window.JSON||$N.apps.util.JSON;this._MAX_NON_PAGING_RESULTS=100;}b.prototype._searchCallback=function(p,k,g){var h={},n=this,l=0,f=[],m={start:g||0,numberFound:p.numberFound},o=function(q){if(q&&q.editorials&&q.editorials.length>0){m.editorials=q.editorials;}else{m.editorials=[];}n._successCallback(m);};if(k){m.numberFound=p.numberFound;}else{if(p.numberFound>this._MAX_NON_PAGING_RESULTS){m.numberFound=this._MAX_NON_PAGING_RESULTS;}}for(l=0;l<p.docs.length;l++){f.push(p.docs[l].id);}$N.services.sdp.VOD.getAssetsByIds(f,o,this._failureCallback);};b.prototype._doSearch=function(k,f,p,m,g){var n=[],l,h=false,o=this;if(m&&(p||p===0)){h=true;}l=(m||this._MAX_NON_PAGING_RESULTS)-(p||0);l=l>this._maxPagedResults?this._maxPagedResults:l;if(g&&g.length){n=g.slice(0);}n.push("scope:vod");this._metaDataService.doSearch(this,function(q){o._searchCallback(q,h,p);},this._failureCallback,k,n,["id"],null,null,l,p,f);};b.prototype.search=function(h,g,f,k){this._doSearch(h,null,g,f,k);};b.prototype.pagedSearch=function(h,g,f){this._doSearch(h,null,g,f);};b.prototype.searchByKeyword=function(f){this._doSearch(f);};b.prototype.searchByTitle=function(l,g,f,h){var k="title";this._doSearch(l,k,g,f,h);};b.prototype.searchByActor=function(k,g,f,h){var l="actors";this._doSearch(k,l,g,f,h);};b.prototype.searchByDirector=function(f,h,g,k){var l="directors";this._doSearch(f,l,h,g,k);};b.prototype.setSuccessCallback=function(f){this._successCallback=f;return this;};b.prototype.setFailureCallback=function(f){this._failureCallback=f;return this;};b.prototype.setMaxPagedResults=function(f){this._maxPagedResults=f;return this;};b.prototype.getMaxPagedResults=function(){return this._maxPagedResults;};window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.VODSearch=b;return b;});define("jsfw/services/sdp/PRM",["jsfw/services/sdp/ServiceFactory"],function(a){window.$N=$N||{};$N.services=$N.services||{};$N.services.sdp=$N.services.sdp||{};$N.services.sdp.PRM=(function(){var b;var c;return{getLicence:function(e,h,d,f,g){b=$N.services.sdp.ServiceFactory.get("LicenseService");if(b&&b.getLicenseWithAdditionalInfo){b.getLicenseWithAdditionalInfo(this,e,h,d,"",f,g);return true;}this._log("getLicence","Unable to make a call to LicenseService.getLicenseWithAdditionalInfo().","warn");return false;},purchaseGetLicense:function(f,d,n,m,e,l,h,g,k){c=$N.services.sdp.ServiceFactory.get("CODService");if(c&&c.purchaseContentAndGetLicenseWithAdditionalInfo){c.purchaseContentAndGetLicenseWithAdditionalInfo(this,f,d,l,n,h,g,k,"","",m,e);return true;}this._log("sendVODPlayoutRequest","Unable to make a call to CODService.purchaseContentAndGetLicenseWithAdditionalInfo().","warn");return false;},fetchNMPEntitlements:function(d,h,k,e,f,g){$N.services.sdp.ServiceFactory.get("NmpExtendedService").getEntitlements(this,d,h,k,e,f,g);},transformEntitlements:function(e,h,k,f,d,g){$N.services.sdp.ServiceFactory.get("NmpExtendedService").transformEntitlements(this,e,h,k,f,d,g);}};}());return $N.services.sdp.PRM;});define("jsfw/platform/output/AV",["jsfw/apps/core/Log"],function(a){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.AV=(function(){var b=new $N.apps.core.Log("output","AV");var c={init:function(){if(typeof $N.platform.output.AV.VideoResolution==="function"){$N.platform.output.AV.VideoResolution=this.VideoResolution();$N.platform.output.AV.VideoAspectRatio=this.VideoAspectRatio();$N.platform.output.AV.VideoAspectMode=this.VideoAspectMode();$N.platform.output.AV.Video3dFormat=this.Video3dFormat();$N.platform.output.AV.AudioType=this.AudioType();}},initialise:function(){this.init();},isHDOutputAvailable:function(){var d=CCOM.System.getHdmiVideoSettings();if(d.error){return false;}return true;},isAnalogueOutputAvailable:function(){var d=CCOM.System.getAnalogueVideoAspectRatio();if(d.error){return false;}return true;},getResolution:function(){var d=CCOM.System.getHdmiVideoSettings();if(d.error){return null;}return d.videoFormat;},setResolution:function(d){return CCOM.System.setHdmiVideoSettings(d,CCOM.System.HDMI_VIDEO_COLOR_TYPE_RGB).error?false:true;},getHDVideoAspectMode:function(){var d=CCOM.System.getHdmiVideoAspectMode();if(d.error){return null;}return d.aspectMode;},setHDVideoAspectMode:function(d){return CCOM.System.setHdmiVideoAspectMode(d).error?false:true;},getAnalogueVideoAspectMode:function(){var d=CCOM.System.getAnalogueVideoAspectMode();if(d.error){return null;}return d.aspectMode;},setAnalogueVideoAspectMode:function(d){return CCOM.System.setAnalogueVideoAspectMode(d).error?false:true;},setScaleMethod:function(d){this._setAnalogueVideoAspectMode(d);},getAspectRatio:function(){var d=CCOM.System.getAnalogueVideoAspectRatio();if(d.error){return null;}return d.aspectRatio;},setAspectRatio:function(d){return CCOM.System.setAnalogueVideoAspectRatio(d).error?false:true;},getAudioDelay:function(){var d=CCOM.System.getHdmiAudioDelay();if(d.error){return null;}return d.delayMs;},setAudioDelay:function(d){return CCOM.System.setHdmiAudioDelay(d).error?false:true;},getAudioType:function(){var d=CCOM.System.getHdmiAudioType();if(d.error){return null;}return d.audioType;},setAudioType:function(d){return CCOM.System.setHdmiAudioType(d).error?false:true;},get3DFormat:function(){var d=CCOM.System.getHdmi3dFormat();if(d.error){return null;}return d.format;},set3DFormat:function(d){return CCOM.System.setHdmi3dFormat(d).error?false:true;},VideoResolution:function(){return{HDMI_VIDEO_FORMAT_480I:CCOM.System.HDMI_VIDEO_FORMAT_480I,HDMI_VIDEO_FORMAT_480P:CCOM.System.HDMI_VIDEO_FORMAT_480P,HDMI_VIDEO_FORMAT_576I:CCOM.System.HDMI_VIDEO_FORMAT_576I,HDMI_VIDEO_FORMAT_576P:CCOM.System.HDMI_VIDEO_FORMAT_576P,HDMI_VIDEO_FORMAT_720P:CCOM.System.HDMI_VIDEO_FORMAT_720P,HDMI_VIDEO_FORMAT_1080I:CCOM.System.HDMI_VIDEO_FORMAT_1080I,HDMI_VIDEO_FORMAT_1080P:CCOM.System.HDMI_VIDEO_FORMAT_1080P};},VideoAspectRatio:function(){return{ASPECT_RATIO_4_3:CCOM.System.ANALOGUE_VIDEO_ASPECT_RATIO_4_3,ASPECT_RATIO_16_9:CCOM.System.ANALOGUE_VIDEO_ASPECT_RATIO_16_9};},VideoAspectMode:function(){return{HDMI_PILLAR_BOX:CCOM.System.HDMI_VIDEO_ASPECT_MODE_PILLAR_BOX,HDMI_STRETCH:CCOM.System.HDMI_VIDEO_ASPECT_MODE_STRETCH,ANALOGUE_LETTER_BOX:CCOM.System.ANALOGUE_VIDEO_ASPECT_MODE_LETTER_BOX,ANALOGUE_PAN_SCAN:CCOM.System.ANALOGUE_VIDEO_ASPECT_MODE_PAN_SCAN,ANALOGUE_CENTER_CUT:CCOM.System.ANALOGUE_VIDEO_ASPECT_MODE_CENTER_CUT,ANALOGUE_STRETCH:CCOM.System.ANALOGUE_VIDEO_ASPECT_MODE_STRETCH};},Video3dFormat:function(){return{FRAME_PACKING:CCOM.System.HDMI_3D_FORMAT_FRAME_PACKING,TOP_AND_BOTTOM:CCOM.System.HDMI_3D_FORMAT_TOP_AND_BOTTOM,SIDE_BY_SIDE_HALF:CCOM.System.HDMI_3D_FORMAT_SIDE_BY_SIDE_HALF};},AudioType:function(){return{PCM:CCOM.System.HDMI_AUDIO_TYPE_PCM,AC3:CCOM.System.HDMI_AUDIO_TYPE_AC3};}};return c;}());return $N.platform.output.AV;});define("jsfw/platform/output/Tuner",["jsfw/apps/core/Log"],function(a){var b=$N.apps.core.Log("output","Tuner");var e=0;var d=400;var f=function(g){var h=this;this._instance=e++;this._player=null;this._ready=true;this._queuedRequest=null;this._readyTO=null;this._qosDegradedListener=null;this._qosImprovedListener=null;this._tuneFailedCallback=function(){};this._playFailedListener=function(k){h._tuneFailedCallback("Player",null,k.error.message);};this._playStartFailedListener=function(k){h._tuneFailedCallback("Player",null,k);};this._streamStartFailedListener=function(k){h._tuneFailedCallback("Source",null,k);};if(g){this.setPlayer(g);}};var c=f.prototype;c._updateReadyFlag=function(){this._ready=true;if(this._queuedRequest){this._tuneWithPlayOption(this._queuedRequest.uri,this._queuedRequest.playOption);this._queuedRequest=null;}};c._tuneWithPlayOption=function(h,k){var g=this;if(this._ready){this._ready=false;this._player.play(h,k?[k]:[]);}else{clearTimeout(this._readyTO);this._queuedRequest={uri:h,playOption:k};}this._readyTO=setTimeout(function(){g._updateReadyFlag();},d);};c.setPlayer=function(g){this._player=g;this._player.addEventListener("playFailed",this._playFailedListener);this._player.addEventListener("onPlayStartFailed",this._playStartFailedListener);this._player.addEventListener("onStreamStartFailed",this._streamStartFailedListener);};c.getPlayer=function(){return this._player;};c.setReadyBufferMs=function(g){d=g;};c.setTuneFailedCallback=function(g){this._tuneFailedCallback=g;};c.getCurrentUri=function(){try{return this._player.sourceUri;}catch(g){return null;}};c.getStream=function(){};c.tune=function(h,g){if(!g){g=0;}else{if(h.indexOf(".m3u8")>-1){h=h.replace(/http:/g,"ahls:");}}var k={commandType:this._player.PLAY_CONTROL_CMD_POSITION,positionCommandData:{whence:this._player.SEEK_SET,type:this._player.POSITION_TYPE_TIME_BASED,timePosition:g*1000}};this._tuneWithPlayOption(h,k);};c.tuneWithoutPlay=function(g){var h={commandType:this._player.PLAY_CONTROL_CMD_DONT_START_STREAMS};this._tuneWithPlayOption(g,h);};c.disconnect=function(){var g,h=[];if(this._player){this._player.stop();}};c.showFullscreen=function(h){var g;if(!h){g=document.getElementsByTagName("video");h=g[this._instance];}if(h){h.setAttribute("x",1);h.setAttribute("x",0);h.setAttribute("y",0);h.setAttribute("width",window.innerWidth);h.setAttribute("height",window.innerHeight);}else{}};c.showScaled=function(h,n,m,g,k){var l;if(!k){l=document.getElementsByTagName("video");k=l[this._instance];}if(k){k.setAttribute("x",1);k.setAttribute("x",h);k.setAttribute("y",n);k.setAttribute("width",m);k.setAttribute("height",g);}else{}};c.showInSVGVideo=function(m){var l=parseInt(m.getAttribute("width"),10);var h=parseInt(m.getAttribute("height"),10);var g=new SVGPoint();var k;g.x=parseFloat(m.getAttribute("x"));g.y=parseFloat(m.getAttribute("y"));k=g.matrixTransform(m.getScreenCTM());this.showScaled(Math.round(k.x),Math.round(k.y),l,h);};c.hideVideo=function(){this._player.blankVideo();};c.showVideo=function(){this._player.unblankVideo();};c.registerQosDegradedListener=function(g){this._qosDegradedListener=g;this._player.addEventListener("onSignalLoss",g);};c.registerQosImprovedListener=function(g){this._qosImprovedListener=g;this._player.addEventListener("onSignalGain",g);};c.unregisterQosDegradedListener=function(g){this._qosDegradedListener=null;this._player.removeEventListener("onSignalLoss",g);};c.unregisterQosImprovedListener=function(g){this._qosImprovedListener=null;this._player.removeEventListener("onSignalGain",g);};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.Tuner=f;return f;});define("jsfw/platform/output/TrickPlay",["jsfw/apps/core/Log","jsfw/apps/core/KeyInterceptor"],function(b,a){var c=new $N.apps.core.Log("output","Trickplay");var e=function(f){var g=this;this._isAwaitingSpeedChangeEvent=false;this.PLAY_SPEED=100;this.PAUSE_SPEED=0;this._player=null;this._speedIDX=0;this._newSpeedIDX=0;this._SPEED_MULTIPLIERS=[200,400,800,1600,3200];this._allowSpeedCycle=true;this._defaultSkipTimeInSeconds=30;this._isDirectMode=true;this._savedPlayerMode=null;this._savedPlayerSpeed=null;this._dealWithStreamPlayedOrPausedByMw=function(){g._newSpeedIDX=0;g._speedChangeCallback();};this._playerPlayingCallback=function(){g._dealWithStreamPlayedOrPausedByMw();};this._playerAtBeginningCallback=function(){g._dealWithStreamPlayedOrPausedByMw();};this._playerAtEndCallback=function(){g._dealWithStreamPlayedOrPausedByMw();};this._playerCaughtUptoLiveCallBack=function(){g._dealWithStreamPlayedOrPausedByMw();};this._uiRefreshCallback=function(k,h){};this._positionChangeFailedCallback=function(){};this._positionChangeCallback=function(){};this._speedChangeFailedCallback=function(){g._isAwaitingSpeedChangeEvent=false;if(g._savedPlayerSpeed!==g._player.speed){g._setSpeed(g._savedPlayerSpeed);g._uiRefreshCallback(g._savedPlayerMode,g._savedPlayerSpeed);}};this._speedChangeCallback=function(){g._isAwaitingSpeedChangeEvent=false;g._uiRefreshCallback(g.getTrickPlayMode(),g._player.speed);g._speedIDX=g._newSpeedIDX;};if(f){this.setPlayer(f);}};e.MODES={PLAY:"play",PAUSE:"pause",FF:"ff",RW:"rew"};var d=e.prototype;d.setPlayer=function(f){this._player=f;};d.getPlayer=function(){return this._player;};d.setPlayerPlayingCallback=function(g){var f=this;this._playerPlayingCallback=function(){f._dealWithStreamPlayedOrPausedByMw();g();};};d.setPlayerAtBeginningCallback=function(g){var f=this;this._playerAtBeginningCallback=function(){f._dealWithStreamPlayedOrPausedByMw();g();};};d.setPlayerAtEndCallback=function(g){var f=this;this._playerAtEndCallback=function(){f._dealWithStreamPlayedOrPausedByMw();g();};};d.setUIRefreshCallback=function(f){this._uiRefreshCallback=f;};d.setPositionChangeFailedCallback=function(f){this._positionChangeFailedCallback=f;};d.setPositionChangeCallback=function(f){this._positionChangeCallback=f;};d.setAllowSpeedCycle=function(f){this._allowSpeedCycle=f;};d.setPlayRateMultipliers=function(f){this._SPEED_MULTIPLIERS=f;};d.setDefaultSkipTime=function(f){this._defaultSkipTimeInSeconds=f;};d._bufferingListener=function(f){if(f.percentBuffered>=100){this._playerPlayingCallback();}};d._saveCurrentPlayerState=function(){this._savedPlayerMode=this.getTrickPlayMode();this._savedPlayerSpeed=this.getSpeed();};d.registerEventListeners=function(){this._player.addEventListener("onPlayStarted",this._playerPlayingCallback,false);this._player.addEventListener("onBuffering",this._bufferingListener,false);this._player.addEventListener("onEoc",this._playerAtEndCallback,false);this._player.addEventListener("onBoc",this._playerAtBeginningCallback,false);this._player.addEventListener("onCaughtUptoLive",this._playerCaughtUptoLiveCallBack,false);this._player.addEventListener("onPositionChangeFailed",this._positionChangeFailedCallback,false);this._player.addEventListener("onPositionChange",this._positionChangeCallback,false);this._player.addEventListener("onSpeedChangeFailed",this._speedChangeFailedCallback,false);this._player.addEventListener("onSpeedChanged",this._speedChangeCallback,false);};d.unRegisterEventListeners=function(){this._player.removeEventListener("onPlayStarted",this._playerPlayingCallback,false);this._player.removeEventListener("onBuffering",this._bufferingListener,false);this._player.removeEventListener("onEoc",this._playerAtEndCallback,false);this._player.removeEventListener("onCaughtUptoLive",this._playerCaughtUptoLiveCallBack,false);this._player.removeEventListener("onBoc",this._playerAtBeginningCallback,false);this._player.removeEventListener("onPositionChangeFailed",this._positionChangeFailedCallback,false);this._player.removeEventListener("onPositionChange",this._positionChangeCallback,false);this._player.removeEventListener("onSpeedChangeFailed",this._speedChangeFailedCallback,false);this._player.removeEventListener("onSpeedChanged",this._speedChangeCallback,false);};d.playPause=function(f){if(this._player.speed===this.PLAY_SPEED||(f&&(this._player.speed>this.PAUSE_SPEED||this._player.speed<this.PAUSE_SPEED))){this.pause();}else{this.play();}};d._setSpeed=function(f){this._isAwaitingSpeedChangeEvent=true;this._player.setSpeed(f);};d.pause=function(){this._newSpeedIDX=0;if(this._player.speed!==this.PAUSE_SPEED){this._setSpeed(this.PAUSE_SPEED);}};d.play=function(){this._newSpeedIDX=0;if(this._player.speed!==this.PLAY_SPEED){this._setSpeed(this.PLAY_SPEED);}};d.rewind=function(){this._newSpeedIDX=this._speedIDX;if(!this._allowSpeedCycle&&(this._speedIDX>=this._SPEED_MULTIPLIERS.length)){return;}this._saveCurrentPlayerState();if((this._player.speed>this.PAUSE_SPEED)||(this._speedIDX>=this._SPEED_MULTIPLIERS.length)){this._newSpeedIDX=0;}this._newSpeedIDX++;this._setSpeed(-this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);};d.fastForward=function(){this._newSpeedIDX=this._speedIDX;if(!this._allowSpeedCycle&&(this._speedIDX>=this._SPEED_MULTIPLIERS.length)){return;}if((this._player.speed<this.PAUSE_SPEED)||(this._speedIDX>=this._SPEED_MULTIPLIERS.length)){this._newSpeedIDX=0;}this._saveCurrentPlayerState();this._newSpeedIDX++;this._setSpeed(this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);};d.slowFastForward=function(){this._newSpeedIDX=this._speedIDX;if(!this._allowSpeedCycle&&(this._speedIDX>=this._SPEED_MULTIPLIERS.length)&&(this._player.speed<this.PAUSE_SPEED)){return;}this._saveCurrentPlayerState();if((this._player.speed>this.PLAY_SPEED)){if(this._speedIDX===1){this._setSpeed(this.PLAY_SPEED);this._newSpeedIDX=0;}else{this._newSpeedIDX--;this._setSpeed(this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);}}else{if(this._speedIDX>=this._SPEED_MULTIPLIERS.length){this._newSpeedIDX=0;}this._newSpeedIDX++;this._setSpeed(-this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);}};d.slowRewind=function(){this._newSpeedIDX=this._speedIDX;if(!this._allowSpeedCycle&&(this._speedIDX>=this._SPEED_MULTIPLIERS.length)&&(this._player.speed>this.PLAY_SPEED)){return;}this._saveCurrentPlayerState();if((this._player.speed<this.PAUSE_SPEED)){if(this._speedIDX===1){this._setSpeed(this.PLAY_SPEED);this._newSpeedIDX=0;}else{this._newSpeedIDX--;this._setSpeed(-this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);}}else{if(this._speedIDX>=this._SPEED_MULTIPLIERS.length){this._newSpeedIDX=0;}this._newSpeedIDX++;this._setSpeed(this._SPEED_MULTIPLIERS[this._newSpeedIDX-1]);}};d.skip=function(h){var g=parseInt(h,10)*1000+this._player.position;var f={whence:this._player.SEEK_SET,type:this._player.POSITION_TYPE_TIME_BASED,timePosition:g};this.play();this._player.setPosition(f);};d.getTrickPlayMode=function(){c("getTrickPlayMode","this._player.speed = "+(this._player.speed?String(this._player.speed):"[not set]"));if(this._player.speed<0){return e.MODES.RW;}else{if(this._player.speed===this.PAUSE_SPEED){return e.MODES.PAUSE;}else{if(this._player.speed>this.PLAY_SPEED){return e.MODES.FF;}else{return e.MODES.PLAY;}}}};d.getSpeed=function(){return this._player.speed;};d.setDirectMode=function(f){this._isDirectMode=f;};d.keyHandler=function(f){var h=true;var g=$N.apps.core.KeyInterceptor.getKeyMap();if(this._isAwaitingSpeedChangeEvent){return true;}switch(f){case g.KEY_PLAY:case g.KEY_PLAY_PAUSE:this.playPause();break;case g.KEY_PAUSE:this.playPause(true);break;case g.KEY_REW:if(this._isDirectMode){this.rewind();}else{this.slowFastForward();}break;case g.KEY_FFW:if(this._isDirectMode){this.fastForward();}else{this.slowRewind();}break;case g.KEY_SKIP_FW:this.skip(this._defaultSkipTimeInSeconds);break;case g.KEY_SKIP_REW:this.skip(-this._defaultSkipTimeInSeconds);break;default:h=false;}return h;};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.TrickPlay=e;return e;});define("jsfw/platform/output/SeekTrickPlay",["jsfw/apps/core/Log","jsfw/apps/core/KeyInterceptor"],function(c,b){var d=new $N.apps.core.Log("output","SeekTrickPlay");var a=function(f){var g=this;this.PLAY_SPEED=100;this.PAUSE_SPEED=0;this._player=null;this._speedIDX=0;this._SPEED_MULTIPLIERS=[400,800,1600,3200];this._allowSpeedCycle=true;this._defaultSkipTime=30;this._ffRwInterval=null;this._ffRwIntervalMS=1000;this._trickPlayMode=null;this._ffRwPosition=0;this._isffRW=false;this._trickRate=0;this._isDirectMode=true;this._tempPlaybackPosition=null;this._tempPositionTimeout=null;this._playerPositionChangedCallback=function(h){g._isffRW=false;};this._playerPositionChangeFailedCallback=function(h){g._isffRW=false;};this._playerPlayingCallback=function(){g.play();};this._playerAtBeginningCallback=function(){g.play();};this._playerAtEndCallback=function(){g.pause();};this._uiRefreshCallback=function(k,h){};if(f){this.setPlayer(f);}};a.MODES={PLAY:"play",PAUSE:"pause",FF:"ff",RW:"rew"};var e=a.prototype;e.MODES=a.MODES;e._setPosition=function(f){var g={whence:this._player.SEEK_SET,type:this._player.POSITION_TYPE_TIME_BASED,timePosition:f};this._player.setPosition(g);};e.setPlayer=function(f){this._player=f;};e.getPlayer=function(){return this._player;};e.setPlayerPlayingCallback=function(f){this._playerPlayingCallback=f;};e.setPlayerAtBeginningCallback=function(f){this._playerAtBeginningCallback=f;};e.setPlayerAtEndCallback=function(f){this._playerAtEndCallback=f;};e.setUIRefreshCallback=function(f){this._uiRefreshCallback=f;};e.setDirectMode=function(f){this._isDirectMode=f;};e.setAllowSpeedCycle=function(f){this._allowSpeedCycle=f;};e.setPlayRateMultipliers=function(f){this._SPEED_MULTIPLIERS=f;};e.setDefaultSkipTime=function(f){this._defaultSkipTime=f;};e._bufferingListener=function(f){if(f.percentBuffered>=100){this._playerPlayingCallback();}};e.registerEventListeners=function(){this._player.addEventListener("onPositionChanged",this._playerPositionChangedCallback,false);this._player.addEventListener("onPositionChangeFailed",this._playerPositionChangeFailedCallback,false);this._player.addEventListener("onPlayStarted",this._playerPlayingCallback,false);this._player.addEventListener("onBuffering",this._bufferingListener,false);this._player.addEventListener("onEoc",this._playerAtEndCallback,false);this._player.addEventListener("onBoc",this._playerAtBeginningCallback,false);};e.unRegisterEventListeners=function(){this._player.removeEventListener("onPositionChanged",this._playerPositionChangedCallback,false);this._player.removeEventListener("onPositionChangeFailed",this._playerPositionChangeFailedCallback,false);this._player.removeEventListener("onPlayStarted",this._playerPlayingCallback,false);this._player.removeEventListener("onBuffering",this._bufferingListener,false);this._player.removeEventListener("onEoc",this._playerAtEndCallback,false);this._player.removeEventListener("onBoc",this._playerAtBeginningCallback,false);};e.setFfRwIntervalTime=function(f){this._ffRwIntervalMS=f;};e.stopFfRwInterval=function(){if(this._ffRwInterval){clearInterval(this._ffRwInterval);}};e.getPlaybackPosition=function(){if(this._speedIDX!==0||this._isffRW){return this._ffRwPosition/1000;}else{try{return this._player.position/1000;}catch(f){return 0;}}};e._getUpdatedTrickPlayRate=function(f,h){var g;if(f===a.MODES.RW||f===a.MODES.FF){if(!h&&((this.getTrickPlayMode()===a.MODES.RW&&f===a.MODES.FF)||(this.getTrickPlayMode()===a.MODES.FF&&f===a.MODES.RW))){if(this._speedIDX===1){return 1;}else{if(this._speedIDX>1){this._speedIDX--;}}g=(this.getTrickPlayMode()===a.MODES.RW)?-1:1;}else{if(this._trickPlayMode!==f){this._speedIDX=1;}else{if(this._speedIDX<this._SPEED_MULTIPLIERS.length){this._speedIDX++;}else{if(this._allowSpeedCycle){this._speedIDX=1;}}}g=(f===a.MODES.RW)?-1:1;}this._trickRate=this._SPEED_MULTIPLIERS[this._speedIDX-1]*g;return this._trickRate/this.PLAY_SPEED;}else{if(f===a.MODES.PLAY){this._trickRate=100;return 1;}else{this._trickRate=0;return 0;}}};e.playPause=function(f){if(this._player.speed===this.PLAY_SPEED||(f&&(this._trickRate>this.PAUSE_SPEED||this._trickRate<this.PAUSE_SPEED))){this.pause();}else{this.play();}};e.pause=function(){this.stopFfRwInterval();this._speedIDX=0;if(this._player.speed!==this.PAUSE_SPEED){this._player.setSpeed(this.PAUSE_SPEED);}this._uiRefreshCallback(a.MODES.PAUSE,this.PAUSE_SPEED);this._trickPlayMode=a.MODES.PAUSE;};e.play=function(){if(this._player.speed!==this.PLAY_SPEED){this._player.setSpeed(this.PLAY_SPEED);}if(this._speedIDX!==0){this._isffRW=true;this._setPosition(this._ffRwPosition);}this.stopFfRwInterval();this._speedIDX=0;this._uiRefreshCallback(a.MODES.PLAY,this.PLAY_SPEED);this._trickPlayMode=a.MODES.PLAY;};e._rwFfTrickPlay=function(h,k){var g=this,f=this._getUpdatedTrickPlayRate(h,k);if(f===1){this.play();}else{if(this._speedIDX===1&&this._trickPlayMode!==a.MODES.RW&&this._trickPlayMode!==a.MODES.FF){this._ffRwPosition=this._player.position;this._player.setSpeed(this.PAUSE_SPEED);}else{this.stopFfRwInterval();}if(f>0){this._trickPlayMode=a.MODES.FF;}else{this._trickPlayMode=a.MODES.RW;}this._ffRwInterval=setInterval(function(){g._ffRwPosition=g._ffRwPosition+(f*1000);if(h===a.MODES.RW){if(g._ffRwPosition<=0){g._playerAtBeginningCallback();}}else{if(g._ffRwPosition>=g._player.duration){g._playerAtEndCallback();}}},this._ffRwIntervalMS);}this._uiRefreshCallback(this._trickPlayMode,f*this.PLAY_SPEED);};e.rewind=function(){this._rwFfTrickPlay(a.MODES.RW,true);};e.fastForward=function(){this._rwFfTrickPlay(a.MODES.FF,true);};e.slowFastForward=function(){this._rwFfTrickPlay(a.MODES.RW);};e.slowRewind=function(){this._rwFfTrickPlay(a.MODES.FF);};e.skip=function(g){var f,h=this;g=parseInt(g,10);this.play();if(this._tempPlaybackPosition){f=this._tempPlaybackPosition+g;}else{f=this._player.position+(g*1000);}if(f<0){f=0;}if(f<this._player.duration){this._tempPlaybackPosition=f;this._setPosition(f);if(this._tempPositionTimeout){clearTimeout(this._tempPositionTimeout);}this._tempPositionTimeout=setTimeout(function(){h._tempPlaybackPosition=null;},1000);}};e.getTrickPlayMode=function(){return this._trickPlayMode;};e.getTrickPlayRate=function(){return this._trickRate;};e.keyHandler=function(f){var h=true,g=$N.apps.core.KeyInterceptor.getKeyMap();switch(f){case g.KEY_PLAY:case g.KEY_PLAY_PAUSE:this.playPause();break;case g.KEY_PAUSE:this.playPause(true);break;case g.KEY_REW:if(this._isDirectMode){this.rewind();}else{this.slowFastForward();}break;case g.KEY_FFW:if(this._isDirectMode){this.fastForward();}else{this.slowRewind();}break;case g.KEY_SKIP_FW:this.skip(this._defaultSkipTime);break;case g.KEY_SKIP_REW:this.skip(-this._defaultSkipTime);break;default:h=false;}return h;};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.SeekTrickPlay=a;return a;});define("jsfw/platform/output/Tracks",["jsfw/apps/core/Log"],function(a){var c=new $N.apps.core.Log("output","Tracks");var b=function(e){var f=this;this._player=e;this._clearInternalCache();this._activeAudioTrackLostCallback=null;this._activeSubtitleTrackLostCallback=null;this._newAudioTrackFoundCallback=null;this._newSubtitleTrackFoundCallback=null;if(!b.TYPES){b.TYPES={audio:e.STREAM_TYPE_AUDIO,subtitle:e.STREAM_TYPE_SUBTITLE,video:e.STREAM_TYPE_VIDEO,other:e.STREAM_TYPE_DATA};}this._streamErrorListener=function(h){var g=h.streamErrorInfo;var k;if(g){if(g.type===e.STREAM_TYPE_AUDIO&&f._activeAudioTrackLostCallback){k=f.getActiveAudioTrack();if(k&&k.id===g.id){f._activeAudioTrackLostCallback(g.id);}}else{if(g.type===e.STREAM_TYPE_SUBTITLE&&f._activeSubtitleTrackLostCallback){k=f.getActiveSubtitleTrack();if(k&&k.id===g.id){f._activeSubtitleTrackLostCallback(g.id);}}}}f._sortTracksInStream();};this._newTrackFoundListener=function(h){f._sortTracksInStream();var k=f.getAudioTracks();var g=f.getSubtitleTracks();if(k.length&&f._newAudioTrackFoundCallback){f._newAudioTrackFoundCallback(k);}if(g.length&&f._newSubtitleTrackFoundCallback){f._newSubtitleTrackFoundCallback(g);}};this._player.addEventListener("onStreamError",function(g){f._streamErrorListener(g);});this._player.addEventListener("onStreamAvailable",function(g){f._newTrackFoundListener(g);});};b.TYPES=null;var d=b.prototype;d._getTrackById=function(e,g){var f;for(f=0;f<e.length;f++){if(e[f].id===g){return e[f];}}return null;};d._clearInternalCache=function(){this._audioTracks=[];this._subtitleTracks=[];this._videoTracks=[];this._otherTracks=[];};d._getIndexOfActiveTrack=function(f){var g=f.length,e;for(e=0;e<g;e++){if(this.isActive(f[e])){return e;}}return null;};d._activateTrackForLanguage=function(h,f){var g=f.length,e;for(e=0;e<g;e++){if(this.getLanguage(f[e])===h){this.activateTrack(f[e]);return true;}}return false;};d._activateNextTrack=function(g,f){var e=this._getIndexOfActiveTrack(g);if(e!==null){this.deactivateTrack(g[e]);if(e===g.length-1){if(!f){this.activateTrack(g[0]);return g[0];}}else{this.activateTrack(g[++e]);return g[e];}}else{if(g.length>0){this.activateTrack(g[0]);return g[0];}}return null;};d._sortTracksInStream=function(){var k=this._player.availableStreams,e=k?k.length:0,g,h,f=this._player;c("_sortTracksInStream","found "+String(e)+" streams",a.LOG_DEBUG);this._clearInternalCache();if(typeof k==="string"){return;}for(g=0;g<e;g++){h=k[g];if(h){switch(h.type){case f.STREAM_TYPE_AUDIO:h.language=h.iaudio.language;this._audioTracks.push(h);break;case f.STREAM_TYPE_VIDEO:this._videoTracks.push(h);break;case f.STREAM_TYPE_SUBTITLE:if(h.format!==f.STREAM_FORMAT_SUBTITLE_DVB_TLTXT_SUBTITLE){h.language=this.getLanguage(h);this._subtitleTracks.push(h);}break;default:this._otherTracks.push(h);break;}}}};d.getStream=function(){return null;};d.setStream=function(){this._sortTracksInStream();};d.getAudioTracks=function(){return this._audioTracks;};d.getVideoTracks=function(){return this._videoTracks;};d.getSubtitleTracks=function(){return this._subtitleTracks;};d.getDataTracks=function(){return this.getOtherTracks();};d.getOtherTracks=function(){return this._otherTracks;};d.getActiveAudioTrack=function(){var e=this._getIndexOfActiveTrack(this._audioTracks);return e===null?null:this._audioTracks[e];};d.getActiveSubtitleTrack=function(){var e=this._getIndexOfActiveTrack(this._subtitleTracks);return e===null?null:this._subtitleTracks[e];};d.getActiveVideoTrack=function(){var e=this._getIndexOfActiveTrack(this._videoTracks);return e===null?null:this._videoTracks[e];};d.getActiveDataTrack=function(){return this.getActiveOtherTrack();};d.getActiveOtherTrack=function(){var e=this._getIndexOfActiveTrack(this._otherTracks);return e===null?null:this._otherTracks[e];};d.getDualMonoAudioTracks=function(){var h=[],g=this.getAudioTracks(),e=g.length,f;for(f=0;f<e;f++){if(g[f].iaudio.dualMono===true){h.push(g[f]);}}return h;};d.getDualMonoChannelMode=function(e){return -1;};d.setDualMonoChannelMode=function(e,f){};d.activateTrack=function(e){if(e){this._player.startStreams([{specType:this._player.STREAM_SPEC_TYPE_JUST_ID,id:e.id}]);}};d.deactivateTrack=function(e){if(e){this._player.stopStreams([{stopStreamTypes:e.type}]);}};d.activateAudioTrackByLanguage=function(e){return this._activateTrackForLanguage(e,this._audioTracks);};d.activateSubtitleTrackByLanguage=function(e){return this._activateTrackForLanguage(e,this._subtitleTracks);};d.cycleAudioTracks=function(){return this._activateNextTrack(this._audioTracks,false);};d.cycleSubtitleTracks=function(){return this._activateNextTrack(this._subtitleTracks,true);};d.getLanguage=function(e){var f;if(e){if(e.iaudio&&e.iaudio.language){f=e.iaudio.language;}else{if(e.idvbTltxtSubtitle&&e.idvbTltxtSubtitle.language){f=e.idvbTltxtSubtitle.language;}else{if(e.idvbSubtitle&&e.idvbSubtitle.language){f=e.idvbSubtitle.language;}else{if(e.iaribCc&&e.iaribCc.language){f=e.iaribCc.language;}else{if(e.idvbTltxtTeletext&&e.idvbTltxtTeletext.language){f=e.idvbTltxtTeletext.language;}}}}}}return f;};d.isActive=function(f){var g;var e=this._player.activeStreams.length;for(g=0;g<e;g++){if(f.id===this._player.activeStreams[g].id){return true;}}return false;};d.setActiveSubtitleTrackLostCallback=function(e){this._activeSubtitleTrackLostCallback=e;};d.setActiveAudioTrackLostCallback=function(e){this._activeAudioTrackLostCallback=e;};d.setNewSubtitleTrackFoundCallback=function(e){this._newSubtitleTrackFoundCallback=e;};d.setNewAudioTrackFoundCallback=function(e){this._newAudioTrackFoundCallback=e;};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.Tracks=b;return b;});define("jsfw/platform/output/Chapters",["jsfw/apps/core/Log"],function(a){var b=$N.apps.core.Log("output","Chapters");var d=function(){this._chaptersList=[];this._numberOfChapters=10;this._contentDurationInSec=0;};d.MIN_SEC_PLAYED_IN_CURRENT_CHAPTER=2;var c=d.prototype;c._calculateChapterPositions=function(){var e=this._contentDurationInSec/this._numberOfChapters;var g;var f;this._chaptersList=[];b("_calculateChapterPositions","interval"+String(e));for(g=0;g<this._numberOfChapters;g++){f=Math.round(g*e);this._chaptersList.push(f);b("_calculateChapterPositions","Added chapter at: "+String(f));}};c.setContentDuration=function(e){this._contentDurationInSec=parseInt(e,10);this._calculateChapterPositions();};c.setNumberOfChapters=function(e){this._numberOfChapters=parseInt(e,10);if(this._contentDurationInSec){this._calculateChapterPositions();}};c.getChapters=function(){return this._chaptersList;};c.getNextChapterPosition=function(f){var e;for(e=0;e<=this._chaptersList.length-1;e++){if(f<this._chaptersList[e]){return this._chaptersList[e];}}return null;};c.getPreviousChapterPosition=function(f){var e;for(e=1;e<=this._chaptersList.length;e++){if(f<this._chaptersList[e]){if(e===1){return 0;}if((f-this._chaptersList[e-1])>d.MIN_SEC_PLAYED_IN_CURRENT_CHAPTER){return this._chaptersList[e-1];}return this._chaptersList[e-2];}}return 0;};c.isCurrentPositionInLastChapter=function(e){return this._chaptersList&&this._chaptersList.length>2&&(e>this._chaptersList[this._chaptersList.length-2])&&(e<this._chaptersList[this._chaptersList.length-1]);};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.Chapters=d;return d;});define("jsfw/platform/output/VideoPlayer",["jsfw/apps/core/Log","jsfw/platform/output/Tuner","jsfw/platform/output/TrickPlay","jsfw/platform/output/SeekTrickPlay","jsfw/platform/output/Tracks","jsfw/apps/util/Util"],function(d,l,f,b,k,h){var c=new $N.apps.core.Log("output","VideoPlayer");var g=0;function a(q){var r=this,m;if(q){m=document.createElement("param");m.setAttribute("name","otv-video-destination");m.setAttribute("value","display://"+g);q.appendChild(m);}this._playerObj=q||null;this._playerPlayingListeners=[];this._playerBufferingListeners=[];this._lostResourcesListeners=[];var o=CCOM.PlayerManager,p=g===0?o.INSTANCE_PRIORITY_HIGH:o.INSTANCE_PRIORITY_LOW,n=g===0?true:false,t=g===0?o.AUD_OUT_VAL_TRUE:o.AUD_OUT_VAL_FALSE,s=o.getInstance({destUri:"display://"+g,priority:p});if(s.instance){this._player=s.instance;o.setReviewBufferState(this._player.instanceHandle,n);o.setAudioStatus(this._player.instanceHandle,t);if(this._player.videoLayerProperties){this._player.videoLayerProperties={zorder:(g===0?this._player.VIDEO_LAYER_ZORDER_TOP:this._player.VIDEO_LAYER_ZORDER_BOTTOM),opacity:1};}}else{this._player=null;}g++;this.tuner=new $N.platform.output.Tuner(this._player);this.trickPlay=new $N.platform.output.TrickPlay(this._player);this.seekTrickPlay=new $N.platform.output.SeekTrickPlay(this._player);this.tracks=new $N.platform.output.Tracks(this._player);this.setTrickPlayDirectMode(true);this._player.addEventListener("onPlayStarted",function(u){r._playStartedListener(u);});this._player.addEventListener("onBuffering",function(u){r._bufferingListener(u);});this._player.addEventListener("onPlayError",function(u){r._playErrorListener(u);});}var e=a.prototype;e.getPlayerInstanceObj=function(){return{playerInstance:this._player,playerObj:this._playerObj||null};};e._addListener=function(m,n){if($N.apps.util.Util.arrayContains(m,n)){}else{m.push(n);}};e._removeListener=function(n,p){var o,m=n.length;for(o=0;o<m;o++){if(n[o]===p){n.splice(o,1);break;}}};e._callListeners=function(o){var n,m=o.length;for(n=0;n<m;n++){o[n]();}};e._bufferingListener=function(m){if(m.bufferingInfo.percentBuffered<100){this._callListeners(this._playerBufferingListeners);}else{this._callListeners(this._playerPlayingListeners);}};e._playStartedListener=function(m){this._callListeners(this._playerPlayingListeners);};e._playErrorListener=function(m){if(m.contentErrorInfo.reason===this._player.CONTENT_ERROR_REASON_RESOURCES_LOST){this._callListeners(this._lostResourcesListeners);}};e.getPlayer=function(){return this._player;};e.getSource=function(){return this.tuner.getCurrentUri();};e.getPlaybackPosition=function(){return this._player.position/1000;};e.getReviewBufferInfo=function(){var n=this._player.realTimePosition,m;if(n){m=(n.endPosition-n.startPosition)*1000;return{startPosition:n.startPosition*1000,endPosition:n.endPosition*1000,currentPosition:n.currentPosition*1000,contentLength:m};}else{return{startPosition:0,endPosition:0,currentPosition:0,contentLength:0};}};e.getReviewBufferStartTime=function(){return this._player.realTimePosition&&this._player.realTimePosition.startPosition?this._player.realTimePosition.startPosition*1000:0;};e.getReviewBufferEndTime=function(){return this._player.realTimePosition&&this._player.realTimePosition.endPosition?this._player.realTimePosition.endPosition*1000:0;};e.getReviewBufferPlaybackPosition=function(){return this._player.realTimePosition&&this._player.realTimePosition.currentPosition?this.getReviewBufferStartTime()+(this._player.realTimePosition.currentPosition*1000):0;};e.setPlaybackPosition=function(m){var o=m*1000;var n={whence:this._player.SEEK_SET,type:this._player.POSITION_TYPE_TIME_BASED,timePosition:o};this._player.setPosition(n);};e.getContentLength=function(){return this._player.duration/1000;};e.getCurrentStream=function(){var m={};m.uri=this._player.sourceUri;m.pids=this._player.availableStreams;m.pidsAvailable=m.pids?true:false;return m;};e.registerPlayerConnectedListener=function(m){this._player.addEventListener("onStreamStarted",m);};e.registerPlayerConnectFailedListener=function(m){this._player.addEventListener("onPlayStartFailed",m);};e.registerPlayerPlayingListener=function(m){this._addListener(this._playerPlayingListeners,m);};e.registerPlayerPlayFailedListener=function(m){this._player.addEventListener("onPlayError",m);};e.registerPlayerBufferingListener=function(m){this._addListener(this._playerBufferingListeners,m);};e.registerPlayerReachedEndListener=function(m){this._player.addEventListener("onEoc",m);};e.registerPlayerReachedStartListener=function(m){this._player.addEventListener("onBoc",m);};e.registerCaughtUptoLiveListener=function(m){this._player.addEventListener("onCaughtUptoLive",m);};e.registerSignalLoss=function(m){this._player.addEventListener("onSignalLoss",m);};e.registerEventBoundaryChangedListener=function(m){this._player.addEventListener("onEventBoundaryChanged",m);};e.unregisterPlayerConnectedListener=function(m){this._player.removeEventListener("onStreamStarted",m);};e.unregisterPlayerConnectFailedListener=function(m){this._player.removeEventListener("onPlayStartFailed",m);};e.unregisterPlayerPlayingListener=function(m){this._removeListener(this._playerPlayingListeners,m);};e.unregisterPlayerPlayFailedListener=function(m){this._player.removeEventListener("onPlayError",m);};e.unregisterPlayerBufferingListener=function(m){this._removeListener(this._playerBufferingListeners,m);};e.unregisterPlayerReachedEndListener=function(m){this._player.removeEventListener("onEoc",m);};e.unregisterPlayerReachedStartListener=function(m){this._player.removeEventListener("onBoc",m);};e.unregisterCaughtUptoLiveListener=function(m){this._player.removeEventListener("onCaughtUptoLive",m);};e.unregisterSignalLoss=function(m){this._player.removeEventListener("onSignalLoss",m);};e.unregisterEventBoundaryChangedListener=function(m){this._player.removeEventListener("onEventBoundaryChanged",m);};e.registerLockerStatusUpdateListener=function(m){this._player.addEventListener("onLockerStatusUpdate",m);};e.unregisterLockerStatusUpdateListener=function(m){this._player.removeEventListener("onLockerStatusUpdate",m);};e.registerLockerUnlockListener=function(m){this._player.addEventListener("onLockerUnlock",m);};e.unregisterLockerUnlockListener=function(m){this._player.removeEventListener("onLockerUnlock",m);};e.registerResourcesLostListener=function(m){this._addListener(this._lostResourcesListeners,m);};e.unregisterResourcesLostListener=function(m){this._removeListener(this._lostResourcesListeners,m);};e.registerStreamDisabledListener=function(m){this._player.addEventListener("onStreamDisabled",m);};e.unregisterStreamDisabledListener=function(m){this._player.removeEventListener("onStreamDisabled",m);};e.registerStreamEnabledListener=function(m){this._player.addEventListener("onStreamEnabled",m);};e.unregisterStreamEnabledListener=function(m){this._player.removeEventListener("onStreamEnabled",m);};e.setTrickPlayDirectMode=function(m){this.trickPlay.setDirectMode(m);this.seekTrickPlay.setDirectMode(m);};window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.output=$N.platform.output||{};$N.platform.output.VideoPlayer=a;return a;});define("jsfw/apps/core/WatchDog",["jsfw/apps/core/Log"],function(a){function b(){var e=new $N.apps.core.Log("context","ContextManagerWatchDog"),g,f=0,c=null,d=null;this.setLoadedCallback=function(h){c=h;};this.setFailedCallback=function(h){d=h;};this.getWatchdog_retries=function(){return g;};this.setWatchdog_retries=function(h){g=h;};this.getDelay_watchdog_retries=function(){return f;};this.setDelay_watchdog_retries=function(h){f=h;};this.startWatchDog=function(h){if(g!==b.INIT_WATCHDOG_TO){if(!h.isLoaded()){g+=b.INIT_WATCHDOG_RETRY_INTERVAL;e("startWatchDog","Context ("+h.getId()+") not initialised... retrying ("+g+"/"+b.INIT_WATCHDOG_TO+"ms)");var l=this,k=function(){l.startWatchDog(h);};setTimeout(k,b.INIT_WATCHDOG_RETRY_INTERVAL);}else{c();}}else{e("startWatchDog","Initialisation timeout! Context: "+h.getId()+" not loaded.");d();}};this.setWatchdogTO=function(h){b.INIT_WATCHDOG_TO=h;};this.setDelayWatchdogTO=function(h){b.DELAY_WATCHDOG_TO=h;};}b.INIT_WATCHDOG_TO=60000;b.INIT_WATCHDOG_RETRY_INTERVAL=200;b.DELAY_WATCHDOG_TO=60000;b.DELAY_WATCHDOG_RETRY_INTERVAL=200;window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.WatchDog=b;return b;});define("jsfw/apps/core/ContextManagerHelper",[],function(){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.ContextManagerHelper=(function(){var a="http://www.w3.org/1999/xlink";var c=navigator.userAgent.indexOf("Ekioh")>-1?"SVG":"HTML";var b={SVG:{setParentSize:function(d){document.documentElement.setAttribute("viewBox","0 0 "+d.width+" "+d.height);document.documentElement.setAttribute("preserveAspectRatio","preserve");},showContextElement:function(d){d.setAttribute("display","inline");if(d.beginElement){d.beginElement();document.documentElement.setFocus(d);}},hideContextElement:function(d){if(d.endElement){d.endElement();}else{d.setAttribute("display","none");}},clearContextContent:function(d){d.setAttributeNS(a,"href","data:image/svg+xml;base64,PHN2Zz48L3N2Zz4=");},setContextSource:function(e,d){e.setAttributeNS(a,"href",d);},createContextElement:function(e,f,n,m,l,d,g){var h;if(g==="DIV"){var k=document.createElement("animation");k.setAttribute("id",e+"-iframe");k.setAttribute("display","none");if(d){this.setContextSource(k,d);}h=document.createElement("g");h.setAttribute("id",e);h.setAttribute("display","none");h.appendChild(k);return h;}else{h=document.createElement("animation");h.setAttribute("id",e);h.setAttribute("display","none");h.setAttribute("width",f);h.setAttribute("height",n);h.setAttribute("x",m);h.setAttribute("y",l);h.setAttribute("preserveAspectRatio","preserve");if(d){this.setContextSource(h,d);}return h;}},bringContextToTop:function(d){if(d.beginElement){d.parentNode.appendChild(d);}}},HTML:{setParentSize:function(d){},showContextElement:function(d){d.style.display="inline";},hideContextElement:function(d){d.style.display="none";},clearContextContent:function(d){d.setAttribute("src","about:blank");},setContextSource:function(e,d){e.setAttribute("src",d);},createContextElement:function(e,f,n,m,l,d,g){var h;if(g==="DIV"){var k=document.createElement("iframe");k.setAttribute("id",e+"-iframe");k.style.display="none";k.style.width="0px";k.style.height="0px";if(d){k.setAttribute("src",d);}h=document.createElement("div");h.setAttribute("id",e);h.style.display="none";h.style.width=f+"px";h.style.height=n+"px";h.style.left=m+"px";h.style.top=l+"px";h.style.position="absolute";h.appendChild(k);}else{h=document.createElement("iframe");h.setAttribute("id",e);h.style.display="none";h.style.width=f+"px";h.style.height=n+"px";h.style.left=m+"px";h.style.top=l+"px";h.style.position="absolute";h.setAttribute("scrolling","no");h.setAttribute("frameBorder","0");h.setAttribute("marginHeight","0");h.setAttribute("marginWidth","0");h.setAttribute("overflow","hidden");if(d){h.setAttribute("src",d);}}this.contextX=m;this.contextY=l;return h;},bringContextToTop:function(){}}}[c];return{getDomAbstraction:function(){return b;}};}());return $N.apps.core.ContextManagerHelper;});define("jsfw/apps/core/ContextManager",["jsfw/apps/core/Log","jsfw/apps/core/Context","jsfw/apps/core/ContextManagerHelper","jsfw/apps/core/WatchDog"],function(a,b,d,c){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.ContextManager=(function(){var h=0,B=1,U=2,J=3,u=0,l=1,w=2,F=3,C="error",D="warn",g="info",n=30;var E=null,X,A=null,O=null,af=[],aa=null,W=[],M=null,v=null,ab=null,p=false,Q=null,q=new $N.apps.core.Log("context","ContextManager"),k={},o=180000,H=false;var S=function(ag){},t=null,e=0,Z=0;var V=function(ah){var ai=0,ag,aj=0;for(ai=0;ai<af.length;ai++){ag=af[ai];if(ag.getCachingStrategy()===ah){aj++;}}q("getContextCountByCacheType","Cache Type: "+ah+" Count: "+String(aj));return aj;};var m=function(ag){return $N.apps.core.ContextManager.getNavigationLink(ag)||ag;};var s=function(aj){var ai=0,al=V(aj),ah,ak=0;for(ai=0;ai<af.length;ai++){var ag=af[ai];if(ag.getCachingStrategy()===aj){if(ag.isLoaded()){ak++;}else{q("isCacheLoadComplete","Waiting For: "+ag.getId());}}}q("isCacheLoadComplete","Type: "+aj+" Count: "+String(ak)+" Total: "+String(al));ah=(ak===al)?true:false;return ah;};var ae=function(ah,ag){if(!s(h)){if(ab.getDelay_watchdog_retries()!==c.DELAY_WATCHDOG_TO){ab.setDelay_watchdog_retries(ab.getDelay_watchdog_retries()+c.DELAY_WATCHDOG_RETRY_INTERVAL);q("navigatePending","Delaying URL ("+ah+") "+ab.getDelay_watchdog_retries()+"/"+c.DELAY_WATCHDOG_TO);setTimeout(ag,c.DELAY_WATCHDOG_RETRY_INTERVAL);}else{q("navigatePending","Navigate Timed out ("+ah+")",C);}}else{O=u;E=null;}};var N=function(ag){f(ag);Y("loadFailure",ag);};var T=function(ah,ai){var ag;ah.startLoadingTimer(N,o);ag=Q.createContextElement(ah.getId(),ah.getWidth(),ah.getHeight(),ah.getX(),ah.getY(),ah.getUrl(),ah.getHtmlType());ai.appendChild(ag);ah.setHandle(ag);q("createContextElement","Created ID: "+ah.getId()+" ("+ah.getX()+", "+ah.getY()+", "+ah.getWidth()+"x"+ah.getHeight()+") URL: "+ah.getUrl());return ah;};var L=function(ah){var ag=ah.getCachingStrategy();if(ag===U||ag===J){S(true);T(ah,A);}};var z=function(ah){var aj=null,ag=null,ai=0;for(ai=0;ai<af.length;ai++){ag=af[ai];if(ag.getUrl()===ah){aj=ag;break;}}return aj;};var y=function(ah,ai,ag){if(ah){q("showContext","Showing context: "+ah.getId()+" in "+ah.getHandle().id);ah.getController().activate(ai,(ag||false));Q.bringContextToTop(ah.getHandle());Q.showContextElement(ah.getHandle());aa=ah;}else{}};var f=function(ag){var ah=ag.getHandle();ag.setHandle(null);ag.setLoaded(false);ag.setController(null);setTimeout(function(){ah.parentNode.removeChild(ah);},1);};var P=function(ag){if(ag){q("clearContext","Clearing context: "+ag.getId());Q.clearContextContent(ag.getHandle());if(ag.getCachingStrategy()===J){if(ag.getController().unload){ag.getController().unload();}f(ag);q("clearContext","Context ("+ag.getId()+") NO_CACHE, resetting context");}}};var R=function(ah,aj,ai){var ag=null;if(ah){q("hideContext","Hiding context: "+ah.getId());ag=ah.getController();if(!aj){ag.passivate();}else{if(ag.defocus){ag.defocus();}}Q.hideContextElement(ah.getHandle());if(!ai&&ah.getCachingStrategy()===J){P(ah);}}};var ac=function(ah,ai,aj,ak){q("switchContext","Switching To: "+ai.getId());var ag=false;if(ah&&ah.contextGroup&&ai.contextGroup&&ah.contextGroup.toLowerCase()===ai.contextGroup.toLowerCase()){if(ah.getController().getAuthenticationStatus){ag=ah.getController().getAuthenticationStatus();}}if(ah){while(W.length>0){R(W.pop().context);}ah.getController().passivate();}else{v=aa;}y(ai,aj,ag);if(ah){v=ah;R(ah,true);}if(ak){ak();}S(false);};var K=function(ai){var ah=0;p=false;if(af){for(ah=0;ah<af.length;ah++){var ag=af[ah];if(!ag.getHandle()&&!ag.isLoaded()){if(ag.getCachingStrategy()===ai){T(ag,A);if(ai===B){p=true;break;}}}}}};var I=function(){K(B);};var x=function(aj){var ai=null,ah=0,ag;for(ah=0;ah<af.length;ah++){ag=af[ah];if(ag.getId()===aj){ai=ag;break;}}return ai;};var Y=function(ai,aj){var ah=k[ai],ag;if(ah){for(ag=0;ag<ah.length;ag++){ah[ag](aj);}}};var ad=function(ai){var ah,ag=ai.getId(),aj=W.length;for(ah=aj-1;ah>=0;ah--){if(W[ah].context.getId()===ag){return true;}}return false;};var G=function(aj){var ai,ah,ag=aj.getId(),ak=W.length;for(ai=ak-1;ai>=0;ai--){if(W[ai].context.getId()===ag){for(ah=ai;ah>=1;ah--){R(W[ah].context,false);}W.splice(1,ai);break;}}};var r=function(){var ah,ai=W.length,ag=null;if(ai>n){for(ah=1;ah<ai;ah++){ag=W[ah].context;if(ag.isPlayerContext!==true){R(ag,false);W.splice(ah,1);break;}}}};return{CACHE_PRE_CACHE:h,CACHE_PRE_EMPTIVE:B,CACHE_LAZY_LOAD:U,CACHE_NO_CACHE:J,READY:u,PRE_CACHING:l,PRE_EMPTIVE_CACHING:w,LOADING:F,getStatus:function(){return O;},getActiveResolution:function(){return X;},getActiveContext:function(){return aa;},getLastContext:function(){return v;},getDefaultContext:function(){var ai=null;var aj;var ag=af.length;for(aj=0;aj<ag;aj++){var ah=af[aj];if(ah.isDefault()){ai=ah;break;}}return ai;},getActiveController:function(){var ag=null;if(aa){ag=aa.getController();}else{}return ag;},getActiveContextWindow:function(){var ag=null;if(aa){ag=aa.getHandle();}else{}return ag;},setWatchdogTO:function(ag){ab.setWatchdogTO(ag);},setDelayWatchdogTO:function(ag){ab.setDelayWatchdogTO(ag);},setContextLoadingCallback:function(ag){S=ag;},setPreCacheProgressCallback:function(ag){t=ag;},init:function(ah){ab=new c();Q=d.getDomAbstraction();if(!ah){}else{X=ah;}Q.setParentSize(X);A=document.getElementById("_contextGroup_");if(!A){var ag=document.createElement("g");ag.setAttribute("id","_contextGroup_");document.documentElement.appendChild(ag);A=ag;}},addContext:function(ai,ag,am,al,ap,ao,at,aj,aq,ak,an){var au=x(ai);if(!au){ap=ap||0;ao=ao||0;at=at||X.height;aj=aj||X.width;an=an||false;if(am===undefined||am===null){am=J;}q("addContext","Creating ID: "+ai+" Cache: "+String(am)+" URL: "+ag);var ah=new $N.apps.core.Context(ai,ag,am,al,aq,ak);if(al){var ar=this.getDefaultContext();if(ar){ar.setDefault(false);}}ah.isPlayerContext=an;ah.setX(ap);ah.setY(ao);ah.setHeight(at);ah.setWidth(aj);af.push(ah);}},doPreCache:function(){O=l;Z=V(h);K(h);},overlay:function(ag,ak,am,ai){var aj,al,ah;q("overlay","Status: "+String(O));al=m(ag);if(aa){if(ai){aa.setHiddenBy(z(al));R(aa,true);for(aj=0,ah=W.length;aj<ah;aj++){R(W[aj].context,true);}}else{aa.setHiddenBy(null);}}this.navigate(al,ak,am,true);},popOverlay:function(ag,ai){var aj;if(W.length>0){if(ai){if(M){R(M);}M=aa;M.getController().passivate(true);}else{R(aa,ad(aa));}if(W[W.length-1].context.getId()===aa.getId()){Q.showContextElement(W[W.length-1].context.getHandle());}else{for(aj=W.length-1;aj>=0;aj--){if(!W[aj].hiddenById||W[aj].hiddenById===aa.getId()){Q.showContextElement(W[aj].context.getHandle());}else{if(W[aj].hiddenById&&W[aj].hiddenById!==aa.getId()){break;}}}}aa=W.pop().context;var ah=W[W.length-1]||null;E=ah?ah.context._id:null;if(aa.getController().focus){aa.getController().focus();}if(aa.getOverlayClosedCallback()){var ak=aa.getOverlayClosedCallback();ak(ag);}}},navigate:function(aj,am,aq,ai){q("navigate","Status: "+String(O));var ak;var ap;var ao=this;ak=m(aj);if(ak){if(O===u){var ah=z(ak);if(ah){var ag=ah.getId();if(ah===M){M=null;}ab.setDelay_watchdog_retries(0);if(!ah.getHandle()){q("navigate","Context ("+ag+") handle not created.");L(ah);}if(ai){var an=aa.getHiddenBy();aa.setOverlayClosedCallback(aq);if(ah.isPlayerContext===true){if(ad(ah)){G(ah);}}W.push({context:aa,hiddenById:an?an.getId():null});r();var al=aa;ap=function(){if(al.getController().defocus){al.getController().defocus();}ac(null,ah,am);};}else{ap=function(){ao.dismissPreview();ac(aa,ah,am);if(aq){aq();}};}if(ah.isLoaded()){E=null;ap();}else{q("navigate","Context ("+ag+") URL not loaded (Waiting..)");E=ag;ab.setWatchdog_retries(0);ab.setLoadedCallback(ap);ab.setFailedCallback(function(){P(ah);S(false);});ab.startWatchDog(ah,am);}}else{}}else{ae(ak,function(){ao.navigate(ak,am,aq);});}}},navigateToDefaultContext:function(ai,aj){var ag=this.getDefaultContext();if(ag){var ah=this.getNavigationLink(ag.getId());if(ah){this.navigate(ah,ai,aj,false);}}},preview:function(ag,ai){var aj;var ah;aj=m(ag);M=z(aj);if(M){ah=M.getHandle();if(M.getController()&&M.getController().preview){M.getController().preview(ai);}Q.bringContextToTop(ah);Q.showContextElement(ah);}},dismissPreview:function(){if(M){Q.hideContextElement(M.getHandle());if(M.getController().unPreview){M.getController().unPreview();}M=null;}},getNavigationLink:function(ag){var ah=x(ag);return(ah?ah.getUrl():null);},getContextBaseURL:function(ah){var ag=$N.apps.core.ContextManager.getNavigationLink(ah);if(ag){return ag.substring(0,ag.lastIndexOf("/")+1);}return null;},restartActiveContext:function(ag){aa.getController().passivate();aa.getController().activate(ag);},initialisationComplete:function(ah){var ag=x(ah.toString());if(ag){ag.setController(ah);ag.setLoaded(true);}else{}if(ag.getCachingStrategy()===B&&s(B)){Y("preEmptiveComplete");}if(!H){if(O===l){e++;if(s(h)){O=u;E=null;Y("preCachingComplete");I();}if(t){t(e,Z);}}if(p&&ag.getCachingStrategy()===B){I();}}else{if(s(h)){O=u;Y("preCachingComplete");}}},getPreviewContext:function(){return M||null;},changeVisibility:function(ag,ai){var ah;if(ag){ah=z(ag);if(ah){if(ai){Q.showContextElement(ah.getHandle());}else{R(ah,true,true);}}}},setDefaultContext:function(ah){var ai=x(ah);var ag=$N.apps.core.ContextManager.getDefaultContext();if(ag&&ai){ag.setDefault(false);ai.setDefault(true);}else{if(ai){ai.setDefault(true);}}},isOverlayActive:function(){return(W.length>0);},isPlaybackContextInStack:function(){var ah,ai=W.length,ag=null;for(ah=ai-1;ah>=0;ah--){ag=W[ah].context;if(ag.isPlayerContext===true){return true;}}return false;},navigateToPlaybackContext:function(){var ai,aj=W.length,ah=null;if(aa.isPlayerContext!==true){R(aa,false);}for(ai=aj-1;ai>=0;ai--){ah=W[ai].context;if(ah.isPlayerContext!==true){R(ah,false);}else{W.splice(ai,(aj-ai));break;}}Q.showContextElement(ah.getHandle());aa=ah;var ag=W[W.length-1]||null;E=ag?ag.context._id:null;if(aa.getController().focus){aa.getController().focus();}},reloadContexts:function(aj){var ai=0,ah=0,ag;if(af&&aj){H=true;for(ah=0;ah<aj.length;ah++){for(ai=0;ai<af.length;ai++){ag=af[ai];if(!ag.isLoaded()&&aj[ah]===ag.getId()){T(ag,A);break;}}}}},setContextLoadExpiryTime:function(ag){o=ag;},addEventListener:function(ag,ah){if(k[ag]===undefined){k[ag]=[];}k[ag].push(ah);},removeEventListener:function(ai,aj){var ah=k[ai],ag;for(ag=0;ag<ah.length;ag++){if(ah[ag]===aj){ah.splice(ag,1);}}}};}());return $N.apps.core.ContextManager;});define("jsfw/apps/core/Context",[],function(){var a=function(h,c,f,e,g,d){this._LOG_CONTEXT="context";this._APP_NAME="Context";this._id=h;this._url=c;this._caching=f;this._isLoaded=false;this._controller=null;this._handle=null;this._height=null;this._width=null;this._posX=null;this._posY=null;this._overlayClosedCallback=function(){};this._hiddenBy=null;this._isDefault=e;this.contextGroup=g||"";this._htmlType=d||"";this._loadFailTimer=null;};var b=a.prototype;b.getId=function(){return this._id;};b.getUrl=function(){return this._url;};b.getCachingStrategy=function(){return this._caching;};b.isDefault=function(){return this._isDefault;};b.getController=function(){return this._controller;};b.isLoaded=function(){return this._isLoaded;};b.getHandle=function(){return this._handle;};b.getHeight=function(){return this._height;};b.getWidth=function(){return this._width;};b.getX=function(){return this._posX;};b.getY=function(){return this._posY;};b.getHiddenBy=function(){return this._hiddenBy;};b.getOverlayClosedCallback=function(){return this._overlayClosedCallback;};b.getHtmlType=function(){return this._htmlType;};b.setController=function(c){this._controller=c;};b.setUrl=function(c){this._url=c;};b.setLoaded=function(c){if(c===null||typeof c!=="boolean"){c=false;}this._isLoaded=c;if(c&&this._loadFailTimer){clearTimeout(this._loadFailTimer);this._loadFailTimer=null;}};b.setDefault=function(c){this._isDefault=c;};b.setHandle=function(c){this._handle=c;};b.setHeight=function(c){this._height=c;};b.setWidth=function(c){this._width=c;};b.setX=function(c){this._posX=c;};b.setY=function(c){this._posY=c;};b.setGroup=function(c){this.contextGroup=c;};b.setOverlayClosedCallback=function(c){this._overlayClosedCallback=c;};b.setHiddenBy=function(c){this._hiddenBy=c;};b.startLoadingTimer=function(d,e){var c=this;this._loadFailTimer=setTimeout(function(){d(c);},e);};b.toString=function(){return"[Context "+this._id+"]";};window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.Context=a;return a;});define("jsfw/apps/core/Language",["jsfw/apps/core/Log"],function(Log){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.Language=(function(){var log=new $N.apps.core.Log("system","Language"),locale="en_gb",languageRepository={common:{strings:{}}},listeners=[],lastLbPath="";function makeBackwardsCompatible(receivingObject,initDateStrings){var str;receivingObject._strings=languageRepository.common.strings;if(languageRepository[lastLbPath]){for(str in languageRepository[lastLbPath].strings){if(languageRepository[lastLbPath].strings.hasOwnProperty(str)){receivingObject._strings[str]=languageRepository[lastLbPath].strings[str];}}}if(initDateStrings){receivingObject.dayNames=[receivingObject._strings.sunday,receivingObject._strings.monday,receivingObject._strings.tuesday,receivingObject._strings.wednesday,receivingObject._strings.thursday,receivingObject._strings.friday,receivingObject._strings.saturday];receivingObject._strings.dayNames=receivingObject.dayNames;receivingObject.monthNames=[receivingObject._strings.january,receivingObject._strings.february,receivingObject._strings.march,receivingObject._strings.april,receivingObject._strings.may,receivingObject._strings.june,receivingObject._strings.july,receivingObject._strings.august,receivingObject._strings.september,receivingObject._strings.october,receivingObject._strings.november,receivingObject._strings.december];receivingObject._strings.monthNames=receivingObject.monthNames;receivingObject.shortMonthNames=[receivingObject._strings.jan,receivingObject._strings.feb,receivingObject._strings.mar,receivingObject._strings.apr,receivingObject._strings.may,receivingObject._strings.jun,receivingObject._strings.jul,receivingObject._strings.aug,receivingObject._strings.sep,receivingObject._strings.oct,receivingObject._strings.nov,receivingObject._strings.dec];receivingObject._strings.shortMonthNames=receivingObject.shortMonthNames;}}function applyListeners(){var i;for(i=listeners.length-1;i>=0;i--){listeners[i].listener.apply(listeners[i].listeningObject,[]);}}function addStringsObjectToRepository(key,path,strings,name){languageRepository[key]={path:path,strings:strings,locale:locale,name:name};}return{REQUEST_OBJECT:XMLHttpRequest,setLocale:function(localeCode){locale=localeCode;return this;},getLocale:function(){return locale;},refreshLanguageBundles:function(){var lb,data,totalToLoad=0,numberLoaded=0;var loadedCallback=function(){numberLoaded++;log("refreshLanguageBundles","completed language bundle reload "+String(numberLoaded)+" of "+String(totalToLoad));if(numberLoaded===totalToLoad){applyListeners();}};for(lb in languageRepository){if(languageRepository.hasOwnProperty(lb)){totalToLoad++;}}for(lb in languageRepository){if(languageRepository.hasOwnProperty(lb)){data=languageRepository[lb];$N.apps.core.Language.loadLanguageBundle(loadedCallback,data.path,data.name,(lb==="common"));}}log("refreshLanguageBundles","initiated reload of "+String(totalToLoad)+" language bundles");},isCommonLanuageBundleLoaded:function(){if(languageRepository.common){return true;}return false;},isLanguageBundleLoaded:function(lbPath){if(languageRepository[lbPath]){return true;}return false;},loadLanguageBundle:function(loadedCallback,lbpath,lbName,isCommon){var key=isCommon?"common":lbpath,actualName=lbName||"LanguageBundle.js",stringObj,xmlhttp=new $N.apps.core.Language.REQUEST_OBJECT(),actualFilePath;if(window.CCOM&&CCOM.recorder&&lbpath.indexOf("http://")===-1){actualFilePath=location.href.substring(0,location.href.lastIndexOf("/")+1)+lbpath+locale+"/"+actualName;}else{actualFilePath=lbpath+locale+"/"+actualName;}xmlhttp.open("GET",actualFilePath,false);xmlhttp.send(null);try{eval("stringObj = new "+xmlhttp.responseText+"();");addStringsObjectToRepository(key,lbpath,stringObj,actualName);}catch(e){}if(loadedCallback){loadedCallback();}},unloadLanguageBundle:function(lbpath){delete languageRepository[lbpath];},adornWithGetString:function(receivingObject,lbPath){var getString=function(stringToGet){if(languageRepository[lbPath]){return languageRepository[lbPath].strings[stringToGet]||languageRepository.common.strings[stringToGet];}return languageRepository.common.strings[stringToGet];};receivingObject.getString=getString;},initLanguageBundle:function(receivingObject,initDateStrings){$N.apps.core.Language.adornWithGetString(receivingObject,lastLbPath);makeBackwardsCompatible(receivingObject,initDateStrings);},registerListener:function(listener,listeningObject){listeners.push({listener:listener,listeningObject:listeningObject});return this;},unregisterListener:function(listener){var i;for(i=0;i<listeners.length;i++){if(listeners[i].listener===listener){listeners.splice(i,1);break;}}return this;},importLanguageBundleForObject:function(receivingObject,loadedCallback,lbpath,lbName,updateCallback,callbackContext){var internalLoadedCallback=function(){$N.apps.core.Language.adornWithGetString(receivingObject,lbpath);if(updateCallback){$N.apps.core.Language.registerListener(updateCallback,receivingObject);}if(loadedCallback){if(callbackContext){loadedCallback.call(callbackContext);}else{loadedCallback();}}};if($N.apps.core.Language.isLanguageBundleLoaded(lbpath)){internalLoadedCallback();}else{$N.apps.core.Language.loadLanguageBundle(internalLoadedCallback,lbpath,lbName,false);}}};}());return $N.apps.core.Language;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.system=$N.platform.system||{};$N.platform.system.Network=(function(){var b=false,d="http://74.125.230.115",e="http://www.google.com",c=new $N.apps.core.Log("system","Network");var a=function(g){var h=CCOM.IpNetwork["interface"],k=h.length,f;for(f=0;f<k;f++){if(h[f].name===g){return h[f].id;}}return null;};return{getNetworkByType:function(g){var h=null,k=CCOM.IpNetwork["interface"],l=k.length,f;for(f=0;f<l;f++){if(k[f].name===g){h=k[f];break;}}if(h){}else{}return h;},getInterfaceByType:function(k){var g=null,h=CCOM.IpNetwork["interface"],l=h.length,f;for(f=0;f<l;f++){if(h[f].type===k){g=h[f];break;}}if(g){}else{}return g;},findNetworkByType:function(f){return this.getNetworkByType(f);},isNetworkAvailable:function(g){var f=false,h=this.getNetworkByType(g);if(h&&h.linkUp){f=true;if(g===$N.platform.system.Network.NetworkType.ETHERNET){b=true;}}c("isNetworkAvailable","exit with: "+String(f));return f;},isAvailable:function(){var g=0,f=false,h=CCOM.IpNetwork["interface"],k=h.length;for(g=0;g<k;g++){f=h[g].linkUp;if(!f){break;}}return f;},isDVBAvailable:function(){var g,f=false,h=CCOM.IpNetwork["interface"],k=h.length;for(g=0;g<k;g++){if(h[g].name!==$N.platform.system.Network.NetworkType.ETHERNET){f=h[g].linkUp;if(!f){break;}}}return f||false;},isEthernetAvailable:function(){return this.isNetworkAvailable($N.platform.system.Network.NetworkType.ETHERNET);},connectToAddress:function(h,f,l){var g=10000;if(!f){f=function(){};}if(!l){l=function(){};}var k=new $N.apps.core.AjaxHandler();k.responseCallback=function(m){if(!m||m.status!==200){l();}else{f();}};k.requestData(h,g);},testConnectionToInternet:function(f,g){this.connectToAddress(d,f,g);},testConnectionToInternetWithDNS:function(f,g){this.connectToAddress(e,f,g);},getMacAddress:function(){var f=null,g=this.getNetworkByType($N.platform.system.Network.NetworkType.ETHERNET);if(g){f=g.mac;if(f){f=f.replace(/:/g,"-");f=f.replace(/\n/g,"");}}return f||null;},isDhcpEnabled:function(){var f=this.getNetworkByType($N.platform.system.Network.NetworkType.ETHERNET);if(f){return f.dhcpEnabled;}return false;},getDhcp:function(){return this.isDhcpEnabled();},disableDHCP:function(m,f,h,k,g){var l=a($N.platform.system.Network.NetworkType.ETHERNET);CCOM.IpNetwork.setIpAddress(l,m,h);CCOM.IpNetwork.gateway=k;CCOM.IpNetwork.dns=g;},enableDHCP:function(){var f=a($N.platform.system.Network.NetworkType.ETHERNET);CCOM.IpNetwork.setIpAddress(f,"dhcp","dhcp");},getIpAddress:function(){var g,h=CCOM.IpNetwork["interface"],k=h.length,f;for(f=0;f<k;f++){if(h[f].name===$N.platform.system.Network.NetworkType.ETHERNET){return h[f].ip;}}return null;},getSubnetMask:function(){var f=this.getNetworkByType($N.platform.system.Network.NetworkType.ETHERNET);return f.netmask||null;},getDnsServers:function(){var f=CCOM.IpNetwork.dns;return f||null;},getGateway:function(){var f=CCOM.IpNetwork.gateway;return f||null;},ping:function(g,f,k,h){if(g){CCOM.IpNetwork.addEventListener("pingOK",f);CCOM.IpNetwork.addEventListener("pingFailed",k);CCOM.IpNetwork.ping(g);}},refreshNetworksCache:function(){},configure:function(f){$N.platform.system.Network.ETHERNET=f;$N.platform.system.Network.NetworkType.ETHERNET=f;},renewAddress:function(g){var f=$N.platform.system.Network.getInterfaceByType(g);if(f!==null){CCOM.IpNetwork.gateway="dhcp";CCOM.IpNetwork.setIpAddress(f.id,"dhcp","dhcp");}},StateChange:(function(){var l=false,k=function(){},g=function(){};var h=function(m){if(m["interface"].name===$N.platform.system.Network.NetworkType.ETHERNET){b=false;if(g){g();}}};var f=function(m){if(m["interface"].name===$N.platform.system.Network.NetworkType.ETHERNET){b=true;if(k){k();}}};return{setEthUpCallBack:function(m){k=m;},setEthDownCallBack:function(m){g=m;},registerListener:function(){var m=0;if(!l){CCOM.IpNetwork.addEventListener("onLinkDown",h);CCOM.IpNetwork.addEventListener("onLinkUp",f);l=true;}},unRegisterListener:function(){var m=0;if(l){CCOM.IpNetwork.removeEventListener("onLinkDown",h);CCOM.IpNetwork.removeEventListener("onLinkUp",f);l=false;}}};}())};}());$N.platform.system.Network.NetworkType={ETHERNET:"eth9",DVB_C:"",DVB_S:"",DVB_T:"",OTHER:""};$N.platform.system.Network.ETHERNET="eth9";$N.platform.system.Network.DVB_C="";$N.platform.system.Network.DVB_T="";$N.platform.system.Network.DVB_S="";var $N=$N||{};$N.platform=$N.platform||{};$N.platform.system=$N.platform.system||{};$N.platform.system.Preferences=(function(){var d=new $N.apps.core.Log("system","Preferences"),a={},b="/applications/shared/";var f=function(k){var g,h;if(a[k.keyPath]){h=a[k.keyPath];for(g=0;g<h.length;g++){h[g].callback.call(h[g].context,k.keyValue);}}};var e=function(l,n){var h=CCOM.ConfigManager.getValue(l),g,k,p,m=false;try{g=h.error?[]:$N.apps.util.JSON.parse(h.keyValue);}catch(o){g=[];}if(g&&typeof g==="object"&&g.hasOwnProperty("length")){for(k=0,p=g.length;k<p;k++){if(g[k]===n){g.splice(k,1);m=true;break;}}}return{removed:m,newArray:g};};var c=function(g){return b+g;};return{initialise:function(){CCOM.ConfigManager.addEventListener("onValueChanged",f);},get:function(h,l){var g=l?h:c(h),k=CCOM.ConfigManager.getValue(g);if(k&&!k.error){return k.keyValue;}return undefined;},set:function(h,k,m){var g=m?h:c(h),l=null;if((k!==null)&&(typeof(k)!==undefined)){l=CCOM.ConfigManager.setValue(g,k);}return(l&&!l.error);},getPreferenceObject:function(k,m){var g=m?k:c(k),h=CCOM.ConfigManager.getValue(g);try{return h.error?null:$N.apps.util.JSON.parse(h.keyValue);}catch(l){return null;}},setPreferenceObject:function(h,k,m){var g=m?h:c(h),l=null;if(k&&typeof k==="object"){l=CCOM.ConfigManager.setValue(g,$N.apps.util.JSON.stringify(k));}return(l&&!l.error);},deletePreference:function(h,l){var g=l?h:c(h),k=CCOM.ConfigManager.unsetValue(g);return(k&&!k.error);},removeValueFromArray:function(h,l,n){var g=n?h:c(h),m=null,k=e(g,l);if(k&&k.removed){m=CCOM.ConfigManager.setValue(g,$N.apps.util.JSON.stringify(k.newArray));}return(m&&!m.error);},monitorValue:function(l,k,h,m){var g=m?l:c(l);if(k){if(!a[g]){a[g]=[];}a[g].push({callback:k,context:h});CCOM.ConfigManager.addNotify(g);}},unmonitorValue:function(n,m,k,o){var h=o?n:c(n),l,g;if(h&&a[h]&&a[h].length!==0){for(l=0,g=a[h].length;l<g;l++){if(a[h][l].callback===m&&a[h][l].context===k){a[h].splice(l,1);break;}}}}};}());define("jsfw/apps/core/AjaxHandler",[],function(){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.AjaxHandler=function(){var d,k,g=this,a="",e=null,h,b=false;var c=function(){var l=null;if(window.XMLHttpRequest){l=new XMLHttpRequest();}if(window.ActiveXObject){l=new ActiveXObject("Microsoft.XMLHTTP");}return l;};var f=function(){var l;if(d.readyState===1){try{if(a==="POST"&&typeof h==="string"){d.setRequestHeader("Content-Length",0);d.setRequestHeader("Authorization",h);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");d.setRequestHeader("Accept","application/json");}if(a==="POST"&&typeof h==="object"){for(l in h){if(h.hasOwnProperty(l)){d.setRequestHeader(l,h[l]);}}}else{d.setRequestHeader("Content-Type","text/plain; charset=UTF-8");}d.send(e);}catch(l){console.log(l);if(l.code===11){d.abort();if(g.responseCallback){g.responseCallback(l,false);}}}}else{if(d.readyState===4){if(k){clearTimeout(k);}if(!b&&g.responseCallback){g.responseCallback(d,true);}}}};this.responseCallback=function(){};this.setResponseCallback=function(l){this.responseCallback=l||function(){};};this.requestData=function(m,l,n){var o=(n===true)?false:true;if(l){k=setTimeout(function(){b=true;g.responseCallback(null,false);},l);}a="GET";d.open(a,m,o);};this.requestHeader=function(m,l){if(l){k=setTimeout(function(){g.responseCallback(null,false);},l);}a="HEAD";d.open(a,m,true);};this.postData=function(m,n,l){a="POST";e=l;h=n;d.open(a,m,true);};this.deleteData=function(l){a="DELETE";e=null;d.open(a,l,true);};d=c();d.onreadystatechange=f;};return $N.apps.core.AjaxHandler;});define("jsfw/platform/system/Device",["jsfw/apps/core/Log","jsfw/platform/system/Preferences"],function(a,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.system=$N.platform.system||{};$N.platform.system.Device=(function(){var k=new $N.apps.core.Log("system","Device"),x=0,u=0,y=null,d,m=["sdb1"],h=0,w={},v="/system/opentv/mpm/mediaList",q="/system/opentv/mpm/sda/partitionList",n="system/audioType",l="system/audioChannels",f="/users/preferences/audioLanguage",s="/users/preferences/subtitleLanguage",t="system/countryCode",g;function r(A){var z="/system/opentv/mpm/"+d+"/"+A+"/mountPoint";return $N.platform.system.Preferences.get(z,true);}function e(){var z;u=0;x=0;h=0;w={};for(z=0;z<m.length;z++){w[CCOM.MediaLibrary.getTotalPartitionSpace(r(m[z]))]=m[z];w[CCOM.MediaLibrary.getFreePartitionSpace(r(m[z]))]=m[z];}}function c(z){x+=z.totalSpace||0;}function o(z){u+=z.freeSpace||0;if(++h===m.length&&y){y(u);y=null;}}var p={init:function(){d=$N.platform.system.Preferences.get(v,true);q="/system/opentv/mpm/"+d+"/partitionList";m=String($N.platform.system.Preferences.get(q,true)).split(",");CCOM.MediaLibrary.addEventListener("getTotalPartitionSpaceOK",c);CCOM.MediaLibrary.addEventListener("getTotalPartitionSpaceFailed",c);CCOM.MediaLibrary.addEventListener("getFreePartitionSpaceOK",o);CCOM.MediaLibrary.addEventListener("getFreePartitionSpaceFailed",o);e();g=setInterval(e,120000);},initialise:function(){this.init();},unregister:function(){CCOM.MediaLibrary.removeEventListener("getTotalPartitionSpaceOK",c);CCOM.MediaLibrary.removeEventListener("getTotalPartitionSpaceFailed",c);CCOM.MediaLibrary.removeEventListener("getFreePartitionSpaceOK",o);CCOM.MediaLibrary.removeEventListener("getFreePartitionSpaceFailed",o);clearInterval(g);},getSerialNumber:function(){return CCOM.ConditionalAccess.getSystemInfo().systemInfo.serialNumber;},getManufacturer:function(){return CCOM.System.manufacturer;},getModel:function(){return CCOM.System.model;},getBootloaderVersion:function(){return CCOM.System.bootloaderVersion;},getFirmwareVersion:function(){return CCOM.System.firmwareVersion;},getOsVersion:function(){return CCOM.System.softwareVersion;},getHardwareVersion:function(){return CCOM.System.hardwareVersion;},getVolume:function(){return Number(CCOM.System.volume);},getPreferredAudioType:function(){return $N.platform.system.Preferences.get(n);},getPreferredAudioChannels:function(){return $N.platform.system.Preferences.getPreferenceObject(l);},getPreferredLanguages:function(){return $N.platform.system.Device.getPreferredAudioLanguage();},getPreferredAudioLanguage:function(){return $N.platform.system.Preferences.get(f,true);},getPreferredSubtitleLanguage:function(){return $N.platform.system.Preferences.get(s,true);},getCountryCode:function(){return $N.platform.system.Preferences.get(t);},getTotalHardDriveSpace:function(){return x;},getFreeHardDriveSpace:function(z){if(z){y=z;e();}else{y=null;}return u;},getSoftwareVersion:function(){return CCOM.System.softwareVersion;},setVolume:function(z){z=Number(z);if(z>=0){CCOM.System.volume=parseInt(z,10);}},setPreferredAudioType:function(z){$N.platform.system.Preferences.set(n,z);},setPreferredAudioChannels:function(z){$N.platform.system.Preferences.setPreferenceObject(l,z);},setPreferredLanguages:function(z){$N.platform.system.Device.setPreferredAudioLanguage(z[0]);},setPreferredAudioLanguage:function(z){$N.platform.system.Preferences.set(f,z,true);},setPreferredSubtitleLanguage:function(z){$N.platform.system.Preferences.set(s,z,true);},setCountryCode:function(z){$N.platform.system.Preferences.set(t,z);},deletePrefs:function(C){var A=true,z=C.length,B=0;for(B=0;B<z;B++){if(!$N.platform.system.Preferences.deletePreference(C[B])){A=false;}}return A;},reboot:function(){var z=true;if(!CCOM.System.reboot()){z=false;}return z;},isHardDriveAvailable:function(){d=$N.platform.system.Preferences.get(v,true);return d?true:false;},setDiskPartitions:function(z){m=z;e();}};return p;}());return $N.platform.system.Device;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.system=$N.platform.system||{};$N.platform.system.Scan=(function(){return{NetworkType:{DVBC:1,DVBS:2,DVBT:3},Error:{MISC_ERROR:1,BUSY:2,INVALID_PARAMS:3,UNAVAILABLE:4,CANCELLED:5},DVBC_Modulation:{QAM16:1,QAM32:2,QAM64:3,QAM128:4,QAM256:5},DVBC_OuterFEC:{AUTO:0,REED:1},DVBS_InnerFEC:{_1_2:1,_2_3:2,_3_4:3,_5_6:4,_7_8:5,_8_9:6,_3_5:7,_4_5:8,_9_10:9,NONE:15},DVBS_Orbit:{WEST:0,EAST:1},DVBS_Polarization:{LINEAR_HORIZONTAL:0,LINEAR_VERTICAL:1,CIRCULAR_LEFT:2,CIRCULAR_RIGHT:3},DVBS_RollOff:{_0_35:0,_0_25:1,_0_20:2},DVBS_ModulationSystem:{},DVBS_ModulationType:{AUTO:0,QPSK:1,_8PSK:2,_16PSK:3},DVBT_Bandwidth:{},DVBT_Priority:{},DVBT_Constellation:{},DVBT_HierarchInfo:{},DVBT_CodeRate:{},DVBT_GuardInterval:{},DVBT_TransmissionMode:{}};}());define("jsfw/platform/system/Upgrade",["jsfw/apps/core/Log"],function(a){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.system=$N.platform.system||{};$N.platform.system.Upgrade=(function(){var d=new $N.apps.core.Log("system","Upgrade"),g=function(){},k=function(){},c=function(){},o=function(){},m=function(){},b=function(){},n=null;function l(p){var q=0;}function f(p){}function e(p){if(m){m(n);}}function h(){}return{checkForUpgrade:function(){var p=this;h();n=$N.platform.system.Upgrade.CHECKING_STATUS;},upgrade:function(){var p=this;CCOM.system.upgrade();},setUpgradeCheckFailedCallback:function(p){if(!p){p=function(){};}b=p;},setForcedUpgradeCallback:function(p){if(!p){p=function(){};}g=p;},setNonForcedUpgradeCallback:function(p){if(!p){p=function(){};}k=p;},setDownloadCallback:function(p){if(!p){p=function(){};}c=p;},setInstallCallback:function(p){if(!p){p=function(){};}o=p;},setCompletedUpgradeCallback:function(p){if(!p){p=function(){};}m=p;},getUpgradeStatus:function(){return n;}};}());return $N.platform.system.Upgrade;});$N.platform.system.Upgrade.CHECKING_STATUS=0;$N.platform.system.Upgrade.UPGRADE_AVAILABLE_STATUS=1;$N.platform.system.Upgrade.UP2DATE_STATUS=2;$N.platform.system.Upgrade.NOTSUPPORTED_STATUS=3;$N.platform.system.Upgrade.DOWNLOADING_STATUS=4;$N.platform.system.Upgrade.INSTALLING_STATUS=5;$N.platform.system.Upgrade.DOWNLOAD_ERROR_STATUS=6;$N.platform.system.Upgrade.INSTALL_ERROR_STATUS=7;$N.platform.system.Upgrade.COMPLETE_STATUS=8;$N.platform.system.Upgrade.COMPLETE_AND_RESET_STATUS=9;$N.platform.system.Upgrade.UPGRADE_UNNECESSARY_STATUS=10;$N.platform.system.Upgrade.CHECK_ERROR_STATUS=11;$N.platform.system.Upgrade.UNEXPECTED_STATUS=12;$N.platform.system.Upgrade.CHECK_BUSY_STATUS=12;(function(a){function c(){this._PLATFORM="OTV";this._PLATFORM_VARIANT="";}var b=c.prototype;b.KEY_ZERO="0";b.KEY_ONE="1";b.KEY_TWO="2";b.KEY_THREE="3";b.KEY_FOUR="4";b.KEY_FIVE="5";b.KEY_SIX="6";b.KEY_SEVEN="7";b.KEY_EIGHT="8";b.KEY_NINE="9";b.KEY_UP="up";b.KEY_DOWN="down";b.KEY_LEFT="left";b.KEY_RIGHT="right";b.KEY_OK="ok";b.KEY_ENTER="enter";b.KEY_BACK="back";b.KEY_FORWARD="forward";b.KEY_REFRESH="refresh";b.KEY_MENU="menu";b.KEY_PORTAL="portal";b.KEY_TV="tv";b.KEY_RADIO="radio";b.KEY_EXIT="exit";b.KEY_HOME="home";b.KEY_INFO="info";b.KEY_ESCAPE="escape";b.KEY_GUIDE="guide";b.KEY_SUBTITLE="subtitle";b.KEY_TELETEXT="teletext";b.KEY_FAVOURITES="favourites";b.KEY_AUDIO="audio";b.KEY_LANG="lang";b.KEY_PLAY_PAUSE="play/pause";b.KEY_PLAY="play";b.KEY_PAUSE="pause";b.KEY_STOP="stop";b.KEY_RECORD="record";b.KEY_JUMP="jump";b.KEY_REW="rw";b.KEY_FFW="ff";b.KEY_SKIP_FW="skipfw";b.KEY_SKIP_REW="skiprew";b.KEY_CHAN_UP="chup";b.KEY_CHAN_DOWN="chdown";b.KEY_VOL_DOWN="voldown";b.KEY_VOL_UP="volup";b.KEY_MUTE="mute";b.KEY_REPLAY="replay";b.KEY_RED="red";b.KEY_GREEN="green";b.KEY_YELLOW="yellow";b.KEY_BLUE="blue";b.KEY_SLEEP="sleep";b.KEY_POWER="power";b.KEY_PG_UP="pgup";b.KEY_PG_BACK="pgback";b.KEY_PG_FWD="pgfwd";b.KEY_PG_DOWN="pgdown";b.KEY_PICTURE_FORMAT="picture_format";b.KEY_NEXT_CHANNEL="next_channel";b.KEY_PREVIOUS_CHANNEL="prev_channel";b.KEY_SETTINGS="settings";b.KEY_VOD="vod";b.KEY_AUX="aux";b.KEY_CONTENT="content";b.KEY_GAMES="games";b.KEY_DEL="delete";b.KEY_CHAN_FLIP="channel_flip";b.KEY_TV_VIDEO_ON_DEMAND="video_on_demand";b.KEY_SEARCH="search";b.KEY_VIEW="view";b.KEY_AGORA="agora";b.KEY_MOSAIC="mosaic";b.KEY_PPV="ppv";b._KEYMAP={48:b.KEY_ZERO,49:b.KEY_ONE,50:b.KEY_TWO,51:b.KEY_THREE,52:b.KEY_FOUR,53:b.KEY_FIVE,54:b.KEY_SIX,55:b.KEY_SEVEN,56:b.KEY_EIGHT,57:b.KEY_NINE,38:b.KEY_UP,40:b.KEY_DOWN,37:b.KEY_LEFT,39:b.KEY_RIGHT,61479:b.KEY_TV,61487:b.KEY_RADIO,36:b.KEY_HOME,61538:b.KEY_EXIT,917778:b.KEY_MOVIES,67:b.KEY_PVR,61455:b.KEY_POWER,75:b.KEY_SETTINGS,61472:b.KEY_SUBTITLE,917777:b.KEY_GUIDE,90:b.KEY_PICTURE_FORMAT,85:b.KEY_TV_ON_DEMAND,61451:b.KEY_OK,61512:b.KEY_BACK,8:b.KEY_BACK,61458:b.KEY_MENU,3676593799:b.KEY_PORTAL,61467:b.KEY_GUIDE,61492:b.KEY_AUX,61516:b.KEY_VOL_UP,61517:b.KEY_VOL_DOWN,61510:b.KEY_CHAN_UP,61511:b.KEY_CHAN_DOWN,61526:b.KEY_RECORD,61506:b.KEY_RED,61507:b.KEY_GREEN,61508:b.KEY_YELLOW,61509:b.KEY_BLUE,61522:b.KEY_STOP,61520:b.KEY_PLAY_PAUSE,61521:b.KEY_PLAY,19:b.KEY_PAUSE,61530:b.KEY_FFW,61529:b.KEY_REW,61532:b.KEY_SKIP_FW,61531:b.KEY_SKIP_REW,61466:b.KEY_FAVOURITES,61490:b.KEY_TELETEXT,61495:b.KEY_AUDIO,62720:b.KEY_PPV,62721:b.KEY_SEARCH,62722:b.KEY_VOD,61460:b.KEY_INFO,61501:b.KEY_AGORA,62724:b.KEY_MOSAIC,61518:b.KEY_MUTE,61523:b.KEY_REPLAY};b.getPlatform=function(){return this._PLATFORM;};b.getPlatformVariant=function(){return this._PLATFORM_VARIANT;};b.getKey=function(d){return this._KEYMAP[d];};b.getKeyMap=function(){return this._KEYMAP;};a.platform=a.platform||{};a.platform.input=a.platform.input||{};a.platform.input.BaseKeyMap=c;}($N||{}));(function(a){function b(){this._PLATFORM="KeyMapNET";this._PLATFORM_VARIANT="";this._KEYMAP[917556]=this.KEY_INFO;this._KEYMAP[917557]=this.KEY_POWER;this._KEYMAP[112]=this.KEY_MENU;this._KEYMAP[3676593799]=this.KEY_PORTAL;this._KEYMAP[113]=this.KEY_GUIDE;this._KEYMAP[917786]=this.KEY_FAVOURITES;this._KEYMAP[61523]=this.KEY_REPLAY;this._KEYMAP[13]=this.KEY_OK;this._KEYMAP[84]=this.KEY_AGORA;this._KEYMAP[87]=this.KEY_MOSAIC;this._KEYMAP[81]=this.KEY_ENTER;this._KEYMAP[69]=this.KEY_BACK;this._KEYMAP[82]=this.KEY_EXIT;this._KEYMAP[89]=this.KEY_HOME;this._KEYMAP[85]=this.KEY_INFO;this._KEYMAP[73]=this.KEY_ESCAPE;this._KEYMAP[79]=this.KEY_GUIDE;this._KEYMAP[80]=this.KEY_PLAY;this._KEYMAP[65]=this.KEY_PAUSE;this._KEYMAP[83]=this.KEY_STOP;this._KEYMAP[68]=this.KEY_RECORD;this._KEYMAP[70]=this.KEY_REW;this._KEYMAP[71]=this.KEY_FFW;this._KEYMAP[72]=this.KEY_SKIP_FW;this._KEYMAP[74]=this.KEY_SKIP_REW;this._KEYMAP[76]=this.KEY_CHAN_UP;this._KEYMAP[88]=this.KEY_CHAN_DOWN;this._KEYMAP[67]=this.KEY_VOL_DOWN;this._KEYMAP[86]=this.KEY_VOL_UP;this._KEYMAP[66]=this.KEY_MUTE;this._KEYMAP[78]=this.KEY_RED;this._KEYMAP[77]=this.KEY_GREEN;this._KEYMAP[44]=this.KEY_YELLOW;this._KEYMAP[46]=this.KEY_BLUE;this._KEYMAP[8]=this.KEY_DEL;}b.prototype=new a.platform.input.BaseKeyMap();a.platform=a.platform||{};a.platform.input=a.platform.input||{};a.platform.input.KeyMap_NET=b;}($N||{}));define("jsfw/apps/core/KeyInterceptor",["jsfw/apps/core/Log"],function(a){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.core=$N.apps.core||{};$N.apps.core.KeyInterceptor=(function(){var f=new $N.apps.core.Log("INPUT","KeyInterceptor"),h=[],k=null,d,c=null,g="_rel",e="keyup";function b(l){for(i=(h.length-1);i>=0;i--){if(h[i].interceptor.call(h[i].callFunc,l)){return true;}}return false;}return{init:function(o,n,l,s,q,r){var m=this;k=null;h=[];d=function(t){m.keyPressed(t);};if(q){c=q;}if(l&&typeof l==="string"){l=l.replace(/[ |\-]/g,"");}var p="KeyMap_"+l+"_"+s;if(!window[p]&&(!$N||!$N.platform||!$N.platform.input||!$N.platform.input[p])){p="KeyMap_"+l;}if(window[p]){k=new window[p]();}else{if($N&&$N.platform&&$N.platform.input&&$N.platform.input[p]){k=new $N.platform.input[p]();}else{if(o){if(o){k=o;}else{}}}}if(n){this.registerInterceptor(n,this);}document.addEventListener("keydown",d,false);if(r){document.addEventListener(e,d,false);}},androidKeyEvent:function(m){var l=document.createEvent("KeyboardEvent");Object.defineProperty(l,"keyCode",{get:function(){return this.keyCodeVal;}});Object.defineProperty(l,"which",{get:function(){return this.keyCodeVal;}});if(l.initKeyboardEvent){l.initKeyboardEvent("keydown",true,true,document.defaultView,false,false,false,false,m,m);}else{l.initKeyEvent("keydown",true,true,document.defaultView,false,false,false,false,m,0);}l.keyCodeVal=m;document.dispatchEvent(l);},getKeyMap:function(){return k;},keyPressed:function(o){if(navigator.userAgent&&navigator.userAgent.indexOf("Android")===-1){o.preventDefault();}var n=o.keyCode||o.which,l=k?k.getKey(Math.floor(n)):null,m=0;if(o.type===e&&l){l+=g;b(l);return true;}else{if(o.type!==e){if(c){document.removeEventListener("keydown",d,false);setTimeout(function(){document.addEventListener("keydown",d,false);},c);}return b(l||n);}}return false;},registerInterceptor:function(l,m){h.push({interceptor:l,callFunc:m});},unregisterInterceptor:function(m){var l;for(l=0;l<h.length;l++){if(h[l].interceptor===m){h.splice(l,1);break;}}}};}());return $N.apps.core.KeyInterceptor;});define("jsfw/apps/util/JSON",[],function(){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.util=$N.apps.util||{};$N.apps.util.JSON=window.JSON||(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}return{stringify:function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});},parse:function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");}};}());return $N.apps.util.JSON;});define("jsfw/apps/util/StateMachine",["jsfw/apps/core/Log"],function(a){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.util=$N.apps.util||{};$N.apps.util.StateMachine=function(){var b=new $N.apps.core.Log("util","StateMachine");this.states={};this.previousState=null;this.currentState=null;this.setStates=function(c){var d;this.states=c;for(d in this.states){if(this.states.hasOwnProperty(d)){this.states[d].stateName=d;if(this.states[d].init){this.states[d].init();}}}return this;};this.switchState=function(d,c,e){b("switchState","to="+(d?d.stateName:"null")+" from="+(this.currentState?this.currentState.stateName:"null"));this.previousState=this.currentState;this.currentState=d;if(c!==false){c=true;}if(this.previousState&&this.previousState.passivate&&c){this.previousState.passivate();}if(this.currentState&&this.currentState.activate){this.currentState.activate(e);}};};return $N.apps.util.StateMachine;});define("jsfw/apps/util/Clock",[],function(){var a=function(c,b){this.granularityMilliSec=c*1000;this.timeChangedCallback=b;this.clockTimeout=null;};a.prototype.updateClock=function(){var b=new Date();this.timeChangedCallback(new Date(b));var d=b.getTime();d-=(d%this.granularityMilliSec);d+=this.granularityMilliSec;d+=10;var c=this;this.clockTimeout=setTimeout(function(){c.updateClock();},d-b.getTime());};a.prototype.activate=function(){this.updateClock();};a.prototype.deactivate=function(){if(this.clockTimeout){clearTimeout(this.clockTimeout);}this.clockTimeout=null;};a.prototype.timeToString=function(c){if(typeof c==="number"){c=new Date(c);}var b=c.getHours();var d=c.getMinutes();return((b<10)?("0"+String(b)):String(b))+":"+((d<10)?("0"+String(d)):String(d));};a.prototype.timeStringDiff=function(e,c){var d=(Number(e.substring(0,2))*60)+Number(e.substring(3,5));var b=(Number(c.substring(0,2))*60)+Number(c.substring(3,5));if(b<d){return(24*60)-d+b;}return b-d;};a.prototype.dateToString=function(e,c){if(typeof e==="number"){e=new Date(e);}var b=e.getDate();var f=c.monthNames[e.getMonth()];var d=e.getFullYear();return(String(b)+" "+f+" "+String(d));};window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.util=$N.apps.util||{};$N.apps.util.Clock=a;return a;});define("jsfw/apps/util/EventManager",[],function(){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.util=$N.apps.util||{};$N.apps.util.EventManager=(function(){var b={};var a={};var f=1;var d=function(h,g){this.id=f++;this.listener=function(k){h.call(g,k);};};var e=function(k,h){var g;for(g=0;g<h.length;g++){if(h[g].id===k){return g;}}};var c=function(g){a[g]=null;delete a[g];};return{create:function(g){var h;if(g&&!b[g]){h=window.document.createEvent("Event");h.initEvent(g,true,true);b[g]={name:g,ev:h,subs:[]};}else{throw"EventManager: create - Invalid event name passed, blank or exists!";}return true;},remove:function(g){if(g&&b[g]){b[g].ev=null;b[g].subs=null;b[g]=null;delete b[g];}else{throw"EventManager: remove - Cannot remove an event that does not exist!";}return true;},fire:function(h,g){var k;if(h&&b[h]){k=b[h].ev;k.data=g;window.document.dispatchEvent(k);}else{throw"EventManager: fire - Attempted to fire an event that does not exist!";}return true;},subscribe:function(g,l,h){var k;if(g&&l&&h){k=new d(l,h);a[k.id]=b[g];b[g].subs.push(k);window.document.addEventListener(g,k.listener,false);}else{throw"EventManager: subscribe - Mandatory arguments not provided!";}return k.id;},unSubscribe:function(h){var k,g;if(h&&a[h]){k=a[h];g=e(h,k.subs);window.document.removeEventListener(k.name,k.subs[g].listener,false);c(h);k.subs.splice(g,1);}else{throw"EventManager: unSubscribe - Mandatory arguments not provided or subscription no longer exists!";}},unSubscribeAll:function(g){var l,h,k;if(g&&b[g]){l=b[g];h=l.subs;for(k=0;k<h.length;k++){window.document.removeEventListener(l.name,h[k].listener,false);c(h[k].id);}h=[];}else{throw"EventManager: unSubscribeAll - Argument not provided or event doesn't exist!";}}};}());return $N.apps.util.EventManager;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.EPG=(function(){var q=new $N.apps.core.Log("btv","EPG"),W=3600000,b=86400000*7,Q=86400000,z=[],U=[],f=[],c=[],l=[],t={},L=[],p=[],s=[],B=[],x,H=[],w=true,N={Persistent:"PC",RAM:"RC"},S={GATEWAY:"GATEWAY",SDP:"SDP"},d,R={},u=[],D=20,k=true,y=false,K=false;function G(){var Z=$N.platform.btv.PersistentCache.getServices();return $N.platform.btv.EPGServiceFactory.mapArray(Z);}function o(ai,ab,ae,ah,ag){var aa=[];var ac;var Z,ad;var af=ai?ai.length:0;if(af>0){if(ai[0].startTime>ab){aa.push(ag(ah,ab,ai[0].startTime));}for(ac=0;ac<af;ac++){Z=ai[ac];ad=ai[ac+1];aa.push(Z);if(ad&&Z.endTime<ad.startTime){aa.push(ag(ah,Z.endTime,ad.startTime));}}if(Z.endTime<ae){aa.push(ag(ah,Z.endTime,ae));}}else{aa.push(ag(ah,ab,ae));}return aa;}function e(){var ac=G(),ad,ab,aa,Z;z=[];U=[];c=[];l=[];f=[];t={};p=[];s=[];Z=x.getServices();if(Z&&Z.length>0){ac=ac.concat(Z);}L=ac;for(ab=0;ab<L.length;ab++){ad=L[ab];t[ad.serviceId]=ad;p.push(ad.serviceId);if((ad.uri)&&(ad.uri.substring(0,6)==="dvb://")){z.push(ad);f.push(ad);ad.isSubscribed=true;}else{U.push(ad);s.push(ad.serviceId);if(ad.isSubscribed){f.push(ad);}}if(ad.serviceType===$N.data.EPGService.SERVICE_TYPE.TV){c.push(ad);}else{if(ad.serviceType===$N.data.EPGService.SERVICE_TYPE.RADIO){l.push(ad);}}}for(aa=0;aa<B.length;aa++){B[aa].callbackFunction.call(B[aa].caller);}}function g(Z){return(new Date().getTime()-Z._data.cacheTimestamp>=d);}function v(Z){var ab,aa=Z.length;for(ab=aa-1;ab>=0;ab--){if(g(Z[ab])){return true;}}return false;}function V(Z){if(k){$N.platform.btv.PersistentCache.cacheEvents(Z);if(w){x.cacheEvents(Z);}}}var A=function(Z){var aa,ab;for(aa=0;aa<Z.length;aa++){ab=Z[aa];x.cacheService(ab);}};var P=function(Z){var aa,ab,ac;ab=Z.sid;for(aa=0;aa<Z.events.length;aa++){ac=Z.events[aa];ac.sid=ab;V([ac]);}};function T(aa,Z){return aa.logicalChannelNum-Z.logicalChannelNum;}function M(aa){var ab=[];var Z;for(Z=0;Z<aa.length;Z++){ab.push(aa[Z].serviceId);}return ab;}function X(ae,Z,ad,ai,ab){var af=CCOM.EPG.getEventsRSByQuery("*",ae,Z),ac=[],aa=function(){af.reset();af=null;af.removeEventListener("fetchNextOK",ah);af.removeEventListener("fetchNextFailed",ag);},ah=function(aj){if(aj.results&&aj.results.length){ac=ac.concat([].slice.call(aj.results,0));if((ab&&ac.length<ab)||aj.results.length===D){af.fetchNext(D);}else{aa();ad(ac);}}else{aa();ad(ac);}},ag=function(aj){ai();aa();};if(!af.error){af.addEventListener("fetchNextOK",ah);af.addEventListener("fetchNextFailed",ag);if(ab<D){af.fetchNext(ab);}else{af.fetchNext(D);}}else{ai();}}function r(ac){var ab,ad=[],aa,Z;if(!ac.error){ab=ac.getNext(D);while(ab&&ab.length){Z=ab.length;q("getArrayFromResultSet","Processing "+String(Z)+" records...");for(aa=0;aa<Z;aa++){ad.push($N.platform.btv.EPGEventFactory.mapObject(ab[aa]));}if(Z<D){ab=null;}else{ab=ac.getNext(D);}}}else{}if(ac){ac.reset();ac=null;}q("getArrayFromResultSet","Exit - returnArray length = "+String(ad.length));return ad;}function a(aa){var Z;for(Z=0;Z<H.length;Z++){if(H[Z]===aa){return true;}}return false;}function h(aa){var Z={};Z.serviceId=aa;Z.gapsArray=[];return Z;}function J(ac,aa,ab){var Z;if(!R[ac]){Z=h(ac);Z.gapsArray.push({startTime:aa,endTime:ab});R[ac]=Z;u.push(Z);}else{Z=R[ac];Z.gapsArray.push({startTime:aa,endTime:ab});}}function F(aj,ai,aa,ad){var Z,ac,ab,af=null,ae=[],ah=true,ag={};R={};u=[];for(ac=0;ac<aj.length;ac++){if(ac===0){ag[aj[ac].serviceId]=true;}else{if(ac>0&&aj[ac].serviceId!==aj[ac-1].serviceId){if(aj[ac-1].endTime<ad){J(aj[ac-1].serviceId,aj[ac-1].endTime,ad);}ah=true;ag[aj[ac].serviceId]=true;}}if(ah){if(aj[ac].startTime>aa){J(aj[ac].serviceId,aa,aj[ac].startTime);}}else{if(aj[ac].startTime!==aj[ac-1].endTime){J(aj[ac].serviceId,aj[ac-1].endTime,aj[ac].startTime);}}ah=false;}if(aj[ac-1]&&aj[ac-1].endTime<ad){J(aj[ac-1].serviceId,aj[ac-1].endTime,ad);}for(ac=0;ac<ai.length;ac++){if(!ag[ai[ac]]){J(ai[ac],aa,ad);}}if(u.length>0){for(ac=0;ac<ai.length;ac++){for(ab=0;ab<u.length;ab++){if(ai[ac]===u[ab].serviceId){ae.push(u[ab]);break;}}}}return({array:ae,lookUp:R});}function E(ai,ag,Z,aa){var ae=0,ah=0,af,ad=[],ac,ab;for(ac=0;ac<ai.length;ac++){af=ag.lookUp[ai[ac]];if(af&&aa[ah]){if(aa[ah].serviceId===ai[ac]){ad=af.gapsArray;for(ab=0;ab<ad.length;ab++){while(aa[ah]&&aa[ah].serviceId===ai[ac]&&aa[ah].startTime<ad[ab].endTime){if(ad[ab].startTime!==ad[ab].endTime&&((aa[ah].startTime<ad[ab].startTime&&aa[ah].endTime>ad[ab].startTime)||(aa[ah].startTime>=ad[ab].startTime&&aa[ah].endTime<=ad[ab].endTime)||(aa[ah].startTime<ad[ab].endTime&&aa[ah].endTime>ad[ab].endTime))){while(Z[ae]&&Z[ae].serviceId===ai[ac]&&Z[ae].endTime<=ad[ab].startTime){ae++;}if(Z.length>ae){Z.splice(ae,0,aa[ah]);}else{Z.push(aa[ah]);}ad[ab].startTime=aa[ah].endTime;}ah++;}}}}if(Z&&Z[ae]){while(ae<Z.length&&Z[ae].serviceId===ai[ac]){ae++;}}if(aa&&aa[ah]){while(ah<aa.length&&aa[ah].serviceId===ai[ac]){ah++;}}}return Z;}function O(ad,ac,Z,af){var ab,ae=[];var aa=function(ag){if(ag&&!v(ag)){af(ag);}else{af(null);}};for(ab=0;ab<ad.array.length;ab++){ae.push(ad.array[ab].serviceId);}x.fetchEventsByWindow(ae,ac,Z,aa);}function C(ag,ab,ae,ah){var ad,aa=[],af=this;var ac=function(ai){if(ai){V(ai);ah(ai);}else{ah(null);}};var Z=function(){ah(null);};for(ad=0;ad<ag.array.length;ad++){aa.push(ag.array[ad].serviceId);}$N.services.sdp.EPG.fetchEventsByWindow(aa,ab,ae,ac,Z);}function n(ag,aa,ae,ah){var ad,ac=[],af=this;var ab=function(ai){if(ai){V(ai);ah(ai);}else{ah(null);}};var Z=function(){ah(null);};for(ad=0;ad<ag.array.length;ad++){ac.push(ag.array[ad].serviceId);}$N.services.gateway.HomeCruise.fetchEitData(ac[0],aa,ae,ab,Z);}function I(Z,aa){setInterval(function(){x.removeEventsOlderThan(new Date().getTime()-Z);},aa);}function m(ac,Z,ab,aa,ad){ac.call($N.platform.btv.EPGCache,Z.serviceId,function(ae){if(!ae||g(ae)){if(Z.deliveryMethod===$N.data.EPGService.DELIVERY_TYPE.GATEWAY&&a(S.GATEWAY)){ab();}else{if((y||Z.deliveryMethod===$N.data.EPGService.DELIVERY_TYPE.IP)&&a(S.SDP)){aa();}else{ad(null);}}}else{ad(ae);}});}function Y(aa){var Z;Z=t[String(aa)];if(Z){return Z;}return{serviceId:aa,deliveryMethod:$N.data.EPGService.DELIVERY_TYPE.IP};}return{init:function(ad){var ac,aa,ab,Z;if(!ad){ad={dataSources:[S.SDP],cacheExpiryTime:W,cacheType:N.RAM,useRAMCache:true,cacheEvents:true,expiredEventsTime:b,checkForExpiredEventsTime:Q,extendedIPSchedule:false};}aa=ad.expiredEventsTime||b;ab=ad.checkForExpiredEventsTime||Q;x=$N.platform.btv.EPGCache;if(ad.useRAMCache===false||ad.cacheType===N.Persistent){w=false;}else{w=true;}y=ad.extendedIPSchedule||false;k=ad.cacheEvents||false;if(ad.dataSources&&ad.dataSources.length>0){for(ac=0;ac<ad.dataSources.length;ac++){Z=ad.dataSources[ac];if(Z===S.GATEWAY&&$N.services&&$N.services.gateway&&$N.services.gateway.HomeCruise){H.push(Z);$N.services.gateway.HomeCruise.addEventListener("ChannelListUpdated",A);$N.services.gateway.HomeCruise.addEventListener("EventListUpdated",P);}else{if(Z===S.SDP&&$N.services&&$N.services.sdp&&$N.services.sdp.EPG){H.push(Z);}}}}d=(ad.cacheExpiryTime!==undefined&&ad.cacheExpiryTime!==null)?ad.cacheExpiryTime:W;I(aa,ab);$N.platform.btv.PersistentCache.addEPGServicesUpdatedListener(e);e();K=$N.platform.system.Network.isNetworkAvailable($N.platform.system.Network.NetworkType.ETHERNET);},initialise:function(Z){this.init(Z);},refresh:e,getAllChannels:function(){return L;},removeAllChannels:function(){},getAllChannelsOrderedByChannelNumber:function(){if(L.length>0){var Z=L.slice(0);return Z.sort(T);}else{return[];}},getSubscribedChannelsOrderedByChannelNumber:function(){var Z=f.slice(0);return Z.sort(T);},getRadioChannelsOrderedByChannelNumber:function(){var Z=l.slice(0);return Z.sort(T);},getVideoChannelsOrderedByChannelNumber:function(){var Z=c.slice(0);return Z.sort(T);},getIPChannels:function(){return U;},getIPServiceIdArray:function(){return s;},getDVBChannels:function(){return z;},getRadioChannels:function(){return l;},getVideoChannels:function(){return c;},setSubscribedChannels:function(Z){if(Z){f=Z;q("setSubscribedChannels","Set "+Z.length.toString()+" subscribed channels");}},getSubscribedChannels:function(){return f;},getChannelByLCN:function(ab){var Z=null,aa="";for(aa in t){if(t.hasOwnProperty(aa)){if(t[aa]&&t[aa].logicalChannelNum===ab){Z=t[aa];break;}}}return Z;},getChannelByServiceId:function(Z){return t[String(Z)];},getChannelByServiceURI:function(ab){var Z,aa;if(ab){Z=L.length;for(aa=0;aa<Z;aa++){if(L[aa].uri&&L[aa].uri===ab){return L[aa];}}}return null;},getChannelByEventId:function(Z){var aa=this.getEventById(Z);if(aa){return t[aa.serviceId];}return null;},getEventsByWindow:function(ac,ab,Z){var aa=$N.platform.btv.PersistentCache.getEventsByWindow(ac,Math.floor(ab),Math.floor(Z));if(aa.error===undefined){return $N.platform.btv.EPGEventFactory.mapArray(aa);}return[];},getEventById:function(Z){return $N.platform.btv.PersistentCache.getEventById(Z);},getCurrentEventForService:function(Z){return $N.platform.btv.PersistentCache.getEventCurrent(Z);},getNextEventForService:function(ab){var aa=this.getCurrentEventForService(ab),Z=aa?aa.eventId:null;return Z?$N.platform.btv.PersistentCache.getEventNext(Z):null;},getPreviousEventForService:function(ab){var aa=this.getCurrentEventForService(ab),Z=aa?aa.eventId:null;return Z?$N.platform.btv.PersistentCache.getEventPrevious(Z):null;},getServiceIdArray:function(){return p||[];},getEventsForChannelWithDummyEvents:function(ad,ac,Z,aa){var ab=this.getEventsByWindow([ad],ac,Z);ab=o(ab,ac,Z,ad,aa);return ab;},getEventsForGridRow:function(ad,ac,aa,ab){var Z=this.getEventsForChannelWithDummyEvents(ad,ac,aa,ab);if(Z[0].startTime<ac){Z[0].displayStartTime=ac;}if(Z[Z.length-1].endTime>aa){Z[Z.length-1].displayEndTime=aa;}else{if(Z[Z.length-1].endTime<aa){Z.push(ab(ad,Z[Z.length-1].endTime,aa));}}return Z;},getCurrentlyTunedChannel:function(ab){var Z=ab.getCurrentUri(),ac,aa=L.length;if(Z){for(ac=0;ac<aa;ac++){if(L[ac].uri&&L[ac].uri===Z){return L[ac];}}}return null;},getServiceIdArraySortedByLCN:function(){var aa=this.getVideoChannelsOrderedByChannelNumber();var ac=[];var Z;var ab=aa.length;for(Z=0;Z<ab;Z++){ac.push(aa[Z].serviceId);}return ac;},getSubscribedServiceIdArraySortedByLCN:function(){var Z=this.getSubscribedChannelsOrderedByChannelNumber();return M(Z);},getRadioServiceIdArraySortedByLCN:function(){var Z=this.getRadioChannelsOrderedByChannelNumber();return M(Z);},getVideoServiceIdArraySortedByLCN:function(){var Z=this.getVideoChannelsOrderedByChannelNumber();return M(Z);},fetchEventById:function(aa,af){var ab,ad=function(){},ac=function(){$N.services.sdp.EPG.fetchEventById(aa,function(ag){af(ag);V([ag]);});},Z=function(ag){if(ag){setTimeout(function(){af(ag);},1);}else{m(x.fetchEventCurrent,aa,ad,ac,af);}},ae=function(){m(x.fetchEventById,aa,ad,ac,af);};ab=this.getEventById(aa);if(ab){Z(ab);}else{ae();}},fetchCurrentEventForService:function(ag,ah){var ab,ad,Z=new Date().getTime(),aa,ae=this,aj=function(){ab=new Date().getTime();$N.services.gateway.HomeCruise.fetchEitData(ag,ab,ab+500,function(ak){if(ak.length>0){ah(ak[0]);V(ak);}else{ah(null);}});},ac=function(){$N.services.sdp.EPG.fetchCurrentEventForService(ag,function(ak){ah(ak);V([ak]);});},af=function(ak){if(ak){setTimeout(function(){ah(ak);},1);}else{ad=Y(ag);m(x.fetchEventCurrent,ad,aj,ac,ah);}},ai=function(){ad=Y(ag);m(x.fetchEventCurrent,ad,aj,ac,ah);};aa=ae.getCurrentEventForService(ag);if(aa){af(aa);}else{ai();}},fetchNextEventForService:function(ah,ai){var Z,ad,ae=this,ag="",ac,al,aa="startTime ASC",ak=function(){Z=new Date().getTime();$N.services.gateway.HomeCruise.fetchEitData(ah,Z,Z+500,function(am){var an=am[0];if(an){$N.services.gateway.HomeCruise.fetchEitData(an.serviceId,parseInt(an.endTime,10)+1,parseInt(an.endTime,10)+500,function(ao){ai(ao[0]);P([ao[0]]);});}else{ai(null);}});},ab=function(){$N.services.sdp.EPG.fetchNextEventForService(ah,function(am){ai(am);V([am]);});},af=function(am){if(am){ai($N.platform.btv.EPGEventFactory.mapObject(am));}else{ad=Y(ah);m(x.fetchEventNext,ad,ak,ab,ai);}},aj=function(){ad=Y(ah);m(x.fetchEventNext,ad,ak,ab,ai);};al=ae.getNextEventForService(ah);if(al){af(al);}else{aj();}},fetchPreviousEventForService:function(ah,ai){var Z,ac,ae=this,ab,ag="",ad,ak=function(){Z=new Date().getTime();$N.services.gateway.HomeCruise.fetchEitData(ah,Z,Z+500,function(al){var am=al[0];if(am){$N.services.gateway.HomeCruise.fetchEitData(am.serviceId,parseInt(am.startTime,10)-1,parseInt(am.startTime,10)+500,function(an){if(an){ai(an[0]);P([an[0]]);}else{ai(null);}});}else{ai(null);}});},aa=function(){$N.services.sdp.EPG.fetchCurrentEventForService(ah,function(al){$N.services.sdp.EPG.fetchEventsByWindow([ah],al.startTime-1,al.startTime,function(am){ai(am[0]);V(am);});});},af=function(al){if(al){ai($N.platform.btv.EPGEventFactory.mapObject(al));}else{ac=Y(ah);m(x.fetchEventPrevious,ac,ak,aa,ai);}},aj=function(){ac=Y(ah);m(x.fetchEventPrevious,ac,ak,aa,ai);};ad=ae.getPreviousEventForService(ah);if(ad){af(ad);}else{aj();}},fetchEventsByWindow:function(aj,ab,ac,ak){var Z=[],am=null,ag={},ai={},ad,aa,af=null,al=this.getEventsByWindow(aj,Math.floor(ab),Math.floor(ac)),ae=this;if(al){var ah=function(ao){var an=function(ap){if(ap){al=E(aj,ag,al,ap);}ak(al);};if(ao&&!v(ao)){al=E(aj,ag,al,ao);ag=F(al,aj,ab,ac);}if(K&&ag.array.length>0){ad=Y(aj[0]);if((y||(ad&&ad.deliveryMethod===$N.data.EPGService.DELIVERY_TYPE.GATEWAY))&&a(S.GATEWAY)){n(ag,ab,ac,an);}else{if(a(S.SDP)&&(!ad||y||ad.deliveryMethod===$N.data.EPGService.DELIVERY_TYPE.IP)){C(ag,ab,ac,an);}else{ak(al);}}}else{ak(al);}};ag=F(al,aj,ab,ac);if(ag.array.length>0){O(ag,ab,ac,ah);}else{setTimeout(function(){ak(al);},1);}}},fetchEventsForChannelWithDummyEvents:function(ac,ab,Z,aa,ad){this.fetchEventsByWindow([ac],ab,Z,function(ae){if(ae){ad(o(ae,ab,Z,ac,aa));}else{ad([]);}});},isRadioChannel:function(Z){return(Z&&Z.serviceType===$N.data.EPGService.SERVICE_TYPE.RADIO);},registerRefreshCallback:function(aa,Z){if(aa&&Z){B.push({callbackFunction:aa,caller:Z});}},unregisterRefreshCallback:function(ab,aa){if(ab){var Z;for(Z=0;Z<B.length;Z++){if(B[Z].callbackFunction===ab&&B[Z].caller===aa){B.splice(Z,1);}}}},monitorStartOfEvents:function(aa,Z){},unmonitorStartOfEvents:function(Z){},setEventStartCallback:function(Z){},isChannelListPopulated:function(){if(L.length>0){return true;}else{return false;}},setEthernetConnected:function(Z){K=Z;},CACHE_TYPES:N,DATA_SOURCES:S};}());define("jsfw/platform/btv/EPGCache",["jsfw/apps/core/Log"],function(a){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.EPGCache=(function(){var c=new $N.apps.core.Log("btv","EPGCache"),b=[],e={};function d(f){var h,g=b.length;for(h=0;h<g;h++){if(f.serviceId===b[h].serviceId){return h;}}return -1;}return{init:function(){},cacheEvent:function(g,m){var k,h,f=false,l=[];if(!e[g.serviceId]){e[g.serviceId]=[];}if(!g._data){g._data={};}g._data.cacheTimestamp=new Date().getTime();if(e[g.serviceId].length===0||e[g.serviceId][e[g.serviceId].length-1].endTime<=g.startTime){e[g.serviceId].push(g);}else{for(h=0;h<e[g.serviceId].length;h++){if(f){if(e[g.serviceId][h].startTime<g.endTime){l.push(h);}else{break;}}else{if(g.startTime<e[g.serviceId][h].endTime){e[g.serviceId].splice(h,0,g);f=true;}}}if(l.length>0){for(h=l.length-1;h>=0;h--){e[g.serviceId].splice(l[h],1);}}}if(m){m(true);}},cacheEvents:function(g){var f;for(f=0;f<g.length;f++){this.cacheEvent(g[f]);}},cacheService:function(f,h){var g=d(f);if(g===-1){b.push(f);}else{b[g]=f;}if(h){h(true);}},getServices:function(){return b;},fetchServices:function(g){var f=this;setTimeout(function(){g(f.getServices());},1);},updateService:function(k,f){var g=b.length,h;for(h=0;h<g;h++){if(b[h].serviceId===k){b[h]=f;break;}}},getEventById:function(h){var f,k,g;for(k in e){if(e.hasOwnProperty(k)){f=e[k].length;for(g=0;g<f;g++){if(e[k][g].eventId===h){return e[k][g];}}}}return null;},fetchEventById:function(f,h){var g=this;setTimeout(function(){h(g.getEventById(f));},1);},getEventCurrent:function(l){var g=new Date().getTime(),k,f,h;if(!e[l]){return null;}h=e[l];f=h.length;for(k=0;k<f;k++){if(h[k].startTime<=g&&h[k].endTime>g){return h[k];}}return null;},fetchEventCurrent:function(g,h){var f=this;setTimeout(function(){h(f.getEventCurrent(g));},1);},getEventNext:function(k){var h,l=this.getEventById(k),m,g,f;if(!l){return null;}m=l.serviceId;g=e[m];f=g.length;for(h=0;h<f;h++){if(g[h].startTime===l.endTime){return g[h];}}return null;},fetchEventNext:function(k,l){var h,f=null,g=this;h=this.getEventCurrent(k);if(h){f=h.eventId;}setTimeout(function(){l(g.getEventNext(f));},1);},getEventPrevious:function(k){var h,l=this.getEventById(k),m,g,f;if(!l){return null;}m=l.serviceId;g=e[m];f=g.length;for(h=0;h<f;h++){if(g[h].endTime===l.startTime){return g[h];}}return null;},fetchEventPrevious:function(f,h){var g=this;setTimeout(function(){h(g.getEventPrevious(f));},1);},getEventsByWindow:function(p,g,m){var l,h,n,o,f,k=[];if(g===undefined||g===null||m===undefined||m===null||isNaN(g)||isNaN(m)){return null;}for(l=0;l<p.length;l++){n=p[l];o=e[n];if(o){for(h=0;h<o.length;h++){f=o[h];if(f.endTime>g&&f.startTime<m){k.push(f);}else{if(f.startTime>m){break;}}}}}return k;},fetchEventsByWindow:function(m,g,f,l){var k,h=this;setTimeout(function(){var n;k=h.getEventsByWindow(m,g,f);if(k){l(k);}else{l([]);}},1);},getEventsByQuery:function(f){},removeEvent:function(h){var k,f,l,g;for(l in e){if(e.hasOwnProperty(l)){f=e[l].length;for(g=0;g<f;g++){if(e[l][g]&&e[l][g].eventId===h){e[l].splice(g,1);break;}}}}},removeEventsOlderThan:function(l,m){var h,f,k,g;if(l){for(k in e){if(e.hasOwnProperty(k)){f=e[k].length;for(g=f-1;g>=0;g--){if(e[k][g]&&e[k][g].endTime<l){e[k].splice(g,1);}}}}}else{if(m){m(false);}}},removeService:function(h){var f=b.length,g;for(g=0;g<f;g++){if(b[g].serviceId===h){b.splice(g,1);break;}}},clearCache:function(){b=[];e={};},addEPGServicesUpdatedListener:function(f){},removeEPGServicesUpdatedListener:function(f){}};}());return $N.platform.btv.EPGCache;});define("jsfw/platform/btv/PersistentCache",["jsfw/data/EPGEvent","jsfw/data/EPGService","jsfw/platform/btv/EPGServiceFactory","jsfw/platform/btv/EPGEventFactory","jsfw/services/sdp/Ratings"],function(a,d,e,c,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.PersistentCache=(function(){var l={},v={},n={},s={},r={};function z(B){switch(B.type){case"BTV":return $N.data.EPGService.SERVICE_TYPE.TV;case"RADIO":return $N.data.EPGService.SERVICE_TYPE.RADIO;default:return $N.data.EPGService.SERVICE_TYPE.OTHER;}}function h(B){var C={};if(B.hasOwnProperty("eit_info_short_desc")){C.eventId=B.eit_info_event_id;C.serviceId=B.sid;C.sourceId=$N.data.EPGEvent.SOURCE.GATEWAY;C.startTime=B.eit_info_start_time_gmt;C.endTime=B.eit_info_start_time_gmt+B.eit_info_duration;C.title=B.eit_info_event_name;C.shortDesc=B.eit_info_short_desc;C.parentalRating=B.eit_info_private_rating;C.privateRating=B.eit_info_private_rating;}else{if(B.eventId){C.eventId=B.id.toString();C.serviceId=B.serviceRef.toString();C.sourceId=$N.data.EPGEvent.SOURCE.MDS;C.startTime=B.period.start*1000;C.endTime=B.period.end*1000;C.title=B.Title;C.shortDesc=B.Description;C.longDesc=B.Synopsis;C.parentalRating=B.Rating.precedence;C.privateRating=B.Rating.precedence;}else{C.eventId=B.uid.toString();C.serviceId=B.channelUID.toString();C.sourceId=$N.data.EPGEvent.SOURCE.SDP;C.startTime=B.startTime;C.endTime=B.endTime;C.title=B.eventName;C.shortDesc=B.shortDescription;C.longDesc=B.shortDescription;C.parentalRating=B.eventRating;C.privateRating=B.eventRating;}}return C;}function p(C){var D={},E=C.drmID,B="N/A";if(C.sid){D.serviceId=C.sid;D.type=$N.data.EPGService.SERVICE_TYPE.TV;D.name=C.sn;D.uri=B;}else{if(C.mainContentUID){D.serviceId=C.mainContentUID;D.channelKey=C.number;D.name=C.name;if(E){D.uri=C.networkLocation+"?sdp_prm_id="+E;}else{D.uri=C.networkLocation;}D.providerName=C.name;D.type=$N.data.EPGService.SERVICE_TYPE.TV;}else{if(C.editorial){D.serviceId=C.editorial.id;D.channelKey=C.editorial.tvChannel;D.name=C.technical.Title;if(E){D.uri=C.technical.NetworkLocation+"?sdp_prm_id="+E;}else{D.uri=C.technical.NetworkLocation;}D.providerName=C.editorial.provider;D.type=$N.data.EPGService.SERVICE_TYPE.TV;}else{D.serviceId=C.uid.toString();D.uri=C.networkLocation;D.type=z(C);D.name=C.name;D.providerName=C.name;D.channelKey=C.number;}}}return D;}function u(B){var C;if(B.mainContentUID){C=B.mainContentUID.toString();}else{if(B.editorial){C=B.editorial.id;}else{C=B.uid.toString();}}if(B.ratingID){CCOM.EPG.tagService(C,"rating",String(B.ratingID));}if(B.promoImage){CCOM.EPG.tagService(C,"promoImage",B.promoImage);}else{if(B.technical&&B.technical.PromoImages&&B.technical.PromoImages.length){CCOM.EPG.tagService(C,"promoImage",B.technical.PromoImages[0]);}}if(B.locale){CCOM.EPG.tagService(C,"locale",B.locale);}}function m(B,C,D){if(B&&C[B]){C[B](D);}C[B]=null;}function y(B){m(B.handle,l,true);}function x(B){m(B.handle,l,false);}function t(B){m(B.handle,v,true);}function w(B){m(B.handle,v,false);}function q(B){m(B.handle,n,1);}function o(B){m(B.handle,n,false);}function A(B){m(B.handle,s,true);}function g(B){m(B.handle,s,false);}function k(B){m(B.handle,r,1);}function f(B){m(B.handle,r,false);}return{init:function(){CCOM.EPG.addEventListener("addServiceOK",y,false);CCOM.EPG.addEventListener("addServiceFailed",x,false);CCOM.EPG.addEventListener("addEventOK",t,false);CCOM.EPG.addEventListener("addEventFailed",w,false);CCOM.EPG.addEventListener("removeEventOK",q,false);CCOM.EPG.addEventListener("removeEventFailed",o,false);CCOM.EPG.addEventListener("removeExpiredEventsOK",A,false);CCOM.EPG.addEventListener("removeExpiredEventsFailed",g,false);CCOM.EPG.addEventListener("removeServiceOK",k,false);CCOM.EPG.addEventListener("removeServiceFailed",f,false);},cacheService:function(C,E){if(C){var B=p(C._data),D=CCOM.EPG.addService(B,1);l[D]=function(F){if(F){u(C._data);}E(F);};}},cacheEvent:function(C,E){if(C){var B=h(C._data),D=CCOM.EPG.addEvent(B,1);v[D]=E;}},cacheEvents:function(D){var C,B=function(){};for(C=0;C<D.length;C++){this.cacheEvent(D[C],B);}},getServices:function(){var B,C;B=CCOM.EPG.getServicesRSByQuery("*",null,null);C=B.getNext(999);B.reset();B=null;return C;},fetchServices:function(C){var B=this;setTimeout(function(){C(B.getServices());},1);},updateService:function(C,B,D){this.cacheService(B,D);},getEventById:function(B){return CCOM.EPG.getEventById(B);},fetchEventById:function(B,C){setTimeout(function(){C(CCOM.EPG.getEventById(B));},1);},getEventCurrent:function(B){return CCOM.EPG.getEventCurrent(B);},fetchEventCurrent:function(B,C){setTimeout(function(){C(CCOM.EPG.getEventCurrent(B));},1);},getEventNext:function(B){return CCOM.EPG.getEventNext(B);},fetchEventNext:function(B,C){setTimeout(function(){C(CCOM.EPG.getEventNext(B));},1);},getEventPrevious:function(B){return CCOM.EPG.getEventPrevious(B);},fetchEventPrevious:function(B,C){setTimeout(function(){C(CCOM.EPG.getEventPrevious(B));},1);},getEventsByWindow:function(D,C,B){return CCOM.EPG.getEventsByWindow(D,C,B);},fetchEventsByWindow:function(E,C,B,D){setTimeout(function(){D(CCOM.EPG.getEventsByWindow(E,C,B));},1);},removeEvent:function(B,D){if(B){var C=CCOM.EPG.removeEvent(B);n[C]=D;}},removeEventsOlderThan:function(C,D){if(C){var B=CCOM.EPG.removeExpiredEvents(C);s[B]=D;}},removeService:function(C,D){if(C){var B=CCOM.EPG.removeService(C);r[B]=D;}},clearCache:function(B){},isDBAvailable:function(){return CCOM.EPG?true:false;},addEPGServicesUpdatedListener:function(B){CCOM.EPG.addEventListener("servicesUpdated",B,false);},removeEPGServicesUpdatedListener:function(B){CCOM.EPG.removeEventListener("servicesUpdated",B);}};}());return $N.platform.btv.PersistentCache;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};function WHPVRDeviceManager(H,C){var f=new $N.apps.core.Log("WHPVR","WHPVRDeviceManager"),a=null,J=null,p=[],y=H.getLocalServerUdn();function g(S){if(S.udn===y){return true;}return false;}function I(S){if(S&&(S.modelName==="Gateway"&&S.modelNumber==="OpenTV 5")){return true;}return false;}function v(S){var V,U,W=null,X=false,T=null;for(V=0;V<S.length;V++){if(g(S[V])||!I(S[V])){S.splice(V,1);V--;}}for(U=0;U<p.length;U++){X=false;for(V=0;V<S.length;V++){if(S[V].udn===p[U].udn){X=true;break;}}if(!X){T=p.splice(U,1);U--;T[0].release();}else{S.splice(V,1);}}for(V=0;V<S.length;V++){W=new $N.platform.btv.WHPVRDevice(S[V],C);p.push(W);}C("getDevicesOK",p);}function s(S){a=CCOM.HomeNetworking.getDevices();}function t(S){a=CCOM.HomeNetworking.getDevices();}function u(S){if(a===S.handle){v(S.devices);}}function l(S){}function w(){var S,T=p.length;for(S=0;S<T;S++){if(!p[S].isSearchFinished()){break;}}if(J&&S===T){J(true);}}function A(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("browseContainerOK",T)){break;}}}function b(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("browseContainerFailed",T)){break;}}}function k(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("deleteObjectOK",T)){break;}}}function R(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("deleteObjectFailed",T)){break;}}}function m(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("updateObjectOK",T)){break;}}}function P(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("updateObjectFailed",T)){break;}}}function K(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("searchContainerOK",T)){break;}}w();}function G(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("searchContainerFailed",T)){break;}}w();}function x(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("subscribeServiceOK",T)){break;}}}function E(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("subscribeServiceFailed",T)){break;}}}function O(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("updateBookmarkOK",T)){break;}}}function N(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("updateBookmarkFailed",T)){break;}}}function e(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("browseObjectOK",T)){break;}}}function r(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("browseObjectFailed",T)){break;}}}function L(T){var S,U=p.length;for(S=0;S<U;S++){if(p[S].eventNotify("onSubscribedEvent",T)){break;}}}function o(S){if(CCOM&&CCOM.HomeNetworking&&CCOM.HomeNetworking.getDevices){CCOM.HomeNetworking.addEventListener("onDeviceFound",s);CCOM.HomeNetworking.addEventListener("onDeviceLost",t);CCOM.HomeNetworking.addEventListener("getDevicesOK",u);CCOM.HomeNetworking.addEventListener("getDevicesFailed",l);a=CCOM.HomeNetworking.getDevices();CCOM.HomeNetworking.addEventListener("browseContainerOK",A);CCOM.HomeNetworking.addEventListener("browseContainerFailed",b);CCOM.HomeNetworking.addEventListener("deleteObjectOK",k);CCOM.HomeNetworking.addEventListener("deleteObjectFailed",R);CCOM.HomeNetworking.addEventListener("updateObjectOK",m);CCOM.HomeNetworking.addEventListener("updateObjectFailed",P);CCOM.HomeNetworking.addEventListener("searchContainerOK",K);CCOM.HomeNetworking.addEventListener("searchContainerFailed",G);CCOM.HomeNetworking.addEventListener("subscribeServiceOK",x);CCOM.HomeNetworking.addEventListener("subscribeServiceFailed",E);CCOM.HomeNetworking.addEventListener("cancelSubscribedServiceOK",x);CCOM.HomeNetworking.addEventListener("cancelSubscribedServiceFailed",E);CCOM.HomeNetworking.addEventListener("onSubscribedEvent",L);CCOM.HomeNetworking.addEventListener("updateBookmarkOK",O);CCOM.HomeNetworking.addEventListener("updateBookmarkFailed",N);CCOM.HomeNetworking.addEventListener("browseObjectOK",e);CCOM.HomeNetworking.addEventListener("browseObjectFailed",r);}}function q(){var S;CCOM.HomeNetworking.removeEventListener("onDeviceFound",s);CCOM.HomeNetworking.removeEventListener("onDeviceLost",t);CCOM.HomeNetworking.removeEventListener("getDevicesOK",u);CCOM.HomeNetworking.removeEventListener("getDevicesFailed",l);CCOM.HomeNetworking.removeEventListener("browseContainerOK",A);CCOM.HomeNetworking.removeEventListener("browseContainerFailed",b);CCOM.HomeNetworking.removeEventListener("deleteObjectOK",k);CCOM.HomeNetworking.removeEventListener("deleteObjectFailed",R);CCOM.HomeNetworking.removeEventListener("updateObjectOK",m);CCOM.HomeNetworking.removeEventListener("updateObjectFailed",P);CCOM.HomeNetworking.removeEventListener("searchContainerOK",K);CCOM.HomeNetworking.removeEventListener("searchContainerFailed",G);CCOM.HomeNetworking.removeEventListener("subscribeServiceOK",x);CCOM.HomeNetworking.removeEventListener("subscribeServiceFailed",E);CCOM.HomeNetworking.removeEventListener("cancelSubscribedServiceOK",x);CCOM.HomeNetworking.removeEventListener("cancelSubscribedServiceFailed",E);CCOM.HomeNetworking.removeEventListener("onSubscribedEvent",L);CCOM.HomeNetworking.removeEventListener("updateBookmarkOK",O);CCOM.HomeNetworking.removeEventListener("updateBookmarkFailed",N);CCOM.HomeNetworking.removeEventListener("browseObjectOK",e);CCOM.HomeNetworking.removeEventListener("browseObjectFailed",r);for(S=0;S<p.length;S++){p[S].release();}p=[];}function n(){var S,T=[],U=p.length;for(S=0;S<U;S++){T=T.concat(p[S].recordings);}return T;}function B(W){var U,V=n(),T=[],S=V.length;for(U=0;U<S;U++){if(V[U].uiFolder===W){T.push(V[U]);}}return T;}function c(){var T,S=[],U=p.length;for(T=0;T<U;T++){S=S.concat(p[T].getSchedules());}return S;}function z(S,T){var U,V=p.length;for(U=0;U<V;U++){if(p[U].udn===S){p[U].requestEventRecording(T);return true;}}return false;}function h(S,T){var U,V=p.length;for(U=0;U<V;U++){if(p[U].udn===S){p[U].requestSeriesRecording(T);return true;}}return false;}function F(S,U){var T,V=p.length;for(T=0;T<V;T++){if(p[T].udn===S){p[T].deleteSeriesSchedule(U);return true;}}return false;}function d(S,U){var T,V=p.length;for(T=0;T<V;T++){if(p[T].udn===S){p[T].deleteSingleSchedule(U);return true;}}return false;}function Q(S,U){var T,V=p.length;for(T=0;T<V;T++){if(p[T].udn===S){return p[T].getTaskByEvent(U);}}return null;}function M(Z,V,W,U,X,T){var S,Y=p.length;J=U;for(S=0;S<Y;S++){p[S].searchByCriteria(Z,V,W,X,T);}}function D(S,W,X,V,Y,U){var T,Z=p.length;J=V;for(T=0;T<Z;T++){p[T].searchByActorsDirector(S,W,X,Y,U);}}return{initialise:o,release:q,getAllServers:function(){return p;},getAllRecordings:n,getRecordingsByFolderName:B,getAllSchedules:c,requestEventRecording:z,requestSeriesRecording:h,deleteSeriesSchedule:F,deleteSingleSchedule:d,getTaskByEvent:Q,searchByCriteria:M,searchByActorsDirector:D};}$N.platform.btv.WHPVRDeviceManager=WHPVRDeviceManager;var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.WHPVRManager=(function(){var h=new $N.apps.core.Log("WHPVR","WHPVRManager"),g=null,u=null,l=null,t=null,c=[],k={},q=false,z="/users/preferences/homeNetworking/enableDms",a="/users/preferences/homeNetworking/enableCdsUrl",f="/system/opentv/homeNetworking/dmscds/plugins/pvr/enabled",s="/system/opentv/homeNetworking/dmscds/plugins/liveTuner/enabled",n="/system/opentv/homeNetworking/dmscds/plugins/epg/enabled",r="/system/opentv/homeNetworking/dmscds/plugins/nowPlaying/enabled",m="/system/opentv/homeNetworking/dmscds/plugins/diskmedia/enabled";function y(){return q;}function e(){if(!u){u=$N.platform.system.Preferences.get($N.app.constants.DMS_NAME_CONFIG_PATH,true);if(!u){$N.platform.system.Preferences.set($N.app.constants.DMS_NAME_CONFIG_PATH,$N.app.constants.DMS_DEFAULT_NAME,true);u=$N.app.constants.DMS_DEFAULT_NAME;}}return u;}function p(B,A){if(k[B]){k[B].forEach(function(C){C(B,A);});}}function x(){if(!l){l="uuid:"+$N.platform.system.Preferences.get($N.app.constants.DMS_UDN_CONFIG_PATH,true);}return l;}function w(){if(q){return;}$N.platform.system.Preferences.set(z,"true",true);$N.platform.system.Preferences.set(a,"true",true);$N.platform.system.Preferences.set(f,true,true);$N.platform.system.Preferences.set(s,true,true);$N.platform.system.Preferences.set(n,true,true);$N.platform.system.Preferences.set(r,true,true);$N.platform.system.Preferences.set(m,true,true);$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_WHPVR_SWITCH,$N.app.DialogueHelper.getString("WHPVRSwitchOnTitle"),$N.app.DialogueHelper.getString("WHPVRSwitchOnMessage"));}function o(){if(g){g.release();}g=null;u=null;l=null;$N.platform.system.Preferences.set(z,"false",true);$N.platform.system.Preferences.set(a,"false",true);$N.platform.system.Preferences.set(f,false,true);$N.platform.system.Preferences.set(s,false,true);$N.platform.system.Preferences.set(n,false,true);$N.platform.system.Preferences.set(r,false,true);$N.platform.system.Preferences.set(m,false,true);q=false;}function b(){if(!t){t=$N.platform.system.Preferences.get($N.app.constants.RECORD_SERVER_UDN);}return t;}function v(A){if(!A){A=l;}if(A.length===0||A.substr(0,5)==="uuid:"){t=A;$N.platform.system.Preferences.set($N.app.constants.RECORD_SERVER_UDN,t);return true;}return false;}function d(A){u=A;$N.platform.system.Preferences.set($N.app.constants.DMS_NAME_CONFIG_PATH,u,true);}return{init:function(){$N.apps.util.EventManager.subscribe("WHPVREnabled",w,$N.platform.btv.WHPVRManager);$N.apps.util.EventManager.subscribe("WHPVRDisabled",o,$N.platform.btv.WHPVRManager);h("init","WHPVR_FEATURE "+$N.platform.system.Preferences.get($N.app.constants.WHPVR_FEATURE));if($N.platform.system.Preferences.get($N.app.constants.WHPVR_FEATURE)==="true"){g=new $N.platform.btv.WHPVRDeviceManager($N.platform.btv.WHPVRManager,p);g.initialise();u=e();l=x();q=true;}},saveBookmark:function(A,B){if(y()&&A&&A.whpvrDevice){A.whpvrDevice.saveBookmark(A,B);}},isEnabled:y,getWHPVRServers:function(){return y()?g.getAllServers():[];},getAllRecordingsFromWHPVRServers:function(){return y()?g.getAllRecordings():[];},getAllRecordingsByFolderName:function(A){return y()?g.getRecordingsByFolderName(A):[];},getAllSchedulesFromWHPVRServers:function(){return y()?g.getAllSchedules():[];},requestEventRecording:function(A,B){if(y()){g.requestEventRecording(A,B);}},requestSeriesRecording:function(A,B){if(y()){g.requestSeriesRecording(A,B);}},deleteSeriesSchedule:function(A,B){if(y()){g.deleteSeriesSchedule(A,B);}},deleteSingleSchedule:function(A,B){if(y()){g.deleteSingleSchedule(A,B);}},deleteTask:function(A){if(y()&&A&&A.whpvrDevice){A.whpvrDevice.deleteTask(A);}},getTaskByEvent:function(A,B){return y()?g.getTaskByEvent(A,B):null;},updateTask:function(A,B){if(y()&&A&&A.whpvrDevice){A.whpvrDevice.updateTask(A,B);}},getLocalName:e,setLocalName:d,getCurrentRecordServer:b,getLocalServerUdn:x,setCurrentRecordServer:v,addEventListener:function(A,B){if(A&&B){if(!k[A]){k[A]=[];}k[A].push(B);}},removeEventListener:function(A,B){if(A&&B&&k[A]){k[A]=k[A].filter(function(C){return(C!==B);});}},isLocalRecordServer:function(){var B,C=false,A,D;if(!y()){return true;}A=b();D=g.getAllServers();if(A===undefined||A.length===0||A===l||!D.length){C=true;}return C;},isRemoteRecordServerValid:function(){var B,C=false,A,D;if(!y()){return false;}A=b();D=g.getAllServers();for(B=0;B<D.length;B++){if(A===D[B].udn){C=true;break;}}return C;},hasRemoteServers:function(){var A;if(!y()){return false;}A=g.getAllServers();return(A.length>0);},getCurrentRecordServerName:function(){var C,E,A,B,D="";if(!y()){return"";}C=g.getAllServers();E=C.length;A=b();for(B=0;B<E;B++){if(A===C[B].udn){D=C[B].friendlyName;return D;}}return D;},getTVNameByUdn:function(B){var C,E,D="",A;if(!y()){return"";}C=g.getAllServers();E=C.length;D="";for(A=0;A<E;A++){if(B===C[A].udn){D=C[A].friendlyName;break;}}return D;},getTVNameByRecording:function(A){if(y()&&A.whpvrDevice&&A.whpvrDevice.udn){return this.getTVNameByUdn(A.whpvrDevice.udn);}return"";},searchByCriteria:function(F,C,D,B,E,A){if(y()){g.searchByCriteria(F,C,D,B,E,A);}},searchByActorsDirector:function(A,D,E,C,F,B){if(y()){g.searchByActorsDirector(A,D,E,C,F,B);}},setRecordingRequestConflictsCallback:function(A){$N.platform.btv.WHPVRManager._conflictsCallback=A;}};}());function WHPVRDevice(a,b){this._log=new $N.apps.core.Log("WHPVR","WHPVRDevice");this.WHPVR_BROWSE_MAX_CONTENT_NUM=50;this.recordings=[];this.udn=a.udn;this.friendlyName=a.friendlyName;this._browseContainerHandle=null;this._deleteObjectHandle=null;this._updateObjectHandle=null;this._searchContainerHandle=null;this._searchDataCallback=null;this._hnDevice=a;this._timerUpdateRecordings=null;this._subscribeHandle=null;this._subscribeOperation="";this._needUpdateRecordings=false;this._updateBookmarkHandle=null;this._browseObjectHandles=[];this._bookmarkArray=[];this.browseContainer();this.subscribeService();this.deviceEventCallback=b;this._scheduler=new $N.platform.btv.WHPVRScheduler(this);this._scheduler.init();}WHPVRDevice.prototype.eventNotify=function(a,b){switch(a){case"browseContainerOK":if(this._browseContainerHandle===b.handle){this.browseContainerResultCallback(true,b);return true;}break;case"browseContainerFailed":if(this._browseContainerHandle===b.handle){this.browseContainerResultCallback(false,b);return true;}break;case"deleteObjectOK":if(this._deleteObjectHandle===b.handle){this.deleteObjectResultCallback(true,b);return true;}break;case"deleteObjectFailed":if(this._deleteObjectHandle===b.handle){this.deleteObjectResultCallback(false,b);return true;}break;case"updateObjectOK":if(this._updateObjectHandle===b.handle){this.updateObjectResultCallback(true,b);return true;}break;case"updateObjectFailed":if(this._updateObjectHandle===b.handle){this.updateObjectResultCallback(false,b);return true;}break;case"searchContainerOK":if(this._searchContainerHandle===b.handle){this.searchContainerResultCallback(true,b);return true;}break;case"searchContainerFailed":if(this._searchContainerHandle===b.handle){this.searchContainerResultCallback(false,b);return true;}break;case"subscribeServiceOK":if(this._subscribeHandle===b.handle){this.subscribeServiceResultCallback(true,b);return true;}break;case"subscribeServiceFailed":if(this._subscribeHandle===b.handle){this.subscribeServiceResultCallback(false,b);return true;}break;case"updateBookmarkOK":if(this._updateBookmarkHandle===b.handle){this.updateBookmarkResultCallback(true,b);return true;}break;case"updateBookmarkFailed":if(this._updateBookmarkHandle===b.handle){this.updateBookmarkResultCallback(false,b);return true;}break;case"browseObjectOK":return this.browseObjectResultCallback(true,b);case"browseObjectFailed":return this.browseObjectResultCallback(false,b);case"onSubscribedEvent":if(b.eventInfo&&b.eventInfo.udn&&this.udn===b.eventInfo.udn){this.onSubscribedEvent(b);return true;}break;default:break;}return false;};WHPVRDevice.prototype.release=function(){if(this._timerUpdateRecordings){clearTimeout(this._timerUpdateRecordings);this._timerUpdateRecordings=null;}this.unsubscribeService();this.recordings=[];this._bookmarkArray=[];this._browseObjectHandles=[];if(this._scheduler){this._scheduler.schedulerRelease();this._scheduler=null;}};WHPVRDevice.prototype.subscribeService=function(){this._subscribeOperation="subscribeService";this._subscribeHandle=CCOM.HomeNetworking.subscribeService(this.udn,"ContentDirectory");};WHPVRDevice.prototype.unsubscribeService=function(){this._subscribeOperation="cancelSubscribeService";this._subscribeHandle=CCOM.HomeNetworking.cancelSubscribedService(this.udn,"ContentDirectory");};WHPVRDevice.prototype.subscribeServiceResultCallback=function(a,b){if(a){}else{}this._subscribeHandle=null;this._subscribeOperation="";};WHPVRDevice.prototype.saveBookmark=function(a,b){if(!this._updateBookmarkHandle){this._updateBookmarkHandle=CCOM.HomeNetworking.updateBookmark(this.udn,a._data.id,Math.floor(b),false);}};WHPVRDevice.prototype.updateBookmarkResultCallback=function(a,b){if(a){}else{this._log("updateBookmarkResultCallback"," - failed, Err:"+JSON.stringify(b));}this._updateBookmarkHandle=null;};WHPVRDevice.prototype.browseObject=function(a){if(!this._browseObjectHandles[a]){this._browseObjectHandles[a]=CCOM.HomeNetworking.browseObject(this.udn,a,"*");}};WHPVRDevice.prototype.browseObjectResultCallback=function(b,e){var d=$N.platform.system.Preferences.get($N.app.constants.DMR_UDN_CONFIG_PATH,true),a,c;if(b){a=e.content.id;if(e.content.className==="Bookmark"&&this._browseObjectHandles[a]===e.handle){if(d.indexOf(e.content.deviceUdn)>=0&&e.content.bookmarkedObjectID&&e.content.bookmarkedObjectID.length>0){c=e.content.bookmarkedObjectID[0];this._bookmarkArray[c]=e.content.relativeTimePosition;}delete this._browseObjectHandles[a];return true;}}else{for(a in this._browseObjectHandles){if(this._browseObjectHandles[a]===e.handle){delete this._browseObjectHandles[a];return true;}}}return false;};WHPVRDevice.prototype.getBookmarkById=function(a){if(this._bookmarkArray[a]){return this._bookmarkArray[a];}return 0;};WHPVRDevice.prototype.isRecordingPlayed=function(a){if(this._bookmarkArray[a]||this._bookmarkArray[a]===0){return true;}return false;};WHPVRDevice.prototype.onSubscribedEvent=function(a){if(a.eventInfo.eventType==="CdsContainerUpdateIDs"&&a.eventInfo.eventValue.indexOf("pvr")===0){this._needUpdateRecordings=true;this._log("onSubscribedEvent","pvr - event.eventInfo: "+JSON.stringify(a.eventInfo));this._updateRecordings();}};WHPVRDevice.prototype._updateRecordings=function(){var a=2000,b=this;if(this._timerUpdateRecordings){clearTimeout(this._timerUpdateRecordings);this._timerUpdateRecordings=null;}this._timerUpdateRecordings=setTimeout(function(){b.browseContainer();this._timerUpdateRecordings=null;},a);};WHPVRDevice.prototype.updateTask=function(d,e){var a={},c={},b=d._data;if(d.isWHPVRRecording){a.objectType=b.objectType;a.parentId=b.parentId;a.id=b.id;a.restricted=b.restricted;a.title=b.title;a["class"]=b["class"];a.className=b.className;a.userAnnotation=b.userAnnotation;a.writeStatus=b.writeStatus;c.objectType=b.objectType;c.parentId=b.parentId;c.id=b.id;c.restricted=b.restricted;c.title=b.title;c["class"]=b["class"];c.className=b.className;c.userAnnotation=b.userAnnotation;c.writeStatus=b.writeStatus;if(e&&e.uiFolder){c.userAnnotation=[e.uiFolder];}else{if(e&&e.keep){if(e.keep===0){c.writeStatus=["WRITABLE"];}else{c.writeStatus=["PROTECTED"];}}}this._updateObjectHandle=CCOM.HomeNetworking.updateObject(this.udn,a,c);}};WHPVRDevice.prototype.updateObjectResultCallback=function(a,b){if(a){}else{}this._updateObjectHandle=null;};WHPVRDevice.prototype._searchContainer=function(a,d,f,c,e,b){this._searchContainerHandle=CCOM.HomeNetworking.searchContainer(this.udn,a,d,f,c,e,b);};WHPVRDevice.prototype.searchByCriteria=function(e,b,c,d,a){this._searchDataCallback=c;this._searchContainer("pvr",e,"dc:title","*",0,this.WHPVR_BROWSE_MAX_CONTENT_NUM);};WHPVRDevice.prototype.searchByActorsDirector=function(a,c,d,e,b){this._searchDataCallback=d;};WHPVRDevice.prototype.searchContainerResultCallback=function(b,c){var a=[];if(b){if(this._searchDataCallback){this.retrieveBookmarks(c.content);a=$N.platform.btv.WHPVRRecordingFactory.recordingMapArray(c.content,this);this._searchDataCallback(a);}}else{}this._searchContainerHandle=null;};WHPVRDevice.prototype.isSearchFinished=function(){return this._searchContainerHandle===null;};WHPVRDevice.prototype.deleteTask=function(b){var a;if(b.isWHPVRRecording){a=b._data.id;this._deleteObjectHandle=CCOM.HomeNetworking.deleteObject(this.udn,a);}else{if(b.isWHPVRScheduleTask){this._scheduler.schedulerDeleteTask(b);}}};WHPVRDevice.prototype.deleteObjectResultCallback=function(a,b){if(a){}else{}this._deleteObjectHandle=null;};WHPVRDevice.prototype.browseContainer=function(){this._browseContainerHandle=CCOM.HomeNetworking.browseContainer(this.udn,"pvr","","*",0,this.WHPVR_BROWSE_MAX_CONTENT_NUM);this.recordings=[];};WHPVRDevice.prototype.retrieveBookmarks=function(c){var b,a=c.length;this._browseObjectHandles=[];for(b=0;b<a;b++){if(c[b].bookmarkID){this.browseObject(c[b].bookmarkID[0]);}}};WHPVRDevice.prototype.browseContainerResultCallback=function(b,c){var a;if(b){this.retrieveBookmarks(c.content);this.recordings=$N.platform.btv.WHPVRRecordingFactory.recordingMapArray(c.content,this);}else{this.recordings=[];}if(this._needUpdateRecordings){this.deviceEventCallback("recordingUpdated",this.udn);this._needUpdateRecordings=false;}this._browseContainerHandle=null;};WHPVRDevice.prototype.getSchedules=function(){return this._scheduler.schedulerGetTasks();};WHPVRDevice.prototype.requestEventRecording=function(a){this._scheduler.requestEventRecording(a);};WHPVRDevice.prototype.requestSeriesRecording=function(a){this._scheduler.requestSeriesRecording(a);};WHPVRDevice.prototype.deleteSeriesSchedule=function(a){this._scheduler.schedulerDeleteSeries(a);};WHPVRDevice.prototype.deleteSingleSchedule=function(a){this._scheduler.schedulerDeleteSingle(a);};WHPVRDevice.prototype.getTaskByEvent=function(a){return this._scheduler.getTaskByEvent(a);};var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.WHPVRDevice=WHPVRDevice;var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};function WHPVRScheduler(T){var k=new $N.apps.core.Log("WHPVR","WHPVRScheduler"),h=T,t=CCOM.HomeNetworking.getInstance({uuid:T.udn}),p=t.instance,r=[],V=null,b=100,N={MANUAL:1,CDS_SERVICE:2,CDS_EVENT:3,BY_MATCHING_NAME:4,BY_MATCHING_ID:5},l={PROGRAM_ID:1,SERIES_ID:2},z={ALL:1,FIRST_RUN:2,REPEAT:3},H={SINGLE:1,SERIES:2},W=[],C;C=function(ac,ad){ad.udn=T.udn;if(T.deviceEventCallback){T.deviceEventCallback(ac,ad);}};function G(ac){if(ac.state<3){return true;}else{return false;}}function g(af){var ae="",ad=[],ac,ag;if(af){ad=af.split(",");for(ac=0;ac<ad.length;ac++){ag=parseInt(ad[ac],10).toString(16);ae+="0000".substr(0,4-ag.length)+ag;}}return ae;}function v(ae){var ad,ac;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].taskId===ae){return r[ad].allTasks[ac];}}}return null;}function c(ac,ad){if(ac.getTasksHandle){ad.getTasksHandle=ac.getTasksHandle;}if(ac.allTasks){ad.allTasks=ac.allTasks;}if(ac.recordingType){ad.recordingType=ac.recordingType;}}function aa(ac,ad){if(ac.whpvrDevice){ad.whpvrDevice=ac.whpvrDevice;}if(ac.gettaskConflictHandle){ad.gettaskConflictHandle=ac.gettaskConflictHandle;}}function a(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].scheduleId===ad){return r[ac];}}return null;}function J(ae){var ad,ac;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].taskId===ae){return r[ad].allTasks[ac];}}}return null;}function D(ad){var ac;if(!ad||ad.taskCount!==1||ad.recordingType!==H.SINGLE){return;}if(ad.allTasks.length!==1){return;}ac=ad.allTasks[0];if(ac.gettaskConflictHandle){return;}ac.gettaskConflictHandle=p.getTaskConflicts(ac.taskId);}function d(ad){var ac,ae;if(ad.handle===V){r=ad.resultList;for(ac=0;ac<r.length;ac++){r[ac].getTasksHandle=p.getTasksFromSchedule(r[ac].scheduleId,0,b);}}else{for(ac=0;ac<r.length;ac++){if(ad.handle===r[ac].getScheduleHandle){ae=ad.resultList[0];c(r[ac],ae);r[ac]=ae;break;}}}}function O(ad){var ac;if(ad.handle===V){}else{for(ac=0;ac<r.length;ac++){if(ad.handle===r[ac].getScheduleHandle){r.splice(ac,1);break;}}}if(ad.error){}}function Y(af){var ae,ad,ac;for(ae=0;ae<r.length;ae++){if(r[ae].getTasksHandle===af.handle){r[ae].allTasks=af.resultList;for(ad=0;ad<r[ae].allTasks.length;ad++){ac=r[ae].allTasks[ad];ac.whpvrDevice=h;}break;}}}function L(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].getTasksHandle===ad.handle){r[ac].allTasks=[];break;}}}function M(af){var ad,ac,ae=false;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].deleteHandle===af.handle){r[ad].allTasks.splice(ac,1);ae=true;break;}}if(ae){C("deleteTaskOK",af);return;}}}function m(ae){var ad,ac;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].deleteHandle===ae.handle){r[ad].allTasks[ac].deleteHandle=null;C("deleteTaskFailed",ae);return;}}}}function y(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].deleteHandle===ad.handle){r.splice(ac,1);C("deleteScheduleOK",ad);return;}}}function S(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].deleteHandle===ad.handle){r[ac].deleteHandle=null;if(ad.error){}C("deleteScheduleFailed",ad);return;}}}function s(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].scheduleId===ad.scheduleId){r[ac].getScheduleHandle=p.getSchedules(ad.scheduleId,0,1);break;}}}function R(ae){var ad={},ac;ad=a(ae.scheduleId);if(ad){}else{ad={};ad.scheduleId=ae.scheduleId;ad.allTasks=[];r.push(ad);}ad.getScheduleHandle=p.getSchedules(ae.scheduleId,0,1);for(ac=0;ac<W.length;ac++){if(W[ac].scheduleId===ae.scheduleId){ad.allTasks.push(W[ac]);D(ad);W.splice(ac,1);ac--;}}}function K(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].scheduleId===ad.scheduleId){r.splice(ac,1);C("onScheduleRemoved",ad);break;}}}function q(ae){var ad,ac;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].taskId===ae.taskId){r[ad].allTasks[ac].getTaskHandle=p.getTask(ae.taskId);return;}}}for(ad=0;ad<W.length;ad++){if(W[ad].taskId===ae.taskId){W[ad].getTaskHandle=p.getTask(ae.taskId);return;}}}function U(ad){var ac={},ae;ac.getTaskHandle=p.getTask(ad.taskId);ac.taskId=ad.taskId;ac.whpvrDevice=h;W.push(ac);}function F(ae){var ad,ac;for(ad=0;ad<r.length;ad++){for(ac=0;ac<r[ad].allTasks.length;ac++){if(r[ad].allTasks[ac].taskId===ae.taskId){r[ad].allTasks.splice(ac,1);C("onTaskRemoved",ae);return;}}}}function f(af){var ae,ac=af.result,ad;for(ae=0;ae<W.length;ae++){if(W[ae].getTaskHandle===af.handle&&W[ae].taskId===ac.taskId){aa(W[ae],ac);W.splice(ae,1,ac);for(ad=0;ad<r.length;ad++){if(r[ad].scheduleId===ac.scheduleId){r[ad].allTasks.push(ac);W.splice(ae,1);D(r[ad]);C("getTaskOK",af);return;}}}}for(ae=0;ae<r.length;ae++){for(ad=0;ad<r[ae].allTasks.length;ad++){if(r[ae].allTasks[ad].getTaskHandle===af.handle&&r[ae].allTasks[ad].taskId===ac.taskId){aa(r[ae].allTasks[ad],ac);r[ae].allTasks[ad]=ac;C("getTaskOK",af);return;}else{if(r[ae].allTasks[ad].getTaskHandle&&r[ae].allTasks[ad].taskId===ac.taskId){return;}}}}}function x(ae){var ad,ac;for(ad=0;ad<W.length;ad++){if(W[ad].getTaskHandle===ae.handle){W.splice(ad,1);break;}}if(ae.error){}}function e(ad,ac){if(ad.recordingType===H.SINGLE){ac.eventId=ad.cdsEventObjectId.substring("epg.".length);}else{if(ad.recordingType===H.SERIES){ac.seriesId=ad.matchingId;}}}function B(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].createHandle===ad.handle){e(r[ac],ad);c(r[ac],ad.result);r[ac]=ad.result;r[ac].allTasks=[];C("createScheduleOK",ad);break;}}}function o(ad){var ac;if(ad.error){}for(ac=0;ac<r.length;ac++){if(r[ac].createHandle===ad.handle){e(r[ac],ad);r.splice(ac,1);C("createScheduleFailed",ad);break;}}}function A(af){var ae,ad,ac=null;for(ae=0;ae<r.length;ae++){for(ad=0;ad<r[ae].allTasks.length;ad++){if(r[ae].allTasks[ad].gettaskConflictHandle===af){ac=r[ae].allTasks[ad];return ac;}}}return ac;}function Q(ag){var ad,af,ah=[],ac=[],ae;ad=A(ag.handle);if(!ad){return;}ah.push(ad);if(ag.resultList.length){for(ae=0;ae<ag.resultList.length;ae++){af=v(ag.resultList[ae]);if(!af){}else{}ac.push(af);}if(ac.length&&$N.platform.btv.WHPVRManager._conflictsCallback){$N.platform.btv.WHPVRManager._conflictsCallback($N.platform.btv.WHPVRRecordingFactory.scheduleTaskMapArray(ah),$N.platform.btv.WHPVRRecordingFactory.scheduleTaskMapArray(ac));}}else{}ad.gettaskConflictHandle=null;}function w(ad){var ac;ac=A(ad.handle);if(ac){ac.gettaskConflictHandle=null;}return;}function u(){if(t){p.removeEventListener("getSchedulesOK",d);p.removeEventListener("getSchedulesFailed",O);p.removeEventListener("getTasksFromScheduleOK",Y);p.removeEventListener("getTasksFromScheduleFailed",L);p.removeEventListener("deleteTaskOK",M);p.removeEventListener("deleteTaskFailed",m);p.removeEventListener("deleteScheduleOK",y);p.removeEventListener("deleteScheduleFailed",S);p.removeEventListener("onScheduleUpdated",s);p.removeEventListener("onScheduleAdded",R);p.removeEventListener("onScheduleRemoved",K);p.removeEventListener("onTaskUpdated",q);p.removeEventListener("onTaskAdded",U);p.removeEventListener("onTaskRemoved",F);p.removeEventListener("createScheduleOK",B);p.removeEventListener("createScheduleFailed",o);p.removeEventListener("getTaskOK",f);p.removeEventListener("getTaskFailed",x);p.removeEventListener("getTaskConflictsOK",Q);p.removeEventListener("getTaskConflictsFailed",w);r=[];p=null;t=null;window.gc();}}function X(){var ad,ae=[],ac;for(ad=0;ad<r.length;ad++){if(r[ad].allTasks&&r[ad].allTasks.length){for(ac=0;ac<r[ad].allTasks.length;ac++){if(G(r[ad].allTasks[ac])){ae=ae.concat($N.platform.btv.WHPVRRecordingFactory.scheduleTaskMapObject(r[ad].allTasks[ac],r[ad]));}}}}return ae;}function P(ac){var ae,ad;if(ac._data.whpvrDevice!==h){return false;}for(ae=0;ae<r.length;ae++){for(ad=0;ad<r[ae].allTasks.length;ad++){if(r[ae].allTasks[ad].taskId===ac.taskId){r[ae].allTasks[ad].deleteHandle=p.deleteTask(ac.taskId);return true;}}}return true;}function I(ac){var ad={};if(!ac||!ac.eventId){return;}ad={type:N.CDS_EVENT,softPrepaddingDuration:ac.softPrepaddingDuration,softPostpaddingDuration:ac.softPostpaddingDuration,cdsEventObjectId:"epg."+ac.eventId,userAnnotation:ac.uiFolder};ad.createHandle=p.createSchedule(ad);ad.allTasks=[];ad.recordingType=H.SINGLE;r.push(ad);}function n(ac){var ad={};if(!ac||!ac.seriesId){return;}ad={type:N.BY_MATCHING_ID,matchingId:ac.seriesId,matchingIdType:l.SERIES_ID,softPrepaddingDuration:ac.softPrepaddingDuration,softPostpaddingDuration:ac.softPostpaddingDuration,cdsEventObjectId:"epg."+ac.eventId,userAnnotation:ac.uiFolder};ad.createHandle=p.createSchedule(ad);ad.allTasks=[];ad.recordingType=H.SERIES;r.push(ad);}function ab(ag){var ae,ad,af=ag.eventId,ac,ah;for(ae=0;ae<r.length;ae++){if(r[ae].cdsEventObjectId===("epg."+af)&&r[ae].type===N.CDS_EVENT){r[ae].deleteHandle=p.deleteSchedule(r[ae].scheduleId);return;}else{for(ad=0;ad<r[ae].allTasks.length;ad++){ac=r[ae].allTasks[ad];if(G(ac)){ah=g(ac.channelIds);if(ac.startDateTime===ag.startTime&&ah===ag.serviceId){r[ae].allTasks[ad].deleteHandle=p.deleteTask(r[ae].allTasks[ad].taskId);return;}}}}}}function E(ad){var ac;for(ac=0;ac<r.length;ac++){if(r[ac].matchingId===ad&&r[ac].matchingIdType===l.SERIES_ID){r[ac].deleteHandle=p.deleteSchedule(r[ac].scheduleId);}}}function Z(ah){var af,ae,ag,ac,ad,ai;if(!ah){return;}ag=ah.eventId;ac="epg."+ag;for(af=0;af<r.length;af++){if(r[af].cdsEventObjectId===ac){if(r[af].allTasks.length){return $N.platform.btv.WHPVRRecordingFactory.scheduleTaskMapObject(r[af].allTasks[0],r[af]);}}for(ae=0;ae<r[af].allTasks.length;ae++){ad=r[af].allTasks[ae];if(G(ad)){ai=g(ad.channelIds);if(ad.startDateTime===ah.startTime&&ai===ah.serviceId){return $N.platform.btv.WHPVRRecordingFactory.scheduleTaskMapObject(r[af].allTasks[ae],r[af]);}}}}return null;}return{init:function(){p.addEventListener("getSchedulesOK",d);p.addEventListener("getSchedulesFailed",O);p.addEventListener("getTasksFromScheduleOK",Y);p.addEventListener("getTasksFromScheduleFailed",L);p.addEventListener("deleteTaskOK",M);p.addEventListener("deleteTaskFailed",m);p.addEventListener("deleteScheduleOK",y);p.addEventListener("deleteScheduleFailed",S);p.addEventListener("onScheduleUpdated",s);p.addEventListener("onScheduleAdded",R);p.addEventListener("onScheduleRemoved",K);p.addEventListener("onTaskUpdated",q);p.addEventListener("onTaskAdded",U);p.addEventListener("onTaskRemoved",F);p.addEventListener("createScheduleOK",B);p.addEventListener("createScheduleFailed",o);p.addEventListener("getTaskOK",f);p.addEventListener("getTaskFailed",x);p.addEventListener("getTaskConflictsOK",Q);p.addEventListener("getTaskConflictsFailed",w);V=p.getSchedules("",0,b);},schedulerHandle:V,schedulerGetTasks:X,schedulerRelease:u,schedulerDeleteTask:P,schedulerDeleteSeries:E,schedulerDeleteSingle:ab,getTaskByEvent:Z,requestEventRecording:I,requestSeriesRecording:n};}$N.platform.btv.WHPVRScheduler=WHPVRScheduler;var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.WHPVRRecordingFactory=(function(){var d,k=new $N.apps.core.Log("WHPVR","WHPVRRecordingFactory"),a={REMINDER:"GRMDR",RECORDING:"REC",REBOOT:"REBOOT"},n={BOOKED:0,PROCESSING:1,SUSPEND_PROCESSING:2,STOP_PROCESSING:3,PROCESSED:4,FINAL:5,ERROR:6,DELETING:7,DELETED:8},h={INVALID:0,NONE:1,PARTIAL:2,FULL:3},c={TASK_STATE_INVALID:0,TASK_STATE_WAITING_FOR_START:1,TASK_STATE_RECORDING:2,TASK_STATE_COMPLETED:3,TASK_STATE_ERROR:4,TASK_STATE_FATAL_ERROR:5};if(Object.defineProperty){d=function(u,t,s){Object.defineProperty(u,t,{get:s});};}else{d=function(u,t,s){u.__defineGetter__(t,s);};}function m(u){var s="",t=null;u=u.replace(/\D/g," ");u=u.trim();s=u.split(" ");if(s.length<3){return 0;}else{if(s.length===3){t=new Date(Date.UTC(1970,0,1,s[0],s[1],s[2]));return t.getTime();}}s[1]--;t=new Date(Date.UTC(s[0],s[1],s[2],s[3],s[4],s[5]));return t.getTime();}function g(v){var u="",t=[],s,w;if(v){t=v.split(",");for(s=0;s<t.length;s++){if(parseInt(t[s],10)){break;}}if(s===t.length){return"";}for(s=0;s<t.length;s++){w=parseInt(t[s],10).toString(16);u+="0000".substr(0,4-w.length)+w;}}return u;}function b(u){var v="",s={},t=[];v=g(u);if(v){s=CCOM.EPG.getServicesRSByQuery("*","serviceId='"+v+"'",null);if(!s.error){t=s.getNext(1);s.reset();s=null;if(t.length){return v;}}}v=u.split(",")[2];s=CCOM.EPG.getServicesRSByQuery("*","broadcastServiceId='"+v+"'",null);if(!s.error){t=s.getNext(1);s.reset();s=null;if(t.length){v=t[0].serviceId;return v;}}return"";}function q(t){var v=0,s=0,u=5000,w=0;if(t.scheduledStartTime&&t.scheduledStartTime.length>0){v=m(t.scheduledStartTime[0]);}if(t.scheduledEndTime&&t.scheduledEndTime.length>0){s=m(t.scheduledEndTime[0]);}if(t.recordedDuration&&t.recordedDuration.length>0){w=m(t.recordedDuration[0]);}if(Math.abs(s-v-w)<=u){return h.FULL;}return h.PARTIAL;}function p(w,C){var B=C,A="0",s="",y=null,z=null,t=null,u=null,v,x={_data:w};x._data.taskType=a.RECORDING;x._data.objectState=n.FINAL;x._data.completeStatus=q(x._data);if(x._data.channelID&&x._data.channelID.length>0){A=g(x._data.channelID[0].value);}if(x._data.programID&&x._data.programID.length>0){s=x._data.programID[0].value.split(",")[3];if(s==="(null)"){s="";}if(s){y=CCOM.EPG.getEventById(s);}}d(x,"whpvrDevice",function(){return B;});d(x,"taskId",function(){if(x._data.srsRecordTaskID&&x._data.srsRecordTaskID.length>0){return parseInt(x._data.srsRecordTaskID[0],10);}return 0;});d(x,"jobId",function(){if(x._data.srsRecordScheduleID&&x._data.srsRecordScheduleID.length>0){return parseInt(x._data.srsRecordScheduleID[0],10);}return 0;});d(x,"title",function(){return x._data.title;});d(x,"softPrepaddingDuration",function(){if(x._data.softPrepaddingDuration){return x._data.softPrepaddingDuration;}return 0;});d(x,"softPostpaddingDuration",function(){if(x._data.softPostpaddingDuration){return x._data.softPostpaddingDuration;}return 0;});d(x,"duration",function(){if(x._data.recordedDuration&&x._data.recordedDuration.length>0){return m(x._data.recordedDuration[0]);}return 0;});d(x,"startTime",function(){if(x._data.scheduledStartTime&&x._data.scheduledStartTime.length>0){return m(x._data.scheduledStartTime[0]);}return 0;});d(x,"endTime",function(){if(x._data.scheduledEndTime&&x._data.scheduledEndTime.length>0){return m(x._data.scheduledEndTime[0]);}return 0;});d(x,"shortDesc",function(){if(x._data.description&&x._data.description.length>0){return x._data.description[0];}return"";});d(x,"longDesc",function(){if(x._data.upnpLongDescription){return x._data.upnpLongDescription;}return"";});d(x,"serviceId",function(){return A;});d(x,"eventId",function(){return s;});d(x,"parentalRating",function(){if(x._data.rating&&x._data.rating.length>0){return parseInt(x._data.rating[0].value,10);}return"";});d(x,"url",function(){if(x._data.resource&&x._data.resource.length>0){return x._data.resource[0].uri;}return"";});d(x,"recordingType",function(){if(x._data.seriesID&&x._data.seriesID.length>0){return $N.data.Recording.RECORDING_TYPE.SERIES;}else{return $N.data.Recording.RECORDING_TYPE.SINGLE;}});d(x,"uiFolder",function(){if(x._data.userAnnotation&&x._data.userAnnotation.length>0){return x._data.userAnnotation[0];}else{return"";}});d(x,"bookmark",function(){if(x._data.bookmarkID){return B.getBookmarkById(x._data.id);}return 0;});d(x,"isPlayed",function(){return B.isRecordingPlayed(x._data.id);});d(x,"keep",function(){if(x._data.writeStatus&&x._data.writeStatus.length>0){if(x._data.writeStatus[0]==="PROTECTED"){return 1;}}return 0;});d(x,"isAuthorized",function(){return true;});d(x,"isWHPVRTask",function(){return true;});d(x,"isWHPVRRecording",function(){return true;});if(y&&!y.error){z=y.genres||CCOM.EPG.getGenresByEventId(s);d(x,"netEventGenres",function(){return z;});d(x,"seriesId",function(){return y.seriesId;});d(x,"seasonId",function(){return y.seasonId;});d(x,"episodeId",function(){return y.episodeId;});d(x,"seriesName",function(){return y.seriesName;});d(x,"netEpisodeName",function(){return y.netEpisodeName;});u=$N.app.constants.EVENT_EXTENDED_INFO.LANGUAGE;t=CCOM.EPG.getExtInfoByEventId(s,u,0);if(t&&!t.error){for(v=0;v<t.length;v++){if(t[v].extInfoKey==="Actors"){x.netActorCast=t[v].extInfoValue;}else{if(t[v].extInfoKey==="Director"){x.netDirector=t[v].extInfoValue;}else{if(t[v].extInfoKey==="country"){x.netCountry=t[v].extInfoValue;}else{if(t[v].extInfoKey==="year"){x.netProdYear=t[v].extInfoValue;}else{if(t[v].extInfoKey==="Originalname"){x.netOriginalName=t[v].extInfoValue;}}}}}}}}else{d(x,"seriesId",function(){if(x._data.seriesID&&x._data.seriesID.length>0){return x._data.seriesID[0].value;}return 0;});d(x,"episodeId",function(){if(x._data.episodeID&&x._data.episodeID.length>0){return x._data.episodeID[0];}return 0;});}return x;}function r(w,u){var t,s,v=[];if(w&&w.length>0){for(t=0;t<w.length;t++){s=p(w[t],u);v.push(s);}}return v;}function f(v,x){var z={_data:v},t=null,y={},s=0,u,w,A,C="",E={},D=[],B=null;z._data.taskType=a.RECORDING;if(v.state===c.TASK_STATE_INVALID||v.state===c.TASK_STATE_ERROR||v.state===c.TASK_STATE_FATAL_ERROR){z._data.objectState=n.ERROR;}else{if(v.state===c.TASK_STATE_WAITING_FOR_START){z._data.objectState=n.BOOKED;}else{if(v.state===c.TASK_STATE_RECORDING){z._data.objectState=n.PROCESSING;}else{if(v.state===c.TASK_STATE_COMPLETED){z._data.objectState=n.FINAL;z._data.completeStatus=h.FULL;}}}}if(x){d(z,"recordingType",function(){if(x.type===3||x.type===2){A=$N.data.Recording.RECORDING_TYPE.SINGLE;}else{A=$N.data.Recording.RECORDING_TYPE.SERIES;}return A;});}C=b(z._data.channelIds);s=v.cdsEventObjectId;if(s){s=s.substring("epg.".length);t=CCOM.EPG.getEventById(s);}else{if(C){E=CCOM.EPG.getEventsRSByQuery("*","startTime='"+String(v.startDateTime)+"' AND serviceId='"+C+"'","startTime");if(!E.error){D=E.getNext(1);E.reset();E=null;if(D.length){t=D[0];s=t.eventId;}}}}d(z,"whpvrDevice",function(){return z._data.whpvrDevice;});d(z,"isWHPVRScheduleTask",function(){return true;});d(z,"isWHPVRTask",function(){return true;});d(z,"taskId",function(){return z._data.taskId;});d(z,"eventId",function(){return s;});d(z,"jobId",function(){return z._data.scheduleId;});d(z,"title",function(){return z._data.title;});d(z,"softPrepaddingDuration",function(){return z._data.softPrepaddingDuration;});d(z,"softPostpaddingDuration",function(){return z._data.softPostpaddingDuration;});d(z,"duration",function(){return z._data.duration;});d(z,"startTime",function(){return z._data.startDateTime;});d(z,"endTime",function(){return z._data.startDateTime+z._data.duration;});d(z,"serviceId",function(){return C;});d(z,"uiFolder",function(){return x.userAnnotation;});if(t&&!t.error){B=t.genres||CCOM.EPG.getGenresByEventId(t.eventId);d(z,"netEventGenres",function(){return B;});d(z,"seriesId",function(){return t.seriesId;});d(z,"seasonId",function(){return t.seasonId;});d(z,"episodeId",function(){return t.episodeId;});d(z,"seriesName",function(){return t.seriesName;});d(z,"shortDesc",function(){return t.shortDesc;});d(z,"longDesc",function(){return t.longDesc;});d(z,"parentalRating",function(){return t.parentalRating;});d(z,"netEpisodeName",function(){return t.netEpisodeName;});u=$N.app.constants.EVENT_EXTENDED_INFO.LANGUAGE;y=CCOM.EPG.getExtInfoByEventId(s,u,0);if(y&&!y.error){for(w=0;w<y.length;w++){if(y[w].extInfoKey==="Actors"){z.netActorCast=y[w].extInfoValue;}else{if(y[w].extInfoKey==="Director"){z.netDirector=y[w].extInfoValue;}else{if(y[w].extInfoKey==="country"){z.netCountry=y[w].extInfoValue;}else{if(y[w].extInfoKey==="year"){z.netProdYear=y[w].extInfoValue;}else{if(y[w].extInfoKey==="Originalname"){z.netOriginalName=y[w].extInfoValue;}}}}}}}}return z;}function l(w,v){var t,s,u=[];if(w.length>0){for(t=0;t<w.length;t++){s=f(w[t],v);u.push(s);}}return u;}function e(s,t){if(s){return f(s,t);}else{return null;}}function o(t,s){if(t){return l(t,s);}else{return[];}}return{recordingMappedObject:p,recordingMapArray:r,scheduleTaskMapObject:e,scheduleTaskMapArray:o};}());define("jsfw/platform/btv/ConflictManager",["jsfw/apps/core/Log","jsfw/platform/btv/PVRManager"],function(b,a){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.ConflictManager=function(f){var n=f||$N.platform.btv.PVRManager,l=new $N.apps.core.Log("btv","ConflictManager"),h,d=function(){},m,o=function(){},e=[],g=null,c={RECORDING:"REC",REMINDER:"RMDR",REVIEWBUFFER:"RBREC",LIVE:"LIVE"};function q(w){var v,u,t=true,s={},r=[],x=[];for(v=0;v<w.allTaskIds.length;v++){s[w.allTaskIds[v]]=w.allTaskTypes[v];}for(v=0;v<w.taskOptions.length;v++){r=w.taskOptions[v];for(u=0;u<r.length;u++){if(s[r[u]]===c.REMINDER){t=false;break;}}if(t){x.push(w.taskOptions[v]);}else{t=true;}}return x;}function k(w){var v=[],r,u,t,x=[],s=[];if(w.handle===h&&w.error===undefined&&w.taskOptions){x=q(w);if(x.length>1){for(u=0;u<w.allTaskIds.length;u++){r=n.getTask(w.allTaskIds[u]);if(r&&(w.allTaskTypes[u]===c.RECORDING)){v.push(r);}}d(v);}}}function p(u){var t,r,s=[];if(u.handle===m&&u.error===undefined&&u.taskOverlaps.length>1){for(t=0;t<u.taskOverlaps.length;t++){if(!e[u.taskOverlaps[t].taskId]&&u.taskOverlaps[t].taskId!==g){r=n.getTask(u.taskOverlaps[t].taskId);if(r){s.push(r);e[u.taskOverlaps[t].taskId]=true;}}}o(s);}else{o([]);}}return{registerTaskOverlapsListeners:function(){CCOM.Scheduler.addEventListener("getTaskOverlapsOK",p);CCOM.Scheduler.addEventListener("getTaskOverlapsFailed",p);},registerGetTaskAllOptionsListeners:function(){CCOM.Scheduler.addEventListener("getTaskAllOptionsOK",k);CCOM.Scheduler.addEventListener("getTaskAllOptionsFailed",k);},unRegisterTaskOverlapsListeners:function(){CCOM.Scheduler.removeEventListener("getTaskOverlapsOK",p,false);CCOM.Scheduler.removeEventListener("getTaskOverlapsFailed",p,false);},unRegisterGetTaskAllOptionsListeners:function(){CCOM.Scheduler.removeEventListener("getTaskAllOptionsOK",k,false);CCOM.Scheduler.removeEventListener("getTaskAllOptionsFailed",k,false);},handleConflictsForRecording:function(r,t){var s=this;e=[];this.registerTaskOverlapsListeners();g=r;o=function(u){s.unRegisterTaskOverlapsListeners();t(u);};m=CCOM.Scheduler.getTaskOverlaps(g);},handleConflictsForTasks:function(w,v){var r,u=[],t=0,s=this;e=[];this.registerTaskOverlapsListeners();if(w&&w[t]&&w[t].taskId){g=w[t].taskId;o=function(x){t++;u=u.concat(x);if(t===w.length){t=0;s.unRegisterTaskOverlapsListeners();v(u);}else{g=w[t].taskId;m=CCOM.Scheduler.getTaskOverlaps(g);}};m=CCOM.Scheduler.getTaskOverlaps(g);}},handleConflictsForRepeatRecording:function(r,t){var s=n.getTasksForJobId(r);this.handleConflictsForTasks(s,t);},handleConflictsForTime:function(s,t){var r=this;this.registerGetTaskAllOptionsListeners();d=function(u){r.unRegisterGetTaskAllOptionsListeners();t(u);};h=CCOM.Scheduler.getTaskAllOptions(s,[],[]);},isTaskConflicting:function(t,w){var v=this,s,u=false,r=function(x){CCOM.Scheduler.removeEventListener("getTaskOverlapsOptionsOK",r,false);CCOM.Scheduler.removeEventListener("getTaskOverlapsOptionsFailed",r,false);if(x.handle===s&&x.error===undefined){if(x.taskOptions.length>1){u=true;}}w(u);};if(!n.isTaskScheduled(t)){w(false);}else{CCOM.Scheduler.addEventListener("getTaskOverlapsOptionsOK",r);CCOM.Scheduler.addEventListener("getTaskOverlapsOptionsFailed",r);s=CCOM.Scheduler.getTaskOverlapsOptions(t,false,false);}}};};return $N.platform.btv.ConflictManager;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.PVRManager=(function(){var f=new $N.apps.core.Log("btv","PVRManager"),q=$N.platform.btv.WHPVRManager,X,aa=function(){},aC=aa,C=aa,c=aa,N=aa,aB=aa,J=aa,r=aa,L=0,aD=[],z,ab=null,ad,d,H,ax,S,o,aq,av,n,P,aI,b,G,al,t,ak={},aR="localRecordingJobs/",y=20,ay={REMINDER:"GRMDR",RECORDING:"REC",REBOOT:"REBOOT"},Z={UNPLAYED_UNBLOCKED:0,PLAYED_UNBLOCKED:1,UNPLAYED_BLOCKED:2,PLAYED_BLOCKED:3},aJ={SINGLE:"ONE_TIME",REPEAT:"RPT_TIME",EVENT:"ONE_EVT",SERIES:"SERIES",SEARCH:"SEARCH"},aT={BOOKED:0,PROCESSING:1,SUSPEND_PROCESSING:2,STOP_PROCESSING:3,PROCESSED:4,FINAL:5,ERROR:6,DELETING:7,DELETED:8},aL,e,M,aM,aG="netDirector, jobOpState, netOriginalName, sourceURL, softPrepaddingDuration, taskType, contentDesc, timeOfDay, endTime, netEventGenres, netDisplaySeasonEpisode, netActorCast, startTime, bookmark, uiFolder, keep, duration, netProdYear, serviceId, type, eventId, objectState, title_user, netEpisodeName, netCountry, repeatDaysArray, jobId, netServiceName, scheduleType, playable, PlayedBlocked, title, extraInfo, softPostpaddingDuration",Q="parentalRating, serviceId, netEpisodeName, title_user, scheduleType, taskId, netServiceName, objectState, netCountry, episodeId, type, seasonId, eventId, netDirector, netActorCast, shortDesc, extraInfo, netEventGenres, netDisplaySeasonEpisode, endTime, netOriginalName, softPostpaddingDuration, playable, completeStatus, unscheduled, actualStartTime, inactive, duration, contentDesc, actualStopTime, uiFolder, jobId, isAuthorized, taskType, sourceURL, mediumID, softPrepaddingDuration, netProdYear, longDesc, title, PlayedBlocked, seriesName, actualDuration, bookmark, keep, seriesId, fulfillmentStatus, startTime, netEpisodeOriginalName",O=[],A=function(){},ag=function(){},m={};function W(aV,aX,aU){aV=aV||Q;aU=aU||"startTime";var aW=CCOM.MediaLibrary.getEntryRSByQuery(aV,aX,"Tasks",aU);return u(aW);}function aE(){var aU="0",aV=W("taskId, eventId, taskOpState, scheduleType, objectState, taskType","taskType='"+ay.RECORDING+"' AND (objectState<="+String(aT.PROCESSING)+") AND inactive="+aU,"startTime");return aV;}function B(aU){return aU._data.taskType===ay.RECORDING;}function aA(){var aW=aE(),aV=null,aU=null;m={};aW.forEach(function(aX){if(aX&&B(aX)&&aX.eventId){aV=$N.platform.btv.EPG.getEventById(aX.eventId);aU=$N.platform.btv.EPGEventFactory.mapObject(aV);if(aU&&aU.uniqueEventId){m[aU.uniqueEventId]=R(aX);}}});}function aN(aV,aU){if(ak[aV]){ak[aV].forEach(function(aW){aW(aV,aU);});}}function u(aZ){var aY,a1=[],aX,aU,aW=null,a0=null,aV=null;if(!aZ.error){aY=aZ.getNext(y);while(aY&&aY.length){aU=aY.length;f("getArrayFromResultSet","Processing "+String(aU)+" records...");for(aX=0;aX<aU;aX++){aW=$N.platform.btv.RecordingFactory.mapObject(aY[aX]);if(aW&&B(aW)&&aW.eventId){a0=$N.platform.btv.EPG.getEventById(aW.eventId);if(a0){aV=$N.platform.btv.EPGEventFactory.mapObject(a0);if(aV&&aV.uniqueEventId){m[aV.uniqueEventId]=R(aW);}}}a1.push(aW);}if(aU<y){aY=null;}else{aY=aZ.getNext(y);}}aZ.reset();aZ=null;}else{}f("getArrayFromResultSet","Exit - returnArray length = "+String(a1.length));return a1;}function Y(aV){var aU,aW=null;if(!aV.error){aU=aV.getNext(1);if(aU[0]){aW=aU[0];}aV.reset();aV=null;}else{}return aW;}function g(aU){if(aU&&aU._data&&aU._data.objectState===aT.BOOKED){return true;}return false;}function ae(aU){if(aU&&aU._data){f("isTaskObjectActive","Enter - task._data.objectState = "+String(aU._data.objectState));if(aU._data.objectState===aT.PROCESSING){return true;}}return false;}function a(aU){if(aU&&aU._data){f("isTaskObjectSuspended","Enter - task._data.objectState = "+String(aU._data.objectState));if(aU._data.objectState===aT.SUSPEND_PROCESSING){return true;}}return false;}function aj(aU){if(aU&&aU._data){if(aU._data.completeStatus===M){return true;}}return false;}function ai(aU){if(aU&&aU._data){if(aU._data.completeStatus===aM){return true;}}return false;}function v(aU,aV){if(!aV){aV="jobId DESC";}var aW=CCOM.Scheduler.getJobsRSByQuery(aG,"jobId='"+aU+"'",aV),aX=Y(aW);return aX;}function aP(aW,aU,aX){if(!aU){aU="jobId DESC";}var aZ=aX?"eventId='"+aW+"' AND taskType='"+ay.RECORDING+"'":"eventId='"+aW+"'",aV=CCOM.Scheduler.getJobsRSByQuery(aG,aZ,aU),aY=Y(aV);return aY;}function k(aY,aV,aU){if(!aV){aV="jobId DESC";}var aZ=aU?"serviceId='"+aY+"' AND taskType='"+aU+"'":"serviceId='"+aY+"'",aW=CCOM.Scheduler.getJobsRSByQuery(aG,aZ,aV),aX=Y(aW);return aX;}function aS(aY,aV,aU){if(!aV){aV="jobId DESC";}var aW=CCOM.Scheduler.getJobsRSByQuery(aU||aG,aY,aV),aX=u(aW);return aX;}function ar(aW,aU,aY){aY=(aY===undefined)?true:aY;aU=aU||Q;var a0="taskId='"+String(aW)+"'",aX,aV,aZ;if(aY){a0+=" AND inactive = 0";}aX=CCOM.Scheduler.getTasksRSByQuery(aU,a0,"startTime");aZ=Y(aX);aV=$N.platform.btv.RecordingFactory.mapObject(aZ);return aV;}function s(aY,aU){var aV,aW,aX;if(aY){aX="taskType='"+ay.REMINDER+"' AND "+aY;}else{aX="taskType='"+ay.REMINDER;}aV=CCOM.Scheduler.getJobsRSByQuery(aU||aG,aX,"startTime");aW=u(aV);return aW;}function p(aZ,aX,aU,a0){if(!aX){aX="taskId DESC";}var aV=0,a1=a0?"eventId='"+aZ+"' AND taskType='"+ay.RECORDING+"' AND inactive="+aV:"eventId='"+aZ+"' AND inactive="+aV,aY=CCOM.Scheduler.getTasksRSByQuery(aU||Q,a1,aX),aW=$N.platform.btv.RecordingFactory.mapObject(Y(aY));return aW;}function aK(a0,aY,aU,aX){if(!aY){aY="taskId DESC";}var aV=0,a1=aX?"serviceId='"+a0+"' AND taskType='"+aX+"' AND eventId IS NULL":"serviceId='"+a0+"' AND inactive="+aV,aZ=CCOM.Scheduler.getTasksRSByQuery(aU||Q,a1,aY),aW=$N.platform.btv.RecordingFactory.mapObject(Y(aZ));return aW;}function x(a0,aY,aU,aX){if(!aY){aY="taskId DESC";}var aV=0,a1=aX?"serviceId='"+a0+"' AND taskType='"+aX+"' AND eventId IS NULL":"serviceId='"+a0+"' AND inactive="+aV,aZ=CCOM.Scheduler.getTasksRSByQuery(Q,a1,aY),aW=u(aZ);return aW;}function am(aW){var aV=CCOM.Scheduler.getTasksRSByQuery(Q,"eventId='"+aW+"' AND taskType='"+ay.REMINDER+"' AND objectState="+String(aT.BOOKED),"startTime"),aU=$N.platform.btv.RecordingFactory.mapObject(Y(aV));return aU;}function ap(aV){var aU=CCOM.Scheduler.getTasksRSByQuery(Q,"startTime='"+aV+"' AND taskType='"+ay.REMINDER+"' AND objectState<"+String(aT.ERROR),"startTime"),aW=u(aU);return aW;}function w(aU){var aV=0,aW=CCOM.Scheduler.getTasksRSByQuery(Q,"jobId='"+aU+"' AND inactive="+aV,"startTime"),aX=u(aW);return aX;}function U(aV){var aU="0",aW=CCOM.Scheduler.getTasksRSByQuery(Q,"taskType='"+ay.RECORDING+"' AND objectState="+String(aV)+" AND inactive="+aU,"startTime"),aX=u(aW);return aX;}function af(aX){var aZ="",aV,aY,aW=$N.platform.btv.PVRManager.TaskStatus,aU="0";if(aX){if(aX===aW.TASK_STATUS_SCHEDULED){aZ=" AND objectState="+String(aT.BOOKED);}else{if(aX===aW.TASK_STATUS_COMPLETED){aZ=" AND completeStatus="+String(aM);}else{if(aX===aW.TASK_STATUS_PARTIAL){aZ=" AND completeStatus="+String(M);}}aZ+=" AND (objectState="+String(aT.PROCESSED)+" OR objectState="+String(aT.FINAL)+")";}}else{aZ+=" AND objectState<"+String(aT.ERROR);}aZ+=" AND inactive="+aU;aV=CCOM.Scheduler.getTasksRSByQuery(Q,"taskType='"+ay.RECORDING+"' AND scheduleType='"+aJ.SERIES+"'"+aZ,"startTime");aY=u(aV);return aY;}function aw(aU){var aV=0,aW=CCOM.Scheduler.getTasksRSByQuery(Q,"taskType='"+ay.RECORDING+"' AND jobId='"+aU+"' AND inactive="+aV,"startTime"),aX=u(aW);return aX;}function l(){var aU=0,aV=CCOM.Scheduler.getTasksRSByQuery(Q,"taskType='"+ay.RECORDING+"' AND (objectState<"+String(aT.PROCESSED)+") AND inactive="+aU,"startTime"),aW=u(aV);return aW;}function ac(){return U(aT.BOOKED);}function V(){return U(aT.PROCESSING);}function an(){var aU=W("WIDE_TASK_FIELD_FILTER","taskType='"+ay.RECORDING+"' AND (objectState="+String(aT.PROCESSING)+" OR objectState="+String(aT.PROCESSED)+" OR objectState="+String(aT.FINAL)+")","startTime");return aU;}function E(){var aU="0",aV=W("WIDE_TASK_FIELD_FILTER","taskType='"+ay.RECORDING+"' AND (objectState<"+String(aT.ERROR)+") AND inactive="+aU,"startTime");return aV;}function az(){var aU=W("WIDE_TASK_FIELD_FILTER","taskType='"+ay.RECORDING+"' AND objectState<"+String(aT.ERROR)+" AND (scheduleType='"+aJ.SINGLE+"' OR scheduleType='"+aJ.REPEAT+"')","startTime");return aU;}function aO(){var aU=W("WIDE_TASK_FIELD_FILTER","taskType='"+ay.RECORDING+"' AND completeStatus="+String(M)+" AND (objectState="+String(aT.PROCESSED)+" OR objectState="+String(aT.FINAL)+")","startTime");return aU;}function h(){var aV="startTime",aU;switch(z){case $N.platform.btv.PVRManager.RecordingsReturnOrderType.BY_DATE:aV="startTime";break;case $N.platform.btv.PVRManager.RecordingsReturnOrderType.BY_DATE_DESC:aV="startTime DESC";break;case $N.platform.btv.PVRManager.RecordingsReturnOrderType.BY_NAME:aV="case when seriesId is null then title else seriesId end";break;default:aV="startTime";break;}aU=W("WIDE_TASK_FIELD_FILTER","taskType='"+ay.RECORDING+"' AND completeStatus="+String(aM)+" AND (objectState="+String(aT.PROCESSED)+" OR objectState="+String(aT.FINAL)+")",aV);return aU;}function T(aV,aW){var aU;for(aU=0;aU<aV.length;aU++){aV[aU].listener.call(aV[aU].callFunc,aW);}}function au(aY){var aU,aW=7,aV=[],aX=false;for(aU=0;aU<aW;aU++){aV[aU]=(aY[aU]&&aY[aU]===true);if(!aX&&aV[aU]){aX=true;}}return aX?aV:[];}function at(aY,aX){switch(aY){case $N.platform.btv.PVRManager.Frequency.DAILY:return[true,true,true,true,true,true,true];case $N.platform.btv.PVRManager.Frequency.WEEKLY:var aV=(aX!==null?aX:new Date()).getDay()-1,aU,aW=[];if(aV<0){aV=6;}for(aU=0;aU<7;aU++){aW.push(aU===aV?true:false);}return aW;case $N.platform.btv.PVRManager.Frequency.WEEKDAYS:return[true,true,true,true,true,false,false];case $N.platform.btv.PVRManager.Frequency.WEEKENDS:return[false,false,false,false,false,true,true];default:return[];}}function R(aU){if(ae(aU)){if(aU.recordingType===$N.data.Recording.RECORDING_TYPE.SERIES){return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES;}else{return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE;}}if(g(aU)){if(aU.recordingType===$N.data.Recording.RECORDING_TYPE.SERIES){return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES;}else{return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED;}}if(aj(aU)){return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_PARTIAL;}if(ai(aU)){return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_COMPLETED;}return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;}function K(aX){var aV,aU=[],aW=aX.length;for(aV=0;aV<aW;aV++){aU[aV]=aX[aV].taskId;}return aU;}function ao(aX){if(aX){var aU=0,aW=CCOM.Scheduler.getTasksRSByQuery(Q,"seriesId='"+aX.replace("'","''")+"' AND taskType='"+ay.RECORDING+"' AND objectState<>"+aT.DELETED+" AND inactive="+aU,"startTime"),aV=u(aW);return aV;}return[];}function D(aV,aX,aU){aV=aV||Q;aU=aU||"startTime";var aW=CCOM.Scheduler.getTasksRSByQuery(aV,aX,aU);return u(aW);}function aQ(aX){var aV=CCOM.Scheduler.getTasksRSByQuery("COUNT(*) as count",aX,null),aU,aW=0;if(!aV.error){aU=aV.getNext(1);if(aU){aW=aU[0].count;}}else{}if(aV){aV.reset();aV=null;}return aW;}function aH(aV){var aU,aW;aU=aR+aV;aW=$N.platform.system.Preferences.get(aU);$N.platform.system.Preferences.deletePreference(aU);if(aW){return true;}else{return false;}}function aF(aV){var aU;aU=aR+aV;$N.platform.system.Preferences.set(aU,1);}function I(aW){var aV=$N.platform.btv.PVRManager.getTask(aW),aX=null,aU=null;if(aV&&B(aV)&&aV.eventId){aX=$N.platform.btv.EPG.getEventById(aV.eventId);aU=$N.platform.btv.EPGEventFactory.mapObject(aX);if(aU&&aU.uniqueEventId){m[aU.uniqueEventId]=R(aV);}}}t=function(aZ){var aV,aX,aY=[],a0,a1=[],aW=0,aU=[],a2;if(!aH(aZ.jobId)){return;}a2=function(a3){aW++;if(a3.handle===a0&&a3.error===undefined){for(aX=0;aX<a3.taskOverlaps.length;aX++){if(!aU[a3.taskOverlaps[aX].taskId]&&(a3.taskOverlaps[aX].fulfillmentStatus===e||a3.taskOverlaps[aX].fulfillmentStatus===M)){aY.push(ar(a3.taskOverlaps[aX].taskId));aU[a3.taskOverlaps[aX].taskId]=true;}}}if(aW===aV.length){CCOM.Scheduler.removeEventListener("getTaskOverlapsOK",a2,false);CCOM.Scheduler.removeEventListener("getTaskOverlapsFailed",a2,false);if(aY.length>0){X.handleConflictsForTasks(aY,function(a4){J(aY,a4);});}else{aN("onAddJobCompleted",aZ.jobId);T(aD,aZ);}}else{a0=CCOM.Scheduler.getTaskOverlaps(aV[aW].taskId);}};aV=w(aZ.jobId);if(aV[0]){if(aV[0].taskType===ay.REMINDER){T(aD);}else{CCOM.Scheduler.addEventListener("getTaskOverlapsOK",a2);CCOM.Scheduler.addEventListener("getTaskOverlapsFailed",a2);a0=CCOM.Scheduler.getTaskOverlaps(aV[0].taskId);}}};al=function(aU){if(ab){ab=null;}if(aU&&aU.taskType){if(aU.taskType===ay.RECORDING){if(aU&&aU.reason&&aU.reason===CCOM.Scheduler.BAD_PARAM){$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_PVR_INVALID_EVENT_MSG);}else{$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_PVR_JOB_FAILED_MSG);}}else{if(aU.taskType===ay.REMINDER){$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_AT_TASK_FAILED_MSG);}}}aN("onAddTaskFailed",aU.jobId);};G=function(aU){f("addJobFailedListener",JSON.stringify(aU));if(N){N(aU);}if(aU&&aU.error&&aU.error.name&&aU.error.name==="BadParam"){$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_PVR_INVALID_EVENT_MSG);}else{$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_PVR_JOB_FAILED_MSG);}};b=function(aU){ab=aU.jobId;aF(aU.jobId);if(aB){aB(aU.jobId);}};aI=function(aX){var aV=parseInt($N.platform.system.Preferences.get("/system/opentv/scheduler/JobTaskManager/viewerPeriod",true)*1000,10),aW=parseInt(new Date().getTime(),10),aU=10000,aZ=parseInt(aW+aV+aU,10),aY=function(a0){var a1;if(a0.length>1){c([ar(aX.taskId)],a0);}else{C(aX.taskId);}};X.handleConflictsForTime(aZ,aY);};P=function(aU){I(aU.taskId);aN("onTaskStarted",aU.taskId);T(aD);};n=function(aU){I(aU.taskId);aN("onTaskStopped",aU.taskId);T(aD);};av=function(aU){aN("onDiskSpaceAlert",aU);};aq=function(aU){aA();aN("deleteJobOK",aU);};o=function(aU){aN("stopTaskOK",aU);};ax=function(aW){var aV,aU=[];if(ab){ab=null;}else{aN("onTasksChanged",aW);if(aW.fulfillmentStatusArray){for(aV=0;aV<aW.fulfillmentStatusArray.length;aV++){if(aW.fulfillmentStatusArray[aV].fulfillmentStatus===e||aW.fulfillmentStatusArray[aV].fulfillmentStatus===M){aU.push(ar(aW.fulfillmentStatusArray[aV].taskId));}else{if(aW.fulfillmentStatusArray[aV].fulfillmentStatus===aL){}}}if(aU.length>0){X.handleConflictsForTasks(aU,function(aX){r(aU,aX);});}}T(aD);}};S=function(aU){aN("onTasksModified",aU);};H=function(aW,aU,aY,aX){var aV=aU||{};aV.keep=aY?true:false;if(!aV.hasOwnProperty("softPrepaddingDuration")&&!isNaN(L)){aV.softPrepaddingDuration=L;}if(!aV.hasOwnProperty("softPostpaddingDuration")&&!isNaN(L)){aV.softPostpaddingDuration=L;}if(aX&&aX.seriesId){aV.sqlQueryFilter="seriesId = '"+aX.seriesId.replace("'","''")+"'";aV.sqlQueryFilter+=" AND ";if(aX.serviceId){aV.sqlQueryFilter+=" serviceId = '"+aX.serviceId+"'";aV.sqlQueryFilter+=" AND ";}aV.sqlQueryFilter+=" startTime >= '"+aX.startTime+"'";}aV.eventId=aW;return aV;};d=function(aV){var aU={};aU.jobId=aV.jobId;aU.seriesId=aV.seriesId;aU.seasonId=aV.seasonId;aU.seriesName=aV.seriesName;aU.eventId=aV.eventId;aU.startTime=aV.startTime;aU.endTime=aV.endTime;aU.scheduleType=aV.scheduleType;aU.subRecordings=[];return aU;};function F(aV){var aW,aX,aY=[],aU={};aV.forEach(function(a0,aZ){if(a0.seriesId===undefined||a0.seriesId===null||a0.seriesId===""){aY.push(a0);}else{if(!aU[a0.seriesId]){aU[a0.seriesId]={};aW=d(a0);aW.subRecordings.push(a0);aU[a0.seriesId]=aW;aY.push(aW);}else{aW=aU[a0.seriesId];aW.subRecordings.push(a0);}}});return aY;}ad=function(aU){};function ah(aU,aV){switch(aU){case"deleteTaskOK":case"deleteTaskFailed":case"deleteScheduleOK":case"deleteScheduleFailed":case"onScheduleRemoved":case"onTaskRemoved":case"recordingUpdated":case"getTaskOK":aN("onTasksChanged",aV);T(aD);break;case"createScheduleOK":break;case"createScheduleFailed":$N.app.DialogueHelper.showWHPVRRecordingErrorDialogue(q.getTVNameByUdn(aV.udn));break;}}return{init:function(aV,aU){X=aV||new $N.platform.btv.ConflictManager($N.platform.btv.PVRManager);this.registerEventListeners();z=$N.platform.btv.PVRManager.RecordingsReturnOrderType.BY_DATE;try{aL=CCOM.Scheduler.INVALID;e=CCOM.Scheduler.NONE;M=CCOM.Scheduler.PARTIAL;aM=CCOM.Scheduler.FULL;}catch(aW){aL=0;e=1;M=2;aM=3;}aA();},getJob:v,getJobByEvent:aP,deleteJob:function(aU,aV){CCOM.Scheduler.deleteJob(aU);return this;},getTask:ar,getAllTimedReminders:s,getRepeatDaysArrayForFrequency:at,getScheduledReminderByEvent:am,getScheduledReminderByStartTime:ap,getTaskByEventId:p,getTasksForJobId:w,setTaskAboutToStartCallback:function(aU){if(!aU){aU=aa;}C=aU;return this;},setTaskAboutToStartConflictCallback:function(aU){if(!aU){aU=aa;}c=aU;return this;},setRecordingRequestFailedCallback:function(aU){if(!aU){aU=aa;}N=aU;return this;},setRecordingRequestOKCallback:function(aU){if(!aU){aU=aa;}aB=aU;return this;},setRecordingRequestConflictsCallback:function(aU){if(!aU){aU=aa;}J=aU;q.setRecordingRequestConflictsCallback(aU);return this;},setTaskChangedConflictCallback:function(aU){if(!aU){aU=aa;}r=aU;return this;},setHighWaterMarkWarningValue:function(aU){},saveBookmark:function(aV,aU,aX){var aW=null;if(aV&&aV.isWHPVRTask){return q.saveBookmark(aV,aX);}else{if(aV&&aV.taskId){aW=CCOM.MediaLibrary.updateEntry(aV.taskId,{bookmark:parseInt(aX,10)});if(aW.error){}}}return this;},deleteBookmark:function(aU){$N.platform.btv.PVRManager.saveBookmark(aU,null,0);return this;},getBookmark:function(aU){if(aU&&aU.bookmark){return aU.bookmark;}return 0;},registerEventListeners:function(){CCOM.Scheduler.addEventListener("onAddJobCompleted",t);CCOM.Scheduler.addEventListener("onTaskVPAlert",aI);CCOM.Scheduler.addEventListener("onTaskStarted",P);CCOM.Scheduler.addEventListener("onTaskStopped",n);CCOM.Scheduler.addEventListener("onAddTaskFailed",al);CCOM.Scheduler.addEventListener("addJobFailed",G);CCOM.Scheduler.addEventListener("addJobOK",b);CCOM.Scheduler.addEventListener("onTasksChanged",ax);CCOM.Scheduler.addEventListener("onTasksModified",S);CCOM.Scheduler.addEventListener("deleteJobOK",aq);CCOM.Scheduler.addEventListener("stopTaskOK",o);CCOM.MediaLibrary.addEventListener("onContentModified",ad);CCOM.MediaLibrary.addEventListener("onDiskSpaceAlert",av);CCOM.Scheduler.addEventListener("updateTaskOK",function(aU){aN("updateTaskOK",aU);});CCOM.Scheduler.addEventListener("updateTaskFailed",function(aU){aN("updateTaskFailed",aU);});CCOM.MediaLibrary.addEventListener("updateEntryOK",function(aU){aN("updateEntryOK",aU);});CCOM.MediaLibrary.addEventListener("updateEntryFailed",function(aU){aN("updateEntryFailed",aU);});CCOM.MediaLibrary.addEventListener("deleteContentOK",function(aU){aN("deleteContentOK",aU);});q.addEventListener("deleteTaskOK",ah);q.addEventListener("deleteTaskFailed",ah);q.addEventListener("deleteScheduleOK",ah);q.addEventListener("deleteScheduleFailed",ah);q.addEventListener("onScheduleRemoved",ah);q.addEventListener("onTaskRemoved",ah);q.addEventListener("recordingUpdated",ah);q.addEventListener("getTaskOK",ah);q.addEventListener("createScheduleOK",ah);q.addEventListener("createScheduleFailed",ah);},unRegisterEventListeners:function(){CCOM.Scheduler.removeEventListener("onAddJobCompleted",t,false);CCOM.Scheduler.removeEventListener("onTaskVPAlert",aI,false);CCOM.Scheduler.removeEventListener("onTaskStarted",P,false);CCOM.Scheduler.removeEventListener("onTaskStopped",n,false);CCOM.Scheduler.removeEventListener("onAddTaskFailed",al,false);CCOM.Scheduler.removeEventListener("addJobFailed",G,false);CCOM.Scheduler.removeEventListener("onTasksChanged",ax,false);CCOM.Scheduler.removeEventListener("onTasksModified",S,false);CCOM.Scheduler.removeEventListener("deleteJobOK",aq,false);CCOM.Scheduler.removeEventListener("stopTaskOK",o,false);CCOM.MediaLibrary.removeEventListener("onContentModified",ad,false);CCOM.MediaLibrary.removeEventListener("onDiskSpaceAlert",av,false);q.removeEventListener("deleteTaskOK",ah);q.removeEventListener("deleteTaskFailed",ah);q.removeEventListener("deleteScheduleOK",ah);q.removeEventListener("deleteScheduleFailed",ah);q.removeEventListener("onScheduleRemoved",ah);q.removeEventListener("onTaskRemoved",ah);q.removeEventListener("recordingUpdated",ah);q.removeEventListener("getTaskOK",ah);q.removeEventListener("createScheduleOK",ah);q.removeEventListener("createScheduleFailed",ah);},requestSeriesRecording:function(aY,aW,aZ){var aX,aV,aU;if(!aY||!aY.startTime||!aY.seriesId){}else{if($N.platform.btv.WHPVRManager.isLocalRecordServer()){aX=H(aY.eventId,aW,aZ,aY);aU=CCOM.Scheduler.addJob(ay.RECORDING,aJ.SERIES,aX);if(aU&&aU.error){}else{m[aY.uniqueEventId]=$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES;}}else{aV=$N.platform.btv.WHPVRManager.getCurrentRecordServer();aW.seriesId=aY.seriesId;aW.eventId=aY.eventId;$N.platform.btv.WHPVRManager.requestSeriesRecording(aV,aW);}}},cancelSeriesRecording:function(aU){this.deleteJob(aU);return this;},cancelSeriesRecordingByEventId:function(aX){var aW,aU=$N.platform.btv.WHPVRManager.getCurrentRecordServer(),aY=null,aV=null;aW=p(aX,null,"",true);if(aW){this.cancelSeriesRecording(aW.jobId);aY=$N.platform.btv.EPG.getEventById(aX);aV=$N.platform.btv.EPGEventFactory.mapObject(aY);if(aV&&aV.uniqueEventId){m[aV.uniqueEventId]=$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;}}if(!aY){aY=$N.platform.btv.EPG.getEventById(aX);}if(aY&&!aY.error){$N.platform.btv.WHPVRManager.deleteSeriesSchedule(aU,aY.seriesId);}else{}return this;},cancelManualSeriesRecording:function(aV){var aU;aU=aK(aV,null,"",ay.RECORDING);if(aU){this.cancelSeriesRecording(aU.jobId);}return this;},cancelRecurringRecording:function(aU){this.deleteJob(aU);return this;},requestEventRecording:function(aY,aW,aZ){var aX,aV,aU;if($N.platform.btv.WHPVRManager.isLocalRecordServer()){aX=H(aY.eventId,aW,aZ);aU=CCOM.Scheduler.addJob(ay.RECORDING,aJ.EVENT,aX);if(aU&&aU.error){}else{m[aY.uniqueEventId]=$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED;}return aU.jobId;}else{aV=$N.platform.btv.WHPVRManager.getCurrentRecordServer();aW.eventId=aY.eventId;$N.platform.btv.WHPVRManager.requestEventRecording(aV,aW);}},cancelEventRecording:function(aX){var aV,aU=$N.platform.btv.WHPVRManager.getCurrentRecordServer(),aW=aX&&aX.uniqueEventId?aX.uniqueEventId:null;if(aW!==null){}aV=p(aX.eventId,null,"",true);if(aV){if(g(aV)&&aV.recordingType===$N.data.Recording.RECORDING_TYPE.SINGLE){this.deleteJob(aV.jobId);}else{if(ae(aV)||g(aV)){CCOM.Scheduler.stopTask(aV.taskId);}}}m[aW]=$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;$N.platform.btv.WHPVRManager.deleteSingleSchedule(aU,aX);return this;},cancelManualRecording:function(aY){var aV,aX,aU=$N.platform.btv.WHPVRManager.getCurrentRecordServer(),aW;aV=aK(aY,null,"",ay.RECORDING);aX=k(aY,null,ay.RECORDING);if(aV&&aX){if(g(aV)&&aV.recordingType===$N.data.Recording.RECORDING_TYPE.SINGLE){this.deleteJob(aX.jobId);}else{if(ae(aV)||g(aV)){CCOM.Scheduler.stopTask(aV.taskId);}}}return this;},cancelRecordingByTask:function(aU){if(!aU){return;}if(!aU.isWHPVRTask){if(g(aU)&&aU.recordingType===$N.data.Recording.RECORDING_TYPE.SINGLE){this.deleteJob(aU.jobId);}else{if(ae(aU)||g(aU)){CCOM.Scheduler.stopTask(aU.taskId);}}}else{$N.platform.btv.WHPVRManager.deleteTask(aU);}},requestTimeRecording:function(aW,aZ,a0,a1,aX,aU){var a3,aV=aU||{},a2=false,aY;aV.duration=(aZ-aW)*1000;aV.sourceURL=aU.url;aV.keep=aX||0;aV.serviceId=a1;aV.title=aU.title;aV.uiFolder=aU.uiFolder;aV.repeatDaysArray=aU.repeatDaysArray;if(!aV.sourceURL){if(a1&&$N.platform.btv.EPG&&$N.platform.btv.EPG.getChannelByServiceId(a1)){aV.sourceURL=$N.platform.btv.EPG.getChannelByServiceId(a1).uri;}else{return false;}}if(!aV.hasOwnProperty("softPrepaddingDuration")&&!isNaN(L)){aV.softPrepaddingDuration=L;}if(!aV.hasOwnProperty("softPostpaddingDuration")&&!isNaN(L)){aV.softPostpaddingDuration=L;}if(aV.hasOwnProperty("repeatDaysArray")||(a0&&a0!==$N.platform.btv.PVRManager.Frequency.ONCE)){if(aV.hasOwnProperty("repeatDaysArray")){aV.repeatDaysArray=au(aV.repeatDaysArray);}else{if(a0){aV.repeatDaysArray=at(a0);}}a2=(!aV.repeatDaysArray||aV.repeatDaysArray.length===0)?false:true;}if(a2){aY=new Date(aW*1000);aV.timeOfDay=(aY.getHours()*3600)+(aY.getMinutes()*60);a3=CCOM.Scheduler.addJob(ay.RECORDING,aJ.REPEAT,aV);}else{aV.startTime=aW*1000;a3=CCOM.Scheduler.addJob(ay.RECORDING,aJ.SINGLE,aV);}if(a3&&a3.error){return false;}},isTaskScheduled:function(aV){var aU=ar(aV);if(aU&&(g(aU)||ae(aU))){return true;}return false;},isTaskUnscheduled:function(aV){var aU=ar(aV);if(aU){f("isTaskUnscheduled","Returning "+!g(aU)+" for ID: "+aV);return !g(aU);}return false;},isPVRTaskScheduled:function(aV){var aU=ar(aV,"taskType, objectState");if(aU&&B(aU)&&(g(aU)||ae(aU))){return true;}return false;},isTaskRecordingNow:function(aV){var aU=ar(aV,"taskType, objectState");if(aU&&B(aU)&&ae(aU)){return true;}return false;},isEventScheduled:function(aV){var aU=p(aV,null,"taskType, objectState");if(aU&&(ae(aU)||g(aU))){return true;}return false;},isEventUnScheduled:function(aV){var aU=p(aV,null,"taskType, objectState");if(aU&&!g(aU)){return true;}return false;},isEventPartialRecording:function(aV){var aU=p(aV,null,"taskType, completeStatus",true);if(aU&&B(aU)&&aj(aU)){return true;}return false;},isPVREventUnScheduled:function(aV){var aU=p(aV,null,"taskType, objectState",true);if(aU&&B(aU)&&!g(aU)){return true;}return false;},isPVREventScheduled:function(aV){var aU=aV.uniqueEventId;if(aU&&m.hasOwnProperty(aU)){if(m[aU]<$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED){return false;}if(m[aU]>$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES){return false;}return true;}else{return false;}},isManualRecordingActiveForService:function(aY){var aU,a0=aY.serviceId,aZ="taskId, taskType, objectState, scheduleType, completeStatus, startTime, endTime",aX=null,aW,aV;aU=aK(a0,null,"taskType, objectState",ay.RECORDING);if(aU&&(aU._data.taskType===ay.RECORDING)){aU=x(a0,null,aZ,ay.RECORDING);aX=aU.length;for(aV=0;aV<aX;aV++){if(aU[aV]&&B(aU[aV])){aW=R(aU[aV]);if(aW===$N.app.PVRUtil.ACTIVE||aW===$N.app.PVRUtil.ACTIVE_IN_SERIES){if((aY.startTime<aU[aV].endTime)&&(aY.endTime!==aU[aV].startTime)){return true;}}}}}return false;},getActiveTaskIdForService:function(aZ){var aU,aY="taskId, taskType, objectState, scheduleType, completeStatus, startTime, endTime",aX=null,aW,aV;aU=aK(aZ,null,"taskType, objectState",ay.RECORDING);if(aU&&(aU._data.taskType===ay.RECORDING)){aU=x(aZ,null,aY,ay.RECORDING);aX=aU.length;for(aV=0;aV<aX;aV++){if(aU[aV]&&B(aU[aV])){aW=R(aU[aV]);if(aW===$N.app.PVRUtil.ACTIVE||aW===$N.app.PVRUtil.ACTIVE_IN_SERIES){return aU[aV].taskId;}}}}return null;},isEventRecordingNow:function(aV){var aU=p(aV,null,"taskType, objectState",true);if(aU&&ae(aU)){return true;}return false;},getRecordingStatusByEvent:function(aU){if(aU){if(aU.uniqueEventId&&m.hasOwnProperty(aU.uniqueEventId)){return m[aU.uniqueEventId];}}return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;},getEventRecordingStatus:function(aV){var aW=$N.platform.btv.EPG.getEventById(aV),aU=aW?$N.platform.btv.EPGEventFactory.mapObject(aW):null;this.getRecordingStatusByEvent(aU);},getServiceRecordingStatus:function(a0){var aU=null,aZ="taskId, taskType, objectState, scheduleType, completeStatus, startTime, endTime",aY=null,aX=null,aV,aW=null;aU=x(a0,null,aZ,ay.RECORDING);aX=aU.length;for(aV=0;aV<aX;aV++){if(aU[aV]&&B(aU[aV])){aW=R(aU[aV]);if(aW===$N.app.PVRUtil.ACTIVE||aW===$N.app.PVRUtil.ACTIVE_IN_SERIES){return aW;}}}return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;},getTaskRecordingStatus:function(aU){if(aU&&B(aU)){return R(aU);}return $N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED;},isSeriesRecordingForTask:function(aU){var aV=$N.platform.btv.PVRManager.getTaskRecordingStatus(aU);return aV===$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES||aV===$N.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES;},getTaskAuthorizationStatus:function(aU){if(aU&&B(aU)&&aU.isAuthorized){return true;}return false;},cancelTasksById:function(aU){var aV;for(aV=0;aV<aU.length;aV++){this.cancelTaskById(aU[aV]);}return this;},deleteTask:function(aU){var aW=(aU.jobId)?this.getTasksForJobId(aU.jobId):[aU],aV=function(aY,a0){var aZ=false;if(aW.length===1){CCOM.Scheduler.deleteJob(aY);}CCOM.MediaLibrary.deleteContent(a0,aZ);},aX=function(aY){aV(aU.jobId,aU.taskId);CCOM.Scheduler.removeEventListener("stopTaskOK",aX,false);};if(!aU.isWHPVRTask){if(ae(aU)){CCOM.Scheduler.addEventListener("stopTaskOK",aX);CCOM.Scheduler.stopTask(aU.taskId);}else{aV(aU.jobId,aU.taskId);}}else{$N.platform.btv.WHPVRManager.deleteTask(aU);}return this;},cancelTaskById:function(aV){var aU=ar(aV,"objectState, scheduleType, jobId");if(this.isTaskRecordingNow(aV)||a(aU)||(g(aU)&&aU.recordingType===$N.data.Recording.RECORDING_TYPE.SERIES)){CCOM.Scheduler.stopTask(aV);}else{if(g(aU)){this.deleteJob(aU.jobId);}else{}}return this;},isRecurringRecording:function(aU){f("isRecurringRecording","Enter - task = "+$N.apps.util.JSON.stringify(aU));var aV=this.getJob(aU.jobId);if(aV&&(aV.type===aJ.SERIES||aV.type===aJ.REPEAT)){return true;}return false;},isChannelCurrentlyRecording:function(aV){f("isChannelCurrentlyRecording","Enter - channel = "+$N.apps.util.JSON.stringify(aV));var aW=V(),aU;for(aU=0;aU<aW.length;aU++){if(aW[aU].serviceId===aV.serviceId){return true;}}return false;},isRecordingProtected:function(aV){var aU=null;if(aV&&!aV.isWHPVRTask){aU=ar(aV.taskId,"keep");}else{aU=aV;}if(aU&&aU.keep){return true;}return false;},protectRecording:function(aV){var aU=ar(aV,"objectState");if(aU){if(aU.objectState<aT.FINAL){CCOM.Scheduler.updateTask(aV,{keep:true});}else{CCOM.MediaLibrary.updateEntry(aV,{keep:true});}}return this;},unprotectRecording:function(aV){var aU=ar(aV,"objectState");if(aU){if(aU.objectState<aT.FINAL){CCOM.Scheduler.updateTask(aV,{keep:false});}else{CCOM.MediaLibrary.updateEntry(aV,{keep:false});}}return this;},getAllRecordings:function(aV){var aU=E();aV=(aV===undefined||aV===null)?false:aV;return aV?F(aU):aU;},getScheduledRecordings:function(){return ac();},getCompleteRecordings:function(aU){var aV=h();aU=(aU===undefined||aU===null)?false:aU;return aU?F(aV):aV;},getActiveRecordings:function(){var aU=V();return aU;},getPartialRecordings:function(){var aU=aO();return aU;},getTimedRecordings:function(){return az();},getSeriesRecordingsByStatus:function(aU){return F(af(aU));},getRecordingsBySeries:function(aU){return F(ao(aU));},isRecordingComplete:function(aU){if(aU&&B(aU)&&(aU._data.completeStatus===M||aU._data.completeStatus===aM)){return true;}return false;},getTaskRecordProgress:function(aW){var aV=0,aU=ar(aW,"startTime, endTime"),aX=new Date().getTime();if(aU&&aU.startTime<aX){if(aU.endTime>aX){aV=Math.round((aX-aU.startTime)/(aU.endTime-aU.startTime)*100);}else{aV=100;}}return aV;},registerUIRefreshListener:function(aV,aU){aD.push({listener:aV,callFunc:aU});},unregisterUIRefreshListener:function(aV){var aU;for(aU=0;aU<aD.length;aU++){if(aD[aU].listener===aV){aD.splice(aU,1);break;}}},setUIRefreshCallback:function(aU){if(!aU){aU=aa;}aC=aU;},updateRecording:function(aV,aU){CCOM.Scheduler.updateTask(aV,aU);return this;},updateRemoteRecordingByTask:function(aU,aV){return q.updateTask(aU,aV);},setRecordingsReturnOrder:function(aU){z=aU;},getRecordingsReturnOrder:function(aU){return z;},setDefaultPadding:function(aU){L=aU*1000;return this;},getDefaultPadding:function(){return L/1000;},getTasksByQuery:function(aV,aX,aU){var aW=D(aV,aX,aU);return aW;},getEntriesByQuery:function(aV,aX,aU){var aW=W(aV,aX,aU);return aW;},countTasksByQuery:function(aV){var aU=aQ(aV);return aU;},DEFAULT_KEEP_TIME:2592000,EndStatus:{},TaskStatus:{TASK_STATUS_UNSCHEDULED:1,TASK_STATUS_SCHEDULED:2,TASK_STATUS_SCHEDULED_BY_SERIES:3,TASK_STATUS_ACTIVE:4,TASK_STATUS_ACTIVE_IN_SERIES:5,TASK_STATUS_PARTIAL:6,TASK_STATUS_COMPLETED:7},FailReason:{},Frequency:{ONCE:1,DAILY:2,WEEKLY:3,WEEKDAYS:4,WEEKENDS:5},RecordingsReturnOrderType:{BY_DATE:1,BY_DATE_DESC:2,BY_NAME:3},getPlayableRecordings:function(){var aV=$N.app.PVRCapability.getCurrentMediaId()||-1,aX="taskType='REC' AND objectState<6 AND objectState>0 AND objectState!=2 AND mediumID = '"+aV+"'",aW=W(Q,aX,"uiFolder DESC"),aU=function(a0,aY){var a1=a0.uiFolder||a0._data.uiFolder,aZ=aY.uiFolder||aY._data.uiFolder;if(a1===aZ){return 0;}else{if((a1&&aZ&&a1>aZ)||(a1&&!aZ)){return -1;}}return 1;};aW=aW.concat($N.platform.btv.WHPVRManager.getAllRecordingsFromWHPVRServers());return aW.sort(aU);},getPlayableRecordingsByFolderName:function(aX){aX=aX||"";var aU=$N.app.PVRCapability.getCurrentMediaId()||-1,aW=null,aV="taskType='REC' AND objectState<6 AND objectState>0 AND mediumID = '"+aU+"' AND uiFolder = '"+$N.app.StringUtil.escapeApostrophes(aX)+"'";if(aX){aW=W(Q,aV,"startTime DESC");aW=aW.concat($N.platform.btv.WHPVRManager.getAllRecordingsByFolderName(aX));}return aW;},getRemoteRecordingsByFolder:function(aU){return $N.platform.btv.WHPVRManager.getAllRecordingsByFolderName(aU);},isLocalRecording:function(aU){if(aU&&!aU.isWHPVRTask){return true;}return false;},getTVName:function(aU){if(aU&&!this.isLocalRecording(aU)){return q.getTVNameByRecording(aU);}return"";},isLocalRecordServer:function(){return $N.platform.btv.WHPVRManager.isLocalRecordServer();},getPlayableRecordingsByTitle:function(a4,a2,aW,aV,a0,a1,a5){var aX=a1||"title DESC",a7=[],a6,aZ=a2||Q,a3,aY,aU=function(a9){var a8=function(bb,ba){var bd=bb.title,bc=ba.title;bd=bb.title.toLowerCase();bc=bb.title.toLowerCase();if(bd<bc){return -1;}if(bd>bc){return 1;}return 0;};a9.sort(a8);return a9;};O=[];A=function(){aU(O);aW(O);};ag=function(a8){for(aY=0;aY<a8.length;aY++){O.push(a8[aY]);}};if($N.app.FeatureManager.isPVREnabled()){a3=$N.app.SearchCriteriaUtil.getLocalPlayableRecordingsByTitleCriteria(a4,a0,a5);a6=CCOM.Scheduler.getTasksRSByQuery(aZ,a3,aX);if(!a6.error){O=u(a6);}else{}}if($N.platform.btv.WHPVRManager.isEnabled()&&$N.platform.system.Network.isNetworkAvailable($N.platform.system.Network.NetworkType.ETHERNET)){a3="dc:title contains '"+a4+"'";$N.platform.btv.WHPVRManager.searchByCriteria(a3,null,ag,A,null,null);}else{aW(O);}},getPlayableRecordingsByActorsDirector:function(aX,a1,aV,aU,aZ,a0,a3){var aW=a0||"title DESC",a5=[],a4,aY=a1||Q,a2;a2=$N.app.SearchCriteriaUtil.getLocalPlayableRecordingsByActorsDirectorCriteria(aX,aZ,a3);a4=CCOM.Scheduler.getTasksRSByQuery(aY,a2,aW);if(!a4.error){a5=u(a4);aV(a5);}else{aU();}},getPlayableRecordingsByKeyword:function(a0,a1,aV,aU,aY,aZ,a3){var aW=aZ||"title DESC",a5=[],a4,aX=a1||Q,a2;a2=$N.app.SearchCriteriaUtil.getLocalPlayableRecordingsByKeywordCriteria(a0,aY,a3);a4=CCOM.Scheduler.getTasksRSByQuery(aX,a2,aW);if(!a4.error){a5=u(a4);aV(a5);}else{aU();}},getScheduleTasks:function(){var aU=D(Q,"taskType='REC' AND objectState <= "+aT.STOP_PROCESSING+" AND fulfillmentStatus < 4 AND fulfillmentStatus > 1","startTime");aU=aU.concat($N.platform.btv.WHPVRManager.getAllSchedulesFromWHPVRServers());return aU;},isTaskBlocked:function(aV){var aU;if(aV&&!aV.isWHPVRTask){aU=$N.platform.btv.PVRManager.getTask(aV.taskId,"PlayedBlocked");if(aU&&aU._data&&aU._data.PlayedBlocked){return(aU._data.PlayedBlocked===Z.PLAYED_BLOCKED||aU._data.PlayedBlocked===Z.UNPLAYED_BLOCKED);}}return false;},isTaskPlayed:function(aV){var aU;if(aV&&!aV.isWHPVRTask){aU=$N.platform.btv.PVRManager.getTask(aV.taskId,"bookmark");if(aU&&aU._data&&(aU._data.bookmark||aU._data.bookmark===0)){return true;}}else{if(aV&&aV.isWHPVRTask){return aV.isPlayed;}}return false;},addEventListener:function(aU,aV){if(aU&&aV){if(!ak[aU]){ak[aU]=[];}if(!ak[aU].filter(function(aW){return(aW===aV);}).length){ak[aU].push(aV);}}},removeEventListener:function(aU,aV){if(aU&&aV&&ak[aU]){ak[aU]=ak[aU].filter(function(aW){return(aW!==aV);});}},getJobByQuery:aS,WIDE_TASK_FIELD_FILTER:Q};}());define("jsfw/platform/media/UPnP",[],function(){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.media=$N.platform.media||{};$N.platform.media.UPnP=(function(){var c=function(){},k=null,n=[],f={AUDIO:1,IMAGE:2,VIDEO:3,FOLDER:4,FILE:5,UNKNOWN:6},h=25,e={DeviceFound:"onDeviceFound",DeviceLost:"onDeviceLost",DeviceListUpdated:"getDevicesOK"},b={};function l(s){var o=null,r,q=s.length||-1,p=[];for(r=0;r<q;r++){o=s[r];if(o&&o.type===1){o.fileType=f.FOLDER;}else{if(o&&o.resource.length){if(o.resource[0].protocolInfo.indexOf("http-get:*:image/")>-1){o.fileType=f.IMAGE;o.resourceUrl=o.resource[0].uri.replace("dlna://","http://");}else{if(o.resource[0].protocolInfo.indexOf("http-get:*:audio/")>-1){o.fileType=f.AUDIO;o.resourceUrl=o.resource[0].uri;}else{if(o.resource[0].protocolInfo.indexOf("http-get:*:video/")>-1){o.fileType=f.VIDEO;o.resourceUrl=o.resource[0].uri;}else{continue;}}}}}p.push(o);}return p;}function a(o){if(c){c(l(o.content),o.handle);}}function d(o){m();}function m(){CCOM.HomeNetworking.addEventListener("getDevicesOK",function(o){n=o.devices;if(b.getDevicesOK){b.getDevicesOK.forEach(function(p){p(n);});}},false);CCOM.HomeNetworking.addEventListener("getDevicesFailed",function(o){},false);CCOM.HomeNetworking.getDevices();}function g(){CCOM.HomeNetworking.addEventListener("onDeviceFound",function(o){if(b.onDeviceFound){b.onDeviceFound.forEach(function(p){p(o.device);});}m();},false);CCOM.HomeNetworking.addEventListener("onDeviceLost",function(o){if(b.onDeviceLost){b.onDeviceLost.forEach(function(p){p(o.device);});}d(o);},false);CCOM.HomeNetworking.addEventListener("browseContainerOK",a,false);CCOM.HomeNetworking.addEventListener("browseContainerFailed",function(){},false);}return{fileTypes:f,init:function(){if(CCOM&&CCOM.HomeNetworking&&CCOM.HomeNetworking.getDevices){m();g();}},initialise:function(){this.init();},getRootContentsForDevice:function(o,p){k=o;c=p;return CCOM.HomeNetworking.browseContainer(o.udn,"0","","*",0,h);},getContentsForFolder:function(p,r,q,o){c=r;q=q||0;o=o||h;return CCOM.HomeNetworking.browseContainer(k.udn,p.id,"","*",q,o);},getDevices:function(){return n;},getCurrentDevice:function(){return k;},addEventListener:function(p,q){var o=e[p];if(p&&q&&o){if(!b[o]){b[o]=[];}b[o].push(q);}},removeEventListener:function(p,q){var o=e[p];if(p&&q&&o&&b[o]){b[o].filter(function(r){return(r!==q);});}}};}());return $N.platform.media.UPnP;});define("jsfw/platform/btv/Favourites",["jsfw/apps/core/Log","jsfw/platform/btv/EPG","jsfw/platform/system/Preferences"],function(a,c,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.Favourites=(function(){var n=new $N.apps.core.Log("btv","Favourites"),A="serviceFavouritesIDs",g="serviceFavouriteFolders",u="info",s;function k(){return s.getPreferenceObject(g)||[];}function m(E){var D,B,C;if(E){D=k();C=D.length;for(B=0;B<C;B++){if(D[B]===E){return true;}}}return false;}function p(B){if(s.setPreferenceObject(g,B)){return true;}return false;}function f(){var B=[],F=k(),E=F.length,C=0,D=[];var G=function(){var I=[],H,K=s.getPreferenceObject(A+this.name.replace(" ","_")),J=K?K.length:0;if(K){for(H=0;H<J;H++){I.push($N.platform.btv.EPG.getChannelByServiceId(K[H]));}}return I;};for(C=0;C<E;C++){B.push({name:F[C],getChannels:G,getServiceIds:function(){return s.getPreferenceObject(A+this.name.replace(" ","_"));}});}return B;}function o(C){var B=s.getPreferenceObject(A+C.replace(" ","_"));if(B){return B;}return null;}function l(I){var C=[],B=k(),H,D,G,F,E;if(I){for(D=0;D<B.length;D++){if(B[D]===I){H=s.getPreferenceObject(A+I.replace(" ","_"));G=H?H.length:0;for(E=0;E<G;E++){if(H[E]){F=$N.platform.btv.EPG.getChannelByServiceId(H[E]);C.push(F||{serviceId:H[E]});}}break;}}}return C;}function e(F){var B=k(),C,E=[],D=0;if(F){for(C=0;C<B.length;C++){if(B[C]===F){E=s.getPreferenceObject(A+F.replace(" ","_"));}}}return E;}function v(E){var C=k(),B=[];if(C.length===0){B.push(E);}else{B=C.concat(E);}var D=false;if(E&&!m(E)){if(p(B)){D=true;}}if(!D){}return D;}function t(F,D){if(F&&D){var C,E=[],B=D.length||0;if(!m(F)){v(F);}for(C=0;C<B;C++){if(D[C]&&D[C].serviceId){E.push(D[C].serviceId);}}return s.setPreferenceObject(A+F.replace(" ","_"),E);}return false;}function q(C,B){if(C&&B){if(!m(C)){v(C);}return s.setPreferenceObject(A+C.replace(" ","_"),B);}return false;}function d(){return k().length>0;}function x(B){if(B){s.deletePreference(A+B.replace(" ","_"));s.removeValueFromArray(g,B);}}function h(B,E){var C=[],D=[];if(E){if(B){if(m(E)){C=l(E);}else{v(E);}C.push(B);t(E,C);}}else{if(B){D=k();if(D&&D.length===1){C=l(D[0]);C.push(B);t(D[0],C);}}}}function w(C,E){var F=[],B,D;if(!E){D=k();E=D?D[0]:"";}if(m(E)&&C){F=l(E);for(B=0;B<F.length;B++){if(F[B].serviceId===C.serviceId){F.splice(B,1);t(E,F);break;}}}}function z(C,B){var D=l(C);if(v(B)){t(B,D);x(C);return true;}return false;}function r(){var D=k();var C=D.length;var B;for(B=0;B<C;B++){s.deletePreference(A+D[B].replace(" ","_"));}s.deletePreference(g);}function y(){s=$N.platform.system.Preferences;}return{getFavouriteChannels:l,getAllFavouriteChannels:f,setFavouriteChannels:t,getFavouriteFolders:k,setFavouriteFolders:p,deleteFavouriteFolder:x,userHasFavourites:d,addFavouriteFolder:v,addFavouriteChannel:h,removeFavouriteChannel:w,getFavouriteServiceIds:o,renameFavouriteFolder:z,folderExists:m,setFavouriteChannelsToServiceIds:q,getFavouriteChannelServiceIds:e,deleteAll:r,init:y};}());return $N.platform.btv.Favourites;});define("jsfw/platform/btv/ChannelCategories",["jsfw/apps/core/Log","jsfw/platform/btv/EPG","jsfw/platform/system/Preferences"],function(a,c,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.ChannelCategories=(function(){var f=new $N.apps.core.Log("btv","ChannelCategories"),e="radioChannels",d="subscribedChannels",m="allChannels",h="tv.currentCategory";var l=function(){var n=[];n.unshift({name:e,getChannels:function(){return $N.platform.btv.EPG.getRadioChannels();},getServiceIds:function(){return $N.platform.btv.EPG.getRadioServiceIdArraySortedByLCN();}});n.unshift({name:d,getChannels:function(){return $N.platform.btv.EPG.getSubscribedChannels();},getServiceIds:function(){return $N.platform.btv.EPG.getSubscribedServiceIdArraySortedByLCN();}});n.unshift({name:m,getChannels:function(){return $N.platform.btv.EPG.getAllChannels();},getServiceIds:function(){return $N.platform.btv.EPG.getServiceIdArraySortedByLCN();}});return n;};var g=function(r){var n=l(),s,q,o=null,p;if(r){for(p=0,s=n.length;p<s;p++){q=n[p];if(q&&q.name&&q.name===r){o=q;break;}}}return o;};var k=function(p){var o=g(p),n=o?o.getChannels():[];return n;};return{initialise:function(){var n=$N.platform.btv.ChannelCategories.getCurrentCategory();if(!n){$N.platform.btv.ChannelCategories.setCurrentCategory(m);}},getCategoryList:l,getCategoryByName:g,getChannelsFromCategory:k,getAllChannels:function(){return{name:m,getChannels:$N.platform.btv.EPG.getAllChannels()};},getCurrentCategory:function(){return $N.platform.system.Preferences.get(h);},setCurrentCategory:function(n){$N.platform.system.Preferences.set(h,n);},resetCurrentCategory:function(){$N.platform.system.Preferences.set(h,m);}};}());return $N.platform.btv.ChannelCategories;});define("jsfw/platform/btv/BTVSearch",["jsfw/apps/core/Log","jsfw/platform/btv/EPGEventFactory"],function(a,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.BTVSearch=(function(){var f="*";var d="title DESC";var g=999;var e=new $N.apps.core.Log("btv","BTVSearch");var k="";var m=null;var c=null;function o(r,q){if(k!==""){k+=" AND ";}k+="title";if(q){k+=" LIKE '"+r+"'";}else{k+=" LIKE '%"+r+"%'";}}function h(){if(k!==""){k+=" AND ";}k+="endTime > "+String(new Date().getTime());}function n(r,q){o(r,q);h();}function p(){k="";}function l(){var r=[];var s=[];var q=CCOM.EPG.getEventsRSByQuery(f,k,d);if(q.error===undefined){s=q.getNext(g);r=$N.platform.btv.EPGEventFactory.mapArray(s);}else{}e("executeQuery","Found "+String(r.length)+" events.",a.LOG_DEBUG);m(r);c(true);q.reset();reult=null;}return{getNonExpiredEventsByTitle:function(u,s,r,t,q){m=s;c=r;p();n(u,t);l();},cancelLastRequest:function(){p();}};}());return $N.platform.btv.BTVSearch;});var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.Reminders=(function(){var e=new $N.apps.core.Log("btv","Reminders"),a=120,g="ONE_TIME",h=null,k=null,n=null,l={},b=null,d=function(o){if(l.hasOwnProperty(o.handle)){l[o.handle](true,o);delete l[o.handle];}},m=function(o){if(l.hasOwnProperty(o.handle)){l[o.handle](false,o);delete l[o.handle];}},f=function(){},c={};return{init:function(t,o,q){CCOM.Scheduler.addEventListener("addJobOK",d);CCOM.Scheduler.addEventListener("addJobFailed",m);if(o){this.setGenericReminderCallback(o);}if(q){this.setAutoTunePlayer(q);}var u=$N.app.Reminders.getAllActiveReminders(),p=0,r=null,s=null;for(p=0;p<u.length;p++){if(u[p].eventId){s=$N.platform.btv.EPG.getEventById(u[p].eventId);if(s){r=$N.app.epgUtil.getUniqueEventIdByEvent(s);}if(r){c[r]=true;}else{c[u[p].eventId]=true;}}}},setReminderCallback:function(o){if(h){CCOM.Scheduler.removeEventListener("onTaskVPAlert",h,false);}h=function(p){if(p.taskType==="RMDR"){o({task:$N.platform.btv.PVRManager.getTask(p.taskId)});}};if(h){CCOM.Scheduler.addEventListener("onTaskVPAlert",h,false);}return this;},setGenericReminderCallback:function(o){if(k){CCOM.Scheduler.removeEventListener("onTaskStarted",k,false);}k=function(r){if(r.taskType==="GRMDR"){var p=$N.platform.btv.PVRManager.getTask(r.taskId),s,q;if(b!==p.startTime){s=$N.platform.btv.PVRManager.getScheduledReminderByStartTime(p.startTime);q=s.length;b=p.startTime;if(q>1){f(s);}else{o({task:$N.platform.btv.PVRManager.getTask(r.taskId)});}}}};if(k){CCOM.Scheduler.addEventListener("onTaskStarted",k,false);}return this;},setTaskOccuredCallback:function(o){if(n){CCOM.Scheduler.removeEventListener("onTaskStarted",n,false);}n=function(p){if(p.taskType==="RMDR"){o({task:$N.platform.btv.PVRManager.getTask(p.taskId)});}};if(n){CCOM.Scheduler.addEventListener("onTaskStarted",n,false);}return this;},setReminder:function(p,r){var q=CCOM.Scheduler.addJob("RMDR","ONE_EVT",{eventId:p}),o=$N.app.epgUtil.getUniqueEventIdByEvent($N.platform.btv.EPG.getEventById(p));if(o){c[o]=true;}else{c[p]=true;}if(r){l[q]=r;}return this;},setGenericReminder:function(o,p,t){var s=CCOM.Scheduler.addJob("GRMDR",o,p),q=null,r=null;if(p.eventId){r=$N.platform.btv.EPG.getEventById(p.eventId);if(r){q=$N.app.epgUtil.getUniqueEventIdByEvent(r);}if(q){c[q]=true;}else{c[p.eventId]=true;}}if(t){l[s]=t;}return this;},cancelReminder:function(p){var o=$N.platform.btv.PVRManager.getScheduledReminderByEvent(p);if(c.hasOwnProperty(p)){c[p]=false;}if(o){CCOM.Scheduler.deleteJob(o.jobId);}return this;},isReminderSetForEventId:function(p){var o=$N.app.epgUtil.getUniqueEventIdByEvent(p);if(o&&c.hasOwnProperty(o)){return c[o];}else{if(c.hasOwnProperty(p.eventId)){return c[p.eventId];}else{return false;}}},setAutoTunePlayer:function(o){return this;},setGenericReminderConflictHandler:function(o){f=o;},cancelReminder:function(q){var o=$N.platform.btv.PVRManager.getScheduledReminderByEvent(q.eventId),p=null;p=$N.app.epgUtil.getUniqueEventIdByEvent(q);if(p&&c.hasOwnProperty(p)){c[p]=false;}else{if(c.hasOwnProperty(q.eventId)){c[q.eventId]=false;}}if(o){$N.platform.btv.PVRManager.deleteJob(o.jobId);}}};}());var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.EPGEventFactory=(function(){var b,c={CATCHUP:"1",STARTOVER:"2"};if(Object.defineProperty){b=function(g,e,f){Object.defineProperty(g,e,{get:f});};}else{b=function(g,e,f){g.__defineGetter__(e,f);};}function d(f){var k={_data:f},g=false,m=false,n=null,l=null,h=true,o=null,e=function(){var p=$N.app.epgUtil.getExtendedInfoByEventId(k._data.eventId,$N.app.constants.EVENT_EXTENDED_INFO.CATCHUP);if(p){if(p.catchupStartover){if($N.app.GeneralUtil.bitwiseAnd(p.catchupStartover,c.CATCHUP)){m=true;}if($N.app.GeneralUtil.bitwiseAnd(p.catchupStartover,c.STARTOVER)){g=true;}}if(p.displaySeasonEpisode==="0"){h=false;}l=p.uniqueEventId;}else{p={};}};b(k,"eventId",function(){return k._data.eventId;});b(k,"uniqueEventId",function(){return k._data.netUniqueEventId;});b(k,"serviceId",function(){return k._data.serviceId;});b(k,"startTime",function(){return k._data.startTime;});b(k,"endTime",function(){return k._data.endTime;});b(k,"title",function(){return k._data.title;});b(k,"shortDesc",function(){return k._data.shortDesc;});b(k,"longDesc",function(){return k._data.longDesc;});b(k,"parentalRating",function(){var p=parseInt(k._data.parentalRating)||null;if(p&&p>=4&&p<7){p=7;}return p;});b(k,"seriesId",function(){return k._data.seriesId;});b(k,"episodeId",function(){return k._data.episodeId;});b(k,"seasonId",function(){return k._data.seasonId;});b(k,"directors",function(){return k._data.netDirector;});b(k,"actors",function(){return k._data.netActorCast;});b(k,"seriesName",function(){return k._data.seriesName;});b(k,"promoImage",function(){var q;if(!o){q=$N.app.Config.getConfigValue("external.epg.poster.path");if(k._data.seriesId){o=q+k._data.seriesId+$N.app.constants.EPG_POSTER_IMAGE_SUFFIX;}else{var p=$N.app.epgUtil.getExtendedInfoByEventId(k._data.eventId,$N.app.constants.EVENT_EXTENDED_INFO.EVENT_INFO);if(p&&p.eventId){o=q+p.eventId+$N.app.constants.EPG_POSTER_IMAGE_SUFFIX;}else{o="";}}}return o;});b(k,"source",function(){return k._data.sourceId||k._data.sourceId===0?k._data.sourceId:$N.data.EPGEvent.SOURCE.EIT;});b(k,"definition",function(){return null;});b(k,"year",function(){return k._data.netProdYear;});b(k,"country",function(){return k._data.netCountry;});b(k,"isCatchUp",function(){if(!n){e();}return m;});b(k,"isStartOver",function(){if(!n){e();}return g;});b(k,"displaySeasonEpisode",function(){if(!n){e();}return h;});b(k,"originalName",function(){return k._data.netOriginalName;});b(k,"epOriginalName",function(){return k._data.netEpisodeName;});b(k,"netEventGenres",function(){return k._data.netEventGenres;});return k;}function a(h){var f,e,g=[];if(h.length>0){for(f=0;f<h.length;f++){e=d(h[f]);g.push(e);}}return g;}return{mapObject:function(e){if(e){return d(e);}else{return null;}},mapArray:function(e){if(e){return a(e);}else{return[];}}};}());var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.EPGServiceFactory=(function(){var e;if(Object.defineProperty){e=function(h,g,k,f){if(!f){f=function(){};}Object.defineProperty(h,g,{set:f,get:k});};}else{e=function(h,g,k,f){if(!f){f=function(){};}h.__defineGetter__(g,k);h.__defineSetter__(g,f);};}function c(f){switch(f.type){case 1:case 128:return $N.data.EPGService.SERVICE_TYPE.TV;case 2:return $N.data.EPGService.SERVICE_TYPE.RADIO;case 155:return $N.data.EPGService.SERVICE_TYPE.OTHER;default:return $N.data.EPGService.SERVICE_TYPE.OTHER;}}function b(k,f){var g=CCOM.EPG.getTagsByServiceId(k),h;for(h=g.length-1;h>=0;h--){if(g[h].tagId===f){return g[h].tagValue;}}return null;}function d(g){var f={_data:g};e(f,"serviceId",function(){return f._data.serviceId;});e(f,"logicalChannelNum",function(){return f._data.channelKey;});e(f,"serviceType",function(){return c(g);});e(f,"deliveryMethod",function(){return $N.data.EPGService.DELIVERY_TYPE.DVB;});e(f,"serviceName",function(){return f._data.name;});e(f,"shortName",function(){return f._data.shortName;},function(h){f._data.shortName=h;});e(f,"uri",function(){return f._data.uri;});e(f,"isSubscribed",function(){return true;},function(h){f._data.isSubscribed=h;});e(f,"parentalRating",function(){return b(f._data.serviceId,"rating");});e(f,"casId",function(){return f._data.naspCA;});e(f,"logo",function(){return b(f._data.serviceId,"promoImage");});e(f,"tiServiceTipText",function(){return f._data.tiServiceTipText;});e(f,"channelLogo",function(){return f._data.channelLogo;},function(h){f._data.channelLogo=h;});e(f,"definition",function(){var k,l,m="SD",h;if(f.cachedDefinition){return f.cachedDefinition;}k=CCOM.EPG.getGenresByServiceId(f._data.serviceId);l=k.length;for(h=0;h<l;h++){if(253===(k[h].contentNibbleLevel1<<4)+k[h].contentNibbleLevel2){m="HD";break;}}f.cachedDefinition=m;return m;});return f;}function a(k){var g,f,h=[];if(k.length>0){for(g=0;g<k.length;g++){f=d(k[g]);h.push(f);}}return h;}return{mapObject:function(f){if(f){return d(f);}return null;},mapArray:function(f){if(f){return a(f);}return[];}};}());var $N=$N||{};$N.platform=$N.platform||{};$N.platform.btv=$N.platform.btv||{};$N.platform.btv.RecordingFactory=(function(){var b;if(Object.defineProperty){b=function(f,e,d){Object.defineProperty(f,e,{get:d});};}else{b=function(f,e,d){f.__defineGetter__(e,d);};}function c(f){var e,d={_data:f};b(d,"taskId",function(){return d._data.taskId;});b(d,"jobId",function(){return d._data.jobId;});b(d,"seriesId",function(){return d._data.seriesId;});b(d,"seasonId",function(){return d._data.seasonId;});b(d,"episodeId",function(){return d._data.episodeId;});b(d,"seriesName",function(){return d._data.seriesName;});b(d,"title",function(){return d._data.title;});b(d,"url",function(){return"pvr://"+d._data.taskId;});b(d,"eventId",function(){return d._data.eventId;});b(d,"startTime",function(){return d._data.startTime;});b(d,"endTime",function(){return d._data.endTime;});b(d,"softPrepaddingDuration",function(){return d._data.softPrepaddingDuration;});b(d,"softPostpaddingDuration",function(){return d._data.softPostpaddingDuration;});b(d,"netActorCast",function(){return d._data.netActorCast;});b(d,"netDirector",function(){return d._data.netDirector;});b(d,"netCountry",function(){return d._data.netCountry;});b(d,"netProdYear",function(){return d._data.netProdYear;});b(d,"netServiceName",function(){return d._data.netServiceName;});b(d,"netContentDesc",function(){return d._data.netContentDesc;});b(d,"duration",function(){return d._data.duration;});b(d,"serviceId",function(){return d._data.serviceId;});b(d,"shortDesc",function(){return d._data.shortDesc;});b(d,"longDesc",function(){return d._data.longDesc;});b(d,"contentDesc",function(){return d._data.contentDesc;});b(d,"keep",function(){return d._data.keep;});b(d,"bookmark",function(){return d._data.bookmark;});b(d,"parentalRating",function(){return d._data.parentalRating;});b(d,"extraInfo",function(){return d._data.extraInfo;});b(d,"netEventGenres",function(){return $N.app.genreUtil.getGenreObjectFromGenreString(d._data.netEventGenres);});b(d,"netOriginalName",function(){return d._data.netOriginalName;});b(d,"netEpisodeName",function(){return d._data.netEpisodeName;});b(d,"netEpisodeOriginalName",function(){return d._data.netEpisodeOriginalName;});b(d,"netDisplaySeasonEpisode",function(){if(d._data.netDisplaySeasonEpisode&&d._data.netDisplaySeasonEpisode==="0"){return false;}return true;});b(d,"recordingType",function(){if((d._data.scheduleType==="SERIES")||(d._data.scheduleType==="RPT_TIME")){e=$N.data.Recording.RECORDING_TYPE.SERIES;}else{e=$N.data.Recording.RECORDING_TYPE.SINGLE;}return e;});b(d,"uiFolder",function(){return d._data.uiFolder;});b(d,"scheduleType",function(){return d._data.scheduleType;});b(d,"repeatDaysArray",function(){return d._data.repeatDaysArray;});b(d,"sourceURL",function(){return d._data.sourceURL;});b(d,"timeOfDay",function(){return d._data.timeOfDay;});b(d,"isAuthorized",function(){return d._data.isAuthorized;});b(d,"objectState",function(){return d._data.objectState;});return d;}function a(g){var e,d,f=[];if(g.length>0){for(e=0;e<g.length;e++){d=c(g[e]);f.push(d);}}return f;}return{mapObject:function(d){if(d){return c(d);}else{return null;}},mapArray:function(d){if(d){return a(d);}else{return[];}}};}());var $N=$N||{};$N.platform=$N.platform||{};$N.platform.ca=$N.platform.ca||{};$N.platform.ca.ParentalControl=(function(){var b=new $N.apps.core.Log("ca","ParentalControl"),C={},f={},s=100,E=18,x=s,h=false,F=false,A="/users/preferences/userauth/defaultDurationSec",r="/users/current/updated",a,B=function(M){},q=function(M){},I=function(){},K=function(){},L=function(){},z=function(){},G=function(){},p={"0":{ratingCode:"U",description:"Universal"},"12":{ratingCode:"12",description:"12"},"15":{ratingCode:"15",description:"15"},"18":{ratingCode:"18",description:"18"},"21":{ratingCode:"X",description:"X"}};function m(O){var M=Math.floor(O/3600),N=Math.round((O-(M*3600))/60);return String(M)+":"+String(N);}function c(O){var N,P=0,M=0;if(O){N=O.split(":");P=parseInt(N[0],10)*3600;M=parseInt(N[1],10)*60;}return P+M;}function l(N){var M=new Date(N);return c(String(M.getHours())+":"+String(M.getMinutes()));}function k(M){var N=M.split("-");return{startTime:c(N[0]),endTime:c(N[1])};}function y(N){var Q,P,R,M,O,S,U,T;N=N||[];C={};f={};for(Q=0;Q<N.length;Q++){R=N[Q].indexOf("[/age:");if(R!==-1){T=N[Q].substring(0,R);C[T]=true;}else{O=N[Q].indexOf("[");if(O!==-1){S=N[Q].indexOf("]");U=N[Q].substring(O+1,S).split(",");T=N[Q].substring(0,O);f[T]=[];for(P=0;P<U.length;P++){f[T].push(k(U[P]));}}else{C[N[Q]]=true;}}}}function o(M){if(!M.error&&M.property){x=M.property.userAge||s;}}function t(N){var M;if(N.restrictedChannels){M=N.restrictedChannels||{};N.restrictedChannels=M;}return N;}function J(M,N,O,P){q=function(Q){if(!Q.error){P(true);}else{P(false);}};t(O);a.modifyUserProfile(M,N,O);}function u(N){var M;if(N.error&&N.error.name==="PinOrCurrentUserIsMaster"){h=true;}else{h=false;o(N);}I();}function D(M){if(!M.error){F=false;C={};f={};x=s;}}function e(M){if(!M.error){F=true;a.getCurrentUserProfile();a.getAllRestrictedChannels();}}function w(M){if(!M.error){h=true;}}function n(M){B(M);B=function(N){};}function H(M){q(M);q=function(N){};}function v(M){if(M.channelList){y(M.channelList);}else{if(M.error&&M.error.name){}}}function d(M){a.getCurrentUserProfile();}function g(){a.setCurrentUserProfile($N.platform.ca.PINHandler.getLocalMasterPin());}return{initialise:function(M){a=CCOM.UserAuth;if(M){this.setRatingLookUp(M);}a.addEventListener("enableSystemOK",e);a.addEventListener("enableSystemFailed",e);a.addEventListener("disableSystemOK",D);a.addEventListener("disableSystemFailed",D);a.addEventListener("getCurrentUserProfileOK",u);a.addEventListener("getCurrentUserProfileFailed",u);a.addEventListener("setCurrentUserProfileOK",w);a.addEventListener("setCurrentUserProfileFailed",w);a.addEventListener("getUserProfileOK",n);a.addEventListener("getUserProfileFailed",n);a.addEventListener("modifyUserProfileOK",H);a.addEventListener("modifyUserProfileFailed",H);a.addEventListener("addRestrictedChannelOK",L);a.addEventListener("addRestrictedChannelFailed",L);a.addEventListener("getAllRestrictedChannelsOK",v);a.addEventListener("getAllRestrictedChannelsFailed",v);a.addEventListener("setAllRestrictedChannelsOK",K);a.addEventListener("setAllRestrictedChannelsFailed",K);a.addEventListener("removeRestrictedChannelOK",z);a.addEventListener("removeRestrictedChannelFailed",z);$N.platform.system.Preferences.monitorValue(r,d,this,true);window.document.addEventListener("masterUserAuthenticated",g,false);},enableAuthentication:function(){a.enableSystem();},disableAuthentication:function(){a.disableSystem($N.platform.ca.PINHandler.getLocalMasterPin());},isAuthenticationEnabled:function(){b("isAuthenticationEnabled","Enter & Exit returning "+String(F));return F;},setPolicyModifier:function(M){a.setPolicyModifier($N.platform.ca.PINHandler.getLocalMasterPin(),M);},setUserChangedCallback:function(M){I=M;},isRatingPermitted:function(M){if(h||!M){return true;}return x>M;},isServiceAndEventPermitted:function(P,N){var O,M;if(h||!P||!N){return true;}if(!this.isRatingPermitted(P.parentalRating)){return false;}if(!this.isRatingPermitted(N.parentalRating)){return false;}if(this.isServiceIdRestricted(P.serviceId)){return false;}O=l(N.startTime);M=l(N.endTime);if(this.isServiceLockedAtTime(P.serviceId,O,M)){return false;}return true;},isEventPermitted:function(M){if(h){return true;}return this.isRatingPermitted(M.parentalRating);},isServicePermitted:function(M){return(!this.isServiceIdRestricted(M.serviceId));},setRatingLookUp:function(M){if(M){p=M;}},getRatingLookUp:function(){return p;},getRatingDetailsForValue:function(N){var M=p[N];return M||null;},getRatingCodeForValue:function(N){var M=p[N];if(M&&M.ratingCode){return M.ratingCode;}return"";},getRatingDescriptionForValue:function(N){var M=p[N];if(M&&M.description){return M.description;}return"";},setUserRatingValue:function(N,M){if(!M){M="";}if($N.platform.ca.PINHandler.isPinCurrentUser(M)){x=N;}J($N.platform.ca.PINHandler.getLocalMasterPin(),M,{userAge:N},function(O){});},getUserRatingValue:function(){b("getUserRatingValue","Enter & Exit returning "+String(x));return x;},isUserAdult:function(){return(h||x>=E);},isTimeLocked:function(M){if(h){return false;}return f[M]?true:false;},setTimeLocked:function(Q,N,M,O,R){var P;if(!O){O="";}if(!R){R=function(S){};}B=function(S){if(!S.error){P=S.property&&S.property.restrictedChannels?S.property.restrictedChannels:[];P.push(Q+"["+m(N)+"-"+m(M)+"]");if($N.platform.ca.PINHandler.isPinCurrentUser(O)){y(P);}J($N.platform.ca.PINHandler.getLocalMasterPin(),O,{restrictedChannels:P},R);}else{R(false);}};if(Q&&N&&M&&M>N){a.getUserProfile(O);}},removeTimeLock:function(R,P,S){var Q=[],N,M,O=[];if(!P){P="";}if(!S){S=function(T){};}B=function(T){if(!T.error){Q=T.property&&T.property.restrictedChannels?T.property.restrictedChannels:[];for(N=0;N<Q.length;N++){M=Q[N].indexOf("[");if(M===-1||R!==Q[N].substring(0,M)){O.push(Q[N]);}}J($N.platform.ca.PINHandler.getLocalMasterPin(),P,{restrictedChannels:O},S);}else{S(false);}};if(R){a.getUserProfile(P);}},isServiceLockedAtTime:function(S,R,O){return false;var M=f[S],N,Q,P;if(h){return false;}if(R===null||R===undefined||O===null||O===undefined){return true;}if(!M){return false;}for(P=0;P<M.length;P++){N=M[P].startTime;Q=M[P].endTime;if((N>=R&&Q<=O)||(N<=R&&Q>=O)||(N<=R&&Q>R)||(N>=R&&N<O)){return true;}}return false;},getServiceLockStartTime:function(R){var Q=[],M,P=new Date(),O=c(String(P.getHours())+":"+String(P.getMinutes())),N=null;if(!R||!f[R]){return null;}for(M=f[R].length-1;M>=0;M--){if(f[R][M].startTime>O){N=f[R][M].startTime;}if(M===0&&N===null){N=f[R][0].startTime;}}return N;},getServiceLockEndTime:function(Q){var N,P=new Date(),O=c(String(P.getHours())+":"+String(P.getMinutes())),M=null;if(!Q||!f[Q]){return null;}for(N=f[Q].length-1;N>=0;N--){if(f[Q][N].endTime>O){M=f[Q][N].endTime;}if(N===0&&M===null){M=f[Q][0].endTime;}}return M;},getTimeLockedServices:function(){var P=[],N,M,O;for(O in f){if(f.hasOwnProperty(O)){M={};M.serviceId=O;M.lockedTimes=[];for(N=0;N<f[O].length;N++){M.lockedTimes.push({startTime:f[O][N].startTime,endTime:f[O][N].endTime});}P.push(M);}}return P;},getTimeLockedServicesCount:function(){var M=0,N;for(N in f){if(f.hasOwnProperty(N)){M++;}}return M;},getRestrictedServicesCount:function(){return C.length;},setRestrictedService:function(P,O,Q){var N=0,M=-1;if(!C.hasOwnProperty(P)){if(!Q){L=function(R){if(!R.error){Q(true);}else{Q(false);}L=function(S){};};}C[P]=true;C.length=C.length+1;if(P){a.addRestrictedChannel($N.platform.ca.PINHandler.getLocalMasterPin(),P);}}else{if(!Q){Q(true);}}},unsetRestrictedService:function(P,O,Q){var N=0,M=-1;for(N=0;N<C.length;N++){if(C[N]===P){M=N;break;}}if(!C.hasOwnProperty(P)||C[P]===false){if(!Q){Q(true);}}else{if(!Q){z=function(R){if(!R.error){Q(true);}else{Q(false);}z=function(S){};};}C[P]=false;C.length=C.length-1;if(P){a.removeRestrictedChannel($N.platform.ca.PINHandler.getLocalMasterPin(),P);}}},setRestrictedServices:function(Q,O,P){var M,N=new Array();if(Q.length>0){C={};for(M=0;M<Q.length;M++){C[Q[M]]=true;N.push(Q[M]);}if(P){K=function(R){if(!R.error){P(true);}else{P(false);}K=function(S){};};a.addEventListener("setAllRestrictedChannelsOK",K);a.addEventListener("setAllRestrictedChannelsFailed",K);}a.setAllRestrictedChannels($N.platform.ca.PINHandler.getLocalMasterPin(),N);}else{unsetAllRestrictedServices(P);}},unsetAllRestrictedServices:function(M){C={};if(M){G=function(N){if(!N.error){M(true);}else{M(false);}G=function(O){};};a.addEventListener("removeAllRestrictedChannelsOK",G);a.addEventListener("removeAllRestrictedChannelsFailed",G);}a.removeAllRestrictedChannels($N.platform.ca.PINHandler.getLocalMasterPin());},unsetRestrictedServices:function(S,P,R){var Q=[],M,N={},O=new Array();C={};if(!P){P="";}if(!R){R=function(T){};}B=function(T){for(M=0;M<S.length;M++){N[S[M]]=true;}if(!T.error){Q=T.property&&T.property.restrictedChannels?T.property.restrictedChannels:[];for(M=0;M<Q.length;M++){if(!N[Q[M]]){O.push(Q[M]);}}if($N.platform.ca.PINHandler.isPinCurrentUser(P)){y(O);}J($N.platform.ca.PINHandler.getLocalMasterPin(),P,{restrictedChannels:O},R);}else{R(false);}};if(S&&S.length>0){a.getUserProfile(P);}},getRestrictedServices:function(){b("getRestrictedServices",JSON.stringify(C));return C||[];},isServiceIdRestricted:function(M){if(h||!M||!C){return false;}if(C.hasOwnProperty(M)){return C[M];}return false;},setAuthenticationTimeout:function(M){CCOM.ConfigManager.setValue(A,M);},getAuthenticationTimeout:function(){return CCOM.ConfigManager.getValue(A).keyValue;},isCurrentUserMaster:function(){return h;},setBlocked:function(M){this.setRestrictedService(M);},unsetBlocked:function(M){this.unsetRestrictedService(M);},getDefaultLockStartTime:function(){},getDefaultLockEndTime:function(){},startChanLockTimer:function(M){},isServiceCurrentlyPermitted:function(M){this.isServicePermitted(M);},isChannelLockedAtTime:function(O,N,M){this.isServiceLockedAtTime(O,N,M);},getChannelLockStartTime:function(M){this.getServiceLockStartTime(M);},getChannelLockEndTime:function(M){this.getServiceLockEndTime(M);},getLockedChannelsCount:function(){this.getLockedServicesCount();},PolicyModifiers:{TIMEOUT:1,CHANNEL_CHANGE:2,EVENT_CHANGE:4}};}());define("jsfw/platform/ca/PINHandler",["jsfw/apps/core/Log","jsfw/platform/system/Preferences"],function(a,b){window.$N=$N||{};$N.platform=$N.platform||{};$N.platform.ca=$N.platform.ca||{};$N.platform.ca.PINHandler=(function(){var h=new $N.apps.core.Log("ca","PINHandler"),v=[],k=false,o=false,f="sdp.user.pin",u="sdp.slave.pin",s="/users/preferences/userauth/defaultSuperPin",p="/users/preferences/userauth/maxPinLen",l="/users/preferences/userauth/maxTrials",r="/users/preferences/userauth/lockDurationSec",e="PinOrCurrentUserIsMaster",c="",n="1234",t,w=window.document.createEvent("Event");w.initEvent("masterUserAuthenticated",true,true);w.data={};function m(x){if(!v){return null;}var z=v.length-1;if(z!==-1){do{var y=v[z];if(y.flags&x){return y;}}while(z--);}}function g(y,x){if(!y||!x){return false;}x=String(x);return(y.check(x)===CA.CA_STATUS_OK);}function q(x){var y=m(CAPIN.CA_PIN_FLAG_CONFIRM_PPV);if(y&&x){return y.check(x);}return CA.CA_STATUS_INVALID;}function d(x){var y=m(CAPIN.CA_PIN_FLAG_PARENTAL_RATING);return g(y,x);}return{init:function(x,y){k=x||false;o=y||false;t=CCOM.UserAuth;},getAccountPins:function(){return[this.getAccountMasterPin(),this.getAccountSlavePin()];},getAccountMasterPin:function(){return $N.platform.system.Preferences.get(f);},setAccountMasterPin:function(x){return $N.platform.system.Preferences.set(f,x);},getAccountSlavePin:function(){return $N.platform.system.Preferences.get(u);},setAccountSlavePin:function(x){return $N.platform.system.Preferences.set(u,x);},setLocalMasterPin:function(y,z){var x;if(!z){z=function(A){};}x=function(A){t.removeEventListener("changeMasterPinOK",x);t.removeEventListener("changeMasterPinFailed",x);if(A.error){z(false);}else{n=y;z(true);}};t.addEventListener("changeMasterPinOK",x);t.addEventListener("changeMasterPinFailed",x);t.changeMasterPin(n,y);},validateParentalPin:function(y,A,z){var x;if(!A){A=function(B){};}x=function(B){t.removeEventListener("getUserProfileOK",x);t.removeEventListener("getUserProfileFailed",x);if(B.error&&B.error.name===e){n=y;if(!z){window.document.dispatchEvent(w);}A(true);}else{A(false);}};t.addEventListener("getUserProfileOK",x);t.addEventListener("getUserProfileFailed",x);t.getUserProfile(y);},validatePurchasePin:function(x,y){this.validateParentalPin(x,y);},validateCAPurchasePin:function(y){var x=CA.CA_STATUS_INVALID;if(y){x=q(y);}return x;},setUserPin:function(y,x){},setDefaultMasterPin:function(x){CCOM.ConfigManager.setValue(s,x);},setMaximumPinLength:function(x){CCOM.ConfigManager.setValue(p,x);},setMaximumPinRetries:function(x){CCOM.ConfigManager.setValue(l,x);},setLockTimeAfterInvalidPinEntries:function(x){CCOM.ConfigManager.setValue(r,x);},isPinCurrentUser:function(x){return x===c?true:false;},getLocalMasterPin:function(){return n;}};}());return $N.platform.ca.PINHandler;});define("jsfw/gui/helpers/Util",[],function(){window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Util={alertWithLineWrap:function(f,a,b,d){var c=false,e;d=d||90;e=d;f=f||"";f=f.replace("\n"," ");a=a||"";b=(b&&(b===true||b==="true"))?true:false;while(f.length>d){if(c){f=a+f;}if(b){e=f.lastIndexOf(" ",d);if(e===-1||e<=a.length){e=d;}}alert(f.substring(0,e));f=f.substring(e);c=true;}if(c){f=a+f;}alert(f);},upcaseFirstLetter:function(c){var b,a="",d=c.split(" ");for(b=0;b<d.length;b++){a+=d[b].substr(0,1).toUpperCase()+d[b].substr(1);if(b<d.length-1){a+=" ";}}return a;},coord:function(a,b){return{x:a,y:b};},bezier:(function(){var d=function(e){return e*e*e;},c=function(e){return 3*e*e*(1-e);},b=function(e){return 3*e*(1-e)*(1-e);},a=function(e){return(1-e)*(1-e)*(1-e);};return{getPoint:function(k,l,h,g,f){var e=l.x*d(k)+h.x*c(k)+g.x*b(k)+f.x*a(k),m=l.y*d(k)+h.y*c(k)+g.y*b(k)+f.y*a(k);return $N.gui.Util.coord(e,m);},getSeries:function(m,n,l,h,f){var g=[],k,e;for(e=0;e<m;e++){k=e/(m-1);g.push(this.getPoint(k,n,l,h,f));}return g;}};}()),extend:function(c,a){var b=function(){};b.prototype=a.prototype;c.prototype=new b();c.prototype.constructor=c;c.superConstructor=a;c.superClass=a.prototype;},getClass:function(a){try{return Object.prototype.toString.call(a).slice(8,-1);}catch(b){return"";}},printObject:function(d,f,h,e,b){var k,g,c,l;if(!b){b=0;}if(!f){f="obj";}if(!e){e=f;}if(typeof d!=="object"||b>3){return;}for(k in d){if(d.hasOwnProperty(k)){l=false;if($N.gui.Util.getClass(h)==="Array"){for(g=0;g<h.length;g++){if(k===h[g]){l=true;break;}}}if(!l){if(typeof d[k]==="function"){c=/\([\^\)]*\)/.exec(d[k])[1];if(c===undefined){c="()";}}else{$N.gui.Util.printObject(d[k],f,h,e+"["+k+"]",b+1);}}}}},printSVGDOM:function(a,b){if(!a){alert("["+a+"]");return;}var c=a.childNodes,d="";var k,g,e,f,h,l;b=b||0;for(g=0;g<b;g++){d+="  ";}l=d+"    ";if(a.nodeType===3){this.alertWithLineWrap(d+"[tnode]"+a.nodeValue+"[/tnode]",l,true);}else{e=d+"<"+a.nodeName;if(a.attributes){f=a.attributes;for(g=0;g<f.length;g++){h=f[g];e+=" "+h.nodeName+'="'+h.nodeValue+'"';}}if(c&&c.length!==0){this.alertWithLineWrap(e+">",l,true);k=c.length;for(g=0;g<k;g++){this.printSVGDOM(c[g],b+1);}this.alertWithLineWrap(d+"</"+a.nodeName+">",l,true);}else{if((a.nodeValue&&a.nodeValue!=="")||(a.textContent&&a.textContent!=="")||(a.innerHTML&&a.innerHTML!=="")){this.alertWithLineWrap(e+">",l,true);if(a.nodeValue&&a.nodeValue!==""){this.alertWithLineWrap(d+"  [val]"+a.nodeValue+"[/val]",l,true);}if(a.textContent&&a.textContent!==""){this.alertWithLineWrap(d+"  [con]"+a.textContent+"[/con]",l,true);}if(a.innerHTML&&a.innerHTML!==""){this.alertWithLineWrap(d+"  [inn]"+a.textContent+"[/inn]",l,true);}this.alertWithLineWrap(d+"</"+a.nodeName+">",l,true);}else{this.alertWithLineWrap(e+"/>",l,true);}}}},xml2Json:function(c){var e={},b,d,a;if(c.nodeType===1){if(c.attributes.length>0){e["@attributes"]={};for(b=0;b<c.attributes.length;b++){e["@attributes"][c.attributes[b].nodeName]=c.attributes[b].nodeValue;}}}if(c.hasChildNodes&&c.hasChildNodes()){for(d=0;d<c.childNodes.length;d++){if(c.childNodes[d].nodeType===1||(c.childNodes[d].nodeType===3&&c.childNodes[d].nodeValue.trim()!=="")){if(typeof e[c.childNodes[d].nodeName]==="undefined"){if(c.childNodes[d].nodeType===3){e=c.childNodes[d].nodeValue;}else{e[c.childNodes[d].nodeName]=$N.gui.Util.xml2Json(c.childNodes[d]);}}else{if(typeof e[c.childNodes[d].nodeName].length==="undefined"){a=e[c.childNodes[d].nodeName];e[c.childNodes[d].nodeName]=[];e[c.childNodes[d].nodeName].push(a);}e[c.childNodes[d].nodeName].push($N.gui.Util.xml2Json(c.childNodes[d]));}}}}return e;},remapRelativeFilePath:function(b,n,c){var d=b.lastIndexOf("/"),f=n.substring(d+1),m=f.split("/"),k=c.split("/"),a=[],l,e,g=Math.max(m.length,k.length),h=c.indexOf(".")<0;for(e=0;e<g-1;e++){if(k[e]!==m[e]){if(e<m.length-1){a.unshift("..");}if(e<k.length-1||(e===k.length-1&&h)){a.push(k[e]);}}}a.push(k[k.length-1]);l=a.join("/");return l;}};return $N.gui.Util;});define("jsfw/gui/FrameworkCore",["jsfw/gui/helpers/Util"],function(a){window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.FrameworkCore=(function(){var g="http://www.example.org/nagra",h=navigator.userAgent.indexOf("Ekioh")>-1?"SVG":"HTML",f={KEY_ONE:"1",KEY_TWO:"2",KEY_THREE:"3",KEY_FOUR:"4",KEY_FIVE:"5",KEY_SIX:"6",KEY_SEVEN:"7",KEY_EIGHT:"8",KEY_NINE:"9",KEY_ZERO:"0",KEY_UP:"up",KEY_DOWN:"down",KEY_LEFT:"left",KEY_RIGHT:"right",KEY_OK:"ok",KEY_BACK:"back",KEY_EXIT:"exit"};function e(o){var m={},n=0,p="",k;for(n=0,k=o.attributes.length;n<k;n++){p=o.attributes[n].name.substring(g.length+1);if(!p){p=o.attributes[n].name;}m[p]=o.attributes[n].value;}return m;}function c(k,w,t,o){var s=o?o.ownerDocument:k.ownerDocument,n=k.childNodes,v=n.length,u=false,p=0,m,r="",q,x=null,l;t=t||window;for(p=0;p<v;p++){m=n[p];if(m&&m.nodeType===1){if(m.namespaceURI===g){r=$N.gui.Util.upcaseFirstLetter(m.localName);if(w["set"+r]){w["set"+r](e(m));u=true;}else{x=m;if(window.$N&&window.$N.gui&&window.$N.gui[r]){q=new window.$N.gui[r](s);}else{if(t.$N&&t.$N.gui&&t.$N.gui[r]){q=new t.$N.gui[r](s);}else{if(window[r]){q=new window[r](s);}else{if(t&&t[r]){q=new t[r](s);}}}}q.configure(e(m));if(w.addChild){w.addChild(q);w[r]=q;if(w.getClassName&&w.getClassName()==="Form"&&q.isControl&&q.isControl()){w.addControl(q);}u=true;}else{if(o){o.appendChild(q.getRootElement());}else{m.parentNode.insertBefore(q.getRootElement(),m);u=true;}}if(m.hasChildNodes()){c(m,q,t,q.getRootElement());}l=m.getAttributeNS(g,"id");if(l){w[l]=q;}else{w[m.getAttribute("id")]=q;}}if(u){m.parentNode.removeChild(m);}}}}}function b(l,q,r,o){var m=new XMLHttpRequest(),s,n,p,k;if(l.indexOf("<?xml")===-1){if(window.CCOM&&CCOM.recorder&&l.indexOf("http://")===-1){p=location.href.substring(0,location.href.lastIndexOf("/")+1)+l;}else{p=l;}m.open("GET",p,false);m.send();s=m.responseXML;n=m.responseText;if((m.status===200||m.status===0)&&s){c(s.firstChild,r,o,q);}else{alert(String(m.status)+" --- "+m.responseText);}}else{k=new DOMParser();s=k.parseFromString(l,"text/xml");c(s.firstChild,r,o,q);}}function d(k,s,p){var l=k.getElementsByTagName("script"),m,r,n=l.length,o,q=h==="SVG"?k:k.body;for(o=0;o<n;o++){m=l[o];r=m.getAttribute("src");if(r&&r.indexOf(".xml")>-1){b(r,q,s,p);}}}return{getMode:function(){return h;},extendWithGUIObjects:c,getKeys:function(){return f;},setKeys:function(k){f=k;},createView:d,loadGUIFromXML:b};}());return $N.gui.FrameworkCore;});define("jsfw/gui/GUIObjects/GUIObject",["jsfw/gui/GUIObjects/Animations/AnimTransform","jsfw/gui/GUIObjects/Animations/Animate","jsfw/gui/GUIObjects/Animations/AnimateHTML","jsfw/gui/helpers/Util"],function(k,g,l,f){var a=true,c=navigator.userAgent.indexOf("Ekioh")>-1?"SVG":"HTML",h={SVG:{bringToFront:function(o){var n=o.getRootElement(),m=n.parentNode;m.appendChild(n);},changeStyle:function(m,o,n,p){var q=n;if(p&&p.__rotate&&o==="transform"){q+=", "+p.__rotate;}m.setAttribute(o,q);},move:function(o,m,p){var n="translate("+m+" "+p+")";if(o._scale!==1){n+=", scale("+String(o._scale)+")";}if(o._moveAnim){o._moveAnim.setFill("remove");this.changeStyle(o.getRootElement(),"transform",n,o);o._moveAnim.setFill("freeze");}else{this.changeStyle(o.getRootElement(),"transform",n,o);}},scale:function(n,o){var m="translate("+n._x+" "+n._y+"), scale("+o+")";if(n._scaleAnim){n._scaleAnim.setFill("remove");this.changeStyle(n.getRootElement(),"transform",m,n);n._scaleAnim.setFill("freeze");}else{this.changeStyle(n.getRootElement(),"transform",m,n);}},rotate:function(o,p,m,q){var n="translate("+o._x+" "+o._y+")";if(o._scale!==1){n+=", scale("+String(o._scale)+")";}m=(m===undefined)?o._x:m;q=(q===undefined)?o._y:q;o.__rotate="rotate("+p+", "+m+", "+q+")";this.changeStyle(o.getRootElement(),"transform",n,o);},attribute:function(o,m,n){if(o._attributeAnim&&o._attributeAnim[m]){o._attributeAnim[m].setFill("remove");this.changeStyle(o.getRootElement(),m,n);o._attributeAnim[m].setFill("freeze");}else{this.changeStyle(o.getRootElement(),m,n);}},addTimingFunction:function(n,m){n.setCalcMode("spline");switch(m){case"ease":n.setKeySplines("0.25 0.1 0.25 1.0");break;case"ease-in":n.setKeySplines("0.42 0.0 1.0 1.0");break;case"ease-out":n.setKeySplines("0.0 0.0 0.58 1.0");break;case"ease-in-out":n.setKeySplines("0.42 0.0 0.58 1.0");break;default:n.setCalcMode("linear");}},addMoveAnim:function(n,m){n._moveAnim=new $N.gui.AnimTransform(n._docRef,n).setAdditive(n._animTransformAdditive).setDuration(n.getAnimationDuration());n._animTransformAdditive="sum";if(m){this.addTimingFunction(n._moveAnim,m);}},addScaleAnim:function(n,m){n._scaleAnim=new $N.gui.AnimTransform(n._docRef,n).setAdditive(n._animTransformAdditive).setType("scale").setDuration(n.getAnimationDuration());n._animTransformAdditive="sum";if(m){this.addTimingFunction(n._scaleAnim,m);}},addRotateAnim:function(n,m){n._rotateAnim=new $N.gui.AnimTransform(n._docRef,n).setAdditive(n._animTransformAdditive).setType("rotate").setDuration(n.getAnimationDuration());n._animTransformAdditive="sum";if(m){this.addTimingFunction(n._rotateAnim,m);}},addAttributeAnim:function(o,m,n){if(!o._attributeAnim){o._attributeAnim={};}o._attributeAnim[m]=new $N.gui.Animate(o._docRef,o);o._attributeAnim[m].setAttributeName(m);o._attributeAnim[m].setDuration(o.getAnimationDuration());if(n){this.addTimingFunction(o._attributeAnim[m],n);}},animatedMove:function(p,t,r,s,q,o,n){var m=t+" "+r+";"+s+" "+q;if(o){p._moveAnim.setRepeatCount("10000");}else{p._moveAnim.setRepeatCount("1");}if(n){m+="; "+t+" "+r;p._moveAnim.setKeyTimes("0; 0.5; 1");}else{p._moveAnim.setKeyTimes("");}p._moveAnim.setValues(m);if(!p._moveAnim.linked){p._moveAnim.animate();}},animatedScale:function(p,r,q,o,n){var m=r+";"+q;if(o){p._scaleAnim.setRepeatCount("10000");}else{p._scaleAnim.setRepeatCount("1");}if(n){m+="; "+r;p._scaleAnim.setKeyTimes("0; 0.5; 1");}else{p._scaleAnim.setKeyTimes("");}p._scaleAnim.setValues(m);p._scaleAnim.animate();},animatedRotate:function(p,s,r,o,n){var q=" "+(p._width/2)+" "+(p._height/2),m=s+q+"; "+r+q;if(o){p._rotateAnim.setRepeatCount("10000");}else{p._rotateAnim.setRepeatCount("1");}if(n){m+="; "+s;p._rotateAnim.setKeyTimes("0; 0.5; 1");}else{p._rotateAnim.setKeyTimes("");}p._rotateAnim.setValues(m);p._rotateAnim.animate();},animatedAttribute:function(p,m,r,q,o,n){if(p._attributeAnim[m]){if(o&&n){p._attributeAnim[m].setRepeatCount("10000");p._attributeAnim[m].setKeyTimes("0; 0.5; 1");p._attributeAnim[m].setValues(r+"; "+q+"; "+r);}else{if(o){p._attributeAnim[m].setRepeatCount("10000");p._attributeAnim[m].setKeyTimes("");p._attributeAnim[m].setValues(r+"; "+q);}else{p._attributeAnim[m].setRepeatCount("1");p._attributeAnim[m].setKeyTimes("");p._attributeAnim[m].setValues(r+"; "+q);}}if(!p._attributeAnim[m].linked){p._attributeAnim[m].animate();}}}},HTML:{bringToFront:function(o){var n=o.getRootElement(),m=n.parentNode;if(m.contains(n)){m.removeChild(n);}m.appendChild(n);},changeStyle:function(q,n,m,o){var p="";if(o&&(n==="-webkit-transform"||n==="-o-transform")){p+=o.__move?o.__move+" ":"";p+=o.__scale?o.__scale+" ":"";p+=o.__rotate?o.__rotate:"";q.style[n]=p;}else{q.style[n]=m;}},move:function(n,m,o){if(n._moveAnim){n._moveAnim.cancelAnimation();}n._cancelRepeatAnimations();n.getRootElement().style["-webkit-transition-duration"]=null;n.getRootElement().style.transitionDuration=null;n.getRootElement().style.OTransform="translate("+m+"px,"+o+"px)";if(d.use3D){n.__move="translate3d("+m+"px,"+o+"px, 0px)";}else{n.__move="translate("+m+"px,"+o+"px)";}this.changeStyle(n.getRootElement(),"-webkit-transform",n.__move,n);this.changeStyle(n.getRootElement(),"-o-transform",n.__move,n);n._restartRepeatAnimations();},scale:function(m,n){m._cancelRepeatAnimations();m.getRootElement().style["-webkit-transition-duration"]=null;m.getRootElement().style.transitionDuration=null;this.changeStyle(m.getRootElement(),"-webkit-transform-origin","0px 0px");this.changeStyle(m.getRootElement(),"transformOrigin","0px 0px");m.__scale="scale("+n+")";this.changeStyle(m.getRootElement(),"-webkit-transform",m.__scale,m);this.changeStyle(m.getRootElement(),"-o-transform",m.__scale,m);m._restartRepeatAnimations();},rotate:function(n,o,m,p){m=m?String(m):"0";p=p?String(p):"0";this.changeStyle(n.getRootElement(),"-webkit-transform-origin",m+"px "+p+"px");this.changeStyle(n.getRootElement(),"transformOrigin",m+"px "+p+"px");n.__rotate="rotate("+o+"deg)";this.changeStyle(n.getRootElement(),"-webkit-transform",n.__rotate,n);this.changeStyle(n.getRootElement(),"-o-transform",n.__rotate,n);},attribute:function(o,m,n){o._cancelRepeatAnimations();o.getRootElement().style["-webkit-transition-duration"]=null;o.getRootElement().style.transitionDuration=null;this.changeStyle(o.getRootElement(),m,n);o._restartRepeatAnimations();},addMoveAnim:function(n,m){n._moveAnim=new $N.gui.AnimateHTML(n,null,m);},addScaleAnim:function(n,m){n._scaleAnim=new $N.gui.AnimateHTML(n,null,m);},addRotateAnim:function(n,m){n._rotateAnim=new $N.gui.AnimateHTML(n,null,m);},addAttributeAnim:function(o,m,n){if(!o._attributeAnim){o._attributeAnim={};}o._attributeAnim[m]=new $N.gui.AnimateHTML(o,m,n);},animatedMove:function(o,s,q,r,p,n,m){if(!a||parseFloat(o.getAnimationDuration())===0){this.move(o,r,p);o._moveAnim.animatedCallback();}else{o._moveAnim.animatedMove(s,q,r,p,d.use3D,n,m);}},animatedScale:function(o,q,p,n,m){if(!a||parseFloat(o.getAnimationDuration())===0){this.scale(o,p);o._scaleAnim.animatedCallback();}else{o._scaleAnim.animatedScale(q,p,n,m);}},animatedRotate:function(o,q,p,n,m){if(!a||parseFloat(o.getAnimationDuration())===0){this.rotate(o,p);o._rotateAnim.animatedCallback();}else{o._rotateAnim.animatedRotate(q,p,n,m);}},animatedAttribute:function(p,m,r,q,o,n){if(!a||parseFloat(p.getAnimationDuration())===0){this.attribute(p,m,q);p._attributeAnim[m].animatedCallback();}else{p._attributeAnim[m].animatedAttribute(r,q,o,n);}}}}[c];function e(){var o=document.createElement("p"),p,n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(o,null);for(var m in n){if(o.style[m]!==undefined){o.style[m]="translate3d(1px,1px,1px)";p=window.getComputedStyle(o).getPropertyValue(n[m]);}}document.body.removeChild(o);return(p!==undefined&&p.length>0&&p!=="none");}var d=function(n){var m=this;this._id="";this._x=0;this._y=0;this._trueX=0;this._trueY=0;this._visible=true;this._scale=1;this._opacity=1;this._animationDuration="0.250s";this._docRef=n||document;this._rootElement={};this._animTransformAdditive="replace";this._verticalAlignment=null;this._horizontalAlignment=null;this._parent=null;this._children=null;this._attributeAnim=null;if(Object.defineProperty){Object.defineProperty(this,"_rootSVGRef",{get:function(){return m._rootElement;},set:function(o){m._rootElement=o;}},{writable:true});}else{this.__defineGetter__("_rootSVGRef",function(){return m._rootElement;});this.__defineSetter__("_rootSVGRef",function(o){m._rootElement=o;});}};d.use3D=false;if(navigator.userAgent.indexOf("Ekioh")===-1){if(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android")===-1){window.addEventListener("load",function(){d.use3D=e();});}}d.linkAnimations=function(n,m){var o;if(c==="SVG"){for(o=0;o<m.length;o++){m[o].linked=true;m[o].setBegin(n.getId()+".begin");}}};var b=d.prototype;b.resolutionHorizontalFactor=1;b.resolutionVerticalFactor=1;b._cancelRepeatAnimations=function(){var m;if(this._moveAnim&&this._moveAnim.isRepeat()){this._moveAnim.cancelAnimation();}if(this._scaleAnim&&this._scaleAnim.isRepeat()){this._scaleAnim.cancelAnimation();}if(this._attributeAnim){for(m in this._attributeAnim){if(this._attributeAnim.hasOwnProperty(m)&&this._attributeAnim[m].isRepeat()){this._attributeAnim[m].cancelAnimation();}}}};b._restartRepeatAnimations=function(){var m;if(this._moveAnim&&this._moveAnim.isRepeat()){this._moveAnim.restartAnimation();}if(this._scaleAnim&&this._scaleAnim.isRepeat()){this._scaleAnim.restartAnimation();}if(this._attributeAnim){for(m in this._attributeAnim){if(this._attributeAnim.hasOwnProperty(m)&&this._attributeAnim[m].isRepeat()){this._attributeAnim[m].restartAnimation();}}}};b.hide=function(){h.changeStyle(this._rootElement,"display","none");this._visible=false;return this;};b.show=function(){h.changeStyle(this._rootElement,"display","inline");this._visible=true;return this;};b.bringToFront=function(){h.bringToFront(this);return this;};b.isVisible=function(){return this._visible;};b.setVisible=function(m){if(m===true||(typeof m==="string"&&m.toLowerCase()==="true")){this.show();}else{this.hide();}return this;};b.setX=function(n){var m;this._trueX=0;switch(n){case"center":this._horizontalAlignment=n;if(this._parent&&this._parent.getWidth){m=this.getWidth?this.getWidth():0;this._trueX=(this._parent.getWidth()-m)/2;}break;case"right":this._horizontalAlignment=n;if(this._parent&&this._parent.getWidth){m=this.getWidth?this.getWidth():0;this._trueX=this._parent.getWidth()-m;}break;case"left":this._horizontalAlignment=null;break;default:this._horizontalAlignment=null;this._trueX=parseInt(n,10);}this._x=Math.round(this._trueX*this.resolutionHorizontalFactor);h.move(this,this._x,this._y);return this;};b.setY=function(n){var m;this._trueY=0;switch(n){case"middle":this._verticalAlignment=n;if(this._parent&&this._parent.getHeight){m=this.getHeight?this.getHeight():0;this._trueY=(this._parent.getHeight()-m)/2;}break;case"bottom":this._verticalAlignment=n;if(this._parent&&this._parent.getHeight){m=this.getHeight?this.getHeight():0;this._trueY=this._parent.getHeight()-m;}break;case"top":this._verticalAlignment=null;break;default:this._verticalAlignment=null;this._trueY=parseInt(n,10);}this._y=Math.round(this._trueY*this.resolutionVerticalFactor);h.move(this,this._x,this._y);return this;};b.setRotation=function(o,n,m){h.rotate(this,o,n,m);return this;};b.move=function(n,m){this._trueX=parseInt(n,10);this._trueY=parseInt(m,10);this._x=Math.round(this._trueX*this.resolutionHorizontalFactor);this._y=Math.round(this._trueY*this.resolutionVerticalFactor);h.move(this,this._x,this._y);if(this._animationDependents){this._checkAnimationDependents();}return this;};b.addAttributeAnimation=function(m,n){h.addAttributeAnim(this,m,n);return this;};b.addFadeAnimation=function(m){h.addAttributeAnim(this,"opacity",m);return this;};b.addScaleAnimation=function(m){h.addScaleAnim(this,m);return this;};b.addRotationAnimation=function(m){h.addRotateAnim(this,m);return this;};b.addMoveAnimation=function(m){h.addMoveAnim(this,m);return this;};b.doMove=function(q,o,r,p,n,m){if(r===undefined||r===null){r=this.getX();}if(p===undefined||p===null){p=this.getY();}if(!n){this._trueX=parseInt(q,10);this._trueY=parseInt(o,10);this._x=Math.round(this._trueX*this.resolutionHorizontalFactor);this._y=Math.round(this._trueY*this.resolutionVerticalFactor);h.animatedMove(this,parseInt(r,10),parseInt(p,10),this._x,this._y,n,m);}else{h.animatedMove(this,parseInt(r,10),parseInt(p,10),Math.round(parseInt(q,10)*this.resolutionHorizontalFactor),Math.round(parseInt(o,10)*this.resolutionVerticalFactor),n,m);}return this;};b.doAttributeAnimation=function(n,q,p,o){var m=null;switch(n){case"opacity":m=this.getOpacity();if(!p){this._opacity=q;}break;case"width":m=this.getWidth();if(!p){this._width=q;}if(d.mode==="HTML"){m+="px";q+="px";}break;case"height":m=this.getHeight();if(!p){this._height=q;}if(d.mode==="HTML"){m+="px";q+="px";}break;case"x":m=this.getX();if(!p){this._x=q;}break;}h.animatedAttribute(this,n,m,q);return this;};b.doFade=function(m,o,n){var p=this.getOpacity();if(!o){this._opacity=m;}h.animatedAttribute(this,"opacity",p,m,o,n);return this;};b.doScale=function(p,o,n){var m=this.getScale();if(!o){this._scale=p;}h.animatedScale(this,m,p,o,n);return this;};b.doRotate=function(p,o,n){var m=this.getScale();if(!o){this.__rotate=p;}h.animatedRotate(this,0,p,o,n);return this;};b.setAnimationDuration=function(n){var m={};this._animationDuration=n;if(this._moveAnim){this._moveAnim.setDuration(n);}if(this._scaleAnim){this._scaleAnim.setDuration(n);}if(this._rotateAnim){this._rotateAnim.setDuration(n);}if(this._attributeAnim){for(m in this._attributeAnim){if(this._attributeAnim.hasOwnProperty(m)){this._attributeAnim[m].setDuration(n);}}}return this;};b.getAnimationDuration=function(){return this._animationDuration;};b.setId=function(m){this._id=m;this._rootElement.setAttribute("id",this._id);return this;};b.setOpacity=function(m){this._opacity=m;h.attribute(this,"opacity",m);return this;};b.setAttribute=function(m,n){switch(m){case"opacity":this._opacity=n;break;case"width":this._width=n;if(d.mode==="HTML"){n+="px";}break;case"height":this._height=n;if(d.mode==="HTML"){n+="px";}break;}h.attribute(this,m,n);return this;};b.setScale=function(m){this._scale=m;h.scale(this,m);return this;};b.isAligned=function(){if(this._horizontalAlignment||this._verticalAlignment){return true;}return false;};b.getX=function(){return this._x;};b.getY=function(){return this._y;};b.getTrueX=function(){return this._trueX;};b.getTrueY=function(){return this._trueY;};b.getId=function(){return this._id;};b.getOpacity=function(){return this._opacity;};b.getScale=function(){return this._scale;};b.getRootSVGRef=function(){return this.getRootElement();};b.getRootElement=function(){return this._rootElement;};b.configure=function(n){var m,o=null;for(o in n){if(n.hasOwnProperty(o)){m=this["set"+$N.gui.Util.upcaseFirstLetter(o)];if(m){m.call(this,n[o]);}else{throw ("GUIObject configure - no setter method for attribute "+o);}}}return this;};b._setParent=function(m){this._parent=m;};b.addChild=function(m){if(!this._children){this._children=[];}this._children.push(m);if(m._setParent){m._setParent(this);if(m.isAligned()){this._redrawChild(m);}}this.getRootElement().appendChild(m.getRootElement());return this;};b._redrawChildren=function(){var m,o,n=this._children?this._children.length:0;for(m=0;m<n;m++){o=this._children[m];if(o.isAligned&&o.isAligned()){this._redrawChild(o);}}};b._redrawChild=function(m){if(m._horizontalAlignment){m.setX(m._horizontalAlignment);}if(m._verticalAlignment){m.setY(m._verticalAlignment);}};b.getMoveAnimation=function(){return this._moveAnim;};b.getAttributeAnimation=function(m){return this._attributeAnim[m];};b.getFadeAnimation=function(){return this._attributeAnim.opacity;};b.getScaleAnimation=function(){return this._scaleAnim;};b.removeAnimations=function(){var o,m=["_scaleAnim","_moveAnim"],n;for(o in this._attributeAnim){if(this._attributeAnim.hasOwnProperty(o)){this._attributeAnim[o]=null;}}for(n=m.length-1;n>=0;n--){this[m[n]]=null;}return this;};b._removeReferenceFromParent=function(){var m,n;if(this._parent&&this._parent._children){n=this._parent._children;for(m=n.length-1;m>=0;m--){if(this===n[m]){n.splice(m,1);}}}};b.destroy=function(){this.removeAnimations();this._removeReferenceFromParent();if(this._rootElement&&this._rootElement.parentNode){this._rootElement.parentNode.removeChild(this._rootElement);}delete this._rootElement;};b.removeFromParent=function(){this._removeReferenceFromParent();if(this._rootElement&&this._rootElement.parentNode){this._rootElement.parentNode.removeChild(this._rootElement);}};d.createFromExistingSVG=function(o,n,m){return d.createFromExistingMarkup(o,n,m);};d.createFromExistingMarkup=function(o,p,n){var m;m=n?new n():new d();m._rootElement=o.getElementById(p);return m;};d.mode=c;d.abstractedMethods=h;window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.GUIObject=d;return d;});define("jsfw/gui/GUIObjects/Components/AbstractComponent",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/helpers/Util","jsfw/gui/PresentationManager","jsfw/Config"],function(d,e,b,a){function f(h){var g=this;f.superConstructor.call(this,h);this._width=0;this._height=0;this._trueWidth=0;this._trueHeight=0;this._cssClass=null;this._cssHighlightClass=null;this._cssHighlightStyle="";this._selectable=false;this._innerElement={};if(Object.defineProperty){Object.defineProperty(this,"_innerSVG",{get:function(){return g._innerElement;},set:function(k){g._innerElement=k;}},{writable:true});}else{this.__defineGetter__("_innerSVG",function(){return g._innerElement;});this.__defineSetter__("_innerSVG",function(k){g._innerElement=k;});}}$N.gui.Util.extend(f,$N.gui.GUIObject);var c=f.prototype;c.addAnimation=function(g){this._innerElement.appendChild(g.getRootElement());return this;};c.setCssClass=function(g){this._cssClass=g;this._innerElement.setAttribute("class",this._cssClass);if($N.Config.PRESENTATION_MANAGER){this.configure($N.gui.PresentationManager.getPresentation(this._cssClass));}return this;};c.setCssStyle=function(m,g){var h,l,k;if(!g){this._cssStyle=m;}if($N.gui.GUIObject.mode==="HTML"&&m){if(m.indexOf(";")){l=m.split(/;\s*/);}else{l.push(m);}for(h=l.length-1;h>=0;h--){k=l[h].split(/:\s*/);if(k[0]){this._innerElement.style[k[0]]=k[1];}}}else{this._innerElement.setAttribute("style",m);}return this;};c.setCssHighlightClass=function(g){this._cssHighlightClass=g;return this;};c.setCssHighlightStyle=function(g){this._cssHighlightStyle=g;return this;};c.setWidth=function(g){this._trueWidth=g;this._width=Math.round(g*this.resolutionHorizontalFactor);$N.gui.GUIObject.abstractedMethods.changeStyle(this._innerElement,"width",(String(this._width)+"px"));this._redrawChildren();return this;};c.setHeight=function(g){this._trueHeight=g;this._height=Math.round(g*this.resolutionVerticalFactor);$N.gui.GUIObject.abstractedMethods.changeStyle(this._innerElement,"height",(String(this._height)+"px"));this._redrawChildren();return this;};c.setSelectable=function(g){this._selectable=g;return this;};c.getCssClass=function(){return this._cssClass;};c.getCssStyle=function(){return this._cssStyle;};c.getCssHighlightClass=function(){return this._cssHighlightClass;};c.getCssHighlightStyle=function(){return this._cssHighlightStyle;};c.getWidth=function(){return this._width;};c.getHeight=function(){return this._height;};c.getTrueWidth=function(){return this._trueWidth;};c.getTrueHeight=function(){return this._trueHeight;};c.getSelectable=function(){return this._selectable;};c.highLight=function(){};c.unHighLight=function(){};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AbstractComponent=f;return f;});define("jsfw/gui/GUIObjects/Components/Container",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(d,f,e){var b={SVG:{createElements:function(k){var g=k.createElement("g");var h=k.createElement("rect");g.appendChild(h);return{root:g,inner:h};},setRounding:function(h,g){$N.gui.GUIObject.abstractedMethods.changeStyle(h,"rx",g);$N.gui.GUIObject.abstractedMethods.changeStyle(h,"ry",g);}},HTML:{createElements:function(k){var g=k.createElement("div"),h=k.createElement("div");g.style.padding="0px";g.style.position="absolute";g.style.overflow="visible";h.style.padding="0px";h.style.position="absolute";h.style.overflow="visible";g.appendChild(h);return{root:g,inner:h};},setRounding:function(h,g){$N.gui.GUIObject.abstractedMethods.changeStyle(h,"borderRadius",g);}}}[$N.gui.GUIObject.mode];function a(k,g){a.superConstructor.call(this,k);var h=b.createElements(this._docRef);this._rootElement=h.root;this._innerElement=h.inner;this._rounding=0;this.unHighLight();if(g){g.addChild(this);}}$N.gui.Util.extend(a,$N.gui.AbstractComponent);var c=a.prototype;c.setRounding=function(g){this._rounding=g;b.setRounding(this._innerElement,(String(this._rounding)+"px"));return this;};c.getRounding=function(){return this._rounding;};c.highLight=function(){if(this.getCssHighlightClass()){this._innerElement.setAttribute("class",this.getCssHighlightClass());}else{if(this.getCssHighlightStyle()){this.setCssStyle(this.getCssHighlightStyle(),true);}}};c.unHighLight=function(){if(this.getCssClass()){this._innerElement.setAttribute("class",this.getCssClass());}else{if(this.getCssStyle()){this.setCssStyle(this.getCssStyle(),true);}}};c.getClassName=function(){return("Container");};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Container=a;return a;});define("jsfw/gui/GUIObjects/Components/Group",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(b,d,c){var a;if($N.gui.GUIObject.mode==="HTML"){a=function(f,e){a.superConstructor.call(this,f);this._rootElement=f.createElement("div");this._innerElement=this._rootElement;this._rootElement.style.padding="0px";this._rootElement.style.position="absolute";if(e){e.addChild(this);}};}else{a=function(f,e){a.superConstructor.call(this,f);this._rootElement=this._docRef.createElement("g");this._innerElement=this._rootElement;if(e){e.addChild(this);}};}$N.gui.Util.extend(a,$N.gui.AbstractComponent);a.prototype.getClassName=function(){return("Group");};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Group=a;return a;});define("jsfw/gui/GUIObjects/Components/Video",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(c,e,d){var b={SVG:{createElement:function(g){var f=g.createElement("video");f.setAttributeNS("http://www.ekioh.com/2007/ekioh","colourKey","#00000001");f.setAttributeNS("http://www.w3.org/1999/xlink","href","");f.setAttribute("x","0");f.setAttribute("y","0");return f;},setUrl:function(g,f){g.setAttributeNS("http://www.w3.org/1999/xlink","href",f);}},HTML:{createElement:function(g){var f=g.createElement("video");f.style.position="absolute";return f;},setUrl:function(g,f){g.setAttribute("src",f);}}}[$N.gui.GUIObject.mode];function a(g,f){a.superConstructor.call(this,g);this._rootElement=b.createElement(this._docRef);this._innerElement=this._rootElement;this._href="";if(f){f.addChild(this);}}$N.gui.Util.extend(a,$N.gui.AbstractComponent);a.prototype.setHref=function(f){this._href=f;b.setUrl(this._innerElement,this._href);};a.prototype.getHref=function(){return this._href;};a.prototype.setX=function(f){if($N.gui.GUIObject.mode==="SVG"){this._trueX=parseInt(f,10);this._x=Math.round(this._trueX*this.resolutionHorizontalFactor);this._rootElement.setAttribute("x",this._x);}else{a.superClass.setX.call(this,f);}};a.prototype.setY=function(f){if($N.gui.GUIObject.mode==="SVG"){this._trueY=parseInt(f,10);this._y=Math.round(this._trueY*this.resolutionVerticalFactor);this._rootElement.setAttribute("y",this._y);}else{a.superClass.setY.call(this,f);}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Video=a;return a;});define("jsfw/gui/GUIObjects/Components/Image",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(d,f,e){var a={SVG:{createElement:function(g){return g.createElement("image");},setUrl:function(l,k,h){var g=k.replace("%1",h);g=g.replace("%RES",b.resolution);l.setAttributeNS("http://www.w3.org/1999/xlink","href",g);},setMaxBitMapSize:function(h,g){h.setAttributeNS("http://www.ekioh.com/2007/ekioh","maxBitmapSize",g);},setPreserve:function(h,g){if(g){h._innerElement.setAttribute("preserveAspectRatio","xMidYMid");}else{h._innerElement.setAttribute("preserveAspectRatio","none");}},addLoadFailedCallback:function(g){g._innerElement.addEventListener("SVGPostload",g._postLoadEvent,false);},removeLoadFailedCallback:function(g){g._innerElement.removeEventListener("SVGPostload",g._postLoadEvent,false);}},HTML:{createElement:function(h){var g=h.createElement("img");g.style.position="absolute";g.style.visibility="hidden";g.addEventListener("load",function(){g.style.visibility="visible";},false);g.addEventListener("error",function(){g.style.visibility="hidden";},false);return g;},setUrl:function(l,k,h){var g=null;if(k){g=k.replace("%1",h);g=g.replace("%RES",b.resolution);}if(g&&g!==""){l.style.visibility="visible";l.setAttribute("src",g);}else{l.style.visibility="hidden";}},setMaxBitMapSize:function(h,g){},setPreserve:function(h,g){if(g&&h.getWidth()){h.getRootElement().style.height="auto";}else{if(g&&h.getHeight()){h.getRootElement().style.width="auto";}else{h.getRootElement().style.height=h.getHeight();h.getRootElement().style.width=h.getWidth();}}},addLoadFailedCallback:function(g){g._innerElement.addEventListener("load",g._postLoadEvent,false);g._innerElement.addEventListener("error",g._postLoadEvent,false);},removeLoadFailedCallback:function(g){g._innerElement.removeEventListener("load",g._postLoadEvent,false);g._innerElement.removeEventListener("error",g._postLoadEvent,false);}}}[$N.gui.GUIObject.mode];function b(k,g){b.superConstructor.call(this,k);this._rootElement=a.createElement(this._docRef);this._innerElement=this._rootElement;this._href="";this._hrefVar="";if(g){g.addChild(this);}var h=this;this._loadFailedCallback=null;this._missingImageAlterative=null;this._postLoadEvent=function(){if(!h._innerElement.naturalWidth){if(h._loadFailedCallback){h._loadFailedCallback();}else{if(h._missingImageAlterative&&h._missingImageAlterative!==h._href){setTimeout(function(){h.setHref(h._missingImageAlterative);},1);}}}else{if(h._loadSuccessfulCallback){h._loadSuccessfulCallback();}}};}$N.gui.Util.extend(b,$N.gui.AbstractComponent);b.resolution="720p";var c=b.prototype;c.setHref=function(g){this._href=g;a.setUrl(this._innerElement,this._href,this._hrefVar);};c.setHrefVar=function(g){this._hrefVar=g;if(this._href!==""){a.setUrl(this._innerElement,this._href,this._hrefVar);}};c.setMaxBitMapSize=function(g){a.setMaxBitMapSize(this._innerElement,g);};c.getHref=function(){var g=null;if(this._href){g=this._href.replace("%1",this._hrefVar);g=g.replace("%RES",b.resolution);}return g;};c.setPreserveAspect=function(g){if(g===true||(typeof g==="string"&&g.toLowerCase()==="true")){a.setPreserve(this,true);}else{a.setPreserve(this,false);}};c.setQuality=function(g){if($N.gui.GUIObject.mode==="SVG"){switch(g){case 1:this._innerElement.setAttribute("image-rendering","optimizeQuality");break;case 2:this._innerElement.setAttribute("image-rendering","optimizeSpeed");break;}}};c.setLoadFailedCallback=function(g){if(!this._missingImageAlterative&&!this._loadFailedCallback&&!this._loadSuccessfulCallback){a.addLoadFailedCallback(this);}if(g===null&&!this._missingImageAlterative&&!this._loadSuccessfulCallback){a.removeLoadFailedCallback(this);}this._loadFailedCallback=g;};c.setLoadSuccessful=function(g){if(!this._missingImageAlterative&&!this._loadFailedCallback&&!this._loadSuccessfulCallback){a.addLoadFailedCallback(this);}this._loadSuccessfulCallback=g;};c.setMissingImageAlterative=function(g){if(!this._missingImageAlterative&&!this._loadFailedCallback&&!this._loadSuccessfulCallback){a.addLoadFailedCallback(this);}if(g===null&&!this._loadFailedCallback&&!this._loadSuccessfulCallback){a.removeLoadFailedCallback(this);}this._missingImageAlterative=g;};c.setBufferedImage=function(g){if(g&&$N.gui.GUIObject.mode==="SVG"){this._innerElement.setAttribute("buffered-rendering","static");}};c.getNaturalHeight=function(){return Math.round(this._innerElement.naturalHeight*this.resolutionVerticalFactor);};c.getNaturalWidth=function(){return Math.round(this._innerElement.naturalWidth*this.resolutionHorizontalFactor);};c.getClassName=function(){return"Image";};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Image=b;return b;});define("jsfw/gui/GUIObjects/Components/CachedImage",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/GUIObjects/Components/Image","jsfw/gui/helpers/Util"],function(d,f,b,e){function a(k,g){var h=this;a.superConstructor.call(this,k);if(g){g.addChild(this);}this._postLoadCheck=function(){if(h._innerElement.naturalWidth&&!a.cache[h._href]){a.cache[h._href]=h._rootElement.cloneNode(false);if($N.gui.GUIObject.mode==="HTML"){a.cache[h._href].style.display="none";h._docRef.body.appendChild(a.cache[h._href]);}else{a.cache[h._href].setAttribute("display","none");h._docRef.documentElement.appendChild(a.cache[h._href]);}}};if($N.gui.GUIObject.mode==="SVG"){this._innerElement.addEventListener("SVGPostload",this._postLoadCheck,false);}else{this._innerElement.addEventListener("load",this._postLoadCheck,false);this._innerElement.addEventListener("error",this._postLoadCheck,false);}}a.cache={};a.clearImage=function(g){if(a.cache[g]){a.cache[g].parentNode.removeChild(a.cache[g]);delete a.cache[g];}};a.clearCache=function(){for(var g in a.cache){a.cache[g].parentNode.removeChild(a.cache[g]);delete a.cache[g];}};$N.gui.Util.extend(a,$N.gui.Image);var c=a.prototype;c.clearFromCache=function(){if(a.cache[this._href]){a.cache[this.href].parentNode.removeChild(a.cache[this.href]);delete a.cache[this.href];}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.CachedImage=a;return a;});define("jsfw/gui/GUIObjects/Components/SVGlink",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(b,e,c){var a={SVG:{createElement:function(f){return f.createElement("use");},setHref:function(g,f){g._innerElement.setAttributeNS("http://www.w3.org/1999/xlink","href",f);}},HTML:{createElement:function(g){var f=g.createElement("image");f.style.position="absolute";f.setAttribute("type","image/svg+xml");f.addEventListener("load",function(){f.style.visibility="visible";},false);f.addEventListener("error",function(){f.style.visibility="hidden";},false);return f;},setHref:function(g,f){g._innerElement.setAttribute("src",f);}}}[$N.gui.GUIObject.mode];function d(g,f){d.superConstructor.call(this,g);this._rootElement=a.createElement(g);this._innerElement=this._rootElement;this._href="";if(f){f.addChild(this);}}$N.gui.Util.extend(d,$N.gui.AbstractComponent);d.prototype.setHref=function(f){this._href=f;a.setHref(this,this._href);};d.prototype.getHref=function(){return this._href;};d.prototype.applyScale=function(f){this.setScale(f);};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.SVGlink=d;return d;});define("jsfw/gui/GUIObjects/Components/Label",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(c,f,e){var a={SVG:{createElement:function(h){var g=h.createElement("text");return{root:g,inner:g};},updateText:function(g,h){g.textContent=h;},setFontSize:function(h,g){$N.gui.GUIObject.abstractedMethods.changeStyle(h,"font-size",g);},setAlignment:function(h,k){var g=h._innerElement;switch(k){case d.ALIGN_RIGHT:$N.gui.GUIObject.abstractedMethods.changeStyle(g,"text-anchor","end");break;case d.ALIGN_CENTRE:$N.gui.GUIObject.abstractedMethods.changeStyle(g,"text-anchor","middle");break;default:$N.gui.GUIObject.abstractedMethods.changeStyle(g,"text-anchor","start");}},setOverflow:function(g,h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"text-overflow",h);},getTextLength:function(g){var h=0;if(g.getBBox()){h=g.getBBox().width;}return h;},getFontSize:function(h){try{return h.getFloatTrait("font-size");}catch(g){return 0;}}},HTML:{createElement:function(h){var k=h.createElement("div"),g=h.createElement("p");k.style.position="absolute";g.style.margin="0px";g.style.whiteSpace="nowrap";g.style.overflow="hidden";g.style.textOverflow="ellipsis";k.appendChild(g);return{root:k,inner:g};},updateText:function(g,h){g.innerText=h;},setFontSize:function(h,g){$N.gui.GUIObject.abstractedMethods.changeStyle(h,"fontSize",g+"px");},setAlignment:function(k,l){var h=k.getWidth(),g=k._innerElement;if(l===d.ALIGN_LEFT&&h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"textAlign","left");$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","0%");}else{if(l===d.ALIGN_LEFT&&!h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","0%");}else{if(l===d.ALIGN_CENTRE&&h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"textAlign","center");$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","-50%");}else{if(l===d.ALIGN_CENTRE&&!h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","-50%");}else{if(l===d.ALIGN_RIGHT&&h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"textAlign","right");$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","-100%");}else{if(l===d.ALIGN_RIGHT&&!h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"marginLeft","-100%");}}}}}}},setOverflow:function(g,h){$N.gui.GUIObject.abstractedMethods.changeStyle(g,"overflow",h);},getTextLength:function(k){var g=0,m=0,h="",l=window.getComputedStyle(k,null).getPropertyValue("marginLeft");if(!l){return k.offsetWidth;}else{g=l.indexOf("%");m=l.toUpperCase().indexOf("PX");if(g!==-1){h=parseInt(l.substring(0,g),10);if(h>0){return k.offsetWidth;}else{return(k.offsetWidth*100/(100-h));}}else{if(m!==-1){h=l.substring(0,m);return(k.offsetWidth-Math.abs(h));}else{return k.offsetWidth;}}}},getFontSize:function(h){var g=window.getComputedStyle(h,null).getPropertyValue("font-size");if(g){return parseInt(g.substr(0,g.length-2),10);}else{return 0;}}}}[$N.gui.GUIObject.mode];function d(k,h){d.superConstructor.call(this,k);var g=a.createElement(k);this._rootElement=g.root;this._innerElement=g.inner;this._text="";this._textOverflow="none";this._alignment=d.ALIGN_LEFT;if(h){h.addChild(this);}this._positionedForHtml=false;}$N.gui.Util.extend(d,$N.gui.AbstractComponent);d.ALIGN_LEFT="left";d.ALIGN_RIGHT="right";d.ALIGN_CENTRE="centre";var b=d.prototype;b.htmlCompatible=false;b.setAlignment=function(g){this._alignment=g;a.setAlignment(this,this._alignment);return this;};b.setFontSize=function(g){a.setFontSize(this._innerElement,g);return this;};b._positionForHtml=function(){if(!this._positionedForHtml&&this.htmlCompatible&&$N.gui.GUIObject.mode==="SVG"&&this.getFontSize()){this.setY(this.getTrueY()+this.getFontSize());this._positionedForHtml=true;}};b.show=function(){d.superClass.show.call(this);this._positionForHtml();return this;};b.setText=function(g){this._text=g;a.updateText(this._innerElement,this._text);this._positionForHtml();return this;};b.setTextOverflow=function(g){this._textOverflow=g;a.setOverflow(this._innerElement,this._textOverflow);return this;};b.getFontSize=function(){return a.getFontSize(this._innerElement);};b.getHeight=function(){var h=this.getFontSize();try{return h+this._innerElement.getFloatTrait("stroke-width")*2;}catch(g){return h;}};b.getText=function(){return this._text;};b.getTextOverflow=function(){return this._textOverflow;};b.getAlignment=function(){return this._alignment;};b.getTextLength=function(){return parseInt(a.getTextLength(this._innerElement),10);};b.getTrueTextLength=function(){return parseInt(this.getTextLength()/this.resolutionHorizontalFactor,10);};b.getClassName=function(){return("Label");};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Label=d;return d;});define("jsfw/gui/GUIObjects/Components/SpanLabel",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util"],function(c,e,d){var a={SVG:{createElement:function(g,h){return g.createElement("tspan");}},HTML:{createElement:function(g,h){return g.createElement("span");}}}[$N.gui.GUIObject.mode];function f(h,g){f.superConstructor.call(this,h);this._spanElement=null;this._spanCssClass="SpanLabelText";this._caseSensitive=true;this._firstWordsOnly=false;if(g){g.addChild(this);}}$N.gui.Util.extend(f,$N.gui.Label);var b=f.prototype;b.setSpanCssClass=function(g){this._spanCssClass=g;if(this._spanElement){this._spanElement.setAttribute("class",this._spanCssClass);}};b.setSpanOnText=function(n){if(n){var l=(this._caseSensitive)?this.getText():this.getText().toUpperCase();var k=(this._caseSensitive)?n:n.toUpperCase();var m;var g;var o=0;var h=null;if(this._firstWordsOnly){m=new RegExp("(^"+k+"|\\s+"+k+")","i");g=l.search(m);if(g>-1&&l.charAt(g)===" "){g++;}}else{g=l.indexOf(k);}if(g>-1){if(g>0){this._innerElement.textContent=this.getText().substring(0,g);}else{this._innerElement.textContent="";}o=g+n.length;this._spanElement=a.createElement(this._docRef,this._innerElement);this._spanElement.textContent=this.getText().substring(g,o);this._spanElement.setAttribute("class",this._spanCssClass);this._innerElement.appendChild(this._spanElement);if(o<this.getText().length){h=a.createElement(this._docRef,this._innerElement);h.textContent=this.getText().substring(o,this.getText().length);this._innerElement.appendChild(h);}}}else{this.setText(this.getText());}};b.setCaseSensitive=function(g){this._caseSensitive=g;};b.setFirstWordsOnly=function(g){this._firstWordsOnly=g;};b.getClassName=function(){return("SpanLabel");};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.SpanLabel=f;return f;});define("jsfw/gui/GUIObjects/Components/TextArea",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(b,e,c){var a={SVG:{createTextAreaElement:function(f){return f.createElement("textArea");},createTextBreakElement:function(f){return f.createElement("tbreak");},createSpanElement:function(f){return f.createElement("tspan");},getContentHeight:function(g){var f=g._rootElement.getBBox();return f===null?0:f.height;}},HTML:{createTextAreaElement:function(g){var f=g.createElement("p");f.style.position="absolute";f.style.background="none";f.style.border="none";f.style.resize="none";f.style.overflow="hidden";f.style.margin="0px";f.style.padding="0px";f.style["margin-top"]="0px !important";f.tabIndex=-1;return f;},createTextBreakElement:function(f){return f.createElement("br");},createSpanElement:function(f){return f.createElement("span");},getContentHeight:function(f){return window.getComputedStyle(f._innerElement,null).getPropertyValue("height")||0;}}}[$N.gui.GUIObject.mode];function d(g,f){d.superConstructor.call(this,g);this._rootElement=a.createTextAreaElement(g);this._innerElement=this._rootElement;this._fontSize=10;this._text="";if(f){f.addChild(this);}}$N.gui.Util.extend(d,$N.gui.AbstractComponent);d.prototype.setFontSize=function(f){this._fontSize=f;this._innerElement.setAttribute("font-size",this._fontSize);};d.prototype.setText=function(f){var g=this._innerElement;this._clearText();if(!f){f="";}this._text=f;if(f.indexOf("\n")>-1){this._addNewlinedText(g,f);}else{g.textContent=this._text;}};d.prototype._addNewline=function(g,f){f.appendChild(a.createTextBreakElement(g));};d.prototype._clearText=function(){var f=this._innerElement;while(f.hasChildNodes()){f.removeChild(f.lastChild);}};d.prototype._addNewlinedText=function(g,m){var l=m.indexOf("\n"),f=m,k=this._docRef;var h;while(l>-1){h=f.substring(0,l);f=f.substring(l+1,f.length);g.appendChild(k.createTextNode(h));this._addNewline(k,g);l=f.indexOf("\n");}if(f.length!==0){g.appendChild(k.createTextNode(f));}};d.prototype.getFontSize=function(){return this._fontSize;};d.prototype.getText=function(){return this._text;};d.prototype.getContentHeight=function(){return a.getContentHeight(this);};d.prototype.getClassName=function(){return("TextArea");};d.prototype.setHeight=function(f){if(f==="auto"){this._rootElement.setAttribute("height","auto");}else{d.superClass.setHeight.call(this,f);}};d.prototype.getHeight=function(){var f=this._rootElement.getAttribute("height")==="auto"?true:false;return f?this.getContentHeight():d.superClass.getHeight.call(this);};d.domAbstraction=a;window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.TextArea=d;return d;});define("jsfw/gui/GUIObjects/Components/ClippedGroup",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(c,e,d){var b={SVG:{createElement:function(f){var g=f.createElementNS("http://www.ekioh.com/2007/ekioh","clippedGroup");return{root:g,inner:g};}},HTML:{createElement:function(g){var f=g.createElement("div");f.style.padding="0px";f.style.position="absolute";f.style.overflow="hidden";return{root:f,inner:f};}}}[$N.gui.GUIObject.mode];function a(h,g){a.superConstructor.call(this,h);var f=b.createElement(this._docRef);this._rootElement=f.root;this._innerElement=f.inner;if(g){g.addChild(this);}}$N.gui.Util.extend(a,$N.gui.AbstractComponent);window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ClippedGroup=a;return a;});define("jsfw/gui/GUIObjects/Components/ScrollableGroup",["jsfw/gui/Animations/Animate","jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(a,d,f,e){var c={SVG:{createElement:function(g){var h=g.createElementNS("http://www.ekioh.com/2007/ekioh","scrollableGroup");return{root:h,inner:h};},setXScrollPosition:function(l,k,g,h){var m=l.getAnimationDuration();l._xScrollAnim.setDuration(0);k.setAttributeNS("http://www.ekioh.com/2007/ekioh","scrollX",g/h);l._xScrollAnim.setDuration(m);},setYScrollPosition:function(k,h,m,g){var l=k.getAnimationDuration();k._yScrollAnim.setDuration(0);h.setAttributeNS("http://www.ekioh.com/2007/ekioh","scrollY",m/g);k._yScrollAnim.setDuration(l);},setXScrollAnim:function(g){g._xScrollAnim=new $N.gui.Animate(g._docRef,g);g._xScrollAnim.setAttributeName("ekioh:scrollX");g._xScrollAnim.setDuration(g.getAnimationDuration());},setYScrollAnim:function(g){g._yScrollAnim=new $N.gui.Animate(g._docRef,g);g._yScrollAnim.setAttributeName("ekioh:scrollY");g._yScrollAnim.setDuration(g.getAnimationDuration());},scrollXTo:function(g,k,h){g._xScrollAnim.setFrom(k);g._xScrollAnim.setTo(h);g._xScrollAnim.animate();},scrollYTo:function(g,k,h){g._yScrollAnim.setFrom(k);g._yScrollAnim.setTo(h);g._yScrollAnim.animate();}},HTML:{createElement:function(h){var g=h.createElement("div");g.style.padding="0px";g.style.position="absolute";g.style.overflow="hidden";return{root:g,inner:g};},setXScrollPosition:function(l,k,g,h){l.getRootElement().scrollLeft=Math.round(g/h);},setYScrollPosition:function(k,h,l,g){k.getRootElement().scrollTop=Math.round(l/g);},setXScrollAnim:function(g){},setYScrollAnim:function(g){},scrollXTo:function(g,k,h){$(g.getRootElement()).animate({scrollLeft:h},g.getAnimationDuration());},scrollYTo:function(g,k,h){$(g.getRootElement()).animate({scrollTop:h},g.getAnimationDuration());}}}[$N.gui.GUIObject.mode];function b(k,h){b.superConstructor.call(this,k);var g=c.createElement(this._docRef);this._rootElement=g.root;this._innerElement=g.inner;this._xScrollPosition=0;this._yScrollPosition=0;if(h){h.addChild(this);}c.setXScrollAnim(this);c.setYScrollAnim(this);this.setAnimationDuration("1");}$N.gui.Util.extend(b,$N.gui.AbstractComponent);b.prototype.setAnimationDuration=function(g){b.superClass.setAnimationDuration.call(this,g);if(this._xScrollAnim&&this._yScrollAnim){this._animationDuration=g;this._xScrollAnim.setDuration(g);this._yScrollAnim.setDuration(g);}};b.prototype.setScrollPosition=function(g,h){c.setXScrollPosition(this,this._innerElement,g,this.resolutionHorizontalFactor);this._xScrollPosition=g;c.setYScrollPosition(this,this._innerElement,h,this.resolutionHorizontalFactor);this._yScrollPosition=h;};b.prototype.getXScrollPosition=function(){return this._xScrollPosition;};b.prototype.getYScrollPosition=function(){return this._yScrollPosition;};b.prototype.getXScrollAnimation=function(){return this._xScrollAnim;};b.prototype.getYScrollAnimation=function(){return this._yScrollAnim;};b.prototype.scrollTo=function(g,h){if(g!==this._xScrollPosition){c.scrollXTo(this,this._xScrollPosition,g);this._xScrollPosition=g;}if(h!==this._yScrollPosition){c.scrollYTo(this,this._yScrollPosition,h);this._yScrollPosition=h;}};b.prototype.scrollXPosition=function(g){if(g!==0){c.scrollXTo(this,this._xScrollPosition,this._xScrollPosition+g);this._xScrollPosition+=g;}};b.prototype.scrollYPosition=function(g){if(g!==0){c.scrollYTo(this,this._yScrollPosition,this._yScrollPosition+g);this._yScrollPosition+=g;}};b.prototype.getClassName=function(){return("ScrollableGroup");};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ScrollableGroup=b;return b;});define("jsfw/gui/GUIObjects/Components/Layer",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/helpers/Util"],function(a,d,b){var c;if($N.gui.GUIObject.mode==="HTML"){c=$N.gui.ClippedGroup;}else{c=function(f,e){c.superConstructor.call(this,f);this._rootElement=this._docRef.createElementNS("http://www.ekioh.com/2007/ekioh","layer");this._rootElement.setAttributeNS("http://www.ekioh.com/2007/ekioh","layerType","hardware");this._innerElement=this._rootElement;if(e){e.addChild(this);}};$N.gui.Util.extend(c,$N.gui.AbstractComponent);c.prototype.setX=function(e){this._trueX=parseInt(e,10);this._x=Math.round(this._trueX*this.resolutionHorizontalFactor);this._rootElement.setAttribute("x",this._x);};c.prototype.setY=function(e){this._trueY=parseInt(e,10);this._y=Math.round(this._trueY*this.resolutionVerticalFactor);this._rootElement.setAttribute("y",this._y);};c.prototype.getClassName=function(){return("Layer");};}window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Layer=c;return c;});define("jsfw/gui/GUIObjects/Animations/AnimTransform",[],function(){function a(c,b){c=c||document;this._id="";this._animationEndCallback=null;this._rootElement=c.createElement("animateTransform");this._rootElement.setAttribute("attributeType","XML");this._rootElement.setAttribute("attributeName","transform");this._rootElement.setAttribute("begin","indefinite");this._rootElement.setAttribute("dur","250ms");this._rootElement.setAttribute("fill","freeze");this._rootElement.setAttribute("additive","replace");this._rootElement.setAttribute("repeatCount","1");this._rootElement.setAttribute("type","translate");if(b){b.addChild(this);}}a.prototype.setAnimationEndCallback=function(b){if(b===null){this._rootElement.removeEventListener("endEvent",this._animationEndCallback,false);this._animationEndCallback=null;}else{if(this._animationEndCallback){this._rootElement.removeEventListener("endEvent",this._animationEndCallback,false);}this._animationEndCallback=b;this._rootElement.addEventListener("endEvent",this._animationEndCallback,false);}};a.prototype.setAdditive=function(b){this._rootElement.setAttribute("additive",b);return this;};a.prototype.setBegin=function(b){this._rootElement.setAttribute("begin",b);};a.prototype.setAttributeName=function(b){this._rootElement.setAttribute("attributeName",b);};a.prototype.setType=function(b){this._rootElement.setAttribute("type",b);return this;};a.prototype.setTo=function(b){this._rootElement.setAttribute("to",b);};a.prototype.setFrom=function(b){this._rootElement.setAttribute("from",b);};a.prototype.setDuration=function(b){this._rootElement.setAttribute("dur",b);return this;};a.prototype.setValues=function(b){this._rootElement.setAttribute("values",b);};a.prototype.setFill=function(b){this._rootElement.setAttribute("fill",b);};a.prototype.setRepeatCount=function(b){this._rootElement.setAttribute("repeatCount",b);};a.prototype.setKeyTimes=function(b){this._rootElement.setAttribute("keyTimes",b);return this;};a.prototype.setKeySplines=function(b){this._rootElement.setAttribute("keySplines",b);return this;};a.prototype.setCalcMode=function(b){this._rootElement.setAttribute("calcMode",b);return this;};a.prototype.setId=function(b){this._id=b;this._rootElement.setAttribute("id",this._id);};a.prototype.animate=function(){this._rootElement.beginElement();};a.prototype.getId=function(){return this._id;};a.prototype.getRootSVGRef=function(){return this.getRootElement();};a.prototype.getRootElement=function(){return this._rootElement;};a.prototype.cancelAnimation=function(){this._rootElement.setAttribute("fill","remove");this._rootElement.endElement();};a.prototype.configure=function(c){var b;var d=null;for(d in c){if(c.hasOwnProperty(d)){b=this["set"+$N.gui.Util.upcaseFirstLetter(d)];if(b){b.call(this,c[d]);}else{throw ("AnimTransform configure - no setter method for attribute "+d);}}}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AnimTransform=a;return a;});define("jsfw/gui/GUIObjects/Animations/Animate",["jsfw/apps/core/Log"],function(b){function a(d,c){this._log=new $N.apps.core.Log("GUI","Animate");this._id="";this._rootElement=d.createElement("animate");this._rootElement.setAttribute("attributeType","auto");this._rootElement.setAttribute("attributeName","opacity");this._rootElement.setAttribute("begin","indefinite");this._rootElement.setAttribute("dur","125ms");this._rootElement.setAttribute("fill","freeze");if(c){c.addChild(this);}}a.prototype.setAnimationEndCallback=function(c){if(c===null){this._rootElement.removeEventListener("endEvent",this._animationEndCallback,false);this._animationEndCallback=null;}else{this._animationEndCallback=c;this._rootElement.addEventListener("endEvent",this._animationEndCallback,false);}return this;};a.prototype.setBegin=function(c){this._rootElement.setAttribute("begin",c);return this;};a.prototype.setFrom=function(c){this._rootElement.setAttribute("from",c);return this;};a.prototype.setTo=function(c){this._rootElement.setAttribute("to",c);return this;};a.prototype.cancelAnimation=function(){this._rootElement.setAttribute("fill","remove");this._rootElement.endElement();};a.prototype.setDuration=function(c){this._rootElement.setAttribute("dur",c);return this;};a.prototype.setKeySplines=function(c){this._rootElement.setAttribute("keySplines",c);return this;};a.prototype.setCalcMode=function(c){this._rootElement.setAttribute("calcMode",c);return this;};a.prototype.setAttributeName=function(c){this._rootElement.setAttribute("attributeName",c);return this;};a.prototype.setAttributeType=function(c){this._rootElement.setAttribute("attributeType",c);return this;};a.prototype.setKeyTimes=function(c){this._rootElement.setAttribute("keyTimes",c);return this;};a.prototype.setFill=function(c){this._rootElement.setAttribute("fill",c);return this;};a.prototype.setValues=function(c){this._rootElement.setAttribute("values",c);return this;};a.prototype.setRepeatCount=function(c){this._rootElement.setAttribute("repeatCount",c);return this;};a.prototype.setRepeatDur=function(c){this._rootElement.setAttribute("repeatDur",c);return this;};a.prototype.animate=function(){this._rootElement.beginElement();return this;};a.prototype.setId=function(c){this._id=c;this._rootElement.setAttribute("id",this._id);return this;};a.prototype.getId=function(){return this._id;};a.prototype.getRootSVGRef=function(){return this.getRootElement();};a.prototype.getRootElement=function(){return this._rootElement;};a.prototype.configure=function(d){var c="";var e;for(c in d){if(d.hasOwnProperty(c)){e="set"+c.substr(0,1).toUpperCase()+c.substr(1);if(!this[e]){}this[e](d[c]);}}return this;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Animate=a;return a;});define("jsfw/gui/GUIObjects/Animations/AnimateHTML",[],function(){function a(c,b){this._ANIMATIONS_PER_SECOND=20;this._guiObject=c;this._animationInterval=null;this._attribute=b;this._resetFunction=function(){};this._animID=a._ID_COUNTER++;}a._ID_COUNTER=0;a._animationQTO=null;a._animationQ={};a.QUEUE_DELAY=20;a.USE_CSS3=true;a.prototype._move=function(b,d,c){if(c){this._transform3D(b,d);}else{this._transform(b,d);}};a.prototype.setId=function(){};a.prototype._completeAnimation=function(b){clearInterval(this._animationInterval);this._animationInterval=null;b();this.animatedCallback();};a.prototype._calculateDuration=function(){var b;if(this._guiObject.getAnimationDuration().toLowerCase().indexOf("ms")!==-1){b=parseFloat(this._guiObject.getAnimationDuration());}else{b=parseFloat(this._guiObject.getAnimationDuration())*1000;}if(this._bounce){b/=2;}return b;};a.prototype._setupRepeatMoveAnimation=function(k,g,h,f,b,e,d){var c=this;this._repeat=e;this._bounce=d;if(e&&d){this.bounceDirection=1;this._repeatFunction=function(){if(c.bounceDirection===0){c._animatedMove(k,g,h,f,b);c.bounceDirection=1;}else{c._animatedMove(h,f,k,g,b);c.bounceDirection=0;}};}else{if(e){this._repeatFunction=function(){c._animatedMove(k,g,h,f,b);};}else{this._repeatFunction=null;}}this._resetFunction=function(){c._move(k,g,b);};};a.prototype._animatedCSSMove=function(k,f,h,e,b){var c=this,d=this._calculateDuration()+"ms",g=function(){c._guiObject.getRootElement().removeEventListener("webkitTransitionEnd",g,false);c._guiObject.getRootElement().removeEventListener("oTransitionEnd",g,false);c.animatedCallback();};if(a._animationQTO){clearTimeout(a._animationQTO);}this._guiObject.getRootElement().style["-webkit-transition-duration"]=null;this._guiObject.getRootElement().style.transitionDuration=null;this._move(k,f,b);a._animationQ[""+this._animID]=function(){c._guiObject.getRootElement().addEventListener("webkitTransitionEnd",g,false);c._guiObject.getRootElement().addEventListener("oTransitionEnd",g,false);c._guiObject.getRootElement().style["-webkit-transition-duration"]=d;c._guiObject.getRootElement().style.transitionDuration=d;c._move(h,e,b);};a._animationQTO=setTimeout(function(){for(var l in a._animationQ){if(a._animationQ.hasOwnProperty(l)){a._animationQ[l]();delete a._animationQ[l];}}},a.QUEUE_DELAY);};a.prototype._animatedMove=function(o,l,p,m,h){var f,n,e,c,d,b,g=this._calculateDuration(),k=this;if(a.USE_CSS3){this._animatedCSSMove(o,l,p,m,h);return;}if(this._animationInterval){this._completeAnimation(function(){k._move(o,l,h);});}b=Math.round(this._ANIMATIONS_PER_SECOND/(1000/g));b=b===0?1:b;f=(p-o)/b;n=(m-l)/b;e=o;c=l;d=0;this._animationInterval=setInterval(function(){if(d===b){k._completeAnimation(function(){k._move(p,m,h);});}else{e=parseFloat(e)+parseFloat(f);c=parseFloat(c)+parseFloat(n);k._move(e,c,h);}d++;},g/b);};a.prototype.animatedMove=function(h,f,g,e,b,d,c){this._setupRepeatMoveAnimation(h,f,g,e,b,d,c);this._animatedMove(h,f,g,e,b);};a.prototype.setDuration=function(b){if(b.toLowerCase().indexOf("ms")!==-1){this._duration=parseFloat(b);}else{this._duration=parseFloat(b)*1000;}};a.prototype._doCSSAnimation=function(f,e){var b=this,c=this._calculateDuration()+"ms",d=function(){b._guiObject.getRootElement().removeEventListener("webkitTransitionEnd",d,false);b._guiObject.getRootElement().removeEventListener("oTransitionEnd",d,false);b.animatedCallback();};if(a._animationQTO){clearTimeout(a._animationQTO);}this._guiObject.getRootElement().style["-webkit-transition-duration"]=null;this._guiObject.getRootElement().style.transitionDuration=null;this._animation(f);a._animationQ[""+this._animID]=function(){b._guiObject.getRootElement().addEventListener("webkitTransitionEnd",d,false);b._guiObject.getRootElement().addEventListener("oTransitionEnd",d,false);b._guiObject.getRootElement().style["-webkit-transition-duration"]=c;b._guiObject.getRootElement().style.transitionDuration=c;b._animation(e);};a._animationQTO=setTimeout(function(){for(var g in a._animationQ){if(a._animationQ.hasOwnProperty(g)){a._animationQ[g]();delete a._animationQ[g];}}},a.QUEUE_DELAY);};a.prototype._doAnimation=function(k,h){var b,g,d,f,e=this._calculateDuration(),c=this;if(a.USE_CSS3){this._doCSSAnimation(k,h);return;}if(this._animationInterval){this._completeAnimation(function(){c._animation(k);});}f=Math.round(this._ANIMATIONS_PER_SECOND/(1000/e));f=f===0?1:f;b=(h-k)/f;g=k;d=0;this._animationInterval=setInterval(function(){if(d===f){c._completeAnimation(function(){c._animation(h);});}else{g=parseFloat(g)+parseFloat(b);c._animation(g);}d++;},e/f);};a.prototype._setupRepeatAnimation=function(f,e,d,c){var b=this;this._repeat=d;this._bounce=c;if(d&&c){this.bounceDirection=1;this._repeatFunction=function(){if(b.bounceDirection===0){b._doAnimation(e,f);b.bounceDirection=1;}else{b._doAnimation(f,e);b.bounceDirection=0;}};}else{if(d){this._repeatFunction=function(){b._doAnimation(f,e);};}else{this._repeatFunction=null;}}this._resetFunction=function(){b._animation(f);};};a.prototype.animatedScale=function(f,e,d,c){var b=this;this._animation=function(g){b._updateWebkitTransform("scale",g);};this._setupRepeatAnimation(f,e,d,c);this._doAnimation(f,e);};a.prototype.animatedAttribute=function(f,e,d,c){var b=this;this._animation=function(g){b._guiObject.getRootElement().style[b._attribute]=g;};this._setupRepeatAnimation(f,e,d,c);this._doAnimation(f,e);};a.prototype.animatedCallback=function(){if(this._repeatFunction){this._repeatFunction();}if(this._animatedCallback){this._animatedCallback();}};a.prototype.setAnimationEndCallback=function(b){this._animatedCallback=b;};a.prototype._updateWebkitTransform=function(f,k){var h=["-webkit-transform","-o-transform"],d,e=[],b,c=[],g="";for(j=0;j<h.length;j++){d=this._guiObject.getRootElement().style[h[j]];if(d&&d!==""){if(d.indexOf(f)===-1){this._guiObject.getRootElement().style[h[j]]+=f+"("+k+")";}else{e=d.split(")");for(b=0;b<e.length;b++){c=e[b].split("(");e[b]={attribute:c[0].replace(/^\s+|\s+$/g,""),value:c[1]};if(e[b].attribute===f){e[b].value=k;}if(e[b].value){g+=e[b].attribute+"("+e[b].value+")";}}this._guiObject.getRootElement().style[h[j]]=g;}}else{this._guiObject.getRootElement().style[h[j]]=f+"("+k+")";}}};a.prototype._transform=function(b,c){this._guiObject.getRootElement().style.OTransform="translate("+b+"px,"+c+"px)";this._updateWebkitTransform("translate",b+"px,"+c+"px");};a.prototype._transform3D=function(b,c){this._guiObject.getRootElement().style.OTransform="translate("+b+"px,"+c+"px)";this._updateWebkitTransform("translate3d",b+"px,"+c+"px,0px");};a.prototype.isRepeat=function(){return this._repeat||false;};a.prototype.restartAnimation=function(){this._repeatFunction();};a.prototype.cancelAnimation=function(){var b=this;if(this._animationInterval){clearInterval(this._animationInterval);this._animationInterval=null;this._resetFunction();this._guiObject.move(this._guiObject.getX(),this._guiObject.getY());}else{if(a.USE_CSS3){delete a._animationQ[this._animID];this._guiObject.getRootElement().style["-webkit-transition-duration"]=null;this._guiObject.getRootElement().style.transitionDuration=null;this._resetFunction();}}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AnimateHTML=a;return a;});define("jsfw/gui/GUIObjects/Controls/ProgressBar",["jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/SVGlink","jsfw/gui/GUIObjects/GUIObject","jsfw/gui/helpers/Util",],function(b,e,c,d){function a(g,f){a.superConstructor.call(this,g);this._outerBox=new $N.gui.Container(this._docRef);this._progressBox=new $N.gui.Container(this._docRef,this._outerBox);this._head=new $N.gui.SVGlink(this._docRef,this._outerBox);this._rootElement=this._outerBox.getRootElement();if(f){f.addChild(this._outerBox);}this._outerBox.configure({x:0,y:0,cssClass:"progressOuter"});this._progressBox.configure({x:0,y:0,width:0,cssClass:"progressInner"});this._minimum=0;this._maximum=0;this._progress=0;this._percentage=0;this._headRef=null;this._orientation=a.HORIZONTAL;}$N.gui.Util.extend(a,$N.gui.GUIObject);a.HORIZONTAL="horizontal";a.VERTICAL="vertical";a.prototype._getPosition=function(f){var g=(this._orientation===a.VERTICAL)?this.getHeight():this.getWidth();if(f<this._minimum){f=this._minimum;}if(f>this._maximum){f=this._maximum;}this._percentage=Math.ceil(((f-this._minimum)/(this._maximum-this._minimum))*100);return Math.ceil(this._percentage*g/100);};a.prototype._positionHead=function(){if(this._orientation===a.VERTICAL){this._head.setX(this._outerBox.getTrueWidth()/2);}else{this._head.setY(this._outerBox.getTrueHeight()/2);}};a.prototype.init=function(g,f){if(g!==undefined&&f!==undefined){this.setMinimumValue(g);this.setMaximumValue(f);}else{throw"Exception: progressbar minimum and maximum values are not valid";}};a.prototype.initialise=function(g,f){this.init(g,f);};a.prototype.setOrientation=function(f){this._orientation=f;return this;};a.prototype.setMinimumValue=function(f){this._minimum=f;return this;};a.prototype.setMaximumValue=function(f){this._maximum=f;return this;};a.prototype.getWidth=function(){return this._outerBox.getTrueWidth();};a.prototype.getHeight=function(){return this._outerBox.getTrueHeight();};a.prototype.setWidth=function(f){this._outerBox.setWidth(f);this._positionHead();return this;};a.prototype.setHeight=function(f){this._outerBox.setHeight(f);this._positionHead();return this;};a.prototype.setHead=function(f){this._headRef=f;this._head.setHref(f);this._positionHead();return this;};a.prototype.setProgress=function(f,k){var g=k?this._getPosition(parseInt(k,10)):0;var h=this._getPosition(parseInt(f,10));this._progress=Math.max(this._minimum,f);this._progress=Math.min(this._maximum,f);if(this._orientation===a.VERTICAL){this._progressBox.setWidth(this.getWidth());this._progressBox.setY(g);this._progressBox.setHeight(h-g);if(this._headRef){this._head.setY(h);}}else{this._progressBox.setHeight(this.getHeight());this._progressBox.setX(g);this._progressBox.setWidth(h-g);if(this._headRef){this._head.setX(h);}}return this;};a.prototype.getProgressPercent=function(){return this._percentage||0;};a.prototype.getProgress=function(){return this._progress;};a.prototype.increment=function(g){var f=this.getProgress();g=g||1;this.setProgress(f+g);};a.prototype.decrement=function(g){var f=this.getProgress();g=g||1;this.setProgress(f-g);};a.prototype.setInnerCssClass=function(f){this._progressBox.setCssClass(f);};a.prototype.setOuterCssClass=function(f){this._outerBox.setCssClass(f);};a.prototype.setInnerCssStyle=function(f){this._progressBox.setCssStyle(f);};a.prototype.setRounding=function(f){this._outerBox.setRounding(f);this._progressBox.setRounding(f);return this;};a.prototype.toString=function(){return"ProgressBar";};a.prototype.getClassName=function(){return"ProgressBar";};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ProgressBar=a;return a;});define("jsfw/gui/GUIObjects/Controls/ContentProgressBar",["jsfw/gui/GUIObjects/Controls/ProgressBar","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/GUIObjects/Components/SVGlink","jsfw/gui/GUIObjects/Components/Image","jsfw/gui/helpers/Util",],function(a,e,f,b,d){function c(h,g){c.superConstructor.call(this,h,g);this._startLabel=new $N.gui.Label(this._docRef,this._outerBox);this._endLabel=new $N.gui.Label(this._docRef,this._outerBox);this._positionMarker=new $N.gui.SVGlink(this._docRef,this._outerBox);this._startLabelPadding=5;this._endLabelPadding=12;this._DEFAULT_Y_OFFSET=-3;this._startLabel.configure({x:-this._startLabelPadding,y:13,cssClass:"progressTextStart"});this._endLabel.configure({y:13,cssClass:"progressTextEnd"});this._positionMarker.configure({y:this._DEFAULT_Y_OFFSET});}$N.gui.Util.extend(c,$N.gui.ProgressBar);c.prototype.setWidth=function(g){c.superClass.setWidth.call(this,g);this._endLabel.setX(parseInt(g,10)+this._endLabelPadding);this.setMarkerPosition(this._getPosition(this.getProgress()));};c.prototype.setHeight=function(g){c.superClass.setHeight.call(this,g);this._startLabel.setY(g-3);this._endLabel.setY(g-3);};c.prototype.setStartLabel=function(g){this._startLabel.setText(g);};c.prototype.setEndLabel=function(g){this._endLabel.setText(g);};c.prototype.setVerticalLabelPosition=function(g){this._labelPaddingY=g;this._startLabel.setY(this._labelPaddingY);this._endLabel.setY(this._labelPaddingY);};c.prototype.setEndLabelPadding=function(g){this._endLabelPadding=g;this._endLabel.setX(parseInt(this.getWidth(),10)+this._endLabelPadding);};c.prototype.setStartLabelPadding=function(g){this._startLabelPadding=g;this._startLabel.setX(-this._startLabelPadding);};c.prototype.setMarkerPosition=function(g){this._positionMarker.setX(this._getPosition(g));};c.prototype.hidePositionMarker=function(){this._positionMarker.hide();};c.prototype.showPositionMarker=function(){this._positionMarker.show();};c.prototype.setPlayHead=function(g){if(g&&g.indexOf("svg")>-1){this._positionMarker.setHref(g);}else{this._positionMarker.destroy();this._positionMarker=new $N.gui.Image(this._docRef,this._outerBox);this._positionMarker.configure({y:this._DEFAULT_Y_OFFSET});this._positionMarker.setHref(g);}};c.prototype.toString=function(){return"ContentProgressBar";};c.prototype.getClassName=function(){return"ContentProgressBar";};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ContentProgressBar=c;return c;});define("jsfw/gui/GUIObjects/Controls/List/customisable/AbstractListItem",["jsfw/gui/Logic/List/List","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/GUIObject"],function(b,e,d){function a(f){a.superConstructor.call(this,f);this._movementPositions=new $N.gui.BasicList();this._movementPositions.setWrapAround(true);this._opacityValues=null;this._width=0;this._height=0;this._dataMapper={getIcon:function(g){return g.url;},getTitle:function(g){return g.title;}};}$N.gui.Util.extend(a,$N.gui.GUIObject);var c=a.prototype;c.getMovementPositions=function(){return this._movementPositions.getData();};c.setMovementPositions=function(f){if(typeof f==="string"){f=this._convertStringToPoints(f);}this._movementPositions.setData(f);return this;};c.setOpacityValues=function(f){if(typeof f==="string"){f=f.split(",");}this._opacityValues=new $N.gui.BasicList();this._opacityValues.setWrapAround(true);this._opacityValues.setData(f);return this;};c.getOpacityValues=function(){return this._opacityValues.getData();};c.setScaleValues=function(f){if(typeof f==="string"){f=f.split(",");}this._scaleValues=new $N.gui.BasicList();this._scaleValues.setWrapAround(true);this._scaleValues.setData(f);return this;};c.getScaleValues=function(){return this._scaleValues.getData();};c.getMovementPosition=function(){return this._movementPositions.getActualSelectedRowIndex();};c.setMovementPosition=function(f){if(this._movementPositions.getSize===0){throw ("AbstractListItem - setMovementPosition: Cannot set position in an empty list");}var g;this._movementPositions.selectRowAtIndex(f);var h=this._movementPositions.getSelectedItem();this.setX(h.x);this.setY(h.y);if(this._opacityValues){g=this._opacityValues.getRowAtIndex(f);this.setOpacity(g);}if(this._scaleValues){this.setScale(this._scaleValues.getRowAtIndex(f));}return this;};c.getWidth=function(){return this._width;};c.setWidth=function(f){throw ("AbstractListItem - setWidth: Illegal operation on an abstract method");};c.getHeight=function(){return this._height;};c.setHeight=function(f){throw ("AbstractListItem - setHeight: Illegal operation on an abstract method");};c.getDataMapper=function(){return this._dataMapper;};c.setDataMapper=function(f){this._dataMapper=f;return this;};c.moveToNext=function(){var f=this._movementPositions.isSelectedAtLast();this._movementPositions.selectNext();var g=this._movementPositions.getSelectedItem();this._moveItem(g,f);};c.moveToPrevious=function(){var f=this._movementPositions.isSelectedAtFirst();this._movementPositions.selectPrevious();var g=this._movementPositions.getSelectedItem();this._moveItem(g,f);};c.highlight=function(){throw ("AbstractListItem - highlight: Illegal operation on an abstract method");};c.unHighlight=function(){throw ("AbstractListItem - unHighlight: Illegal operation on an abstract method");};c.update=function(g,f){throw ("AbstractListItem - update: Illegal operation on an abstract method");};c.setNewMovementPositions=function(g,k){var f=this._movementPositions.getActualSelectedRowIndex();if(k){this.setMovementPositions(g);this._movementPositions.selectRowAtIndex(f);var h=this._movementPositions.getSelectedItem();this._moveItem(h);}else{this.setMovementPositions(g);this._movementPositions.selectRowAtIndex(f);}};c._moveItem=function(h,g){var f=this._opacityValues?this._opacityValues.getRowAtIndex(this.getMovementPosition()):null;var k=this._scaleValues?this._scaleValues.getRowAtIndex(this.getMovementPosition()):null;if(g){this.move(h.x,h.y);if(k!==null){this.setScale(k);}if(f!==null){this.setOpacity(f);}}else{this.doMove(h.x,h.y);if(k!==null){this.doScale(k);}if(f!==null){this.doFade(f);}}};c._convertStringToPoints=function(g){var h=g.split(";");var f;var l=[];var k=0;for(k=0;k<h.length;k++){f=h[k].split(",");l.push({x:f[0],y:f[1]});}return l;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AbstractListItem=a;return a;});(function(b){function a(c){a.superConstructor.call(this,c);this._data=new b.gui.BasicList();this._items=null;this._nextItemDistance=1;this._itemTemplate=null;this._itemConfig={};this._dataMapper=null;this._itemSelectedCallback=function(){};this._itemHighlightedCallback=function(){};this._itemHighlightedImmediateCallback=function(){};this._initialised=false;this._enabled=true;this._allMovementPositions=[];this._orientation=a.consts.ORIENTAION_VERTICAL;this._KEY_RELEASE_SUFFIX="_rel";}b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.init=function(){var e;if(this._initialised){return;}if(!this._itemConfig.movementPositions){throw ("AbstractCustomisableList - initialise: No positions supplied in config");}if(!this._itemTemplate){throw ("AbstractCustomisableList - initialise: No list item template provided");}if(typeof this._itemConfig.movementPositions==="string"){e=this._itemConfig.movementPositions.split(";").length;}else{e=this._itemConfig.movementPositions.length;}var c=[];var d;for(d=0;d<e;d++){c.push(new this._itemTemplate(this._docRef));this._itemConfig.movementPosition=d+1;c[d].configure(this._itemConfig);if(this._dataMapper){c[d].setDataMapper(this._dataMapper);}this._rootElement.appendChild(c[d].getRootElement());}this._items.setData(c);this._initialised=true;};a.prototype.initialise=function(){this.init();};a.prototype.getData=function(){return this._data.getData();};a.prototype.appendData=function(c){this._data.appendData(c);};a.prototype.setData=function(c){this._data.setData(c);return this;};a.prototype.updateDataAtIndex=function(c,d){this._data.insertDataAtIndex(c,d);this.displayData();};a.prototype.refreshDataAtIndex=function(c,d){this._data.insertDataAtIndex(c,d);};a.prototype.selectItemAtIndex=function(c,d){this._data.selectRowAtIndex(c);if(d){this.displayData();}};a.prototype.getDataMapper=function(){return this._dataMapper;};a.prototype.setDataMapper=function(c){this._dataMapper=c;var e=0;var d;if(this._initialised){e=this._items.getSize();for(d=1;d<=e;d++){this._items.getRowAtIndex(d).setDataMapper(this._dataMapper);}}return this;};a.prototype.getItemTemplate=function(){return this._itemTemplate;};a.prototype.setItemTemplate=function(c){if(typeof c==="string"){this._itemTemplate=window.$N.gui[c]||window[c];}else{this._itemTemplate=c;}return this;};a.prototype.getItemConfig=function(){return this._itemConfig;};a.prototype.setItemConfig=function(c){this._itemConfig=c;return this;};a.prototype.getSelectedItem=function(){return this._data.getSelectedItem();};a.prototype.getSelectedItemIndex=function(){return this._data.getActualSelectedRowIndex();};a.prototype.setItemSelectedCallback=function(c){this._itemSelectedCallback=c;return this;};a.prototype.setItemHighlightedCallback=function(c){this._itemHighlightedCallback=c;return this;};a.prototype.setItemHighlightedImmediateCallback=function(c){this._itemHighlightedImmediateCallback=c;return this;};a.prototype.select=function(){var c=this._data.getSelectedItem();if(this._itemHighlightedImmediateCallback){this._itemHighlightedImmediateCallback(c);}this._itemHighlightedCallback(c);};a.prototype.selectPrevious=function(){var f=this._items.getLastItem();var g=this._items.getSize();var e;var d;if(!this._data.isSelectedAtFirst()||this._data.getWrapAround()){this._items.getSelectedItem().unHighlight();var c=this._items.selectPrevious();this._items.getSelectedItem().highlight(false,this._getHighlightParameter());if(c){e=this._data.getRowAtIndex(this._data.getActualSelectedRowIndex()-(this._nextItemDistance+1));if(e){f.update(e,this._getUpdateParameter());if(!f.isVisible()){f.show();}}else{f.hide();}this._data.selectPrevious();for(d=1;d<=g;d++){this._items.getRowAtIndex(d).moveToNext();}}this._handleItemHighlighted(this._data.getSelectedItem());return true;}return false;};a.prototype.selectNext=function(){var g=this._items.getFirstItem();var f=this._items.getSize();var e;var d;if(!this._data.isSelectedAtLast()||this._data.getWrapAround()){this._items.getSelectedItem().unHighlight();var c=this._items.selectNext();this._items.getSelectedItem().highlight(false,this._getHighlightParameter());if(c){e=this._data.getRowAtIndex(this._data.getActualSelectedRowIndex()+(this._nextItemDistance+1));if(e){g.update(e,this._getUpdateParameter());if(!g.isVisible()){g.show();}}else{g.hide();}this._data.selectNext();for(d=1;d<=f;d++){this._items.getRowAtIndex(d).moveToPrevious();}}this._handleItemHighlighted(this._data.getSelectedItem());return true;}return false;};a.prototype.isSelectedAtFirst=function(){return this._data.isSelectedAtFirst();};a.prototype.isSelectedAtLast=function(){return this._data.isSelectedAtLast();};a.prototype.getWrapAround=function(){return this._data.getWrapAround();};a.prototype.enable=function(){var c,e,d;c=this._items.getData();for(d=0;d<c.length;d++){e=c[d];if(e.enable){e.enable();}}this._enabled=true;};a.prototype.disable=function(){var c,e,d;c=this._items.getData();for(d=0;d<c.length;d++){e=c[d];if(e.disable){e.disable();}}this._enabled=false;};a.prototype.setWrapAround=function(c){if(typeof c==="string"){c=(c==="true")?true:false;}this._data.setWrapAround(c);};a.prototype.isEmpty=function(){return this._data.isEmpty();};a.prototype.getSize=function(){return this._data.getSize();};a.prototype.displayData=function(){throw ("AbstractCustomisableList - displayData: Illegal operation on an abstract method");};a.prototype.setMovementPositions=function(c){this._allMovementPositions=c;};a.prototype.setAlternativePosition=function(d,f){var c=this._items.returnViewableList(),e;for(e=0;e<c.length;e++){c[e].setNewMovementPositions(this._allMovementPositions[d],f);}};a.prototype.setScaleValues=function(e){var c=this._items.returnViewableList(),d;for(d=0;d<c.length;d++){c[d].setScaleValues(e);}};a.prototype.setOpacityValues=function(e){var c=this._items.returnViewableList(),d;for(d=0;d<c.length;d++){c[d].setOpacityValues(e);}};a.prototype._handleItemHighlighted=function(d,c){if(this._itemHighlightedImmediateCallback){this._itemHighlightedImmediateCallback(d);}if(c){if(this._itemHighlightedCallback){this._itemHighlightedCallback(d);}}};a.prototype._getUpdateParameter=function(){return null;};a.prototype._getHighlightParameter=function(){return null;};a.prototype.setOrientation=function(c){var d=b.gui.FrameworkCore.getKeys();if(c===a.consts.ORIENTAION_VERTICAL||c==="1"){this._nextKey=d.KEY_DOWN;this._previousKey=d.KEY_UP;this._nextKeyRelease=d.KEY_DOWN+this._KEY_RELEASE_SUFFIX;this._previousKeyRelease=d.KEY_UP+this._KEY_RELEASE_SUFFIX;}else{if(c===a.consts.ORIENTAION_HORIZONTAL||c==="2"){this._nextKey=d.KEY_RIGHT;this._previousKey=d.KEY_LEFT;this._nextKeyRelease=d.KEY_RIGHT+this._KEY_RELEASE_SUFFIX;this._previousKeyRelease=d.KEY_LEFT+this._KEY_RELEASE_SUFFIX;}}this._orientation=c;};a.prototype.getOrientation=function(){return this._orientation;};a.prototype.setCssClass=function(c){this._cssClass=c;this._rootElement.setAttribute("class",this._cssClass);if(b.gui.PresentationManager){this.configure(b.gui.PresentationManager.getPresentation(this._cssClass));}};a.prototype.keyHandler=function(c){var d=b.gui.FrameworkCore.getKeys();switch(c){case this._previousKey:return this.selectPrevious();case this._nextKey:return this.selectNext();case this._previousKeyRelease:this._itemHighlightedCallback(this._data.getSelectedItem());return true;case this._nextKeyRelease:this._itemHighlightedCallback(this._data.getSelectedItem());return true;case d.KEY_OK:case d.KEY_RIGHT:this._itemSelectedCallback(this._data.getSelectedItem());return true;}return false;};a.prototype.getItems=function(){return this._items;};a.consts={ORIENTAION_VERTICAL:"vertical",ORIENTAION_HORIZONTAL:"horizontal"};b.gui=b.gui||{};b.gui.AbstractCustomisableList=a;}($N||{}));define("jsfw/gui/GUIObjects/Controls/List/customisable/CentralPivotList",["jsfw/gui/Logic/List/List","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Components/Group","jsfw/gui/GUIObjects/Controls/List/customisable/AbstractCustomisableList"],function(c,f,b,a){var e=function(h,g){e.superConstructor.call(this,h);this._data.setWrapAround(true);this._items=new $N.gui.CentralFocusList();this._container=new $N.gui.Group(this._docRef);this._rootElement=this._container.getRootElement();this.setOrientation(e.consts.ORIENTAION_VERTICAL);if(g){g.addChild(this);}};$N.gui.Util.extend(e,$N.gui.AbstractCustomisableList);var d=e.prototype;d.init=function(){if(!this._itemConfig.movementPositions){throw ("CentralPivotList - init: No positions supplied in config");}e.superClass.init.call(this);if(typeof(this._itemConfig.movementPositions)==="string"){this._nextItemDistance=(this._itemConfig.movementPositions.split(";").length-1)/2;}else{this._nextItemDistance=(this._itemConfig.movementPositions.length-1)/2;}};d.initialise=function(){this.init();};d.displayData=function(){var l=0;var h=this._items.returnViewableList();var n=this._data.getActualSelectedRowIndex()-this._nextItemDistance;var g=this._data.getActualSelectedRowIndex()+this._nextItemDistance;var m;var k;for(k=n;k<=g;k++){m=this._data.getRowAtIndex(k);if(m){h[l].update(m,this._getUpdateParameter());if(!h[l].isVisible()){h[l].show();}}else{h[l].hide();}l++;}this._items.getSelectedItem().highlight(true,this._getHighlightParameter());};e.consts=$N.gui.AbstractCustomisableList.consts;window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.CentralPivotList=e;return e;});define("jsfw/gui/GUIObjects/Controls/List/customisable/PivotList",["jsfw/gui/Logic/List/List","jsfw/gui/GUIObjects/Components/Group","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/List/customisable/AbstractCustomisableList"],function(c,b,f,a){var e=function(h,g){e.superConstructor.call(this,h);this._data.setWrapAround(true);this._items=new $N.gui.FocusList();this._container=new $N.gui.Group(this._docRef);this._rootElement=this._container.getRootElement();this.setOrientation(e.consts.ORIENTAION_VERTICAL);this.setFocusPosition(1);this._isFocusAtTop=false;if(g){g.addChild(this);}};$N.gui.Util.extend(e,$N.gui.AbstractCustomisableList);var d=e.prototype;d.setFocusPosition=function(g){this._focusPosition=parseInt(g,10);this._items.setFocusPosition(this._focusPosition);};d.getFocusPosition=function(){return this._focusPosition;};d.setFocusAtTop=function(g){this._isFocusAtTop=(g===true||g==="true");};d.displayData=function(){var l=0,h=this._items.returnViewableList(),o=this._data.getActualSelectedRowIndex()-this._focusPosition,g=o+this._items.getVisibleRows()-1;var n,k,m;for(k=o;k<=g;k++){n=this._data.getRowAtIndex(k);m=h[l];if(n){m.update(n,this._getUpdateParameter());if(!m.isVisible()){m.show();}}else{if(m.isVisible()){m.hide();}}l++;}this._items.getSelectedItem().highlight(true,this._getHighlightParameter());if(this._isFocusAtTop){this._reorderDOMNodes();}};d.selectPrevious=function(){var l=this._items.getLastItem(),m=this._items.getSize();var h,k,g;if(!this._data.isSelectedAtFirst()||this._data.getWrapAround()){this._items.getSelectedItem().unHighlight();g=this._items.selectPrevious();this._items.getSelectedItem().highlight(false,this._getHighlightParameter());if(this._isFocusAtTop){this._reorderDOMNodes();}if(g){k=this._data.getRowAtIndex(this._data.getActualSelectedRowIndex()-(this._focusPosition+1));if(k){l.update(k,this._getUpdateParameter());if(!l.isVisible()){l.show();}}else{l.hide();}this._data.selectPrevious();for(h=1;h<=m;h++){this._items.getRowAtIndex(h).moveToNext();}}this._handleItemHighlighted(this._data.getSelectedItem());return true;}return false;};d.selectNext=function(){var m=this._items.getFirstItem(),l=this._items.getSize();var h,k,g;if(!this._data.isSelectedAtLast()||this._data.getWrapAround()){this._items.getSelectedItem().unHighlight();g=this._items.selectNext();this._items.getSelectedItem().highlight(false,this._getHighlightParameter());if(this._isFocusAtTop){this._reorderDOMNodes();}if(g){k=this._data.getRowAtIndex(this._data.getActualSelectedRowIndex()+(this._items.getVisibleRows()-this._focusPosition));if(k){m.update(k,this._getUpdateParameter());if(!m.isVisible()){m.show();}}else{m.hide();}this._data.selectNext();for(h=1;h<=l;h++){this._items.getRowAtIndex(h).moveToPrevious();}}this._handleItemHighlighted(this._data.getSelectedItem());return true;}return false;};d._reorderDOMNodes=function(){var g=this._items.getSelectedItem();if(!g){return;}g.bringToFront();};e.consts=$N.gui.AbstractCustomisableList.consts;window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.PivotList=e;return e;});define("jsfw/gui/GUIObjects/Controls/MultiLineTextBox",["jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/TextArea","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/GUIObject"],function(a,e,d,c){function b(g,f){b.superConstructor.call(this,g);this._container=new $N.gui.Container(g);this._textArea=new $N.gui.TextArea(g,this._container);this._rootElement=this._container.getRootElement();this._width=0;this._height=0;this._container.setCssClass("multiline_textbox_bg");this._container.setRounding(16);this._textArea.setX(20);this._textArea.setY(20);this._textArea.setCssClass("multiline_textbox_text");if(f){f.addChild(this);}}$N.gui.Util.extend(b,$N.gui.GUIObject);b.prototype.setContainerCssStyle=function(f){this._container.setCssStyle(f);};b.prototype.setContainerCssClass=function(f){this._container.setCssClass(f);};b.prototype.setWidth=function(f){this._width=f;this._container.setWidth(this._width);this._textArea.setWidth(this._width-40);};b.prototype.setHeight=function(f){this._height=f;this._container.setHeight(this._height);this._textArea.setHeight(this._height-40);};b.prototype.setText=function(f){this._textArea.setText(f);};b.prototype.setFontSize=function(f){this._textArea.setFontSize(f);};b.prototype.setStylingEscape=function(f){this._textArea.setStylingEscape(f);};b.prototype.getWidth=function(){return this._width;};b.prototype.getHeight=function(){return this._height;};b.prototype.getText=function(){return this._textArea.getText();};b.prototype.getFontSize=function(){return this._textArea.getFontSize();};b.prototype.getClassName=function(){return"MultiLineTextBox";};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.MultiLineTextBox=b;return b;});var $N=$N||{};$N.gui=$N.gui||{};$N.gui.FocusList=function(b){var a={};$N.gui.CyclicList.call(this,b,a);this.getFirstItem=function(){return this.getRowAtIndex(a.firstVisibleRowIndex);};this.getLastItem=function(){return this.getRowAtIndex(a.lastVisibleRowIndex);};this.setData=function(c){this.setVisibleRows(c.length);a.lastRow=c.length;a.listItems=c;a.firstVisibleRowIndex=1;a.lastVisibleRowIndex=this.getVisibleRows();};this.setFocusPosition=function(c){a.viewSelectedRowIndex=c+1;a.actualSelectedRowIndex=c+1;};this.getFocusPosition=function(){return a.viewSelectedRowIndex;};this.selectNext=function(){if(this.isSelectedAtLast()){a.actualSelectedRowIndex=1;}else{a.actualSelectedRowIndex++;}this.scrollDown();return true;};this.selectPrevious=function(){if(this.isSelectedAtFirst()){a.actualSelectedRowIndex=a.lastRow;}else{a.actualSelectedRowIndex--;}this.scrollUp();return true;};};$N.gui.CentralFocusList=function(b){var a={};$N.gui.CyclicList.call(this,b,a);this.getFirstItem=function(){return this.getRowAtIndex(a.firstVisibleRowIndex);};this.getLastItem=function(){return this.getRowAtIndex(a.lastVisibleRowIndex);};this.setData=function(c){if(c.length%2===0){throw ("CentralFocusList - setData: Cannot have a central focus list with an even number of items");}a.actualSelectedRowIndex=parseInt((c.length+1)/2,10);this.setVisibleRows(c.length);a.lastRow=c.length;a.listItems=c;a.firstVisibleRowIndex=1;a.lastVisibleRowIndex=this.getVisibleRows();a.viewSelectedRowIndex=parseInt((c.length+1)/2,10);};this.selectNext=function(){if(this.isSelectedAtLast()){a.actualSelectedRowIndex=1;}else{a.actualSelectedRowIndex++;}this.scrollDown();return true;};this.selectPrevious=function(){if(this.isSelectedAtFirst()){a.actualSelectedRowIndex=a.lastRow;}else{a.actualSelectedRowIndex--;}this.scrollUp();return true;};};$N.gui.TimedEventList=function(c){var b={};$N.gui.BasicList.call(this,c,b);var a={getStartTime:function(d){return d.startTime;},getEndTime:function(d){return d.endTime;}};this.setDataMapper=function(d){if(typeof d==="function"){a=new d();}else{a=d;}};this.selectFirstItem=function(){this.selectItemAtTime(this.getRowAtIndex(1).startTime);};this.selectLastItem=function(){this.selectRowAtIndex(this.getSize());};this.getSelectedEventStartTime=function(){return a.getStartTime(this.getSelectedItem());};this.getSelectedEventEndTime=function(){return a.getEndTime(this.getSelectedItem());};this.selectItemAtTime=function(h){var g;var f=this.getSize();var e=1;var d=new Date().getTime();while(e<f){g=this.getRowAtIndex(e);if(g.endTime>h&&g.endTime>d){break;}else{e++;}}this.selectRowAtIndex(e);};this.selectPrevious=function(){if(!this.isSelectedAtFirst()&&!this.isSelectedAtCurrentTime()){b.actualSelectedRowIndex--;}};this.selectItemAtCurrentTime=function(){this.selectItemAtTime(new Date().getTime());};this.isSelectedAtCurrentTime=function(){var d=new Date().getTime();return(this.getSelectedEventStartTime()<=d)&&(this.getSelectedEventEndTime()>d);};this.isSelectedExpired=function(){var d=new Date().getTime();return(this.getSelectedEventEndTime()<=d);};this.getExpiredEvents=function(){var g=new Date().getTime();var e=[];var f;var h=this.getSize();var d;for(d=1;d<=h;d++){f=this.getRowAtIndex(d);if(a.getEndTime(f)<=g){e.push(f);}else{break;}}return e;};this.getCurrentEvents=function(){var f=new Date().getTime();var g=[];var e;var h=this.getSize();var d;for(d=1;d<=h;d++){e=this.getRowAtIndex(d);if(a.getStartTime(e)<f&&a.getEndTime(e)>f){g.push(e);break;}}return g;};};$N.gui.PagingList=function(c,b){var b=b||{};var a={};$N.gui.StandardList.call(this,c,b);this.selectRowAtIndex=function(d){if(b.lastRow<=this.getVisibleRows()){b.viewSelectedRowIndex=d;}else{b.viewSelectedRowIndex=d%this.getVisibleRows();b.viewSelectedRowIndex=b.viewSelectedRowIndex===0?this.getVisibleRows():b.viewSelectedRowIndex;b.firstVisibleRowIndex=(d-b.viewSelectedRowIndex)+1;b.lastVisibleRowIndex=b.firstVisibleRowIndex+this.getVisibleRows()-1;if(b.lastVisibleRowIndex>b.lastRow){b.lastVisibleRowIndex=b.lastRow;}}b.actualSelectedRowIndex=d;};this.scrollDown=function(){this.scrollDownBy(this.getVisibleRows());};this.scrollUp=function(){this.scrollUpBy(this.getVisibleRows());};this.scrollUpBy=function(d){var e=(b.lastVisibleRowIndex-b.firstVisibleRowIndex)+1;b.firstVisibleRowIndex-=d;if(d<b.actualSelectedRowIndex){if(d>e){b.lastVisibleRowIndex-=e;}else{b.lastVisibleRowIndex-=d;}}else{b.lastVisibleRowIndex=this.getVisibleRows();}b.viewSelectedRowIndex=this.getVisibleRows();};this.scrollDownBy=function(d){var e=b.lastRow-b.lastVisibleRowIndex;b.firstVisibleRowIndex+=d;if(d<e){b.lastVisibleRowIndex+=d;}else{b.lastVisibleRowIndex=b.lastRow;}b.viewSelectedRowIndex=1;};this.pageUp=function(){if(this.isPaged()){if(this.getWrapAround()&&this.isAtFirstPage()){this.selectRowAtIndex(Math.min(b.lastRow,b.lastRow-this.getVisibleRows()-b.actualSelectedRowIndex));return true;}if(!this.isAtFirstPage()){this.selectRowAtIndex(b.actualSelectedRowIndex-this.getVisibleRows());return true;}}return false;};this.pageDown=function(){if(this.isPaged()){if(this.getWrapAround()&&this.isAtLastPage()){this.selectRowAtIndex(b.viewSelectedRowIndex);return true;}if(!this.isAtLastPage()){this.selectRowAtIndex(Math.min(b.actualSelectedRowIndex+this.getVisibleRows(),b.lastRow));return true;}}return false;};this.isAtFirstPage=function(){return(b.firstVisibleRowIndex===1);};this.isAtLastPage=function(){return(b.lastVisibleRowIndex===this.getSize());};a.selectNext=this.selectNext;this.selectNext=function(){if(this.getWrapAround()&&this.isSelectedAtLast()){this.selectRowAtIndex(1);return true;}return a.selectNext.call(this);};a.selectPrevious=this.selectPrevious;this.selectPrevious=function(){if(this.getWrapAround()&&this.isSelectedAtFirst()){this.selectRowAtIndex(b.lastRow);return true;}return a.selectPrevious.call(this);};};$N.gui.CyclicPagingList=function(d,c){c=c||{};var b={},a=1;$N.gui.PagingList.call(this,d,c);b.selectRowAtIndex=this.selectRowAtIndex;this.selectRowAtIndex=function(e){if(!this.getWrapAround()){return b.selectRowAtIndex.call(this,e);}c.actualSelectedRowIndex=e;if(c.lastRow<=this.getVisibleRows()){c.viewSelectedRowIndex=c.actualSelectedRowIndex;return;}c.firstVisibleRowIndex=c.actualSelectedRowIndex+a-c.viewSelectedRowIndex;c.lastVisibleRowIndex=c.firstVisibleRowIndex-a+this.getVisibleRows();if(c.firstVisibleRowIndex<a){c.firstVisibleRowIndex=c.firstVisibleRowIndex+c.lastRow;}if(c.lastVisibleRowIndex>c.lastRow){c.lastVisibleRowIndex=c.lastVisibleRowIndex-c.lastRow;}};this.pageUp=function(){var e;if(this.isPaged()){e=c.actualSelectedRowIndex-this.getVisibleRows();if(e<a){e=this.getWrapAround()?e+c.lastRow:a;}this.selectRowAtIndex(e);return true;}return false;};this.pageDown=function(){var e;if(this.isPaged()){e=c.actualSelectedRowIndex+this.getVisibleRows();if(e>c.lastRow){e=this.getWrapAround()?e-c.lastRow:c.lastRow;}this.selectRowAtIndex(e);return true;}return false;};b.scrollDownBy=this.scrollDownBy;this.scrollDownBy=function(e){var g;var f;if(this.getWrapAround()){g=(c.firstVisibleRowIndex+e)%c.lastRow;f=(c.lastVisibleRowIndex+e)%c.lastRow;c.firstVisibleRowIndex=g<=0?g+c.lastRow:g;c.lastVisibleRowIndex=f<=0?f+c.lastRow:f;c.viewSelectedRowIndex=1;}else{b.scrollDownBy.call(this,e);}};b.scrollUpBy=this.scrollUpBy;this.scrollUpBy=function(e){var g;var f;if(this.getWrapAround()){g=(c.firstVisibleRowIndex-e)%c.lastRow;f=(c.lastVisibleRowIndex-e)%c.lastRow;c.firstVisibleRowIndex=g<=0?g+c.lastRow:g;c.lastVisibleRowIndex=f<=0?f+c.lastRow:f;c.viewSelectedRowIndex=this.getVisibleRows();}else{b.scrollUpBy.call(this,e);}};b.selectNext=this.selectNext;this.selectNext=function(){if(this.getWrapAround()&&this.isSelectedAtLast()&&(c.lastRow>this.getVisibleRows())){c.actualSelectedRowIndex=1;if(c.viewSelectedRowIndex===this.getVisibleRows()){this.scrollDown();return true;}else{c.viewSelectedRowIndex++;return false;}}else{return b.selectNext.call(this);}};b.selectPrevious=this.selectPrevious;this.selectPrevious=function(){if(this.getWrapAround()&&this.isSelectedAtFirst()&&(c.lastRow>this.getVisibleRows())){c.actualSelectedRowIndex=c.lastRow;if(c.viewSelectedRowIndex===1){this.scrollUp();return true;}else{c.viewSelectedRowIndex--;return false;}}else{return b.selectPrevious.call(this);}};b.returnViewableList=this.returnViewableList;this.returnViewableList=function(){var f=null;if(c.lastVisibleRowIndex>=c.firstVisibleRowIndex){return b.returnViewableList.call(this);}var e=[];for(f=this.getFirstVisibleRowIndex();f<=c.lastRow;f++){e[e.length]=this.getRowAtIndex(f);}for(f=1;f<=this.getLastVisibleRowIndex();f++){e[e.length]=this.getRowAtIndex(f);}return e;};};$N.gui.CyclicPagingListWithScrolling=function(d,g){g=g||{};var f={},c=1,k=8,b=true,e=1,h=-1,a=0,l=a;$N.gui.CyclicPagingList.call(this,d,g);this.resetScrollDirection=function(){l=a;};this.setVisibleRowsRelativeToStart=function(){g.firstVisibleRowIndex=g.actualSelectedRowIndex;g.viewSelectedRowIndex=e;g.lastVisibleRowIndex=g.firstVisibleRowIndex+this.getVisibleRows()-c;if(g.lastVisibleRowIndex>g.lastRow){g.lastVisibleRowIndex=g.lastRow;}};this.setVisibleRowsRelativeToEnd=function(){var m=g.lastRow-this.getVisibleRows();if(g.actualSelectedRowIndex<=1){g.actualSelectedRowIndex=g.lastRow;}g.lastVisibleRowIndex=g.lastRow;if(m<0){g.firstVisibleRowIndex=e;}else{g.firstVisibleRowIndex=e+m;}g.viewSelectedRowIndex=e+g.actualSelectedRowIndex-g.firstVisibleRowIndex;};f.selectRowAtIndex=this.selectRowAtIndex;this.selectRowAtIndex=function(m,o,n){g.actualSelectedRowIndex=m;if(n&&o!==a){l=o;}if(n&&l===h){this.setVisibleRowsRelativeToEnd();}else{this.setVisibleRowsRelativeToStart();}};f.scrollDownBy=this.scrollDownBy;this.scrollDownBy=function(m){var o;var n;if(b===true){o=(g.firstVisibleRowIndex+m)%g.lastRow;n=(g.lastVisibleRowIndex+m)%g.lastRow;g.firstVisibleRowIndex=o<=0?o+g.lastRow:o;g.lastVisibleRowIndex=n<=0?n+g.lastRow:n;g.viewSelectedRowIndex=k;}else{f.scrollDownBy.call(this,m);}};f.scrollDown=this.scrollDown;this.scrollDown=function(){this.scrollDownBy(1);};f.scrollUpBy=this.scrollUpBy;this.scrollUpBy=function(n){var p,o,m=c+g.lastVisibleRowIndex-g.firstVisibleRowIndex;if(b===true){p=(g.firstVisibleRowIndex-n)%g.lastRow;if(this.getVisibleRows()>m){o=g.lastVisibleRowIndex%g.lastRow;}else{o=(g.lastVisibleRowIndex-n)%g.lastRow;}g.firstVisibleRowIndex=p<=0?p+g.lastRow:p;g.lastVisibleRowIndex=o<=0?o+g.lastRow:o;g.viewSelectedRowIndex=c;}else{f.scrollUpBy.call(this,n);}};f.scrollUp=this.scrollUp;this.scrollUp=function(){this.scrollUpBy(1);};};$N.gui.CyclicListWithBuffer=function(e){var d={};$N.gui.StandardList.call(this,e,d);var c={};d.firstBufferRowIndex=1;d.lastBufferRowIndex=0;var a=0;var b=0;this.setBuffer=function(f){d.actualSelectedRowIndex+=f;d.firstVisibleRowIndex+=f;b=this.getVisibleRows()+(f*2);d.lastBufferRowIndex=this.getFullRows();a=f;};this.getFullRows=function(){return b;};this.getBuffer=function(){return a;};this.getFirstBufferRowIndex=function(){return d.firstBufferRowIndex;};this.getLastBufferRowIndex=function(){return d.lastBufferRowIndex;};this.scrollDownBy=function(g){var l=(d.firstVisibleRowIndex+=g)%d.lastRow;var k=(d.lastVisibleRowIndex+=g)%d.lastRow;d.firstVisibleRowIndex=l===0?d.lastRow:l;d.lastVisibleRowIndex=k===0?d.lastRow:k;var h=(d.firstBufferRowIndex+=g)%d.lastRow;var f=(d.lastBufferRowIndex+=g)%d.lastRow;d.firstBufferRowIndex=h===0?d.lastRow:h;d.lastBufferRowIndex=f===0?d.lastRow:f;};this.scrollUpBy=function(g){var l=(d.firstVisibleRowIndex-=g)%d.lastRow;var k=(d.lastVisibleRowIndex-=g)%d.lastRow;d.firstVisibleRowIndex=l<=0?d.lastRow-l:l;d.lastVisibleRowIndex=k<=0?d.lastRow-k:k;var h=(d.firstBufferRowIndex-=g)%d.lastRow;var f=(d.lastBufferRowIndex-=g)%d.lastRow;d.firstBufferRowIndex=h<=0?d.lastRow-h:h;d.lastBufferRowIndex=f<=0?d.lastRow-f:f;};this.selectNext=function(){var f=false;if(this.isSelectedAtLast()&&(d.lastRow>this.getVisibleRows())){if(d.viewSelectedRowIndex===this.getVisibleRows()){d.firstBufferRowIndex++;d.lastBufferRowIndex++;if(++d.firstVisibleRowIndex>d.lastRow){d.firstVisibleRowIndex=this.getFullRows()-(this.getBuffer()*2);}d.lastVisibleRowIndex=1;f=true;}else{d.viewSelectedRowIndex++;}d.actualSelectedRowIndex=1;}else{if(!this.isSelectedAtLast()){d.actualSelectedRowIndex++;if(d.viewSelectedRowIndex===this.getVisibleRows()){this.scrollDown();f=true;}else{d.viewSelectedRowIndex++;}}}return f;};this.selectPrevious=function(){var f=false;if(this.isSelectedAtFirst()&&(d.lastRow>this.getVisibleRows())){if(d.viewSelectedRowIndex===1){d.firstBufferRowIndex--;d.lastBufferRowIndex--;d.firstVisibleRowIndex=d.lastRow;if(--d.lastVisibleRowIndex<1){d.lastVisibleRowIndex=d.lastRow;}f=true;}else{d.viewSelectedRowIndex--;}d.actualSelectedRowIndex=d.lastRow;}else{if(!this.isSelectedAtFirst()){d.actualSelectedRowIndex--;if(d.viewSelectedRowIndex===1){this.scrollUp();f=true;}else{d.viewSelectedRowIndex--;}}}return f;};c.returnViewableList=this.returnViewableList;this.returnViewableList=function(){var g=null;if(d.lastVisibleRowIndex>=d.firstVisibleRowIndex){return c.returnViewableList.call(this);}var f=[];for(g=this.getFirstVisibleRowIndex();g<=d.lastRow;g++){f[f.length]=this.getRowAtIndex(g);}for(g=1;g<=this.getLastVisibleRowIndex();g++){f[f.length]=this.getRowAtIndex(g);}return f;};this.returnFullList=function(){var f=[];var g=null;if(d.lastBufferRowIndex>=d.firstBufferRowIndex){for(g=this.getFirstBufferRowIndex();g<=this.getLastBufferRowIndex();g++){f[f.length]=this.getRowAtIndex(g);}}else{for(g=this.getFirstBufferRowIndex();g<=d.lastRow;g++){f[f.length]=this.getRowAtIndex(g);}for(g=1;g<=this.getLastBufferRowIndex();g++){f[f.length]=this.getRowAtIndex(g);}}return f;};};$N.gui.CyclicList=function(c,b){b=b||{};$N.gui.StandardList.call(this,c,b);var a={};this.scrollDownBy=function(d){var f=(b.firstVisibleRowIndex+=d)%b.lastRow;var e=(b.lastVisibleRowIndex+=d)%b.lastRow;b.firstVisibleRowIndex=f===0?b.lastRow:f;b.lastVisibleRowIndex=e===0?b.lastRow:e;};this.scrollUpBy=function(d){var f=(b.firstVisibleRowIndex-=d)%b.lastRow;var e=(b.lastVisibleRowIndex-=d)%b.lastRow;b.firstVisibleRowIndex=f<=0?b.lastRow-f:f;b.lastVisibleRowIndex=e<=0?b.lastRow-e:e;};a.selectNext=this.selectNext;this.selectNext=function(){if(this.isSelectedAtLast()&&(b.lastRow>this.getVisibleRows())){if(b.viewSelectedRowIndex===this.getVisibleRows()){if(++b.firstVisibleRowIndex>b.lastRow){b.firstVisibleRowIndex=1;}b.lastVisibleRowIndex=1;}else{b.viewSelectedRowIndex++;}b.actualSelectedRowIndex=1;}else{return a.selectNext.call(this);}};a.selectPrevious=this.selectPrevious;this.selectPrevious=function(){if(this.isSelectedAtFirst()&&(b.lastRow>this.getVisibleRows())){if(b.viewSelectedRowIndex===1){b.firstVisibleRowIndex=b.lastRow;if(--b.lastVisibleRowIndex<1){b.lastVisibleRowIndex=b.lastRow;}}else{b.viewSelectedRowIndex--;}b.actualSelectedRowIndex=b.lastRow;}else{return a.selectPrevious.call(this);}};a.returnViewableList=this.returnViewableList;this.returnViewableList=function(){var e=null;if(b.lastVisibleRowIndex>=b.firstVisibleRowIndex){return a.returnViewableList.call(this);}var d=[];for(e=this.getFirstVisibleRowIndex();e<=b.lastRow;e++){d[d.length]=this.getRowAtIndex(e);}for(e=1;e<=this.getLastVisibleRowIndex();e++){d[d.length]=this.getRowAtIndex(e);}return d;};};$N.gui.StandardList=function(d,b){b=b||{};$N.gui.BasicList.call(this,d,b);var a={};b.firstVisibleRowIndex=1;b.lastVisibleRowIndex=0;b.viewSelectedRowIndex=1;var c=6;this.selectRowAtIndex=function(e){b.actualSelectedRowIndex=e;b.viewSelectedRowIndex=e;};this.getVisibleRows=function(){return c;};this.setVisibleRows=function(e){c=parseInt(e,10);if(b.lastRow>0){b.lastVisibleRowIndex=b.lastRow<=c?b.lastRow:c;}};this.getFirstVisibleRowIndex=function(){return b.firstVisibleRowIndex;};this.getLastVisibleRowIndex=function(){return b.lastVisibleRowIndex;};this.getViewSelectedRowIndex=function(){return b.viewSelectedRowIndex;};this.scrollDown=function(){this.scrollDownBy(1);};this.scrollUp=function(){this.scrollUpBy(1);};this.scrollDownBy=function(e){var f=b.lastRow-b.lastVisibleRowIndex;if(e<f){b.firstVisibleRowIndex+=e;b.lastVisibleRowIndex+=e;}else{b.firstVisibleRowIndex=b.lastRow-(c-1);b.lastVisibleRowIndex=b.lastRow;b.viewSelectedRowIndex=b.lastRow>c?c:b.lastRow;}};this.scrollUpBy=function(e){var f=b.lastRow-b.lastVisibleRowIndex;if(e<b.actualSelectedRowIndex){b.firstVisibleRowIndex-=e;b.lastVisibleRowIndex-=e;}else{b.firstVisibleRowIndex=1;b.lastVisibleRowIndex=b.lastRow>c?c:b.lastRow;b.viewSelectedRowIndex=1;}};this.pageUp=function(){if(b.firstVisibleRowIndex>1){this.scrollUpBy(c);b.actualSelectedRowIndex-=c;return true;}return false;};this.pageDown=function(){if(b.lastVisibleRowIndex<b.lastRow){this.scrollDownBy(c);b.actualSelectedRowIndex=Math.min(b.actualSelectedRowIndex+c,b.lastRow);return true;}return false;};this.selectNext=function(){var e=false;if(this.isSelectedAtLast()&&this.getWrapAround()&&(b.lastRow>c)){this.selectRowAtIndex(1);if(this.isPaged()){this.scrollUpBy(b.lastRow);e=true;}}else{if(!this.isSelectedAtLast()){b.actualSelectedRowIndex++;if(b.viewSelectedRowIndex===c){this.scrollDown();e=true;}else{b.viewSelectedRowIndex++;}}}return e;};this.selectPrevious=function(){var e=false;if(this.isSelectedAtFirst()&&this.getWrapAround()&&(b.lastRow>c)){this.selectRowAtIndex(b.lastRow);if(this.isPaged()){this.scrollDownBy(b.lastRow);e=true;}}else{if(!this.isSelectedAtFirst()){b.actualSelectedRowIndex--;if(b.viewSelectedRowIndex===1){this.scrollUp();e=true;}else{b.viewSelectedRowIndex--;}}}return e;};a.AddItem=this.addItem;this.addItem=function(h,g,f,e){a.AddItem.call(this,h,g,f,e);if(b.lastRow<(c+b.firstVisibleRowIndex)){b.lastVisibleRowIndex++;}};this.isPaged=function(){return(b.lastRow>c);};a.clearList=this.clearList;this.clearList=function(){a.clearList();b.listItems.length=0;b.firstVisibleRowIndex=1;b.lastVisibleRowIndex=0;b.viewSelectedRowIndex=1;};this.setData=function(e){b.actualSelectedRowIndex=1;b.lastRow=e.length;b.listItems=e;b.firstVisibleRowIndex=1;b.lastVisibleRowIndex=b.lastRow<=this.getVisibleRows()?b.lastRow:this.getVisibleRows();b.viewSelectedRowIndex=1;};this.getFirstItem=function(){return this.getRowAtIndex(b.firstVisibleRowIndex);};this.getLastItem=function(){return this.getRowAtIndex(b.lastVisibleRowIndex);};this.returnViewableList=function(){var e=[];var f;for(f=this.getFirstVisibleRowIndex();f<=this.getLastVisibleRowIndex();f++){e[e.length]=this.getRowAtIndex(f);}return e;};};$N.gui.BasicList=function(e,d){var b=this;d=d||{};d.actualSelectedRowIndex=1;d.lastRow=0;d.listItems=[];var a=1000;var c=false;this.getMaxItems=function(){return a;};this.setMaxItems=function(f){a=f;};this.getActualSelectedRowIndex=function(){return d.actualSelectedRowIndex;};this.getWrapAround=function(){return c;};this.setWrapAround=function(f){c=f;};this.getSelectedItem=function(){if(d.actualSelectedRowIndex){return d.listItems[d.actualSelectedRowIndex-1];}return null;};this.selectRowAtIndex=function(f){d.actualSelectedRowIndex=f;};this.selectNext=function(){if(this.isSelectedAtLast()&&this.getWrapAround()){this.selectRowAtIndex(1);}else{if(!this.isSelectedAtLast()){d.actualSelectedRowIndex++;}}};this.selectPrevious=function(){if(this.isSelectedAtFirst()&&this.getWrapAround()){this.selectRowAtIndex(d.lastRow);}else{if(!this.isSelectedAtFirst()){d.actualSelectedRowIndex--;}}};this.selectFirstItem=function(){this.selectRowAtIndex(1);};this.selectLastItem=function(){this.selectRowAtIndex(this.getSize());};this.addItem=function(k,h,g,f){d.listItems[d.listItems.length]=new e(k,h,g,f);d.lastRow++;};this.addExistingItem=function(f){d.listItems[d.listItems.length]=f;d.lastRow++;};this.getRowAtIndex=function(f){if(this.getWrapAround()&&(f<1||f>this.getSize())){if(f<1){f=this.getSize()+(f%this.getSize());}else{f=(f%this.getSize());f=f<1?this.getSize():f;}}return d.listItems[f-1];};this.getSize=function(){return d.lastRow;};this.isEmpty=function(){return(d.lastRow===0);};this.isSelectedAtFirst=function(){return(d.actualSelectedRowIndex===1||d.lastRow===0);};this.isSelectedAtLast=function(){return(d.actualSelectedRowIndex===d.lastRow||d.lastRow===0);};this.setData=function(f){d.actualSelectedRowIndex=1;d.lastRow=f.length;d.listItems=f;};this.getData=function(){return d.listItems;};this.appendData=function(f){d.listItems=d.listItems.concat(f);d.lastRow=d.listItems.length;};this.insertDataAtIndex=function(g,h){var f=d.listItems.length;if(g>f){g=f;}d.listItems[g]=h;};this.clearList=function(){d.actualSelectedRowIndex=1;d.lastRow=0;d.listItems.length=d.lastRow;};this.setRowObject=function(f){if(this.isEmpty()){e=f;}else{throw new Error("Cannot change the row object on a list that contains data");}};this.getRowObject=function(){return e;};};define("jsfw/gui/GUIObjects/Controls/AbstractControl",["jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/GUIObject"],function(d,c){function a(e){a.superConstructor.call(this,e);this._nextTabKeys=null;this._previousTabKeys=null;this._nextTabObject=null;this._previousTabObject=null;this._enabled=true;this._highlightedCallback=null;}$N.gui.Util.extend(a,$N.gui.GUIObject);var b=a.prototype;b._createObjectFromArray=function(e){var g={},f;for(f=0;f<e.length;f++){g[e[f]]=e[f];}return g;};b.isControl=function(){return true;};b.isEnabled=function(){return this._enabled;};b.enable=function(){this.setEnabled(true);return this;};b.disable=function(){this.setEnabled(false);return this;};b.setEnabled=function(e){if(typeof e==="string"){e=(e==="true")?true:false;}if(e){this.showEnabled();}else{this.showDisabled();}this._enabled=Boolean(e);return this;};b.setNextTabKeys=function(e){if(typeof e==="string"){this._nextTabKeys=this._createObjectFromArray(e.split(","));}else{this._nextTabKeys=e;}return this;};b.setPreviousTabKeys=function(e){if(typeof e==="string"){this._previousTabKeys=this._createObjectFromArray(e.split(","));}else{this._previousTabKeys=e;}return this;};b.getNextTabKeys=function(){return this._nextTabKeys;};b.getPreviousTabKeys=function(){return this._previousTabKeys;};b.setNextTabObject=function(e){this._nextTabObject=e;return this;};b.setPreviousTabObject=function(e){this._previousTabObject=e;return this;};b.getNextTabObject=function(){return this._nextTabObject;};b.getPreviousTabObject=function(){return this._previousTabObject;};b.setHighlightedCallback=function(e){this._highlightedCallback=e;return this;};b.highlight=function(){};b.unHighlight=function(){};b.showDisabled=function(){};b.showEnabled=function(){};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AbstractControl=a;return a;});define("jsfw/gui/GUIObjects/Controls/TextInput",["jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/ClippedGroup","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util"],function(c,b,a,f,e){function d(h,g){d.superConstructor.call(this,h);this._docRef=h;this._container=new $N.gui.Container(this._docRef);this._clippedGroup=new $N.gui.ClippedGroup(this._docRef,this._container);this._maxCharacters=1000;this._isLabelAutoAlign=true;this._passwordChar=null;this._delayPasswordMode=false;this._passwordDelayTimerMS=5000;this._passwordDelayTimer=null;this._passwordText="";this._rootElement=this._container.getRootElement();if(g){g.addChild(this._container);}this._label=new $N.gui.Label(h,this._clippedGroup);this._cursor=new $N.gui.Label(h,this._clippedGroup);this._cursor.setText("_");this._cursor.hide();this._cursor.setAnimationDuration("1500ms");this._cursor.addFadeAnimation();}$N.gui.Util.extend(d,$N.gui.AbstractControl);d.prototype._setAlignment=function(){if(this._isLabelAutoAlign){if(this.getLabelTextLength()>this.getClippedWidth()){if(this.getLabelAlignment()!==$N.gui.Label.ALIGN_RIGHT){this.setLabelX(this.getClippedWidth());this.setLabelAlignment($N.gui.Label.ALIGN_RIGHT);}}else{if(this.getLabelAlignment()!==$N.gui.Label.ALIGN_LEFT){this.setLabelX(0);this.setLabelAlignment($N.gui.Label.ALIGN_LEFT);}}}};d.prototype.setWidth=function(g){this._container.setWidth(g);};d.prototype.getWidth=function(){return this._container.getWidth();};d.prototype.setHeight=function(g){this._container.setHeight(g);};d.prototype.setRounding=function(g){this._container.setRounding(g);};d.prototype.setCssClass=function(g){this._container.setCssClass(g);};d.prototype.setMaxCharacters=function(g){this._maxCharacters=parseInt(g,10);};d.prototype.setTextChangedCallback=function(g){this._textChangedCallback=g;};d.prototype.appendCharacter=function(g){var k=this.getLabelText(),h=this;this._passwordText+=g;if(k.length<this._maxCharacters){if(this._passwordChar){if(!this._delayPasswordMode){this.setLabelText(this.getLabelText()+this._passwordChar);}else{if(this.getLabelText().length>0){this.setLabelText(this.getLabelText().substring(0,this.getLabelText().length-1)+this._passwordChar+g);}else{this.setLabelText(this.getLabelText()+g);}this._passwordDelayTimer=setTimeout(function(){h.setLabelText(h.getLabelText().substring(0,h.getLabelText().length-1)+h._passwordChar);},this._passwordDelayTimerMS);}}else{this.setLabelText(this.getLabelText()+g);}this._setAlignment();this._cursor.setX(Math.min(this.getLabelTextLength(),this.getWidth()));}if(this._textChangedCallback){this._textChangedCallback(this.getLabelText());}};d.prototype.removeCharacter=function(){var g=this.getLabelText();this._passwordText=this._passwordText.slice(0,this._passwordText.length-1);this.setLabelText(g.substring(0,g.length-1));this._setAlignment();if(this._textChangedCallback){this._textChangedCallback(this.getLabelText());}};d.prototype.clear=function(){this.setLabelText("");};d.prototype.setClippedX=function(g){this._clippedGroup.setX(g);};d.prototype.setClippedY=function(g){this._clippedGroup.setY(g);};d.prototype.setClippedWidth=function(g){this._clippedGroup.setWidth(g);};d.prototype.getClippedWidth=function(){return this._clippedGroup.getWidth();};d.prototype.setClippedHeight=function(g){this._clippedGroup.setHeight(g);};d.prototype.getClippedHeight=function(){return this._clippedGroup.getHeight();};d.prototype.setClippedHorizontalMargin=function(g){this.setClippedX(g);this.setClippedWidth(this.getWidth()-(g*2));};d.prototype.setLabelX=function(g){this._label.setX(g);};d.prototype.setLabelY=function(g){this._label.setY(g);this._cursor.setY(g);};d.prototype.setLabelText=function(g){if(g.length<this._maxCharacters){this._label.setText(g);}else{this._label.setText(g.substring(0,this._maxCharacters));}this._cursor.setX(Math.min(this.getLabelTextLength(),this.getWidth()));};d.prototype.getLabelText=function(){return this._label.getText();};d.prototype.setPasswordText=function(g){var h,k="";this._passwordText=g;if(this._passwordChar){for(h=0;h<g.length;h++){k+=this._passwordChar;}this.setLabelText(k);}else{this.setLabelText(g);}};d.prototype.getPasswordText=function(){return this._passwordText;};d.prototype.isPassword=function(){if(this._passwordChar){return true;}return false;};d.prototype.getLabelTextLength=function(){return this._label.getTrueTextLength();};d.prototype.setLabelCssClass=function(g){this._label.setCssClass(g);};d.prototype.setLabelAlignment=function(g){this._label.setAlignment(g);};d.prototype.getLabelAlignment=function(){return this._label.getAlignment();};d.prototype.setLabelAutoAlign=function(g){this._isLabelAutoAlign=g;};d.prototype.setCursorDisplay=function(g){switch(g){case"on":this._cursor.getFadeAnimation().cancelAnimation();this._cursor.show();break;case"pulse":this._cursor.show();this._cursor.doFade(0,true,true);break;default:this._cursor.hide();this._cursor.getFadeAnimation().cancelAnimation();}return this;};d.prototype.setPasswordChar=function(g){if(g){this._passwordChar=g;}else{this._passwordChar=null;}};d.prototype.setDelayPasswordMode=function(g){this._delayPasswordMode=g;};d.prototype.setDelayPasswordTime=function(g){this._passwordDelayTimerMS=g;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.TextInput=d;return d;});define("jsfw/gui/GUIObjects/Controls/Form",["jsfw/gui/GUIObjects/Components/Group","jsfw/gui/Logic/List/List","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/FrameworkCore"],function(c,e,g,d,a){function b(k,h){b.superConstructor.call(this,k);this._container=new $N.gui.Group(k);this._rootElement=this._container.getRootElement();if(h){h.addChild(this);}this._defaultNextTabKey="down";this._defaultPreviousTabKey="up";this._defaultTabDirection=b.VERTICAL;this._controlList=new $N.gui.BasicList();this._controlList.setWrapAround(true);this._controlLookup={};this._controlHighlightedCallback=null;}$N.gui.Util.extend(b,$N.gui.AbstractControl);b.HORIZONTAL="horizontal";b.VERTICAL="vertical";var f=b.prototype;f.setDefaultNextTabKey=function(h){var k=$N.gui.FrameworkCore.getKeys();if(k[h]){this._defaultNextTabKey=k[h];}else{this._defaultNextTabKey=h;}};f.setDefaultPreviousTabKey=function(h){var k=$N.gui.FrameworkCore.getKeys();if(k[h]){this._defaultPreviousTabKey=k[h];}else{this._defaultPreviousTabKey=h;}};f.setDefaultTabDirection=function(h){switch(h){case b.HORIZONTAL:this.setDefaultNextTabKey("right");this.setDefaultPreviousTabKey("left");this._defaultTabDirection=h;break;case b.VERTICAL:this.setDefaultNextTabKey("down");this.setDefaultPreviousTabKey("up");this._defaultTabDirection=h;break;}};f.setWrapAround=function(h){if(h===true||(typeof h==="string"&&h.toLowerCase()==="true")){this._controlList.setWrapAround(true);}else{this._controlList.setWrapAround(false);}};f.addControl=function(k){var h=this._controlList.getSize()+1;var m=k.getId();var l={index:h};this._controlList.addExistingItem(k);this._controlLookup[m]=l;this[m]=k;};f.getHighlightedControl=function(){return this._controlList.getSelectedItem();};f.highlight=function(){var h=this._controlList.getSelectedItem();if(h){h.highlight();if(this._controlHighlightedCallback){this._controlHighlightedCallback(h);}}};f.unHighlight=function(){var h=this._controlList.getSelectedItem();if(h){h.unHighlight();}};f.selectNext=function(){var h=this._controlList.getSelectedItem();if(this.selectControl(h.getNextTabObject())){return;}this.unHighlight();do{this._controlList.selectNext();}while(!this._controlList.getSelectedItem().isEnabled());this.highlight();};f.selectPrevious=function(){var h=this._controlList.getSelectedItem();if(this.selectControl(h.getPreviousTabObject())){return;}this.unHighlight();do{this._controlList.selectPrevious();}while(!this._controlList.getSelectedItem().isEnabled());this.highlight();};f.selectControl=function(h){var l=false;var k=this._controlLookup[h];if(k&&this._controlList.getRowAtIndex(k.index).isEnabled()){this.unHighlight();this._controlList.selectRowAtIndex(k.index);this.highlight();l=true;}return l;};f.keyHandler=function(h){var k=this._controlList.getSelectedItem();var l=false;if(k&&k.keyHandler){l=k.keyHandler(h);if(l){return true;}}if(k.getNextTabKeys()){if(k.getNextTabKeys()[h]){this.selectNext();return true;}}else{if(h===this._defaultNextTabKey){this.selectNext();return true;}}if(k.getPreviousTabKeys()){if(k.getPreviousTabKeys()[h]){this.selectPrevious();return true;}}else{if(h===this._defaultPreviousTabKey){this.selectPrevious();return true;}}};f.setControlHighlightedCallback=function(h){this._controlHighlightedCallback=h;};f.getClassName=function(){return"Form";};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Form=b;return b;});define("jsfw/gui/GUIObjects/Controls/Button",["jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/Image","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/OuterGlow","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/GUIObject","jsfw/gui/FrameworkCore"],function(g,d,a,h,c,l,k,b){function f(n,m){f.superConstructor.call(this,n);this._container=new $N.gui.Container(n);this._image=new $N.gui.Image(n,this._container);this._label=new $N.gui.Label(n,this._container);this._glow=null;this._docRef=n;this._rootElement=this._container.getRootElement();this._containerCSS="button_bg";this._containerHighlightCSS="button_bg_highlight";this._containerDisabledCSS="button_bg_disabled";this._labelCSS="button_text";this._labelHighlightCSS="button_text_highlight";this._labelDisabledCSS="button_text_disabled";this._imageCSS="button_image";this._imageHighlightCSS="button_image_highlight";this._imageDisabledCSS="button_image_disabled";this._labelTop="centre";this._labelLeft="centre";this._enabled=true;this._selectedCallback=null;this.setHeight(f.DEFAULT_HEIGHT);this.setWidth(f.DEFAULT_WIDTH);this.setRounding(f.DEFAULT_ROUNDING);this.unHighlight();if(m){m.addChild(this);}}$N.gui.Util.extend(f,$N.gui.AbstractControl);f.DEFAULT_HEIGHT=40;f.DEFAULT_WIDTH=100;f.DEFAULT_ROUNDING=0;var e=f.prototype;e._positionLabel=function(){var m=0,n=0;if(this._labelLeft==="centre"){m=this._container.getWidth()/2;this._label.setAlignment("centre");}else{m=parseInt(this._labelLeft,10);this._label.setAlignment("left");}if(this._labelTop==="centre"){n=(this._container.getHeight()/2)+(this._label.getFontSize()/3.4);}else{n=parseInt(this._labelTop,10);}this._label.setX(m);this._label.setY(n);};e.setX=function(m){f.superClass.setX.call(this,m);if(this._glow){this._glow.refresh();}};e.setWidth=function(m){this._container.setWidth(m);this._label.setWidth(m);this._positionLabel();};e.getWidth=function(){return this._container.getWidth();};e.setHeight=function(m){this._container.setHeight(m);};e.getHeight=function(){return this._container.getHeight();};e.setLabel=function(m){this._label.setText(m);this._positionLabel();};e.setLabelTop=function(m){this._labelTop=m;this._positionLabel();};e.setLabelLeft=function(m){this._labelLeft=m;this._positionLabel();};e.getLabel=function(){return this._label;};e.setImage=function(m){this._image.setHref(m);};e.setImageLeft=function(m){this._image.setX(m);};e.setImageTop=function(m){this._image.setY(m);};e.setRounding=function(m){this._container.setRounding(m);};e.getRounding=function(){return this._container.getRounding();};e.showDisabled=function(){this._container.setCssClass(this._containerDisabledCSS);this._label.setCssClass(this._labelDisabledCSS);this._image.setCssClass(this._imageDisabledCSS);this._positionLabel();};e.showEnabled=function(){this._container.setCssClass(this._containerCSS);this._label.setCssClass(this._labelCSS);this._image.setCssClass(this._imageCSS);this._positionLabel();};e.highlight=function(){this._container.setCssClass(this._containerHighlightCSS);this._label.setCssClass(this._labelHighlightCSS);this._image.setCssClass(this._imageHighlightCSS);this._positionLabel();if(this._highlightedCallback){this._highlightedCallback();}if(this._glow){this._glow.show();}};e.unHighlight=function(){if(this._enabled){this.showEnabled();}else{this.showDisabled();}if(this._glow){this._glow.hide();}};e.setSelectedCallback=function(m){this._selectedCallback=m;};e.setCssClass=function(m){this._containerCSS=m;this._container.setCssClass(m);};e.setHighlightCssClass=function(m){this._containerHighlightCSS=m;};e.setDisabledCssClass=function(m){this._containerDisabledCSS=m;};e.setLabelCssClass=function(m){this._labelCSS=m;this._label.setCssClass(m);this._positionLabel();};e.setLabelHighlightCssClass=function(m){this._labelHighlightCSS=m;};e.setLabelDisabledCssClass=function(m){this._labelDisabledCSS=m;};e.setImageCssClass=function(m){this._imageCSS=m;this._image.setCssClass(m);};e.setImageHighlightCssClass=function(m){this._imageHighlightCSS=m;};e.setImageDisabledCssClass=function(m){this._imageDisabledCSS=m;};e.getCssClass=function(){return this._containerCSS;};e.getLabelCssClass=function(){return this._labelCSS;};e.setEnabled=function(m){if(m===true||m==="true"){this._enabled=true;this.showEnabled();}else{this._enabled=false;this.showDisabled();}};e.isEnabled=function(){return this._enabled;};e.setHighlightGlowColour=function(m){this._glowColour=m;if(!this._glow&&this._glowIntensity){this._glow=new $N.gui.OuterGlow(this._docRef,this,this._glowColour,this._glowIntensity);this._glow.hide();}};e.setHighlightGlowIntensity=function(m){this._glowIntensity=m;if(!this._glow&&this._glowColour){this._glow=new $N.gui.OuterGlow(this._docRef,this,this._glowColour,this._glowIntensity);this._glow.hide();}};e.keyHandler=function(m){var n=$N.gui.FrameworkCore.getKeys();if(m===n.KEY_OK&&this._selectedCallback){this._selectedCallback();return true;}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Button=f;return f;});define("jsfw/gui/GUIObjects/Controls/ButtonBar",["jsfw/gui/GUIObjects/Controls/Button","jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/helpers/Util","jsfw/gui/FrameworkCore"],function(c,b,e,f,d){function a(h,g){a.superConstructor.call(this,h);this._docRef=h;this._container=new $N.gui.Container(this._docRef);this._rootElement=this._container.getRootElement();if(g){g.addChild(this._container);}this._buttons=[];this._navigation={};this._buttonCssClass=[];this._currentButton=null;this._currentIndex=0;this._padding=0;this._alignment=a.VERTICAL_ALIGNMENT;this._isVerticalMovementPreferenceRight=false;this._selectedCallback=null;this._highlightedCallback=null;this._containerCssClass=null;this._containerDisabledCssClass=null;this._disabledButtonStandardCssClass=null;this._disabledButtonHighlightCssClass=null;this._disabledButtonDisabledCssClass=null;this._enabled=false;}$N.gui.Util.extend(a,$N.gui.AbstractControl);a.prototype._itemHighlighted=function(g){if(this._highlightedCallback){this._highlightedCallback(g.getId());}};a.prototype._itemSelected=function(g){if(g._selectedCallback){g._selectedCallback();}if(this._selectedCallback){this._selectedCallback(g.getId());}};a.prototype._isSpaceFree=function(l,s,k,r){var m=this._buttons.length;var q,p,n,h,g,o;if(k>this._container.getWidth()||r>this._container.getHeight()){return false;}for(o=0;o<m;o++){q=this._buttons[o];p=q.getX();n=q.getX()+q.getWidth();if((p>=l&&p<=k)||(n>=l&&n<=k)||(p<=l&&n>=k)){h=q.getY();g=q.getY()+q.getHeight();if((h>=s&&h<=r)||(g>=s&&g<=r)||(h<=s&&g>=r)){return false;}}}return true;};a.prototype._findHighestLeftMostFreeSpace=function(n,k){var h=this._container.getWidth();var p=this._container.getHeight();var o=this._buttons.length;var m,l,g;for(m=o-1;m>=0;m--){l=this._buttons[m];g=l.getY()+l.getHeight()+this._padding;if(g<=p&&l.getX()<h){if(this._isSpaceFree(l.getX(),g,l.getX()+n,g+k)){h=l.getX();p=g;}}}return{x:h,y:p};};a.prototype._findLeftMostHighestFreeSpace=function(m,h){var g=this._container.getWidth();var p=this._container.getHeight();var n=this._buttons.length;var l,k,o;for(l=n-1;l>=0;l--){k=this._buttons[l];o=k.getX()+k.getWidth()+this._padding;if(o<=g&&k.getY()<p){if(this._isSpaceFree(o,k.getY(),o+m,k.getY()+h)){g=o;p=k.getY();}}}return{x:g,y:p};};a.prototype._getNextCoords=function(l,k){var h=0,n=0;var m=this._buttons.length;var g;if(m>0){g=this._buttons[m-1];if(this._alignment===a.VERTICAL_ALIGNMENT){h=g.getX();n=g.getY()+g.getHeight()+this._padding;}else{h=g.getX()+g.getWidth()+this._padding;n=g.getY();}if(!this._isSpaceFree(h,n,h+l,n+k)){if(this._alignment===a.VERTICAL_ALIGNMENT){return this._findLeftMostHighestFreeSpace(l,k);}return this._findHighestLeftMostFreeSpace(l,k);}}return{x:h,y:n};};a.prototype._getButtonReferencesLeft=function(p,o,q){var n=[];var h=this._buttons.length-1;var l;var m;var g,k;if(p>0){for(l=h;l>=0;l--){m=this._buttons[l];g=m.getY();k=m.getY()+m.getHeight();if(m.getX()<p&&((g<=o&&k>=o)||(g<=o+q&&k>=o+q)||(g>=o&&k<=o+q))){n.push(l);}}}return n;};a.prototype._getButtonReferencesRight=function(p,o,q){var n=[];var h=this._buttons.length-1;var l;var m;var g,k;if(p>0){for(l=h;l>=0;l--){m=this._buttons[l];g=m.getY();k=m.getY()+m.getHeight();if(m.getX()>p&&((g<=o&&k>=o)||(g<=o+q&&k>=o+q)||(g>=o&&k<=o+q))){n.push(l);}}}return n;};a.prototype._getButtonReferencesAbove=function(q,p,h){var n=[];var k=this._buttons.length-1;var l;var m;var g,o;if(p>0){for(l=k;l>=0;l--){m=this._buttons[l];g=m.getX();o=m.getX()+m.getWidth();if(m.getY()<p&&((g<=q&&o>=q)||(g<=q+h&&o>=q+h)||(g>=q&&o<=q+h))){n.push(l);}}}return n;};a.prototype._getButtonReferencesBelow=function(q,p,h){var n=[];var k=this._buttons.length-1;var l;var m;var g,o;if(p>0){for(l=k;l>=0;l--){m=this._buttons[l];g=m.getX();o=m.getX()+m.getWidth();if(m.getY()>p&&((g<=q&&o>=q)||(g<=q+h&&o>=q+h)||(g>=q&&o<=q+h))){n.push(l);}}}return n;};a.prototype._selectButton=function(g,k){var h=this._currentIndex;this._currentButton.unHighlight();this._currentIndex=g;this._currentButton=this._buttons[g];this._currentButton.highlight();if(this._buttons[h].isEnabled()){var l=this._navigation[this._currentButton.getId()];switch(k){case"left":l.right=h;break;case"right":l.left=h;break;case"up":l.down=h;break;case"down":l.up=h;break;}}this._itemHighlighted(this._currentButton);};a.prototype._defineNavigationForButtonAtIndex=function(v){var r=this._buttons[v];var m=r.getId();var o,w,x;var s,p;var q=this._getButtonReferencesLeft(r.getX(),r.getY(),r.getHeight());var k=this._getButtonReferencesRight(r.getX(),r.getY(),r.getHeight());var l=this._getButtonReferencesAbove(r.getX(),r.getY(),r.getWidth());var n=this._getButtonReferencesBelow(r.getX(),r.getY(),r.getWidth());var g=q.length,u=l.length,h=k.length,t=n.length;this._navigation[m]={};this._navigation[m].index=v;s=-1;for(o=0;o<g;o++){w=q[o];if(this._buttons[w].isEnabled()&&this._buttons[w].getX()>s){this._navigation[m].left=w;s=this._buttons[w].getX();}}s=this._container.getWidth();for(o=0;o<h;o++){w=k[o];if(this._buttons[w].isEnabled()&&this._buttons[w].getX()<s){this._navigation[m].right=w;s=this._buttons[w].getX();}}p=-1;s=-1;for(o=0;o<u;o++){w=l[o];if((this._buttons[w].isEnabled()&&(this._buttons[w].getY()>p||(this._isVerticalMovementPreferenceRight===true&&this._buttons[w].getY()===p&&this._buttons[w].getX()<r.getX())))){this._navigation[m].up=w;p=this._buttons[w].getY();s=this._buttons[w].getX();}}p=this._container.getHeight();for(o=0;o<t;o++){w=n[o];if(this._buttons[w].isEnabled()&&this._buttons[w].getY()<p){this._navigation[m].down=w;p=this._buttons[w].getY();}}if(r.isEnabled()){for(o=0;o<g;o++){x=this._navigation[this._buttons[q[o]].getId()];if(!x.right||this._buttons[x.right].getX()>r.getX()){x.right=v;}}for(o=0;o<u;o++){x=this._navigation[this._buttons[l[o]].getId()];if(!x.down||this._buttons[x.down].getY()>r.getY()||(this._buttons[x.down].getY()===r.getY()&&this._isVerticalMovementPreferenceRight===true&&this._buttons[x.down].getX()<=r.getX())){x.down=v;}}}};a.prototype.getNavigation=function(g){return this._navigation[g];};a.prototype.setNavigation=function(h,g){this._navigation[h]=g;};a.prototype.getButtons=function(){return this._buttons;};a.prototype.setVerticalMovementPreference=function(g){if(g==="right"){this._isVerticalMovementPreferenceRight=true;}else{this._isVerticalMovementPreferenceRight=false;}};a.prototype.getVerticalMovementPreference=function(){if(this._isVerticalMovementPreferenceRight===true){return"right";}return"left";};a.prototype.setButtonProperties=function(l,p,k,h,g,o,n){var m;l.setId(p);if(k){l.setLabel(k);l.unHighlight();}if(h!==undefined){l.setEnabled(h);}if(g&&o){l.setX(g);l.setY(o);}else{m=this._getNextCoords(n.width,n.height);l.setX(m.x);l.setY(m.y);}l.configure(n);return l;};a.prototype.defineNavigationForButton=function(g){this._buttons.push(g);this._defineNavigationForButtonAtIndex(this._buttons.length-1);};a.prototype.createButton=function(o,n,k,h,g,m){var l=new $N.gui.Button(this._docRef,this._container);l=this.setButtonProperties(l,o,k,h,g,m,n);this.defineNavigationForButton(l);};a.prototype.addButton=function(g){this._container.addChild(g);var h=this._getNextCoords(g.getWidth(),g.getHeight());g.setX(h.x);g.setY(h.y);g.unHighlight();this._buttons.push(g);this._defineNavigationForButtonAtIndex(this._buttons.length-1);};a.prototype.getButton=function(k){var g;try{g=this._buttons[this._navigation[k].index];}catch(h){return null;}return g;};a.prototype.getButtonByIndex=function(g){var h;try{h=this._buttons[g];}catch(k){return null;}return h;};a.prototype.getCurrentButton=function(){return this._currentButton;};a.prototype.getCurrentIndex=function(){return this._currentIndex;};a.prototype.selectButton=function(k,h){var g;if(h){g=this._navigation[k].index;this._selectButton(g,h);}else{this._currentButton=this._buttons[this._navigation[k].index];this._currentIndex=this._navigation[k].index;}};a.prototype.selectButtonByIndex=function(g,h){this._selectButton(g,h);};a.prototype.updateButton=function(m,l){var h;var k=this._buttons.length;var g=this._buttons[this._navigation[m].index];g.configure(l);this._navigation={};for(h=0;h<k;h++){this._defineNavigationForButtonAtIndex(h);}this._currentButton.highlight();};a.prototype.createSpacer=function(k,g){var l=this._getNextCoords(k,g);var h={getId:function(){return"spacer";},getX:function(){return l.x;},getY:function(){return l.y;},getWidth:function(){return k;},getHeight:function(){return g;},isEnabled:function(){return false;}};this._buttons.push(h);this._navigation.spacer={};};a.prototype.enableButton=function(g){this.updateButton(g,{enabled:true});};a.prototype.disableButton=function(g){this.updateButton(g,{enabled:false});};a.prototype.setWidth=function(g){this._container.setWidth(g);};a.prototype.setHeight=function(g){this._container.setHeight(g);};a.prototype.setImage=function(g){this._container.setHref(g);};a.prototype.setIcon=function(g){this._container.setIcon(g);};a.prototype.setPadding=function(g){this._padding=g;};a.prototype.setRounding=function(g){this._container.setRounding(g);};a.prototype.setCssClass=function(g){this._containerCssClass=g;this._container.setCssClass(g);};a.prototype.setDisabledCssClass=function(g){this._containerDisabledCssClass=g;};a.prototype.setDisabledButtonStandardCssClass=function(g){this._disabledButtonStandardCssClass=g;};a.prototype.setDisabledButtonHighlightCssClass=function(g){this._disabledButtonHighlightCssClass=g;};a.prototype.setDisabledButtonDisabledCssClass=function(g){this._disabledButtonDisabledCssClass=g;};a.prototype.setCssStyle=function(g){this._container.setCssStyle(g);};a.prototype.setAlignmentEmphasis=function(g){this._alignment=g;};a.prototype.setSelectedCallback=function(g){this._selectedCallback=g;};a.prototype.setHighlightedCallback=function(g){this._highlightedCallback=g;};a.prototype.enable=function(){var h;var g;var k=this._buttons.length;if(this._containerCssClass){this._container.setCssClass(this._containerCssClass);}for(h=0;h<k;h++){g=this._buttons[h];if(g.unHighlight){if(this._buttonCssClass[h]){g.setCssClass(this._buttonCssClass[h]);}g.unHighlight();}}if(!this._currentButton&&k>0){this._currentIndex=0;this._currentButton=this._buttons[0];}if(this._currentButton){this._currentButton.highlight();}this._enabled=true;};a.prototype.disable=function(){var h;var k=this._buttons.length;var g;if(this._enabled){if(this._disabledButtonStandardCssClass){for(h=0;h<k;h++){g=this._buttons[h];if(g.setCssClass){this._buttonCssClass[h]=g.getCssClass();if(!g.isEnabled()&&this._disabledButtonDisabledCssClass){g.setCssClass(this._disabledButtonDisabledCssClass);}else{g.setCssClass(this._disabledButtonStandardCssClass);}}}}if(this._disabledButtonHighlightCssClass){this._currentButton.setCssClass(this._disabledButtonHighlightCssClass);}else{this._currentButton.unHighlight();}if(this._containerDisabledCssClass){this._container.setCssClass(this._containerDisabledCssClass);}this._enabled=false;}};a.prototype.keyHandler=function(g){var h=$N.gui.FrameworkCore.getKeys();var k=false;var l=this._navigation[this._currentButton.getId()];if(this._enabled){switch(g){case h.KEY_RIGHT:if(l.right!==undefined){this._selectButton(l.right,"right");k=true;}break;case h.KEY_LEFT:if(l.left!==undefined){this._selectButton(l.left,"left");k=true;}break;case h.KEY_UP:if(l.up!==undefined){this._selectButton(l.up,"up");k=true;}break;case h.KEY_DOWN:if(l.down!==undefined){this._selectButton(l.down,"down");k=true;}break;case h.KEY_OK:this._itemSelected(this._currentButton);k=true;break;default:break;}}return k;};a.prototype.toString=function(){return"ButtonBar";};a.prototype.getClassName=function(){return this.toString();};a.VERTICAL_ALIGNMENT="vertical";a.HORIZONTAL_ALIGNMENT="horizontal";window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ButtonBar=a;return a;});define("jsfw/gui/GUIObjects/Controls/ScrollingLabel",["jsfw/gui/GUIObjects/Components/ClippedGroup","jsfw/gui/GUIObjects/Components/Group","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Components/AbstractComponent","jsfw/gui/GUIObjects/GUIObject"],function(a,b,e,d,g,c){(function(k){var h={SVG:{createElement:function(n){return n.createElement("tspan");}}}[k.gui.GUIObject.mode];function m(p,o){var n=h.createElement(p);this._rootElement=n;this._innerElement=n;this._text="";this._textOverflow="none";this._alignment=m.ALIGN_LEFT;if(o){o.addChild(this);}}k.gui.Util.extend(m,k.gui.Label);var l=m.prototype;k.gui=k.gui||{};k.gui.ScrollingLabelSpan=m;}($N||{}));function f(k,h){f.superConstructor.call(this,k);this._container=new $N.gui.ClippedGroup(k);this._content=new $N.gui.Group(k,this._container);this._label=new $N.gui.Label(k,this._content);this._textElement=this._label;if($N.gui.GUIObject.mode==="SVG"){this._label._rootElement.setAttribute("x",0);this._textElement=new $N.gui.ScrollingLabelSpan(k,this._label);}this._rootElement=this._container.getRootElement();this._innerElement=this._label.getRootElement();if(h){h.addChild(this._container);}this._moveAnim=null;this._text="";this._textLength=0;this._duration="3s";this._durationPerCharacter=false;this._bounce=true;this._isTextOverflow=false;this._alignment=$N.gui.Label.ALIGN_LEFT;this._padding=false;this._isFirstLoop=true;}$N.gui.Util.extend(f,$N.gui.AbstractComponent);f.prototype.setWidth=function(h){this._container.setWidth(h);};f.prototype.setBounce=function(h){if(h===true||h==="true"){this._bounce=true;this._padding=false;}else{this._bounce=false;}this.stop();};f.prototype.setPadding=function(h){if(h===true||h==="true"){this._padding=true;this._bounce=false;}else{this._padding=false;}this.stop();};f.prototype.setText=function(k,h){this._text=k;this._textElement.setText(k);this._textLength=this._textElement.getTextLength();this._content.setX(0);this._adjustContainer();if(this._moveAnim&&this._durationPerCharacter){this._moveAnim.setDuration(this.getDuration());}this.stop();if(h!==true){this.start();}};f.prototype.setFontSize=function(h){this._textElement.setFontSize(h);this._adjustContainer();};f.prototype.setCssStyle=function(h){this._textElement.setCssStyle(h);this._adjustContainer();};f.prototype.setCssClass=function(h){this._textElement.setCssClass(h);this._refresh();this._adjustContainer();};f.prototype.setContentCssClass=function(h){this._content.setCssClass(h);};f.prototype.setDuration=function(k,h){this._duration=k;this._durationPerCharacter=h;this._initialiseAnimation();};f.prototype.getWidth=function(){return this._container.getWidth();};f.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};f.prototype.getText=function(){return this._text;};f.prototype.getFontSize=function(){return this._textElement.getFontSize();};f.prototype.getHeight=function(){return this._textElement.getHeight();};f.prototype.getDuration=function(){if(this._durationPerCharacter){var o=this._duration;var m=o.indexOf("m");if(m<0){m=o.indexOf("s");}var h=o.substring(0,m);var l=o.substring(m,this._duration.length);var k;if(this._bounce){k=this._textLength-this.getWidth();}else{if(this._padding&&!this._isFirstLoop){k=this._textLength+this.getWidth();}else{k=this._textLength;}}var n=k/this.getFontSize();return String(h*n)+l;}return this._duration;};f.prototype.start=function(){this._moveAnim=null;this._initialiseAnimation();this._isFirstLoop=true;if(this._textLength>this._container.getWidth()){this._textElement.setText(this._bounce||this._padding?this._text:this._text+" "+this._text);var h=this;this._moveAnim.setAnimationEndCallback(function(){if(h._isFirstLoop&&h._padding){h._isFirstLoop=false;h._content.setAnimationDuration(h.getDuration());}h._animationEndCallback();});this._animationEndCallback();}};f.prototype._doMove=function(h,k){if($N.gui.GUIObject.mode==="SVG"){this._label.doAttributeAnimation("x",h);}else{this._content.doMove(h,k);}};f.prototype.stop=function(){if(this._moveAnim){this._moveAnim.setAnimationEndCallback(null);this._doMove(0,0);this._content.setX(0);if(!this._bounce&&!this._padding){this._textElement.setText(this._text);}}};f.prototype._refresh=function(){this._textElement.setText(this._text);this._textLength=this._textElement.getTextLength();if(this._moveAnim&&this._durationPerCharacter){this._moveAnim.setDuration(this.getDuration());}};f.prototype.isTextOverflow=function(){if(this._textLength>(this._container.getWidth())){return true;}return false;};f.prototype._initialiseAnimation=function(){if($N.gui.GUIObject.mode==="SVG"){this._label.setAnimationDuration(this.getDuration());if(this._moveAnim===null){this._label.addAttributeAnimation("x");this._moveAnim=this._label._attributeAnim.x;this._moveAnim.setAttributeType("XML");}}else{this._content.setAnimationDuration(this.getDuration());if(this._moveAnim===null){this._content.addMoveAnimation();this._moveAnim=this._content._moveAnim;}}};f.prototype._animationEndCallback=function(){var l;var k=this._container.getWidth();var h=($N.gui.GUIObject.mode==="SVG")?this._label:this._content;if(this._bounce){if(h.getX()===0){l=(k-this._textLength)/this.resolutionVerticalFactor;}else{l=0;}}else{if(this._padding&&!this._isFirstLoop){l=-this._textLength;h.setX(this.getWidth());}else{l=-this._textLength;this._content.setX(0);}}this._doMove(l,0);};f.prototype._adjustContainer=function(){var h=Math.round(this._textElement.getHeight()/this.resolutionVerticalFactor);if($N.gui.GUIObject.mode==="SVG"){this._container.setHeight(h);this._label.setY(Math.round(h*0.72));}else{this._container.setHeight(h+Math.ceil(this.getFontSize()/9));}this._textLength=this._textElement.getTextLength();};f.prototype.toString=function(){return"ScrollingLabel";};f.prototype.getTrueTextLength=function(){return this._textElement.getTrueTextLength();};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.ScrollingLabel=f;return f;});define("jsfw/gui/GUIObjects/Controls/NumberEntry",["jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/FrameworkCore"],function(b,g,f,d,c){function a(k,h){a.superConstructor.call(this,k);this._container=new $N.gui.Container(k);this._text=new $N.gui.Label(k,this._container);this._rootElement=this._container.getRootElement();this._containerCSS="number_entry_bg";this._containerHighlightCSS="number_entry_bg_highlight";this._containerDisabledCSS="number_entry_bg_disabled";this._textCSS="number_entry_text";this._textHighlightCSS="number_entry_text_highlight";this._textDisabledCSS="number_entry_text_disabled";this._passwordChar=null;this._delayPasswordMode=false;this._passwordDelayTimerMS=5000;this._passwordDelayTimer=null;this._value="";this._defaultValue="";this._maxCharacters=10;this._selectedCallback=null;this._disabled=false;this._verticalAlign=true;this._maxValue=null;this.setHeight(a.DEFAULT_HEIGHT);this.setWidth(a.DEFAULT_WIDTH);this.setRounding(a.DEFAULT_ROUNDING);this.unHighlight();if(h){h.addChild(this);}}$N.gui.Util.extend(a,$N.gui.AbstractControl);a.DEFAULT_HEIGHT=30;a.DEFAULT_WIDTH=200;a.DEFAULT_ROUNDING=0;var e=a.prototype;e._alignText=function(){if(this._verticalAlign){var k=this._container.getHeight();var h=this._text.getHeight();var l=(k/2)+(h/3.4);this._text.setY(l);}};e.appendNumber=function(l){var k=this;var h=this._value+l;if(this._maxValue===null||parseInt(h,10)<=parseInt(this._maxValue,10)){this._cancelDelayTimer();if(this._value.length<this._maxCharacters){this._value+=l;if(this._passwordChar){if(!this._delayPasswordMode){this._text.setText(this._text.getText()+this._passwordChar);}else{if(this._text.getText().length>0){this._text.setText(this._text.getText().substring(0,this._text.getText().length-1)+this._passwordChar+l);}else{this._text.setText(this._text.getText()+l);}this._passwordDelayTimer=setTimeout(function(){k._text.setText(k._text.getText().substring(0,k._text.getText().length-1)+k._passwordChar);},this._passwordDelayTimerMS);}}else{this._text.setText(this._text.getText()+l);}}}this._alignText();};e.setWidth=function(h){this._container.setWidth(h);this._text.setWidth(h);};e.getWidth=function(){return this._container.getWidth();};e.setHeight=function(h){this._container.setHeight(h);this._alignText();};e.getHeight=function(){return this._container.getHeight();};e.setRounding=function(h){this._container.setRounding(h);};e.highlight=function(){this._container.setCssClass(this._containerHighlightCSS);this._text.setCssClass(this._textHighlightCSS);};e.unHighlight=function(){this._container.setCssClass(this._containerCSS);this._text.setCssClass(this._textCSS);};e.disable=function(){this._disabled=true;this.showDisabled();};e.enable=function(){this._disabled=false;this.showEnabled();};e.showDisabled=function(){this._container.setCssClass(this._containerDisabledCSS);this._text.setCssClass(this._textDisabledCSS);};e.showEnabled=function(){this._container.setCssClass(this._containerCSS);this._text.setCssClass(this._textCSS);this.unHighlight();};e.setSelectedCallback=function(h){this._selectedCallback=h;};e.getValue=function(){return this._value;};e.setValue=function(m){var l;this._text.setText("");this._value="";var k=String(m);if(isNaN(parseInt(k,10))){return;}var h=Math.min(k.length,this.getMaxCharacters());for(l=0;l<h;l++){this.appendNumber(k.charAt(l));}};e.setDefaultValue=function(h){if(isNaN(parseInt(h,10))){return;}this._defaultValue=h;if(this.getValue()===""){this.reset();}};e.getDefaultValue=function(){return this._defaultValue;};e.reset=function(){if(this.getDefaultValue()===""){this.setValue("");}else{this.setValue(this.getDefaultValue());}};e.setPasswordChar=function(h){this._passwordChar=h||"";};e.setDelayPasswordMode=function(h){this._delayPasswordMode=h;};e.setMaxValue=function(h){this._maxValue=h;};e.setDelayPasswordTime=function(h){this._passwordDelayTimerMS=h;};e.setMaxCharacters=function(h){this._maxCharacters=parseInt(h,10);};e.getMaxCharacters=function(){return this._maxCharacters;};e.setCssStyle=function(h){this._text.setCssStyle(h);};e.setCssClass=function(h){this.setTextCssClass(h);};e.setTextCssClass=function(h){this._text.setCssClass(h);this._textCSS=h;};e.setTextDisabledCssClass=function(h){this._textDisabledCSS=h;};e.setTextHighlightCssClass=function(h){this._textHighlightCSS=h;};e.setContainerCssClass=function(h){this._container.setCssClass(h);this._containerCSS=h;};e.setContainerDisabledCssClass=function(h){this._containerDisabledCSS=h;};e.setContainerHighlightCssClass=function(h){this._containerHighlightCSS=h;};e.setVerticalAlign=function(h){this._verticalAlign=h;};e._cancelDelayTimer=function(){if(this._passwordDelayTimer){clearTimeout(this._passwordDelayTimer);}};e.keyHandler=function(h){var k=$N.gui.FrameworkCore.getKeys();var l=parseInt(h,10);if(this._disabled){return false;}if(h===k.KEY_OK&&this._selectedCallback){this._cancelDelayTimer();this._selectedCallback(this._value);return true;}if(h===k.KEY_LEFT&&this._value.length>0){this._cancelDelayTimer();this._value=this._value.substring(0,this._value.length-1);this._text.setText(this._text.getText().substring(0,this._value.length));return true;}if(!isNaN(l)){this.appendNumber(l);return true;}return false;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.NumberEntry=a;return a;});define("jsfw/gui/GUIObjects/Controls/OctetEntry",["jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/NumberEntry","jsfw/gui/FrameworkCore"],function(d,a,b){function c(f,e){c.superConstructor.call(this,f);this._containerCSS="octet_entry_bg";this._containerHighlightCSS="octet_entry_bg_highlight";this._containerDisabledCSS="octet_entry_bg_disabled";this._textCSS="octet_entry_text";this._textHighlightCSS="octet_entry_text_highlight";this._textDisabledCSS="octet_entry_text_disabled";this._textChangedCallback=function(g){};this._acceptOkKey=false;this._entryFinished=false;this.setPasswordChar("");this.setMaxCharacters(3);this.setHeight(c.DEFAULT_HEIGHT);this.unHighlight();if(e){e.addChild(this);}}$N.gui.Util.extend(c,$N.gui.NumberEntry);c.DEFAULT_HEIGHT=30;c.prototype._alignText=function(){c.superClass._alignText.call(this);if(this._value.length===0){this._text.setX(this._text.getX()+8);}};c.prototype.setTextChangedCallback=function(e){this._textChangedCallback=e;};c.prototype.keyHandler=function(f){var g=$N.gui.FrameworkCore.getKeys(),h=parseInt(f,10),e=this._value.length;if(e===0&&(f===g.KEY_RIGHT||(this._acceptOkKey&&f===g.KEY_OK))){return true;}if(f===g.KEY_RIGHT||(this._acceptOkKey&&f===g.KEY_OK)){if(!this._entryFinished&&this._selectedCallback){this._selectedCallback(this._value);this._entryFinished=true;return true;}return false;}if(f===g.KEY_LEFT){if(e>0){this._value=this._value.substring(0,e-1);this._text.setText(this._text.getText().substring(0,this._value.length));this._textChangedCallback(this._value);this._entryFinished=false;return true;}return false;}if(!isNaN(h)&&parseInt(h,10)<10){this._entryFinished=false;if(e===2){if(this._value>="00"&&((this._value==="25"&&h<=5)||(this._value<="24"&&h<=9))){this.appendNumber(h);}}else{if(e===1&&this._value>="0"&&this._value<="9"){this.appendNumber(h);}else{if(e===0){this.appendNumber(h);}}}this._textChangedCallback(this._value);return true;}return false;};c.prototype.terminateWithOkKey=function(e){this._acceptOkKey=e;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.OctetEntry=c;return c;});define("jsfw/gui/GUIObjects/Controls/IPEntry",["jsfw/gui/GUIObjects/Controls/AbstractControl","jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Controls/OctetEntry","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util","jsfw/gui/FrameworkCore"],function(d,a,c,h,g,b){function f(n,m){var k=this,l;this._entryFinishedCallback=function(o){if(o.length>0){k._ipAddress="";for(l=1;l<=k._currentOctetIndex;l++){if(k._ipAddress.length>0){k._ipAddress+=".";}k._ipAddress+=k["_octet"+String(l)].getValue();}if(k._currentOctetIndex===4){k._entryFinishedCallback(k._ipAddress);}else{if(k._currentOctetIndex<4){k._currentOctet.unHighlight();k._currentOctetIndex++;k._currentOctet=k["_octet"+String(k._currentOctetIndex)];k._currentOctet.highlight();}}}};f.superConstructor.call(this,n);this._container=new $N.gui.Container(n,m);this._octet1Config={x:5,y:5,width:40,maxCharacters:3};this._octet2Config={x:50,y:5,width:40,maxCharacters:3};this._octet3Config={x:95,y:5,width:40,maxCharacters:3};this._octet4Config={x:140,y:5,width:40,maxCharacters:3};this._ipAddress="";this._octet1=new $N.gui.OctetEntry(n,this._container);this._octet2=new $N.gui.OctetEntry(n,this._container);this._seperator1=new $N.gui.Label(n,this._container);this._seperator1.setCssClass("octet_entry_text");this._octet3=new $N.gui.OctetEntry(n,this._container);this._seperator2=new $N.gui.Label(n,this._container);this._seperator2.setCssClass("octet_entry_text");this._octet4=new $N.gui.OctetEntry(n,this._container);this._seperator3=new $N.gui.Label(n,this._container);this._seperator3.setCssClass("octet_entry_text");this._currentOctet=this._octet1;this._currentOctet.highlight();this._currentOctetIndex=1;this._octet1.configure(this._octet1Config);this._octet1.setSelectedCallback(this._entryFinishedCallback);this._octet2.configure(this._octet2Config);this._octet2.setSelectedCallback(this._entryFinishedCallback);this._octet3.configure(this._octet3Config);this._octet3.setSelectedCallback(this._entryFinishedCallback);this._octet4.configure(this._octet4Config);this._octet4.setSelectedCallback(this._entryFinishedCallback);this._octet4.terminateWithOkKey(true);this._entryFinishedCallback=null;this._rootElement=this._container.getRootElement();if(m){m.addChild(this);}}$N.gui.Util.extend(f,$N.gui.AbstractControl);var e=f.prototype;e.keyHandler=function(k){var l=$N.gui.FrameworkCore.getKeys(),m=this._currentOctet.keyHandler(k);if(!m){if(k===l.KEY_LEFT){if(this._currentOctetIndex>1){this._currentOctet.unHighlight();this._currentOctetIndex--;this._currentOctet=this["_octet"+String(this._currentOctetIndex)];this._currentOctet.highlight();m=true;}}if(k===l.KEY_OK){if(this._currentOctet===this._octet4){if(this._entryFinishedCallback){this._entryFinishedCallback(this._ipAddress);}m=true;}}}return m;};e.setFinishedCallback=function(k){this._entryFinishedCallback=k;};e.setTextChangedCallback=function(k){this._textChangedCallback=k;this._octet1.setTextChangedCallback(this._textChangedCallback);this._octet2.setTextChangedCallback(this._textChangedCallback);this._octet3.setTextChangedCallback(this._textChangedCallback);this._octet4.setTextChangedCallback(this._textChangedCallback);};e.getCurrentIPText=function(){var k="";if(this._octet1.getValue()!==""){k=this._octet1.getValue();}if(this._octet2.getValue()!==""){k=k+"."+this._octet2.getValue();}if(this._octet3.getValue()!==""){k=k+"."+this._octet3.getValue();}if(this._octet4.getValue()!==""){k=k+"."+this._octet4.getValue();}return k;};e.setWidth=function(k){this._container.setWidth(k);var m=(k/4)-6,l=5;this._octet1.setWidth(m);this._octet2.setX(this._octet1.getTrueX()+m+l);this._octet2.setWidth(m);this._seperator1.setX(this._octet2.getTrueX());this._octet3.setX(this._octet2.getTrueX()+m+l);this._octet3.setWidth(m);this._seperator2.setX(this._octet3.getTrueX());this._octet4.setX(this._octet3.getTrueX()+m+l);this._octet4.setWidth(m);this._seperator3.setX(this._octet4.getTrueX());};e.setHeight=function(k){this._container.setHeight(k);this._seperator1.setY(k);this._seperator2.setY(k);this._seperator3.setY(k);};e.setCssStyle=function(k){this._container.setCssStyle(k);};e.setCssClass=function(k){this._container.setCssClass(k);};e.getIPAddress=function(){return this._ipAddress;};e.setIPAddress=function(k){this._ipAddress=k;};e.getCurrentOctet=function(){return this["_octet"+String(this._currentOctetIndex)].getValue();};e.clearValues=function(){this._octet1.reset();this._octet2.reset();this._octet3.reset();this._octet4.reset();this._currentOctet.unHighlight();this._currentOctetIndex=1;this._currentOctet=this._octet1;this._currentOctet.highlight();this.setIPAddress("");};e.setSeperatorChar=function(k){this._seperator1.setText(k);this._seperator2.setText(k);this._seperator3.setText(k);};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.IPEntry=f;return f;});define("jsfw/gui/GUIObjects/Controls/dialogs/AbstractDialog",["jsfw/gui/GUIObjects/GUIObject","jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/Image","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/GUIObjects/Components/TextArea","jsfw/gui/helpers/Util","jsfw/gui/FrameworkCore"],function(g,c,a,f,k,h,b){function e(l){e.superConstructor.call(this,l);this._container=new $N.gui.Container(l);this._background=new $N.gui.Image(l,this._container);this._title=new $N.gui.Label(l,this._container);this._message=new $N.gui.TextArea(l,this._container);this._container.configure({cssClass:"dialog_bg",rounding:e.DEFAULT_ROUNDING});this._title.configure({x:e.DEFAULT_TITLE_POS.x,y:e.DEFAULT_TITLE_POS.y,cssClass:"dialog_title"});this._message.configure({x:e.DEFAULT_MESSAGE_POS.x,y:e.DEFAULT_MESSAGE_POS.y,cssClass:"dialog_message"});this._rootElement=this._container.getRootElement();this._okCallback=null;this.setHeight(e.DEFAULT_HEIGHT);this.setWidth(e.DEFAULT_WIDTH);this.move(e.DEFAULT_X,e.DEFAULT_Y);}$N.gui.Util.extend(e,$N.gui.GUIObject);e.DEFAULT_HEIGHT=200;e.DEFAULT_WIDTH=400;e.DEFAULT_X=200;e.DEFAULT_Y=200;e.DEFAULT_ROUNDING=0;e.DEFAULT_TITLE_POS={x:10,y:30};e.DEFAULT_MESSAGE_POS={x:10,y:70};var d=e.prototype;d.setWidth=function(l){this._container.setWidth(l);this._message.setWidth(l-20);this._title.setWidth(l);};d.getWidth=function(){return this._container.getWidth();};d.setHeight=function(l){this._container.setHeight(l);this._message.setHeight(l-this._message.getY());};d.getHeight=function(){return this._container.getHeight();};d.setTitle=function(l){this._title.setText(l);};d.getTitle=function(){return this._title.getText();};d.setMessage=function(l){this._message.setText(l);};d.getMessage=function(){this._message.getText();};d.setOkCallback=function(l){this._okCallback=l;};d.keyHandler=function(l){var m=$N.gui.FrameworkCore.getKeys();if(l===m.KEY_OK&&this._okCallback){this._okCallback();return true;}return false;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AbstractDialog=e;return e;});define("jsfw/gui/Logic/List/Mosaic",["jsfw/gui/Logic/List/List"],function(b){var a=function(f,e){e=e||{};$N.gui.BasicList.call(this,f,e);var c={};var d;this.initialize=function(){e.lastRow=0;e.listItems=[];};this.getItemsWide=function(){return d;};this.setItemsWide=function(g){d=parseInt(g,10);};this.addExistingItem=function(g){e.listItems[e.listItems.length]=g;e.lastRow++;};this.selectAbove=function(){var h=this.getActualSelectedRowIndex()-this.getItemsWide();if(h<1){var k=Math.ceil(this.getSize()/this.getItemsWide());var l=(k*this.getItemsWide())+h;var g=l>this.getSize()?l-this.getItemsWide():l;this.selectRowAtIndex(g);}else{this.selectRowAtIndex(h);}};this.selectBelow=function(){var g=this.getActualSelectedRowIndex()+this.getItemsWide();if(g>this.getSize()){var h=1+((g-1)%this.getItemsWide());this.selectRowAtIndex(h);}else{this.selectRowAtIndex(g);}};this.getXIndexOfLast=function(){return(1+((e.lastRow-1)%this.getItemsWide()));};this.getYIndexOfLast=function(){return Math.ceil(this.getSize()/this.getItemsWide());};this.isSelectedItemAtLastColumn=function(){return((this.getActualSelectedRowIndex()%this.getItemsWide())===0);};this.isSelectedItemAtFirstColumn=function(){return((this.getActualSelectedRowIndex()%this.getItemsWide())===1);};};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.Mosaic=a;return a;});define("jsfw/gui/GUIObjects/Controls/List/AbstractMosaicTile",["jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/List/customisable/AbstractListItem"],function(c,a){function b(d,e){b.superConstructor.call(this,d);this._width=0;this._height=0;this._data=e;this._dataMapper={};this._itemConfig={};}$N.gui.Util.extend(b,$N.gui.AbstractListItem);b.prototype.setItemConfig=function(d){this._itemConfig=d;};b.prototype.setWidth=function(d){this._width=d;};b.prototype.setHeight=function(d){this._height=d;};b.prototype.setData=function(d){this._data=d;};b.prototype.getWidth=function(){return this._width;};b.prototype.getHeight=function(){return this._height;};b.prototype.configure=function(){if(!this._itemConfig){throw ("AbstractMosaicTile - configure: item configuration details not found");}b.superClass.configure.call(this,this._itemConfig);};b.prototype.update=function(d){if(!d&&!this._data){throw ("AbstractMosaicTile - update: no data found to update tile with");}};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.AbstractMosaicTile=b;return b;});define("jsfw/gui/GUIObjects/Controls/List/GeneralMosaicTile",["jsfw/gui/GUIObjects/Components/Container","jsfw/gui/GUIObjects/Components/Image","jsfw/gui/GUIObjects/Components/Label","jsfw/gui/helpers/Util","jsfw/gui/GUIObjects/Controls/List/AbstractMosaicTile"],function(a,b,f,e,d){function c(g,h){c.superConstructor.call(this,g);this._container=new $N.gui.Container(this._docRef);this._container.setRounding(4);this._rootElement=this._container.getRootElement();this._highlighter=new $N.gui.Container(this._docRef,this._container);this._highlighter.setRounding(4);this._highlighter.setCssClass("mosaic-box-unhighlight");this._highlighter.setCssHighlightClass("mosaic-box-highlight");this._image=new $N.gui.Image(g,this._container);this._title=new $N.gui.Label(g,this._container);this._subTitle=new $N.gui.Label(g,this._container);}$N.gui.Util.extend(c,$N.gui.AbstractMosaicTile);c.prototype.setCssStyle=function(g){this._highlighter.setCssStyle(g);};c.prototype.setCssHighlightStyle=function(g){this._highlighter.setCssHighlightStyle(g);};c.prototype.setCssClass=function(g){this._highlighter.setCssClass(g);};c.prototype.setCssHighlightClass=function(g){this._highlighter.setCssHighlightClass(g);};c.prototype.highlight=function(){this._highlighter.highLight();};c.prototype.unHighlight=function(){this._highlighter.unHighLight();};c.prototype.setContainerRounding=function(g){this._container.setRounding(g);this._highlighter.setRounding(g);};c.prototype.setWidth=function(g){c.superClass.setWidth.call(this,g);this._highlighter.setWidth(this._width-10);};c.prototype.setHeight=function(g){c.superClass.setHeight.call(this,g);this._highlighter.setHeight(this._height);};c.prototype.setImageUrl=function(g){if(g){this._image.setHref(g);}};c.prototype.setTitle=function(g){if(g){this._title.setText(g);}};c.prototype.setSubtitle=function(g){if(g){this._subTitle.setText(g);}};c.prototype.configure=function(){if(!this._itemConfig){throw ("GeneralMosaicTile - configure: item configuration details not found");}if(this._itemConfig.x){this.setX(this._itemConfig.x);}if(this._itemConfig.y){this.setY(this._itemConfig.y);}if(this._itemConfig.height){this.setHeight(this._itemConfig.height);}else{this.setHeight(200);}if(this._itemConfig.width){this.setWidth(this._itemConfig.width);}else{this.setWidth(200);}this._image.setX(5);this._image.setY(5);this._image.setWidth(180);this._image.setHeight(125);this._title.setX(200);this._title.setY(30);this._title.setWidth(100);this._title.setHeight(30);this._subTitle.setX(200);this._subTitle.setY(50);this._subTitle.setWidth(100);this._subTitle.setHeight(50);};c.prototype.update=function(g){if(!g&&!this._data){throw ("GeneralMosaicTile - update: no data found to update tile with");}this.setData(g);this.setTitle(this._dataMapper.getTitle(g));this.setSubtitle(this._dataMapper.getSubtitle(g));this.setImageUrl(this._dataMapper.getImageUrl(g));};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.GeneralMosaicTile=c;return c;});define("jsfw/gui/GUIObjects/Controls/List/PagingMosaicMenu",["jsfw/gui/Logic/List/List","jsfw/gui/Logic/List/Mosaic","jsfw/gui/GUIObjects/Components/Container","jsfw/apps/core/Log","jsfw/gui/GUIObjects/Controls/List/customisable/AbstractCustomisableList","jsfw/gui/helpers/Util","jsfw/gui/FrameworkCore"],function(k,d,c,e,f,h,b){function a(l){a.superConstructor.call(this,l);this._data=new $N.gui.PagingList();this._items=new $N.gui.Mosaic();this._container=new $N.gui.Container(l);this._rootElement=this._container.getRootElement();this._hspace=20;this._vspace=10;this._tileHeight=130;this._tileWidth=200;this._rows=3;this._columns=3;this._customKeyHandler=null;this._listPagedCallback=function(){};this._log=new $N.apps.core.Log("LIST","PagingMosaicMenu");}$N.gui.Util.extend(a,$N.gui.AbstractCustomisableList);a.consts=$N.gui.AbstractCustomisableList.consts;a.SCREEN_WIDTH=1100;a.SCREEN_HEIGHT=540;var g=a.prototype;g.setHeight=function(l){if(l){this._height=l;}return this;};g.setWidth=function(l){if(l){this._width=l;}return this;};g.setHSpace=function(l){this._hspace=l;return this;};g.setVSpace=function(l){this._vspace=l;return this;};g.setRows=function(l){this._rows=parseInt(l,10);return this;};g.setColumns=function(l){this._columns=parseInt(l,10);return this;};g._calculateTileDimensions=function(){var l;var n;var m=this._itemConfig;if(m.height!==undefined&&m.height!==null){this._tileHeight=m.height;}else{l=this._height/this._rows;if(!m.vSpace){this._vspace=l/(this._rows+1);}this._tileHeight=l-this._vspace;}if(m.width!==undefined&&m.width!==null){this._tileWidth=m.width;}else{n=this._width/this._columns;if(!m.hSpace){this._hspace=n/(this._columns+1);}this._tileWidth=n-this._hspace;}};g._addMosaicItem=function(n){var m,o,l,p;if(!this._dataMapper){throw ("PagingMosaicMenu - _addMosaicItem: no item data mapper set");}if(!this._itemConfig){throw ("PagingMosaicMenu - _addMosaicItem: no item configuration data found");}n.setDataMapper(this._dataMapper);this._items.addExistingItem(n);o=this._items.getXIndexOfLast();m=this._items.getYIndexOfLast();if((o*m)<=this.getItemsPerPage()){l=((o-1)*this._tileWidth)+(this._hspace*o);p=((m-1)*this._tileHeight)+(this._vspace*m);}n.setX(l);n.setY(p);n.setItemConfig(this._itemConfig);n.configure();};g._moveSelection=function(){this._items.getSelectedItem().unHighlight();this._items.selectRowAtIndex(this._data.getViewSelectedRowIndex());var l=this._items.getSelectedItem();l.highlight();this._handleItemHighlighted(l);};g.selectItemAtPosition=function(q,m,p){if(!q||!m){return null;}var o=false;if(p===undefined||p===null){p=this.getCurrentPageNumber();}else{if(p!==this.getCurrentPageNumber()){o=true;}}var l,n=this._data.getActualSelectedRowIndex();if(q<=this._rows&&m<=this._columns){l=(p-1)*this.getItemsPerPage()+((q-1)*this._columns)+m;while(l>this._data.getSize()){if((p!==this.getCurrentPageNumber())||(m!==this.getSelectedColumnIndex())){l-=1;}else{if(q!==this.getSelectedRowIndex()){l-=this._columns;}}}if(l!==n){if(l>=1){this._data.selectRowAtIndex(l);}else{}if(o){this._listPagedCallback();this.displayData(false);}this._moveSelection();}}return this;};g.getItemsPerPage=function(){return this._columns*this._rows;};g.getNumberOfItemsInCurrentPage=function(){return this._data.returnViewableList().length;};g.getTotalNumberOfPages=function(){return Math.ceil(this._data.getSize()/this.getItemsPerPage());};g.getCurrentPageNumber=function(){return Math.ceil(this._data.getFirstVisibleRowIndex()/this.getItemsPerPage());};g.isAtLastPage=function(){return(this.getCurrentPageNumber()===this.getTotalNumberOfPages());};g.isAtFirstPage=function(){return(this.getCurrentPageNumber()===1);};g.getSelectedColumnIndex=function(){return(this._items.getActualSelectedRowIndex()%this._columns)||this._columns;};g.getSelectedRowIndex=function(){return Math.ceil(this._items.getActualSelectedRowIndex()/this._columns);};g.isSelectedItemAtLastColumn=function(){return this._items.isSelectedItemAtLastColumn();};g.isSelectedItemAtFirstColumn=function(){return this._items.isSelectedItemAtFirstColumn();};g.isSelectedItemAtFirstRow=function(){return(this.getSelectedRowIndex()===1);};g.isSelectedItemAtLastRow=function(){return(this.getSelectedRowIndex()===this._rows);};g.init=function(){if(this._initialised){return;}if(!this._itemTemplate){throw ("PagingMosaicMenu - init: No list item template provided");}var m,l,n=this.getItemsPerPage();this._calculateTileDimensions();this._data.setVisibleRows(n);this._items.setItemsWide(this._columns);if(!this._itemConfig.width){this._itemConfig.width=this._tileWidth;}if(!this._itemConfig.height){this._itemConfig.height=this._tileHeight;}for(m=0;m<n;m++){l=new this._itemTemplate(this._docRef);this._addMosaicItem(l);this._rootElement.appendChild(l.getRootElement());}this._initialised=true;return this;};g.initialise=function(){return this.init();};g.selectPrevious=function(){if(this._data.isSelectedAtFirst()){if(this._data.getWrapAround()){this.moveToLastPage(this._rows,this._columns);}}else{if(this.isSelectedItemAtFirstColumn()){if(this.isAtFirstPage()){if(this._data.getWrapAround()){this.moveToLastPage(this.getSelectedRowIndex(),this._columns);}else{this.selectItemAtPosition(this.getSelectedRowIndex()-1,this._columns);}}else{this.moveToPreviousPage(this.getSelectedRowIndex(),this._columns);}}else{this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex()-1);}}return this;};g.selectNext=function(){if(this._data.isSelectedAtLast()){if(this._data.getWrapAround()){this.moveToFirstPage(1,1);}}else{if(this.isSelectedItemAtLastColumn()){if(this.isAtLastPage()){if(this._data.getWrapAround()){this.moveToFirstPage(this.getSelectedRowIndex(),1);}else{this.selectItemAtPosition(this.getSelectedRowIndex()+1,1);}}else{this.moveToNextPage(this.getSelectedRowIndex(),1);}}else{this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex()+1);}}return this;};g.selectAbove=function(){if(this._data.isSelectedAtFirst()){if(this._data.getWrapAround()){this.moveToLastPage(this._rows,this._columns);}}else{if(this.isSelectedItemAtFirstRow()){if(this.isSelectedItemAtFirstColumn()){if(!this.isAtFirstPage()){this.moveToPreviousPage(this._rows,this._columns);}}else{this.selectItemAtPosition(this._rows,this.getSelectedColumnIndex()-1);}}else{this.selectItemAtPosition(this.getSelectedRowIndex()-1,this.getSelectedColumnIndex());}}return this;};g.selectBelow=function(){if(this._data.isSelectedAtLast()){if(this._data.getWrapAround()){this.moveToFirstPage(1,1);}}else{if(this.isSelectedItemAtLastRow()){if(this.isSelectedItemAtLastColumn()){if(!this.isAtLastPage()){this.moveToNextPage(1,1);}}else{this.selectItemAtPosition(1,this.getSelectedColumnIndex()+1);}}else{this.selectItemAtPosition(this.getSelectedRowIndex()+1,this.getSelectedColumnIndex());}}return true;};g.moveToPreviousPage=function(m,l){if(!this.isAtFirstPage()){this.selectItemAtPosition(m||this.getSelectedRowIndex(),l||this.getSelectedColumnIndex(),this.getCurrentPageNumber()-1);}return this;};g.moveToNextPage=function(m,l){if(!this.isAtLastPage()){this.selectItemAtPosition(m||this.getSelectedRowIndex(),l||this.getSelectedColumnIndex(),this.getCurrentPageNumber()+1);}return this;};g.moveToFirstPage=function(m,l){this.selectItemAtPosition(m||this.getSelectedRowIndex(),l||this.getSelectedColumnIndex(),1);return this;};g.moveToLastPage=function(m,l){this.selectItemAtPosition(m||this.getSelectedRowIndex(),l||this.getSelectedColumnIndex(),this.getTotalNumberOfPages());return this;};g.displayData=function(l){if(l===undefined||l===null){l=true;}var o=this._data.returnViewableList();var n,m;for(n=0;n<o.length;n++){m=this._items.getRowAtIndex(n+1);m.update(o[n]);if(!m.isVisible()){m.show();}}if(o.length<this._data.getVisibleRows()){for(n=o.length;n<this._data.getVisibleRows();n++){this._items.getRowAtIndex(n+1).hide();}}if(l){this._items.getSelectedItem().highlight();}return this;};g.keyHandler=function(l){var n;if(this._customKeyHandler){n=this._customKeyHandler.call(this,l);}if(n){return n;}var m=$N.gui.FrameworkCore.getKeys();switch(l){case this._previousKey:return this.selectPrevious();case this._nextKey:return this.selectNext();case m.KEY_DOWN:return this.selectBelow();case m.KEY_UP:return this.selectAbove();case m.KEY_OK:this._itemSelectedCallback(this._data.getSelectedItem());return true;default:return false;}};g.setCustomKeyHandler=function(l){if(l){this._customKeyHandler=l;}return this;};window.$N=$N||{};$N.gui=$N.gui||{};$N.gui.PagingMosaicMenu=a;return a;});define("jsfw/apps/dialog/DialogManager",["jsfw/apps/core/Log","jsfw/apps/core/KeyInterceptor"],function(b,a){window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.dialog=$N.apps.dialog||{};$N.apps.dialog.DialogManager=(function(){var k=new $N.apps.core.Log("dialog","DialogManager"),w=1000,m=null,t=[],d=null,f=null,g=null,B=[],n={width:400,height:200,x:440,y:200};function o(C){if(C&&C.autoCloseInterval){k("startDialogWatchTimer","Dialog "+String(C.id)+" will get closed automatically in "+(C.autoCloseInterval/1000).toString()+" secs");if(C._dialogWatchTimer){clearTimeout(C._dialogWatchTimer);}C._dialogWatchTimer=setTimeout(function(){p(C,true);},C.autoCloseInterval);}}function h(C){if(C&&C._dialogWatchTimer){clearTimeout(C._dialogWatchTimer);}}function y(D){var F=false,E,C;if(m&&m.id&&g&&g[m.id]){E=g[m.id];C=m;if(C&&C.keyHandler){o(E);F=C.keyHandler(D);}}return F;}function A(){if(!d){e();d=setInterval(function(){e();},w);}}function r(D){var C;for(C=0;C<B.length;C++){if(D.id===B[C].id){return true;}}return false;}function z(C){var D=g[C.id];m=C;C.show();o(D);A();}function p(D,C){if(!D){return false;}$N.apps.core.KeyInterceptor.unregisterInterceptor(y);if(D.id&&g){g[D.id]=null;}if(r(D)){B.pop();}else{if(t.length>0){t.pop();}}D.dialogObj.hide();if(C&&D.onTimedOutCallback){D.onTimedOutCallback();}m=null;h(D);if(B.length!==0){z(B[B.length-1]);return true;}else{if(t.length>0){z(t[t.length-1]);return true;}}A();return true;}function x(C){if(!C){return;}$N.apps.core.KeyInterceptor.registerInterceptor(y,this);C.dialogObj.show();m=C.dialogObj;if(C.onShownCallback){C.onShownCallback();}o(C);}function c(C){var D=g[C.id];h(D);if(!r(C)){if(t.length===0||t[t.length-1].id!==C.id){t.push(C);}}C.hide(true);}function v(C){var D=g[C.id];if(!C||!C.id||!g){return null;}if(!D||!D.priority){return null;}return D.priority;}function q(J,H){var G=null,D,C,E,F,I=null;if(!f){return null;}if(H){I=[H];}else{I=[$N.apps.dialog.DialogManager.VERY_HIGH_PRIORITY,$N.apps.dialog.DialogManager.HIGH_PRIORITY,$N.apps.dialog.DialogManager.MEDIUM_PRIORITY,$N.apps.dialog.DialogManager.LOW_PRIORITY];}for(E in I){C=f[I[E]];k("processQueue","Number of dialogs: "+(C?C.length:0));if(C&&C.length>0){if(!J){G=C.pop();while(!G&&(C.length>0)){G=C.pop();}}else{for(F in C){D=C[F];k("getNextDialog",(D?D.id:"xxxx"));if(D&&D.id===J){G=D;C[F]=null;break;}}}return G;}}return null;}function s(){if(d){clearInterval(d);d=null;}}function e(){var D,C=null,E;if(m){D=v(m);if(D!==$N.apps.dialog.DialogManager.VERY_HIGH_PRIORITY){C=q(null,$N.apps.dialog.DialogManager.VERY_HIGH_PRIORITY);}if(C){c(m);x(C);return;}s();return;}E=q(null,null);if(!E){s();}else{x(E);}}function l(C,I,D,E,J,H,K){var F,G;f=f||{};g=g||{};if(!C.id){return false;}if(g[C.id]){return false;}F={id:C.id,dialogObj:C,priority:I,autoCloseInterval:D,onQueuedCallback:E,onShownCallback:J,onTimedOutCallback:H};g[C.id]=F;if(K){B.push(C);if(m){c(m);}x(F);return true;}G=f[I]||[];G.unshift(F);f[I]=G;G=null;if(E){E();}A();return true;}function u(C){if(!C||!f){return false;}if(!q(C.id,null)){return false;}return true;}return{keyHandler:y,NO_PRIORITY:-1,LOW_PRIORITY:1,MEDIUM_PRIORITY:2,HIGH_PRIORITY:3,VERY_HIGH_PRIORITY:4,DEFAULT_AUTO_CLOSE_TIMEOUT:30000,showDialog:function(C,E,F,H,D,G){if(!C){return false;}if(!E||E<$N.apps.dialog.DialogManager.LOW_PRIORITY){E=$N.apps.dialog.DialogManager.LOW_PRIORITY;}else{if(E>$N.apps.dialog.DialogManager.VERY_HIGH_PRIORITY){E=$N.apps.dialog.DialogManager.HIGH_PRIORITY;}}return l(C,E,F,H,D,G,false);},showPersistentDialog:function(C){return l(C,$N.apps.dialog.DialogManager.NO_PRIORITY,null,null,null,null,true);},hideDialogWithId:function(D){if(!D||!g){return false;}var C=g[D];if(!C||!C.dialogObj){k("hideDialogWithId",(C?C.dialogObj:"ignored"));return false;}return $N.apps.dialog.DialogManager.hideDialog(C.dialogObj);},hideDialog:function(C){if(!C||C.id===null){return false;}if(!g){return false;}var D=g[C.id];if(!D){return false;}u(D);return p(D);},setDefaultDialogSizeAndPosition:function(C){n=C;},getDefaultDialogSizeAndPosition:function(){return n||{x:null,y:null,width:null,height:null};},getCurrentDialog:function(){return m;}};}());return $N.apps.dialog.DialogManager;});define("jsfw/apps/dialog/Dialog",["jsfw/apps/core/Log","jsfw/apps/dialog/DialogManager","jsfw/apps/core/KeyInterceptor"],function(d,b,a){var e=new $N.apps.core.Log("dialog","Dialog");function c(h,g){this.id=h;this.lastKeyPress=null;this.visible=false;this.frozen=false;this.persist=false;this.modal=g||false;this._dialogGUIObject=null;}var f=c.prototype;f._positionAndSizeDialog=function(h,o,m,g){var l=$N.apps.dialog.DialogManager.getDefaultDialogSizeAndPosition();var k={};var n;l.x=(h!==null&&h!==undefined)?h:l.x;l.y=(o!==null&&o!==undefined)?o:l.y;l.width=m||l.width;l.height=g||l.height;for(n in l){if(l[n]!==null){k[n]=l[n];}}this._dialogGUIObject.configure(k);};f.customise=function(g){if(this._dialogGUIObject){this._dialogGUIObject.configure(g);}};f.show=function(){var g;if(this.frozen){this._dialogGUIObject.show();}else{if(document.body){g=document.getElementById("_dialogues_");if(typeof(g)==="undefined"||g===null){g=document.createElement("div");g.id="_dialogues_";g.style.position="absolute";g.style.top="0px";g.style.left="0px";document.body.appendChild(g);}g.appendChild(this._dialogGUIObject.getRootElement());}else{document.documentElement.appendChild(this._dialogGUIObject.getRootElement());}this._dialogGUIObject.show();}};f.hide=function(h){var g=this._dialogGUIObject.getRootElement();if(this.persist||h){this._dialogGUIObject.hide();this.frozen=true;}else{if(g.parentNode){g.parentNode.removeChild(g);}this.frozen=false;}this.visible=false;};f.keyHandler=function(g){var h=$N.apps.core.KeyInterceptor.getKeyMap();if(this._dialogGUIObject.keyHandler(g)){return true;}if(this.modal&&(g===h.KEY_LEFT||g===h.KEY_RIGHT||g===h.KEY_UP||g===h.KEY_DOWN)){return true;}return this.modal;};window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.dialog=$N.apps.dialog||{};$N.apps.dialog.Dialog=c;return c;});define("jsfw/apps/dialog/PinDialog",["jsfw/apps/dialog/DialogManager","jsfw/apps/util/Util","jsfw/apps/dialog/Dialog","jsfw/gui/GUIObjects/Controls/dialogs/PinDialog"],function(a,d,b,c){function e(g,n,p,u,h,k,t,o,m,f,s,q,r){var l=this;e.superConstructor.call(this,g,q);k=k||function(){};t=t||function(){};this._dialogGUIObject=new e.GUITemplateObject(document);this._dialogGUIObject.configure({id:g,title:n||g,message:p||"",okButtonText:u||"OK",cancelButtonText:h||"Cancel",okCallback:function(v){if(!r){$N.apps.dialog.DialogManager.hideDialog(l);}k(v);},cancelCallback:function(){$N.apps.dialog.DialogManager.hideDialog(l);t();}});this._positionAndSizeDialog(o,m,f,s);}$N.apps.util.Util.extend(e,$N.apps.dialog.Dialog);e.GUITemplateObject=$N.gui.PinDialog;window.$N=$N||{};$N.apps=$N.apps||{};$N.apps.dialog=$N.apps.dialog||{};$N.apps.dialog.PinDialog=e;return e;});var $N=$N||{};$N.app=$N.app||{};$N.app.FeatureManager=(function(){var s=$N.platform.system.Preferences,n=new $N.apps.core.Log("Operator","FeatureManager"),h=null,E=false,g=false,e={LIVE:{PVR_OFF_VOD_ON:1,PVR_OFF_VOD_OFF:2,PVR_ON_VOD_OFF:5,PVR_ON_VOD_ON:6,isPVREnabled:function(){return(h===e.LIVE.PVR_ON_VOD_ON||h===e.LIVE.PVR_ON_VOD_OFF);},isVODEnabled:function(){return(h===e.LIVE.PVR_ON_VOD_ON||h===e.LIVE.PVR_OFF_VOD_ON);}},TEST:{PVR_ON_VOD_OFF:3,PVR_ON_VOD_ON:4,PVR_OFF_VOD_OFF:7,PVR_OFF_VOD_ON:8,isPVREnabled:function(){return(h===e.TEST.PVR_ON_VOD_ON||h===e.TEST.PVR_ON_VOD_OFF);},isVODEnabled:function(){return(h===e.TEST.PVR_ON_VOD_ON||h===e.TEST.PVR_OFF_VOD_ON);}},isPVREnabled:function(){return(e.LIVE.isPVREnabled()||e.TEST.isPVREnabled());},isVODEnabled:function(){return(e.LIVE.isVODEnabled()||e.TEST.isVODEnabled());}},v=false,b=false,c=false,q=[];function z(){var F=v,G=e.isVODEnabled();v=(G&&s.get($N.app.constants.STARTOVER_FEATURE)==="true");if(F!==v){if(v===true){$N.apps.util.EventManager.fire("StartOverEnabled");}else{$N.apps.util.EventManager.fire("StartOverDisabled");}}F=b;b=(G&&s.get($N.app.constants.CATCHUP_FEATURE)==="true");if(F!==b){if(b===true){$N.apps.util.EventManager.fire("CatchUpEnabled");}else{$N.apps.util.EventManager.fire("CatchUpDisabled");}}}function p(){var F=e.isVODEnabled();if(F!==c){c=F;if(c===true){$N.apps.util.EventManager.fire("VODEnabled");}else{$N.apps.util.EventManager.fire("VODDisabled");}}}function A(F){if(F&&!g){$N.platform.system.Device.initialise();g=true;}else{if(!F&&g){$N.platform.system.Device.unregister();g=false;}}}function d(){return CCOM.ConfigManager.getValue($N.app.constants.SYSTEM_NETWORK_USAGEID).keyValue;}function y(F){if(F){$N.apps.util.EventManager.fire("WHPVREnabled");s.set($N.app.constants.WHPVR_FEATURE,"true");}else{if(!F){$N.apps.util.EventManager.fire("WHPVRDisabled");s.set($N.app.constants.WHPVR_FEATURE,"false");}}}function t(F){s.set($N.app.constants.CATCHUP_FEATURE,F?"true":"false");z();}function o(F){s.set($N.app.constants.STARTOVER_FEATURE,F?"true":"false");z();}function C(F){if(F&&!(s.get($N.app.constants.MEDIA_PLAYBACK_FEATURE))){s.set($N.app.constants.MEDIA_PLAYBACK_FEATURE,true);$N.apps.util.EventManager.fire("MediaPlaybackFeatureStatusUpdated");}else{if(!F&&s.get($N.app.constants.MEDIA_PLAYBACK_FEATURE)){s.set($N.app.constants.MEDIA_PLAYBACK_FEATURE,false);$N.apps.util.EventManager.fire("MediaPlaybackFeatureStatusUpdated");}}}function u(){return s.get($N.app.constants.MEDIA_PLAYBACK_FEATURE);}function f(F){s.set($N.app.constants.MOCA_FEATURE,F);if(F){$N.apps.util.EventManager.fire("MoCAEnabled");}else{$N.apps.util.EventManager.fire("MoCADisabled");}}function a(F){s.set($N.app.constants.PIP_FEATURE,F?"true":"false");if(F){$N.apps.util.EventManager.fire("PIPEnabled");}else{$N.apps.util.EventManager.fire("PIPDisabled");}}function x(){return(s.get($N.app.constants.MOCA_FEATURE)==="true"?true:false);}function m(){return s.get($N.app.constants.PIP_FEATURE)==="true"?true:false;}function l(F){if($N.app.Config.getConfigValue("usageid.manual.override")!=="true"){return;}var G=$N.apps.core.KeyInterceptor.getKeyMap();if(F===G.KEY_BLUE){E=true;}else{if(E){switch(F){case G.KEY_THREE:C(true);E=false;break;case G.KEY_FOUR:C(false);E=false;break;case G.KEY_FIVE:y(true);E=false;break;case G.KEY_SIX:y(false);E=false;break;case G.KEY_SEVEN:t(true);o(true);E=false;break;case G.KEY_EIGHT:t(false);o(false);E=false;break;case G.KEY_NINE:f(!x());E=false;break;case G.KEY_INFO:a(!m());E=false;break;}}}}function D(){h=d();A(e.isPVREnabled());$N.app.PVRCapability.setOperatorPVR(e.isPVREnabled());$N.apps.util.EventManager.fire("usageIdChanged");z();p();}function w(){h=d();if(!h||h.error||h<e.LIVE.PVR_OFF_VOD_ON||h>e.TEST.PVR_OFF_VOD_ON){}s.monitorValue($N.app.constants.SYSTEM_NETWORK_USAGEID,D,null,true);A(e.isPVREnabled());$N.app.PVRCapability.setOperatorPVR(e.isPVREnabled());z();p();}function k(){return $N.platform.btv.WHPVRManager.isEnabled();}function r(){return b;}function B(){return v;}return{initialise:w,enableFeature:l,getUsageId:d,isVODEnabled:e.isVODEnabled,isPVREnabled:e.isPVREnabled,isWHPVREnabled:k,isStartOverEnabled:B,isCatchUpEnabled:r,getMediaPlaybackFeatureStatus:u,isMoCAEnabled:x,isPIPEnabled:m};}());(function(a){a.app=a.app||{};a.app.constants={TEN_SECONDS:10,MINUTE_IN_MS:60000,TEN_MINUTES_IN_MS:60000*10,THIRTY_MINUTES_IN_MS:60000*30,DAY_IN_MS:3600*24*1000,HOUR_IN_MS:3600*1000,SECOND_IN_MS:1000,HTTP_PROTOCOL:"http://",MAX_IMAGE_BITMAP_SIZE:1980*1080*4*1.3,ROOT_PVR_FOLDER_NAME:"<ROOT_FOLDER>",ROOT_PVR_FOLDER_VALUE:"/",PREF_TV_CURRENT_SERVICE_ID:"tv.currentServiceId",PREF_ZAPPING_BANNER_TIMEOUT:"zapping.banner.timeout",PREF_RECENT_SEARCH_TERMS:"search.recentSearchTerms",PREF_SDP_ENABLED:"network.server.qsp.enabled",PREF_SDP_PATH:"network.server.qsp.path",PREF_EPG_CACHE_EXPIRY:"epg.cache.expiry",PREF_METADATA_LANGUAGE:"metadata.language",PREF_METADATA_BASE_URI:"metadata.baseUri",PREF_METADATA_SEARCH_URI:"metadata.searchUri",PREF_METADATA_PROVIDER:"metadata.provider",PREF_METADATA_SERVER:"/network/siconfig/CustomDescriptorTags/netMdsServer",PREF_VOD_COVERS:"vod.covers.url",PREF_USER_RATING:"user.rating",PREF_LANGUAGE:"language",PREF_ISINSTALLED:"installation.complete",PREF_NOW_DISCLAIMER_ACCEPTED:"now.disclaimer.accepted",PREF_TV_CATEGORY:"tv.currentCategory",PREF_TV_SORT:"tv.sort",PREF_HARD_OF_HEARING:"hard.of.hearing",PREF_GUIDE_TEXT_SIZE:"guide.text.size",PREF_AUDIO_LANGUAGE:"audio.language",PREF_SUBTITLE_STATE:"subtitle.language",PREF_VOD_DO_NOT_WARN:"vod.do.not.warn",PREF_EXCLUDE_UNSUBSCRIBED_CHANNELS:"exclude.unsubscribed.channels",PREF_SHOW_UNSUBSCRIBED_CHANNELS:"show.unsubscribed.channels",PREF_NETWORK_HTTP_PROXY:"network.http.proxy",PREF_MOCK_PVR:"mock.pvr.manager",PREF_PRM_ENABLED:"prm.enabled",PREF_CASN:"casn",PREF_BEFORE_PADDING:"before.padding",PREF_AFTER_PADDING:"after.padding",PREF_DEFAULT_KEEP_UNTIL:"pvr.keep",PREF_NON_EPISODIC_BLOCK_PLAYBACK:"pvr.lock",PREF_SEND_DESCRIBE:"/network/vod/send_describe",PREF_DEFAULT_ASPECT_RATIO_HD:"/system/devices/dopmgr/hdVideoAspectMode",PREF_DEFAULT_ASPECT_RATIO_ANALOGUE:"/system/devices/aopmgr/sdAspectMode",PREF_DEFAULT_AUDIO_DELAY:"av.default.audio_delay",PREF_DEFAULT_AUDIO_FORMAT:"av.default.audio_format",PREF_PREFERRED_AUDIO_FORMAT:"audio.prefFormat",PREF_STEREO_3D_ENABLED:"av.default.stereo_3d_enabled",PREF_DEFAULT_VOLUME_LEVEL:"av.default.volume_level",PREF_CURRENT_VOLUME:"system.current.volume",PREF_PCM_VOLUME:"/system/devices/audmgr/pcmAttenuation",PREF_HDMI_AUDIO_TYPE:"/system/devices/audmgr/hdmiFormat",PREF_SPDIF_AUDIO_TYPE:"/system/devices/audmgr/spdifFormat",HDMI_AUDIO_PCM_STRING:"pcm",HDMI_AUDIO_PCM:4,HDMI_AUDIO_DOLBY:6,PREF_USBDLNA_PHOTO_DISPLAY_DURATION:"usbdlna.photo.display.duration",PREF_USBDLNA_PHOTO_TRANSITION_EFFECTS:"usbdlna.photo.transition.effects",PREF_USBDLNA_PLAYER_BANNER_TIMEOUT:"usbdlna.player.banner.timeout",PREF_SCAN_CONFIGURATION:"dvb.scan.configuration",HDMI_AUDIO_PCM_OUTPUT:4,HDMI_AUDIO_DOLBY_OUTPUT:6,PREF_DEFAULT_NETWORK_ID:"0",PREF_DEFAULT_FREQUENCY:"0",PREF_DEFAULT_SYMBOL_RATE:"5217",PREF_DEFAULT_MODULATION:"5",PREF_IMPEDENCE_VALUE:"75",LANG_ENGLISH_GB:"en_gb",LANG_PORTUGUESE_BR:"pt_br",LANG_AVAILABLE_MENU_LOCALES:["pt_br","en_gb"],TWELVE_HOUR_TIME_FORMAT:"H:MM AM",TWENTY_FOUR_HOUR_TIME_FORMAT:"HH:MM",DAY_MONTH_YEAR_DATE_FORMAT:"dd/mm/yyyy",PREF_DEFAULT_STRING:"AU0I",PREF_STRING_DURING_BOOT:"----",PREF_STRING_VOD:"Uod",PREF_FRONTPANEL_INTENSITY:"system.frontpanel.intensity",PREF_FRONTPANEL_DISPLAY:"system.frontpanel.channel",FRONTPANEL_DISPLAY_CHANNEL:"2",FRONTPANEL_DISPLAY_TIME:"1",FRONTPANEL_INTENSITY_BRIGHT:"7",FRONTPANEL_INTENSITY_FADE:"1",FRONTPANEL_DISPLAY_MODES:{DEFAULT:1,STAND_BY:2,PVR_PLAY_BACK:3,MUSIC:4,VOD:5,CATCHUP_STARTOVER:6,WAKE_UP:7},MAX_CHANNEL_DIGITS:3,CHANNEL_ENTRY_TIMEOUT_MS:2500,NO_TUNER_LOCK_CHANNEL_RETUNE_TIMEOUT:5000,MAX_EPG_DAYS:7,NO_SERVICE_ID_AVAILABLE:-1,SURFER_DURATION_DEFAULT:5000,POSSIBLE_SURFER_DURATIONS:[1000,2000,3000,5000,10000,0],MAIL_INDICATOR_DURATIONS:5000,USB_MOUNT_POINT:"mnt",SINGLE_SPACE_UNICODE:"\u00A0",TRIPLE_SPACE_UNICODE:"\u00A0\u00A0\u00A0",USB_HELPER_MODE:"UsbMediaPlayback",HARD_OF_HEARING_DEFAULT:false,PARENT_ADULT_CONTROL_DEFAULT:false,GUIDE_TEXT_SIZE_DEFAULT:"Standard",MENU_LANGUAGE_DEFAULT:"pt_br",AUDIO_LANGUAGE_DEFAULT:"dub",SUBTITLE_STATE_DEFAULT:"off",SUBTITLE_STATE_ON:"on",SUBTITLE_STATE_OFF:"off",LANG_AVAILABLE_AUDIO:["dub","eng"],AVAILABLE_SUBTITLE_STATES:["off","CC","por","eng"],SUBTITLE_CATEGORIES:{CC:"CC",POR:"por",ENG:"eng",LEG:"leg"},AVAILABLE_SUBTITLE_LANGUAGE:"por",POSSIBLE_AUTOTUNE_FREQUENCY:["once","daily","weekly"],DEFAULT_AUTOTUNE_FREQUENCY:"once",DEFAULT_FAVOURITE_NAME:"Favourites",FAVOURITE_ALL_CHANNELS:"allChannels",FAVOURITE_SUBSCRIBED_CHANNELS:"subscribedChannels",DEFAULT_BEFORE_PADDING:15,DEFAULT_AFTER_PADDING:15,DEFAULT_EPISODIC_MAX_NOF_EPISODES:-1,PVR_NON_EPISODIC_FOLDER_LIST:"pvr.folders",PVR_NON_EPISODIC_DEFAULT_FOLDER:"pvr.defaultfolder",PVR_NON_EPISODIC_PADDING_BEFORE:"pvr.nonEpisodic.paddingBefore",SYSTEM_NETWORK_USAGEID:"/network/usageId",SYSTEM_STB_SERIAL_NUMBER:6,SYSTEM_STB_MODEL:8,KEEP_UNTIL_OPTION_30_DAYS:"2",KEEP_UNTIL_OPTION_MANUAL_DELETE:"1",KEEP_UNTIL_OPTION_SPACE_NEEDED:"0",MAX_NOF_EPISODE_OPTIONS:[-1,1,2,3,4,5,10,25],TYPE_OF_EPISODE_OPTION_ALL_EPISODE:"type_all_episodes",TYPE_OF_EPISODE_OPTION_NEW_EPISODE:"new_episodes",TYPE_OF_EPISODE_OPTION_JUST_THIS_EPISODE:"just_this_episode",DISPLAY_CONTAINER_IN_LEFT:"left",DISPLAY_CONTAINER_IN_RIGHT:"right",DISPLAY_GUIDE_MODE:"mode.viewType",MUSIC_LAST_PLAYED_CHANNEL:"music.lastPlayed.channel",USBDLNA_PHOTO_TRANSITION_EFFECTS_AVAILABLE:{NONE:-1,SLIDE:1,FADE:2,CROSS_FADE:3,ZOOM_FADE:4},SOCIAL:"social",SOCIAL_FACEBOOK_EMAIL:"social.facebook.email",SOCIAL_FACEBOOK_PIN_SETTING:"social.facebook.pinSetting",SOCIAL_FACEBOOK_PIN:"social.facebook.pin",SOCIAL_STB_URL:"social.stb.url",SOCIAL_STB_TOKEN_RENEWAL_URL:"social.stb.token.renewal.url",SOCIAL_STB_AUTH_CODE_FETCH_URL:"social.stb.auth.code.fetch.url",SOCIAL_FACEBOOK_FEATURE_AVAILABILITY:"social.facebook.featureAvailability",SOCIAL_FACEBOOK_FEATURE_FORCE_DISABLE:"social.facebook.forceDisable",FACEBOOK_FEATURE_AVAILABILITY_SCHEDULER_TITLE:"facebookFeatureAvailabilityCheck",TIME_OF_FACEBOOK_SCHEDULER_RUN:"social.facebook.timeOfSchedulerRun",TIME_OF_FACEBOOK_RENEWAL_SCHEDULER_RUN:"social.facebook.timeOfRenewalSchedulerRun",FACEBOOK_TOKEN_RENEWAL_SCHEDULER_TITLE:"facebookAccessTokenRenewal",SHARED_SALT:"social.facebook.sharedSalt",SECRET_KEY:"social.facebook.secretAesKey",PURCHASE_PIN_PATH:"/users/preferences/userauth/ppvTransactionPin",CHANNEL_TYPE_PPV:128,PURCHASE_LIST:"teleidea/purchaselist",SUBSCRIPTION_APP_LAUNCH_CHANNEL:"ppv.subscriptionApp.launchChannel",APPLICATION_LAUNCH_URL:"applicationLaunch.url",APPLICATION_LAUNCH_CONFIG:"applicationLaunch.config",PREF_EPISODIC_BEFORE_PADDING:"pvr.episodic.before.padding",PREF_EPISODIC_AFTER_PADDING:"pvr.episodic.after.padding",PREF_EPISODIC_KEEP_UNTIL:"pvr.episodic.keep.until",PREF_EPISODIC_TYPE_OF_EPISODES:"pvr.episodic.typeOfEpisodes",PREF_EPISODIC_BLOCK_PLAYBACK:"pvr.episodic.blockPlayback",PREF_PLAYBACK_PLAYER_TIMEOUT:"pvr.banner.timeout",POSSIBLE_PLAYBACK_PLAYER_TIMEOUTS:["1000","2000","3000","4000","5000","10000","0"],PREF_DEFAULT_TIPSFROMNET:"ti.net.servicetips",PREF_ASPECT_RATIO:"/system/devices/aopmgr/sdAspectRatio",PREF_HDMI_AUDIO_OUTPUT:"audio.prefFormat",PREF_HDMI_VIDEO_RESOLUTION:"/system/devices/dopmgr/hdVideoFormat",PREF_AUTO_STANDBY:"system.inactivitytimer",PREF_UI_MIGRATION_STATUS:"ui.migration.status",POWER_OFF:true,POWER_ON:false,PREF_VIDEO_SYSTEM:"/system/devices/aopmgr/videoEncStd",PREF_AUDIO_LIPSYNC_DELAY:"/system/devices/audmgr/digitalDelayMs",POSSIBLE_STANDBY_DURATIONS:["240","300","360","420","480","-1"],PI_VID_STD_PAL_M:3,PI_VID_STD_NTSC_M:5,PVR_CAPABILITY:{CONNECTED:1,DISCONNECTED:2,ENABLED:3},TRICKPLAY_ICONS_FOR_PHOTO_AUDIO_VIDEO_PLAYBACK:{PLAY:0,STOP:1,FWD:2,RWD:3,NEXT:4,PREVIOUS:5,SHUFFLE:6,REPLAY:7,PROGRESSBAR:8,REPEAT:9,SLIDESHOW:10,BACK:11},EVENT_EXTENDED_INFO:{LANGUAGE:"por",FIELDS:{Actors:"actors",Director:"director",year:"year",country:"country",shortName:"shortName",Originalname:"Originalname",EpisodeID:"episode"},EPISODIC_INFO:{SeriesID:"series",EpisodeID:"episode",Originalname:"Originalname",epOriginalname:"epOriginalname",shortName:"seriesName",episodeName:"episodeName",epName:"epName"},EVENT_INFO:{EventId:"eventId",extInfoKey:"EventId"},CATCHUP:{CatchupStartover:"catchupStartover",DisplaySeasonEpisode:"displaySeasonEpisode",UniqueEventId:"uniqueEventId"}},MAX_PIN_DIGITS:4,MAX_PIN_ENTRY_ATTEMPTS:3,PIN_DIALOG_SHOW_TIME:60000,MASTER_EXPIRATION_TIME:28800,CHANNEL_LOCK_STATUS_CACHE_LIMIT:300,CHANNEL_OR_PROGRAM_LOCK_STATUS_CACHE_LIMIT:600,DEFAULT_PARENTAL_PIN:"0000",RTSP_PROTOCOL:"rtsp://",VOD_PURCHASE_CURRENCY:"\u00A3",CONTENT_CHAPTER_COUNT:10,ASSET_TYPE:"ASSET",PROGRAM_TYPE:"PROGRAM",PREF_AREA_ID:"/network/vod/AreaID",VOD_HIGHLIGHTS_FOLDER:"Destaques",VOD_CLUBE_FOLDER:"NOW%20Clube",VOD_MENU_SEARCH:"-1",VOD_MENU_MY_VIDEOS:"-2",VOD_MENU_EXIT:"",VOD_MENU_MY_VIDEOS_RENTED:"-11",VOD_MENU_MY_VIDEOS_SUBSCRIPTIONS:"-12",VOD_MENU_MY_VIDEOS_ADULT:"-13",VOD_MENU_MY_VIDEOS_FAVORITES:"-14",VOD_ASSET_TYPE:{VOD:"ASSET",CATCHUP:"CATCHUP",STARTOVER:"STARTOVER"},CATCHUP_CATALOGUE_ID:735,SEARCH_TERM_MINIMUM_INPUT_LENGTH:3,SEARCH_TERM_MAXIMUM_INPUT_LENGTH:20,SEARCH_PAGE_SIZE:10,GRID_ROW_HEIGHT:90,GRID_HOURS:2.5,GRID_INTERVAL_MS:1800000,GRID_TIME_WINDOW:60*60*1000*2.5,EPG_POSTER_IMAGE_SUFFIX:"_epg_poster.jpg",SHOW_VOD_ASSETS_EXPIRING_ON_START_UP_AFTER_SEC:120,WARN_IF_ASSET_HAS_LESS_THAN_HOURS_TO_EXPIRE:24,VOD_ASSETS_EXPIRING_DIALOG_TIMEOUT_SEC:600,CATCHUP_TYPE:"CU",CATCHUP_EVENTS_FOR:7*24*60*60*1000,STB_ENVIRONMENT_IP:"IP",STB_ENVIRONMENT_DVB:"DVB",STB_ENVIRONMENT_HYBRID:"HYBRID",CONFIG_STB_ENVIRONMENT_TYPE:"stb.environment",CONFIG_STB_TUNER_TYPE:"stb.tuner.type",VOLUME_STEP:5,VOLUME_FULL:100,VOLUME_HALF:50,VOLUME_MUTE:0,DEFAULT_MINIMUM_CHARACTERS:1,DEFAULT_MAXIMUM_CHARACTERS:20,AUDIO_DELAY_MIN:0,AUDIO_DELAY_MAX:200,AUDIO_DELAY_INCREMENTS:10,DEFAULT_REMINDER_TIME:120,DEFAULT_SKIP_TIME_SECS:30,FILTER_ICON_COLOR_VOD:"blue",VOD_MODE:{ALL:0,SVOD:1,CATCHUP:2},PARENTAL_ADULT_CONTENT:"adult.content",PREF_MOCA_ENABLED:"/system/devices/mocamgr/moca0/enabled",PREF_MOCA_PRIVACY_ENABLED:"/system/devices/mocamgr/moca0/privacyEnabled",PREF_MOCA_PRIVACY_PASSWORD:"/system/devices/mocamgr/moca0/privacyPassword",PREF_MOCA_CHANNEL:"/system/devices/mocamgr/moca0/chanPlanBand",PREF_MOCA_CHANNEL_MASK:"/system/devices/mocamgr/moca0/chanPlanMask",PREF_MOCA_TX_POWER:"/system/devices/mocamgr/moca0/txPwrLevel",PREF_MOCA_BEACON_POWER:"/system/devices/mocamgr/moca0/beaconPwrLevel",PREF_MOCA_NETWORK_CONTROLLER:"/system/devices/mocamgr/moca0/networkController",PREF_MOCA_PHYSICAL_TARGET_RATE:"/system/devices/mocamgr/moca0/phyTargetRate",PREF_MOCA_PHYSICAL_MARGIN:"/system/devices/mocamgr/moca0/phyMargin",UP:0,DOWN:1,LEFT:2,RIGHT:3,DEFAULT_GARBAGE_COLLECTION_TIMEOUT_DELAY:30000,DEFAULT_GARBAGE_COLLECTION_INTERVAL:15000,ACTIVE_INFO_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_vermelho.png",INACTIVE_INFO_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_vermelho_inactive.png",ACTIVE_LANGUAGE_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_verde.png",INACTIVE_LANGUAGE_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_verde_inactive.png",ACTIVE_SUBTITLE_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_amarelo.png",INACTIVE_SUBTITLE_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_amarelo_inactive.png",ACTIVE_OPTIONS_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_azul.png",INACTIVE_OPTIONS_BUTTON_PATH:"../../../customise/resources/images/%RES/icons/botao_azul_inactive.png",NET_IMAGES_PATH:"../../../customise/resources/images/net/",PRIMARY_NETWORK_CONFIG_PATH:"/system/opentv/network/config/primary",SECONDARY_NETWORK_CONFIG_PATH:"/system/opentv/network/config/secondary",WIFI_NETWORK_CONFIG_PATH:"/system/opentv/network/config/wifi",FAVOURITE_FOLDER_NAME:"default",PORTAL_RECORDINGS_LIMIT:8,CA_PLAY_ERRORS:{contentStartFailedReason:{LACK_OF_RESOURCES:-2,CONFLICT:-3,CA_ACCESS_DENIED:-15,CA_ACCESS_BLACKED_OUT:-16,CA_ACCESS_PAIRING_REQUIRED:-21,CA_ACCESS_CHIPSET_PAIRING_REQUIRED:-22,CA_NO_VALID_SECURE_DEVICE:-23,DUPLICATE_URI:-26,CONTENT_PLAY_FAILED_REASON_NO_LOCK:-27},contentErrorReason:{CA_ACCESS_DENIED:-44,CA_ACCESS_BLACKED_OUT:-45,CA_ACCESS_PAIRING_REQUIRED:-50,CA_ACCESS_CHIPSET_PAIRING_REQUIRED:-51,CA_NO_VALID_SECURE_DEVICE:-52,CONTENT_ERROR_REASON_STREAM_WRONG_TYPE:-29,CONTENT_ERROR_REASON_STREAM_CODEC_NOT_FOUND:-30},streamDisabledReason:{CA_ACCESS_BLACKED_OUT:-1,CA_ACCESS_DENIED:-2,CA_ACCESS_PAIRING_REQUIRED:-7,CA_ACCESS_CHIPSET_PAIRING_REQUIRED:-8,CA_NO_VALID_SECURE_DEVICE:-9}},FILM_GENRE_GROUP_ID:4,NONFICTION_GENRE_GROUP_ID:7,EDUCATION_GENRE_GROUP_ID:8,ADULT_GENRE_GROUP_ID:9,EROTICO_GENRE_IN_FILM_GROUP_ID:6,EROTICO_GENRE_IN_EDUCATION_GROUP_ID:7,SEARCH_TYPE:{EPG:"epg",MDSEPG:"mdsepg",VOD:"vod",CATCHUP:"catchup",PVR:"pvr"},MDS_VOD_ADULT_CATEGORIES:["Erótico","Adult","Anal","Bebida","BDSM","Orgia"],MDS_EPG_ADULT_CATEGORIES:["9:1:0:0","9:2:0:0","9:3:0:0","9:4:0:0","9:6:0:0"],CHANNEL_LIST_STATUS:{ALL:0,EMPTY_ALL:1,FAVOURITE:2,EMPTY_FAVOURITE:3,FILTER:4,EMPTY_FILTER:5},DIACRITICTERMSSUFFIX:"DiacriticTerms",pt_brDiacriticTerms:{a:"[Aa\u00C1\u00E1\u00C2\u00E2\u00C3\u00E3\u00C0\u00E0]",c:"[Cc\u00C7\u00E7]",e:"[Ee\u00C9\u00E9\u00CA\u00EA]",i:"[Ii\u00CD\u00ED]",o:"[Oo\u00D3\u00F3\u00D4\u00F4\u00D5\u00F5]",u:"[Uu\u00DA\u00FA\u00DC\u00FC]"},DMS_NAME_CONFIG_PATH:"/users/preferences/homeNetworking/dmsName",DMS_DEFAULT_NAME:"NET STB",DMS_UDN_CONFIG_PATH:"/system/opentv/homeNetworking/dmsUuid",DMR_UDN_CONFIG_PATH:"/system/opentv/homeNetworking/dmrUuid",PVR_REVIEW_BUFFER_PERCENT_PREF:"/system/opentv/dsm/reviewBufferAlloc",PVR_REVIEW_BUFFER_PERCENT_DEFAULT:10,DMS_ENABLE_CONFIG_PATH:"dms.enable",RECORD_SERVER_UDN:"record.server.udn",WHPVR_FEATURE:"whpvr.feature.enabled",CATCHUP_FEATURE:"catchup.enabled",STARTOVER_FEATURE:"startover.enabled",MOCA_FEATURE:"moca.enabled",PIP_FEATURE:"pip.enabled",KEY_RELEASE_SUFFIX:"_rel",KEY_RELEASE_TIMEOUT_MS:300,MDS_RETRY_TIMEOUT:30000,MDS_MAX_RECORDS_RETURNED:1000,LEGACY_DEFAULT_NON_EPISODIC_FOLDER_NAME:"My Recording Highlights",MEDIA_PLAYBACK_FEATURE:"media.playback.feature.enabled",PREF_BARKER_CHANNEL_CONFIG_PATH:"/network/siconfig/CustomDescriptorTags/teleIdeaHDChannelID",EPG_SOURCE_DVB:0,YES_OPTION:1,NO_OPTION:2,OK_OPTION:6,DLG_STOP_PLAYBACK_GO_TO_MUSICA:7,DLG_STOP_PLAYBACK_GO_TO_MOSAIC:8,DLG_REMOTE_ACCESS_AUTH:9,DLG_PORTAL_RESUME_RECORDING:12,DLG_INVALID_FOLDER_NAME:13,DLG_NOW_RESUME_OR_STARTOVER:16,DLG_CONFLICT_RESOLUTION:17,DLG_AUTO_TUNE:18,DLG_REMINDER:19,DLG_DISK_SPACE:20,DLG_PPV_EVENT:21,DLG_PPV_PURCHASE_SUCCESS:22,DLG_NEW_POPUP_CA:24,DLG_YES_NO_CONFIRMATION:25,DLG_USB_MEDIA_UNPLUGGED:26,DLG_DVR_OPERATOR_DISABLED:27,DLG_DVR_DISC_NOT_PRESENT:28,DLG_PPV_RECORDING_BLOCKED:29,DLG_USB_FORMAT_ERROR:30,DLG_WHPVR_PLAY_ERROR:31,DLG_WHPVR_RECORD_ERROR:32,DLG_RECORD_CONFIRMATION:33,DLG_CANCEL_RECORD:34,DLG_AUTO_TUNE_CONFLICT:35,DLG_STANDBY_CONFIRMATION:38,DLG_USB_MEDIA_DETECTED:39,DLG_USB_STB_ALREADY_ASSOCIATED:40,DLG_USB_STB_ASSOCIATED:41,DLG_USB_INCOMPATIBLE:42,DLG_USB_FORMAT_COMPLETE:44,DLG_NO_SIGNAL:45,DLG_ETHERNET_DISCONNECTED:46,DLG_WIFI_DISCONNECTED:47,DLG_RECONNECTING:49,DLG_STOP_RECORDING_PLAYBACK:50,DLG_USB_MEDIA:51,DLG_NO_VIDEO:52,DLG_IP_RENEWAL:53,DLG_SAVE_FAVOURITES_ERROR:54,DLG_SAVING_FAVOURITES:55,DLG_FETCHING_FAVORITES_ERROR:56,DLG_SAVE_BLOCKED_CHANNELS:57,DLG_DUPLICATE_FOLDER_NAME:58,DLG_USB_DRIVE_ATTACHED:59,DLG_PURCHASE_PIN_CHANGE:61,DLG_PARENTAL_PIN_CHANGE:62,DLG_INVALID_DATE:66,DLG_INVALID_TIME:67,DLG_FACEBOOK_PIN_CHANGE_SUCCESS:68,DLG_FACEBOOK_PIN_CHANGE_FAILURE:69,DLG_FACEBOOK_PIN_MISMATCH:70,DLG_FACEBOOK_AUTHORISED:71,DLG_CANCEL_SERIES:73,DLG_FACEBOOK_ACCOUNT:72,DLG_ACCOUNT_LINKED:74,DLG_FACTORY_RESET_RECORDING:75,DLG_FACTORY_RESET_SCHEDULED:76,DLG_USB_WAITING:77,DLG_FACTORY_RESET_CONFIRMATION:78,DLG_UNAUTHORISED_RECORDING:79,DLG_FACEBOOK_AUTH_ERROR:80,DLG_SOCIAL_ACCOUNT_AUTHORISED:81,DLG_FACEBOOK_POST_ACCOUNT:82,DLG_FACEBOOK_DISCONNECT_ACCOUNT:83,DLG_PPV_PURCHASE_ERROR:84,DLG_CHANNEL_SUBSCRIPTION:85,DLG_PPV_CHANNEL_SUBSCRIPTION:86,DLG_USB_DEVICE_DETECTED:87,DLG_AUTO_TUNE_START:88,DLG_ATA_FORMAT_COMPLETE:89,DLG_WHPVR_SERVER_NOT_PRESENT:90,DLG_CHANNEL_UNSUBSCRIBED:91,DLG_WHPVR_SWITCH:92,DLG_MEDIA_DEVICE_UNPLUGGED:93,DLG_DLNA_COMMUNICATION_ERROR:94,DLG_FORCED_SOFTWARE_UPDATE:95,DLG_DVR_DUPLICATE_FOLDER_ERROR:97,DLG_STARTOVER_PLAYBACK_CONFIRM:98,DLG_CA_SMART_CARD_EXPIRED:99,DLG_CA_SMART_CARD_NOT_CERTIFIED:100,DLG_CA_SMART_CARD_INVALID:101,DLG_CA_SMART_CARD_MUTE:102,DLG_CA_SMART_CARD_SUSPENDED:103,DLG_CA_SMART_CARD_BLACKLISTED:104,DLG_CA_SMART_CARD_NOT_PAIRED:105,DLG_CA_SMART_CARD_NEEDS_CHIPSET_PAIRING:106,DLG_CA_SMART_CARD_BLACKOUT:107,DLG_CA_SMART_CARD_ACCESS_DENIED:108,DLG_CA_SMART_CARD_INCOMPATIBLE:109,DLG_CA_SMART_CARD_REMOVED:110,DLG_CA_SMART_CARD_NEVER_PAIRED:111,DLG_MANUAL_REC_MSG:112,DLG_ONDEMAND_PLAYER:115,DLG_STOP_PVR_PLAYBACK:116,DLG_UNPLUG_HARDDISK:117,DLG_STOP_RECORDING:118,DLG_MORE_ON_NOW:119,DLG_PIN_MISMATCH:120,DLG_MANUAL_REC_FAIL_MSG:121,DLG_CATCHUP_SYSTEM_MSG:122,DLG_PVR_JOB_FAILED_MSG:123,DLG_STARTOVER_RESUME_OR_STARTOVER:124,DLG_CONFIRM_LEAVE_INSTALLER:125,DLG_DELETE_RECORD:126,DLG_TS_SIGNAL_LOSS:127,DLG_MEDIA_DEVICE_SAFE_REMOVE:128,DLG_CANCEL_LIVE_RECORD:129,DLG_SAFE_REMOVE_HARDDISK:130,DLG_SAFE_REMOVE_HARDDISK_FAILED:131,DLG_SAFE_REMOVE_HARDDISK_OK:132,DLG_AT_TASK_FAILED_MSG:133,DLG_TUNE_FAILED_MSG:134,DLG_PVR_INVALID_EVENT_MSG:135,DLG_USB_DOMAIN_UNCERTAIN:136,DLG_EXIT_APP:137,DLG_SAFE_REMOVE_HARDDISK_RECORDING_IN_PROGRESS:138,DLG_ACTIONS:{CONTINUE_CANCEL_EPISODE_OPTION:1,CONTINUE_CANCEL_SERIES_OPTION:3,EXIT_OPTION:2},POPUP_MULTIROW_DATA_TYPE:{LABEL:"label",POPUP:"popup",DIRECT_ENTRY:"directTextEntry"}};}($N||{}));(function(a){a.app=a.app||{};a.app.errorCodes={NOW:{USER_HARDWARE_FAULT_OR_BAD_USAGE_ID:"T03-0",MDS_DATA_FAILURE:"T03-1",PORTAL_DATA_FAILURE:"T03-2",TRAXIS_DATA_FAILURE:"T03-3",PLAYBACK_FAILURE:"T03-4",CANNOT_START_PURCHASE:"T03-5",CANNOT_COMPLETE_PURCHASE:"T03-6",MDS_ASSET_NOT_FOUND:"T03-7"},DEFAULT:"T03"};}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","Brand");this._synopsisBackgroundGroup=new a.gui.Group(this._docRef);this._synopsisBackground=new a.gui.FastContainer(this._docRef,this._synopsisBackgroundGroup);this._synopsisFadeGradientTop=new a.gui.FastContainer(this._docRef,this._synopsisBackgroundGroup);this._synopsisFadeGradientBottom=new a.gui.FastContainer(this._docRef,this._synopsisBackgroundGroup);this._container=new a.gui.Group(this._docRef);this._background=new a.gui.FastContainer(this._docRef,this._container);this._agoraGroup=new a.gui.Group(this._docRef,this._container);this._agoraContainer=new a.gui.Container(this._docRef,this._agoraGroup);this._guideBackgroundImage=new a.gui.Image(this._docRef,this._container);this._mosaicGroup=new a.gui.Group(this._docRef,this._container);this._mosaicBackgroundImage=new a.gui.Image(this._docRef,this._mosaicGroup);this._mosaicContainer=new a.gui.Container(this._docRef,this._mosaicGroup);this._musicBackgroundImage=new a.gui.Image(this._docRef,this._container);this._searchGroup=new a.gui.Group(this._docRef,this._container);this._searchBackgroundImage=new a.gui.Image(this._docRef,this._searchGroup);this._searchContainer=new a.gui.Container(this._docRef,this._searchGroup);this._searchVodGroup=new a.gui.Group(this._docRef,this._container);this._searchVodContainer=new a.gui.Container(this._docRef,this._searchVodGroup);this._searchVodStripe=new a.gui.BackgroundBox(this._docRef,this._searchVodGroup);this._logo=new a.gui.Image(this._docRef,this._container);this._container.configure({x:0,y:0,visible:false});this._background.configure({x:0,y:0,width:1920,height:1080,cssClass:"fullScreenBackground",opacity:0.9});this._agoraGroup.configure({x:0,y:0,visible:false});this._agoraContainer.configure({x:0,y:0,width:1920,height:1080,cssClass:"agoraBackground"});this._guideBackgroundImage.configure({x:0,y:0,width:1920,height:1080,href:"customise/resources/images/net/guideBackground.png",opacity:0.95,bufferedImage:true,visible:false});this._mosaicGroup.configure({x:0,y:0,visible:false});this._mosaicBackgroundImage.configure({x:0,y:0,width:1920,height:300,cssClass:"mosaicBackground",href:"apps/mosaic/view/images/bg.png",bufferedImage:true});this._mosaicContainer.configure({x:0,y:300,width:1920,height:780,cssClass:"mosaicBackground"});this._musicBackgroundImage.configure({x:0,y:0,width:1920,height:1080,href:"customise/resources/images/logos/musica_fundo.png",bufferedImage:true,visible:false});this._logo.configure({x:63,y:70.5,width:243,height:99,href:"customise/resources/images/net/NET_logo.png",bufferedImage:true});this._synopsisBackgroundGroup.configure({x:0,y:0,width:1920,height:1080,opacity:0.85,visible:false});this._synopsisBackground.configure({x:0,y:0,width:1920,height:1080,opacity:0.85,cssClass:"fullScreenBackground"});this._synopsisFadeGradientTop.configure({x:0,y:0,width:1920,height:300,cssClass:"synopsisFadeGradientTop"});this._synopsisFadeGradientBottom.configure({x:0,y:780,width:1920,height:300,cssClass:"synopsisFadeGradientBottom"});this._searchGroup.configure({x:0,y:0,visible:false});this._searchBackgroundImage.configure({x:0,y:0,width:1920,height:300,cssClass:"searchBackground",href:"apps/search/view/images/bg.png",bufferedImage:true});this._searchContainer.configure({x:0,y:300,width:1920,height:780,cssClass:"searchBackground"});this._searchVodGroup.configure({visible:false});this._searchVodContainer.configure({width:1920,height:1080,cssClass:"blackFill"});this._searchVodStripe.configure({width:1920,height:7.5,cssClass:"nowColorStrip"});this._backgroundList={};this._backgroundList[a.app.BrandHelper.DEFAULT_BACKGROUND_ID]=this._background;this._backgroundList[a.app.BrandHelper.AGORA_BACKGROUND_ID]=this._agoraGroup;this._backgroundList[a.app.BrandHelper.GUIDE_BACKGROUND_ID]=this._guideBackgroundImage;this._backgroundList[a.app.BrandHelper.MOSAIC_BACKGROUND_ID]=this._mosaicGroup;this._backgroundList[a.app.BrandHelper.MUSIC_BACKGROUND_ID]=this._musicBackgroundImage;this._backgroundList[a.app.BrandHelper.SYNOPSIS_BACKGROUND_ID]=this._synopsisBackgroundGroup;this._backgroundList[a.app.BrandHelper.SEARCH_BACKGROUND_ID]=this._searchGroup;this._backgroundList[a.app.BrandHelper.SEARCH_VOD_BACKGROUND_ID]=this._searchVodGroup;this._previousBackground=a.app.BrandHelper.DEFAULT_BACKGROUND_ID;this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.hidePreviousBackground=function(){this._backgroundList[this._previousBackground].hide();if(this._previousBackground===a.app.BrandHelper.SYNOPSIS_BACKGROUND_ID||this._previousBackground===a.app.BrandHelper.SEARCH_VOD_BACKGROUND_ID){this._logo.show();}};b.prototype.show=function(c){if(c!==this._previousBackground){this.hidePreviousBackground();if(c===a.app.BrandHelper.SYNOPSIS_BACKGROUND_ID||c===a.app.BrandHelper.SEARCH_VOD_BACKGROUND_ID){this._logo.hide();}this._backgroundList[c].show();this._previousBackground=c;}b.superClass.show.call(this);};a.gui.Brand=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);this._orientation=a.VERTICAL_ASCEND;}b.gui.Util.extend(a,b.gui.ProgressBar);a.VERTICAL_ASCEND="vertical_ascend";a.prototype._getPosition=function(c){var e=(this._orientation===a.VERTICAL||this._orientation===a.VERTICAL_ASCEND),d=e?this.getHeight():this.getWidth();if(c<this._minimum){c=this._minimum;}if(c>this._maximum){c=this._maximum;}this._percentage=Math.ceil(((c-this._minimum)/(this._maximum-this._minimum))*100);return Math.ceil(this._percentage*d/100);};a.prototype.setProgress=function(c,f){var d=f?this._getPosition(parseInt(f,10)):0,e=this._getPosition(parseInt(c,10));this._progress=Math.max(this._minimum,c);this._progress=Math.min(this._maximum,c);switch(this._orientation){case a.VERTICAL_ASCEND:this._progressBox.setWidth(this.getWidth());this._progressBox.setY(this.getHeight()-e);this._progressBox.setHeight(e);if(this._headRef){this._head.setY(e);}break;case a.VERTICAL:this._progressBox.setWidth(this.getWidth());this._progressBox.setY(d);this._progressBox.setHeight(e-d);if(this._headRef){this._head.setY(e);}break;default:this._progressBox.setHeight(this.getHeight());this._progressBox.setX(d);this._progressBox.setWidth(e-d);if(this._headRef){this._head.setX(e);}}return this;};a.prototype.toString=function(){return"VerticalProgressBar";};a.prototype.getClassName=function(){return"VerticalProgressBar";};b.gui=b.gui||{};b.gui.VerticalProgressBar=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","ScrollingGroup");this._scrollSpeed=50;this._width=500;this._height=800;this._innerWidth=null;this._innerHeight=null;this._container=new b.gui.Group(this._docRef);this._upArrow=new b.gui.SVGlink(this._docRef,this._container);this._downArrow=new b.gui.SVGlink(this._docRef,this._container);this._outerContainer=new b.gui.ClippedGroup(this._docRef,this._container);this._innerContainer=new b.gui.Layer(this._docRef,this._outerContainer);this._outerContainer.configure({width:this._width,height:this._height});this._innerContainer.configure({width:this._width,height:this._height});this._innerContainer.addMoveAnimation();this._upArrow.configure({x:4.5,y:-22.5,href:"../../../customise/resources/svg/icons.svg#guideUpArrowIcon",visible:false});this._downArrow.configure({x:4.5,y:513,href:"../../../customise/resources/svg/icons.svg#guideDownArrowIcon",visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.setUpArrowProperties=function(c){this._upArrow.configure(c);};a.prototype.setDownArrowProperties=function(c){this._downArrow.configure(c);};a.prototype._isSelectionAtTop=function(){return(this._innerContainer.getTrueY()===0);};a.prototype._isSelectionAtBottom=function(){return(this._innerContainer.getTrueY()===Math.floor(this._outerContainer.getTrueHeight()-this._innerContainer.getTrueHeight()+1.5));};a.prototype._updateArrowVisibility=function(){this._upArrow.setVisible(!this._isSelectionAtTop());this._downArrow.setVisible(!this._isSelectionAtBottom());};a.prototype.addChild=function(c){if(!this._children){this._children=[];}this._children.push(c);if(c._setParent){c._setParent(this);if(c.isAligned()){this._redrawChild(c);}}this._innerContainer.getRootSVGRef().appendChild(c.getRootElement());};a.prototype.setWidth=function(c){this._width=c;this._outerContainer.setWidth(c);if(!this._innerWidth){this.setInnerWidth(c);}};a.prototype.setHeight=function(c){this._height=c;this._outerContainer.setHeight(c);this._downArrow.setY(c+63);if(!this._innerHeight){this.setInnerHeight(c);}this._updateArrowVisibility();};a.prototype.setInnerWidth=function(c){this._innerWidth=c;this._innerContainer.setWidth(c);};a.prototype.setInnerHeight=function(c){this._innerHeight=c;this._innerContainer.setHeight(c);this._updateArrowVisibility();};a.prototype.setScrollSpeed=function(c){this._scrollSpeed=parseInt(c,10);};a.prototype.scrollHorizontal=function(c){var d=this._innerContainer.getTrueX()+c,e=false;d=Math.max(d,Math.floor(this._outerContainer.getTrueWidth()-this._innerContainer.getTrueWidth()+1.5));d=Math.min(d,0);this._innerContainer.doMove(d,this._innerContainer.getTrueY());return(d!==this._innerContainer.getTrueX());};a.prototype.scrollVertical=function(d){var c=this._innerContainer.getTrueY()+d,e=false;c=Math.max(c,Math.floor(this._outerContainer.getTrueHeight()-this._innerContainer.getTrueHeight()+1.5));c=Math.min(c,0);this._innerContainer.doMove(this._innerContainer.getTrueX(),c);this._updateArrowVisibility();return(c!==this._innerContainer.getTrueY());};a.prototype.resetScroll=function(){this._innerContainer.move(0,0);this._updateArrowVisibility();};a.prototype.keyHandler=function(c){var d=b.gui.FrameworkCore.getKeys(),e=false;switch(c){case d.KEY_UP:e=this.scrollVertical(this._scrollSpeed);break;case d.KEY_DOWN:e=this.scrollVertical(-this._scrollSpeed);break;case d.KEY_LEFT:e=this.scrollHorizontal(this._scrollSpeed);break;case d.KEY_RIGHT:e=this.scrollHorizontal(-this._scrollSpeed);break;}return e;};b.gui.ScrollingGroup=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d,c);this._log=new b.apps.core.Log("CommonGUI","ScrollingGroupWithFade");this._fadeSizeY=30;this._clippingContainer=new b.gui.ClippedGroup(this._docRef,this._container);this._outerContainer=new b.gui.Group(this._docRef,this._clippingContainer);this._innerContainer=new b.gui.Layer(this._docRef,this._outerContainer);this._topFade=new b.gui.BackgroundBox(this._docRef,this._clippingContainer);this._bottomFade=new b.gui.BackgroundBox(this._docRef,this._clippingContainer);this._clippingContainer.configure({width:this._width,height:this._height+(this._fadeSizeY*2)});this._outerContainer.configure({x:0,y:this._fadeSizeY,width:this._width,height:this._height});this._innerContainer.configure({width:this._width,height:this._height});this._topFade.configure({x:0,y:0,width:this._width,height:this._fadeSizeY,cssClass:"scrollingGroupFadeTop"});this._bottomFade.configure({x:0,y:this._height+this._fadeSizeY,width:this._width,height:this._fadeSizeY,cssClass:"scrollingGroupFadeBottom"});this._innerContainer.addMoveAnimation();};b.gui.Util.extend(a,b.gui.ScrollingGroup);a.prototype.setY=function(c){a.superClass.setY.call(this,c-this._fadeSizeY);};a.prototype.setWidth=function(c){a.superClass.setWidth.call(this,c);this._clippingContainer.setWidth(c);this._topFade.setWidth(c);this._bottomFade.setWidth(c);};a.prototype.setHeight=function(c){a.superClass.setHeight.call(this,c);this._clippingContainer.setHeight(c+(this._fadeSizeY*2));this._bottomFade.setY(c+this._fadeSizeY);};b.gui.ScrollingGroupWithFade=a;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.Button);a.prototype._positionLabel=function(){var c=0,d=0;if(this._labelLeft==="centre"){c=this._container.getTrueWidth()/2;this._label.setAlignment("centre");}else{c=parseInt(this._labelLeft,10);this._label.setAlignment("left");}if(this._labelTop==="centre"){d=(this._container.getTrueHeight()/2)+(this._label.getFontSize()/3.4);}else{d=parseInt(this._labelTop,10);}this._label.setX(c);this._label.setY(d);};b.gui=b.gui||{};b.gui.Key=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.TextInput);b.prototype._setAlignment=function(){if(this._isLabelAutoAlign){if(this.getLabelTextLength()>this.getTrueClippedWidth()){if(this.getLabelAlignment()!==a.gui.Label.ALIGN_RIGHT){this.setLabelX(this.getTrueClippedWidth());this.setLabelAlignment(a.gui.Label.ALIGN_RIGHT);}}else{if(this.getLabelAlignment()!==a.gui.Label.ALIGN_LEFT){this.setLabelX(0);this.setLabelAlignment(a.gui.Label.ALIGN_LEFT);}}}};b.prototype.getTrueWidth=function(){return this._container.getWidth()/this.resolutionHorizontalFactor;};b.prototype.setCursorCssClass=function(c){this._cursor.setCssClass(c);};b.prototype.appendCharacter=function(c){var e=this.getLabelText(),d=this;this._passwordText+=c;if(e.length<this._maxCharacters){if(this._passwordChar){if(!this._delayPasswordMode){this.setLabelText(this.getLabelText()+this._passwordChar);}else{if(this.getLabelText().length>0){this.setLabelText(this.getLabelText().substring(0,this.getLabelText().length-1)+this._passwordChar+c);}else{this.setLabelText(this.getLabelText()+c);}this._passwordDelayTimer=setTimeout(function(){d.setLabelText(d.getLabelText().substring(0,d.getLabelText().length-1)+d._passwordChar);},this._passwordDelayTimerMS);}}else{this.setLabelText(this.getLabelText()+c);}this._setAlignment();this._cursor.setX(Math.min(this.getLabelTextLength(),this.getTrueWidth()));}};b.prototype.getTrueClippedWidth=function(){return this._clippedGroup.getWidth()/this.resolutionHorizontalFactor;};b.prototype.setLabelText=function(c){if(c.length<this._maxCharacters){this._label.setText(c);}else{this._label.setText(c.substring(0,this._maxCharacters));}this._cursor.setX(Math.min(this.getLabelTextLength(),this.getTrueWidth()));if(this._text!==this._label.getText()){this._text=this._label.getText();if(this._textChangedCallback){this._textChangedCallback(this.getLabelText());}}};a.gui=a.gui||{};a.gui.KeypadTextInput=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);this._docRef=d;this._log=new b.apps.core.Log("CommonGUI","DelayedScrollingLabel");this._parent=c;this._textElement.setVisible(true);this.EXTRA_PIXELS_GAP=30;this.DEFAULT_HEIGHT=40;this.DELAY_TIME=2000;this.STRING_GAP="      ";this._timeoutId=null;this._animateLenth=0;this.setHeight(this.DEFAULT_HEIGHT);}b.gui.Util.extend(a,b.gui.ScrollingLabel);a.prototype._animationEndCallback=function(){var d,c=(b.gui.GUIObject.mode==="SVG")?this._label:this._content;d=-this._animateLength;this._content.setX(0);if(c.getX()<0){c.move(0,c.getTrueY());c.doAttributeAnimation("x",0);}this._doMove(d,0,this.DELAY_TIME);};a.prototype._doMove=function(c,e,d){if(b.gui.GUIObject.mode==="SVG"){this.startScrolling(c,d);}else{this._content.doMove(c,e);}};a.prototype.start=function(){var c=this;this._initialiseAnimation();this._isFirstLoop=true;if(this._textLength>this._container.getWidth()){c._label.move(0,c._label.getTrueY());this._textElement.setText(this._text+this.STRING_GAP);this._animateLength=this._textElement.getTextLength();this._textElement.setText(this._text+this.STRING_GAP+this._text);this._textLength=this._textElement.getTrueTextLength();if(this._moveAnim&&this._durationPerCharacter){this._moveAnim.setDuration(this.getDuration());}this._moveAnim.setAnimationEndCallback(function(){if(c._isFirstLoop&&c._padding){c._isFirstLoop=false;c._content.setAnimationDuration(c.getDuration());}c._animationEndCallback();});this._animationEndCallback();}};a.prototype.stop=function(){if(this._timeoutId){clearTimeout(this._timeoutId);this._timeoutId=null;}if(this._moveAnim){this._moveAnim.cancelAnimation();this._moveAnim.setAnimationEndCallback(null);this._label.move(0,this._label.getTrueY());this._content.setX(0);if(!this._bounce&&!this._padding){this._textElement.setText(this._text);}}};a.prototype.setDuration=function(c){this._duration=c;this._durationPerCharacter=true;this._initialiseAnimation();};a.prototype.startScrolling=function(c,e){var d=this;if(this._timeoutId){clearTimeout(this._timeoutId);this._timeoutId=null;}this._timeoutId=setTimeout(function(){d._label.doAttributeAnimation("x",c);},e||0);};a.prototype.setLabel=function(c){this._label.setText(c);};a.prototype.getLabel=function(){return this._label.getText();};a.prototype.setCssClass=function(c){this._label.setCssClass(c);this._textElement.setCssClass(c);this._refresh();this._adjustContainer();};a.prototype.setText=function(d,c){if(d!==this._text){this._text=d;this._textElement.setText(d);this._content.setX(0);this._adjustContainer();this.stop();if(c!==true){this.start();}}};a.prototype.getCssClass=function(){return this._label.getCssClass();};b.gui.DelayedScrollingLabel=a;}($N||window.parent.$N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d,c);this._log=new a.apps.core.Log("CommonGUI","TextArea");this._maxHeight=null;this._autoHeight=true;this._rootElement.setAttribute("height","auto");};a.gui.Util.extend(b,a.gui.TextArea);b.prototype._mimicTextArea=null;b.prototype._getMimicContentHeight=function(){var c=0;if(this._mimicTextArea&&(this!==this._mimicTextArea)){this._mimicTextArea.setText(this.getText());this._mimicTextArea.setWidth(this.getTrueWidth());this._mimicTextArea.setCssClass(this.getCssClass());c=b.superClass.getContentHeight.call(this._mimicTextArea);}return c;};b.prototype.getContentHeight=function(){return this._getMimicContentHeight();};b.prototype._updateAutoHeightValues=function(){var d,c;if(this._autoHeight){this._rootElement.setAttribute("height","auto");d=this.getContentHeight();c=d/this.resolutionVerticalFactor;if(this._maxHeight&&c>this._maxHeight){b.superClass.setHeight.call(this,this._maxHeight);}else{this._height=d;this._trueHeight=c;this._redrawChildren();}}};b.prototype.setCssClass=function(c){b.superClass.setCssClass.call(this,c);this._updateAutoHeightValues();};b.prototype.setText=function(c){b.superClass.setText.call(this,c);this._updateAutoHeightValues();};b.prototype.setWidth=function(c){b.superClass.setWidth.call(this,c);this._updateAutoHeightValues();};b.prototype.setHeight=function(c){if(c==="auto"){this._autoHeight=true;this._updateAutoHeightValues();}else{this._autoHeight=false;b.superClass.setHeight.call(this,c);}};b.prototype.setMaxHeight=function(c){this._maxHeight=c;this.setHeight("auto");};b.prototype.getMaxHeight=function(){return this._maxHeight;};a.gui=a.gui||{};a.gui.TextArea=b;}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d,c);this._log=new a.apps.core.Log("CommonGUI","Label");};a.gui.Util.extend(b,a.gui.Label);b.prototype._mimicLabel=null;b.prototype._getMimicTrueTextLength=function(){var c=0;if(this._mimicLabel&&(this!==this._mimicLabel)){this._mimicLabel.setText(this.getText());this._mimicLabel.setWidth(this.getTrueWidth());this._mimicLabel.setCssClass(this.getCssClass());c=b.superClass.getTrueTextLength.call(this._mimicLabel);}return c;};b.prototype.getTrueTextLength=function(){var c=b.superClass.getTrueTextLength.call(this);if(!c){c=this._getMimicTrueTextLength();}return c;};a.gui=a.gui||{};a.gui.Label=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);this._progressBarLabelsCssClass="startAndEndTimeProgressBar";this._width=550;this._height=40;this._progressBarPaddingLeft=10;this._progressBarPaddingRight=10;this._progressBarHeight=3;this._startLabelWidth=120;this._endLabelWidth=150;this._labelOffset=10;this._outerBox=new b.gui.Group(d);if(c){c.addChild(this._outerBox);}this._outerBox.configure({x:0,y:0,width:this._width,height:this._height});this._progress=new b.gui.ProgressBar(d,this._outerBox);this._startLabel=new b.gui.Label(d,this._outerBox);this._endLabel=new b.gui.Label(d,this._outerBox);this._progress.configure({innerCssClass:"progressBarInner",outerCssClass:"progressBarOuter",height:this._progressBarHeight});this._rootElement=this._outerBox.getRootElement();this._positionMarker=new b.gui.SVGlink(this._docRef,this._outerBox);this._DEFAULT_Y_OFFSET=-3;this._positionMarker.configure({y:this._DEFAULT_Y_OFFSET,x:this._startLabelWidth+this._progressBarPaddingLeft});}b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.initialise=function(){var d=this._width-(this._startLabelWidth+this._progressBarPaddingLeft+this._progressBarPaddingRight+this._endLabelWidth),c=this._progressBarHeight+this._labelOffset;this._progress.setWidth(d);this._progress.setX(this._startLabelWidth+this._progressBarPaddingLeft);this._startLabel.configure({x:0,y:c,width:this._startLabelWidth,cssClass:this._progressBarLabelsCssClass});this._endLabel.configure({x:(this._width-this._endLabelWidth),y:c,width:this._endLabelWidth,cssClass:this._progressBarLabelsCssClass});};a.prototype._getPosition=function(c){this._progress._getPostiton(c);};a.prototype.setX=function(c){this._outerBox.setX(c);};a.prototype.setY=function(c){this._outerBox.setY(c);};a.prototype.hide=function(){this._outerBox.hide();};a.prototype.show=function(){this._outerBox.show();};a.prototype.getWidth=function(){return this._width;};a.prototype.setWidth=function(d){var c=d-(this._startLabelWidth+this._progressBarPaddingLeft+this._progressBarPaddingRight+this._endLabelWidth);this._width=d;this._progress.setWidth(c);};a.prototype.getProgressBarWidth=function(){return this._progress.getWidth();};a.prototype.setStartLabelWidth=function(c){this._startLabelWidth=c;};a.prototype.setEndLabelWidth=function(c){this._endLabelWidth=c;};a.prototype.getHeight=function(){return this._height;};a.prototype.setProgressBarLabelsCssClass=function(c){this._progressBarLabelsCssClass=c;};a.prototype.setProgressOuterCssClass=function(c){this._progress.setOuterCssClass(c);};a.prototype.setProgressInnerCssClass=function(c){this._progress.setInnerCssClass(c);};a.prototype.setStartLabelWidth=function(c){this._startLabelWidth=c;};a.prototype.setEndLabelWidth=function(c){this._endLabelWidth=c;};a.prototype.setProgressBarPaddingLeft=function(c){this._progressBarPaddingLeft=c;};a.prototype.setProgressBarPaddingRight=function(c){this._progressBarPaddingRight=c;};a.prototype.setLabelOffset=function(c){this._labelOffset=c;};a.prototype.setProgressBarHeight=function(c){this._progressBarHeight=c;};a.prototype.setEndLabelWidth=function(c){this._endLabelWidth=c;};a.prototype.setProgressBarLabels=function(c,d){this._startLabel.setText(c);this._endLabel.setText(d);};a.prototype.updateProgressBar=function(e,f,c,d){d=d||0;this._progress.setMinimumValue(e);this._progress.setMaximumValue(f);this._progress.setProgress(c,d);};a.prototype.setProgressBarHeight=function(c){this._progress.setHeight(c);};a.prototype.updateMarkerPosition=function(){this._positionMarker.setX(this._progress._getPosition(this._progress.getProgress())+this._startLabelWidth+(this._progressBarPaddingLeft));};a.prototype.setMarkerPosition=function(c){this._positionMarker.setX(c);};a.prototype.hidePositionMarker=function(){this._positionMarker.hide();};a.prototype.showPositionMarker=function(){this._positionMarker.show();};a.prototype.setPlayHead=function(c){if(c&&c.indexOf("svg")>-1){this._positionMarker.setHref(c);}else{this._positionMarker.destroy();this._positionMarker=new b.gui.Image(this._docRef,this._outerBox);this._positionMarker.configure({y:this._DEFAULT_Y_OFFSET});this._positionMarker.setHref(c);}};a.prototype.setLabelYPositions=function(c){this._startLabel.setY(c);this._endLabel.setY(c);};a.prototype.setProgressBarProperties=function(c){this._progress.configure(c);};a.prototype.setStartLabelProperties=function(c){this._startLabel.configure(c);};a.prototype.setEndLabelProperties=function(c){this._endLabel.configure(c);};a.prototype.toString=function(){return"LabelledProgressBar";};a.prototype.getClassName=function(){return"LabelledProgressBar";};b.gui=b.gui||{};b.gui.LabelledProgressBar=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d,c);this.configure({progressBarPaddingLeft:0,startLabelWidth:0});}a.gui.Util.extend(b,a.gui.LabelledProgressBar);a.apps.core.Language.adornWithGetString(b,"customise/resources/");b.prototype.resetProgressBar=function(e,g,c,d){var f=parseInt(c,10)-parseInt(d||0,10);this.setProgressBarLabels("",a.app.DateTimeUtil.getFormattedDurationStringFromMS(f));this.updateProgressBar(e,g,c,d);this.show();};b.prototype.toString=function(){return"TimeProgressBar";};a.gui=a.gui||{};a.gui.TimeProgressBar=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);}b.apps.util.Util.extend(a,b.apps.dialog.Dialog);a.prototype.keyHandler=function(d){var c=61455;if(d===c){return false;}return a.superClass.keyHandler.call(this,d);};a.prototype.toString=function(){return"BaseDialog";};b.apps=b.apps||{};b.apps.dialog=b.apps.dialog||{};b.apps.dialog.BaseDialog=a;}($N=$N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);}b.gui.Util.extend(a,b.gui.LabelledProgressBar);a.prototype.resetProgressBar=function(g,k,d){var c="",h="",f="",e="";if(g){c=new Date(g);f=b.app.DateTimeUtil.getFormattedAmPmTimeStringWithoutSuffix(c);}if(k){h=new Date(k);e=b.app.DateTimeUtil.getFormattedTimeString(h);}this.setProgressBarLabels(f,e);this.updateProgressBar(g,k,d);this.show();};a.prototype.toString=function(){return"EpgProgressBar";};b.gui=b.gui||{};b.gui.EpgProgressBar=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._container=new a.gui.Group(d);this._superLabel=new a.gui.Label(d,this._container);this._subLabel=new a.gui.Label(d,this._container);this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this._container);}this._text="";this._gap=0;}a.gui.Util.extend(b,a.gui.AbstractComponent);b.prototype.setWidth=function(c){this._container.setWidth(c);this._superLabel.setWidth(c);this._subLabel.setWidth(c);};b.prototype.setText=function(e){this._text=e;var d=e.split(" "),c=1;if(d.length>c){this._superLabel.setText(d.shift());this._subLabel.setText(d.join(" "));}else{this._superLabel.setText(e);this._subLabel.setText("");}this._adjustContainer();};b.prototype.setFontSize=function(d,c){this._superLabel.setFontSize(d);if(c){this._subLabel.setFontSize(c);}else{this._subLabel.setFontSize(d);}this._adjustContainer();};b.prototype.setCssClass=function(c,d){this._superLabel.setCssClass(c);if(d){this._subLabel.setCssClass(d);}else{this._subLabel.setCssClass(c);}this._refresh();};b.prototype.setGap=function(c){this._gap=c;this._adjustContainer();};b.prototype.getGap=function(){return this._gap;};b.prototype.getWidth=function(){return this._container.getWidth();};b.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};b.prototype.getText=function(){return this._text;};b.prototype.getFontSize=function(){return{superFontSize:this._superLabel.getFontSize(),subFontSize:this._subLabel.getFontSize()};};b.prototype.getHeight=function(){return this._container.getHeight();};b.prototype._refresh=function(){this.setText(this._text);};b.prototype._adjustContainer=function(){var c=this._superLabel.getHeight()+this._gap+this._subLabel.getHeight();this._container.setHeight(c);this._subLabel.setY(this._superLabel.getHeight()+this._gap);};b.prototype.getTrueTextLength=function(){return this._superLabel.getTrueTextLength();};b.prototype.toString=function(){return"LabelTwoLines";};a.gui=a.gui||{};a.gui.LabelTwoLines=b;}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.VolumeControl=(function(){var f=new $N.apps.core.Log("CommonGUI","VolumeControl"),d=null,a=true,k=5000,b="customise/resources/images/%RES/icons/volume_mute.png",g="customise/resources/images/%RES/icons/volume_ativo.png",h={},e=false;function c(l){if(l===0){h.speakerImage.setHref(b);h.volumeProgressBar.hide();h.progressBarBackground.hide();}else{h.speakerImage.setHref(g);h.volumeProgressBar.show();h.progressBarBackground.show();}h.volumeProgressBar.setProgress(l);}return{initialise:function(l){h=l;},setIsEnabled:function(l){a=l;},show:function(m){var l=this;if(d){clearTimeout(d);}else{if($N.app.ClockDisplay.isVisible()){e=true;$N.app.ClockDisplay.hide(true);}else{e=false;}}d=setTimeout(l.hide,k);c(m);h.show();h.bringToFront();},hide:function(){if(d){clearTimeout(d);}d=null;h.hide();if(e){e=false;$N.app.ClockDisplay.show();}},resetWasClockVisible:function(){e=false;},setTimeoutDuration:function(l){k=l;},handleVolumeUp:function(){if(a){this.show($N.app.AudioManager.increaseVolume());}},handleVolumeDown:function(){if(a){this.show($N.app.AudioManager.reduceVolume());}},handleVolumeMute:function(){if(a){$N.app.AudioManager.toggleMute();this.show($N.app.AudioManager.getCurrentVolume());}}};}());(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","RecordIcon");this._container=new a.gui.ClippedGroup(this._docRef);this._hrefObj={};this._hrefObj[a.app.PVRUtil.ACTIVE]="../../../customise/resources/images/%RES/icons/botao_gravar_red.png";this._hrefObj[a.app.PVRUtil.SCHEDULED]="../../../customise/resources/images/%RES/icons/botao_gravar_red.png";this._hrefObj[a.app.PVRUtil.ACTIVE_IN_SERIES]="../../../customise/resources/images/%RES/icons/botao_gravar_recorrente_red.png";this._hrefObj[a.app.PVRUtil.SCHEDULED_BY_SERIES]="../../../customise/resources/images/%RES/icons/botao_gravar_recorrente_red.png";this._recordIcon=new a.gui.CachedImage(this._docRef,this._container);this._recordingStatus=a.app.PVRUtil.UNSCHEDULED;this._BLINK_INTERVAL_TIME_MS=500;this._RECORD_ICON_STRING="recordIcon";this._container.configure({width:37.5,height:37.5});this._recordIcon.configure({href:this._hrefObj[a.app.PVRUtil.SCHEDULED],quality:1});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setX=function(c){this._container.setX(c);};b.prototype.setY=function(c){this._container.setY(c);};b.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};b.prototype.getWidth=function(){return this._container.getWidth();};b.prototype.isVisible=function(){return this._recordIcon.isVisible();};b.prototype.hide=function(){a.app.TimerUtil.removeItem(this,this._RECORD_ICON_STRING);this._recordIcon.hide();b.superClass.hide.call(this);};b.prototype.blink=function(c){if(c){this._recordIcon.hide();}else{this._recordIcon.show();}};b.prototype.resetHref=function(){var d=a.app.TimerUtil.getItems(this._RECORD_ICON_STRING),e=d.length,c=null;if(d&&e&&d[e-1]&&d[e-1]._recordIcon){c=d[e-1]._recordIcon.getHref();if(c===""){this._recordIcon.setHref("");}}};b.prototype.startAnim=function(){this.resetHref();a.app.TimerUtil.addItem(this,this._RECORD_ICON_STRING);a.app.TimerUtil.startTimer(this._BLINK_INTERVAL_TIME_MS,this._RECORD_ICON_STRING);};b.prototype.update=function(d,e,c){a.app.TimerUtil.removeItem(this,this._RECORD_ICON_STRING);this._recordingStatus=c||a.platform.btv.PVRManager.getRecordingStatusByEvent(d);if(e){this.setX(e);}switch(this._recordingStatus){case a.app.PVRUtil.SCHEDULED:case a.app.PVRUtil.SCHEDULED_BY_SERIES:this._recordIcon.setHref(this._hrefObj[this._recordingStatus]);this._recordIcon.show();this.show();break;case a.app.PVRUtil.ACTIVE:case a.app.PVRUtil.ACTIVE_IN_SERIES:this._recordIcon.setHref(this._hrefObj[this._recordingStatus]);this.startAnim();this._recordIcon.show();this.show();break;default:this.hide();}return;};b.prototype.getGUIObjectForUnitTests=function(){var c=this;return c;};a.gui=a.gui||{};a.gui.RecordIcon=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","RecordIcon");this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.RecordIcon);a.prototype.update=function(d,e,c){b.app.TimerUtil.removeItem(this,this._RECORD_ICON_STRING);this._recordingStatus=c||b.platform.btv.PVRManager.getRecordingStatusByEvent(d);if(e){this.setX(e);}switch(this._recordingStatus){case b.app.PVRUtil.SCHEDULED:case b.app.PVRUtil.SCHEDULED_BY_SERIES:this._recordIcon.setHref(this._hrefObj[this._recordingStatus]);this._recordIcon.show();this.show();return;case b.app.PVRUtil.ACTIVE:case b.app.PVRUtil.ACTIVE_IN_SERIES:this._recordIcon.setHref(this._hrefObj[this._recordingStatus]);this.startAnim();this._recordIcon.show();this.show();return;}if(b.app.EventUtil.isEventShowingNow(d)&&b.app.PVRUtil.isManualRecordingSet(d)){this._recordingStatus=c||b.platform.btv.PVRManager.getServiceRecordingStatus(d.serviceId);switch(this._recordingStatus){case b.app.PVRUtil.ACTIVE:case b.app.PVRUtil.ACTIVE_IN_SERIES:this._recordIcon.setHref(this._hrefObj[this._recordingStatus]);this.startAnim();this._recordIcon.show();this.show();return;}}this.hide();return;};b.gui=b.gui||{};b.gui.MiniguideRecordIcon=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.RecordIcon);b.prototype.update=function(c,e,d){var f=a.app.PVRUtil.isTaskFailedByEventId(c),g=a.app.PVRUtil.isTaskAuthorizedByEventId(c);d=d||a.platform.btv.PVRManager.getEventRecordingStatus(c);this._updateIcon(d,e,g,f);};b.prototype.updateByTask=function(c,e,d){var f=a.platform.btv.PVRManager.getTaskAuthorizationStatus(c);d=d||a.platform.btv.PVRManager.getTaskRecordingStatus(c);this._updateIcon(d,e,f,true);};b.prototype.updateFolder=function(c,f,e){var d=a.app.FolderUtil.getActiveRecordingsByFolderName(c),g=false;if(d.length){e=(d.length)?a.platform.btv.PVRManager.getTaskRecordingStatus(d[0]):null;g=a.platform.btv.PVRManager.getTaskAuthorizationStatus(d[0]);}this._updateIcon(e,f,g,true);};b.prototype._updateIcon=function(c,d,f,e){this._recordingStatus=c;a.app.TimerUtil.removeItem(this,this._RECORD_ICON_STRING);if(d){this.setX(d);}switch(c){case a.app.PVRUtil.ACTIVE:case a.app.PVRUtil.ACTIVE_IN_SERIES:this._recordIcon.setHref(this._hrefObj[c]);this.startAnim();this._recordIcon.show();this.show();break;case a.app.PVRUtil.PARTIAL:this.hide();break;default:this.hide();}};a.gui=a.gui||{};a.gui.ActiveRecordIcon=b;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","PartialRecordIcon");this._PARTIAL_ICON_WIDTH=120;this._PARTIAL_ICON_HEIGHT=30;this._PARTIAL_ICON_BASE_URL="../../../customise/resources/images/%RES/icons/DVR_label_partial_%LANG%AUTH.png";this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this._container.configure({width:this._PARTIAL_ICON_WIDTH,height:this._PARTIAL_ICON_HEIGHT});this._recordIcon.configure({href:"",x:0,y:0,quality:1,preserveAspect:true,visible:false});}a.gui.Util.extend(b,a.gui.ActiveRecordIcon);b.prototype._getIconHref=function(f){var e=a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE),c=(f===true)?"":"_grey",d;d=this._PARTIAL_ICON_BASE_URL.replace("%LANG",e);d=d.replace("%AUTH",c);return d;};b.prototype._updateIcon=function(c,d,f,e){if(d){this.setX(d);}if(c===a.app.PVRUtil.PARTIAL&&e){this._recordIcon.configure({href:this._getIconHref(f)});this._recordIcon.show();}else{this._recordIcon.hide();}};a.gui=a.gui||{};a.gui.PartialRecordIcon=b;}($N||{}));(function(b){function a(e,c){a.superConstructor.call(this,e);var d=this;this._log=new b.apps.core.Log("CommonGUI","ParentalRatingIcon");this._container=new b.gui.ClippedGroup(this._docRef);this._parentalRatingIcon=new b.gui.CachedImage(this._docRef,this._container);this._parentalRatingIcon.configure({width:36,height:36,visible:false});this._container.configure({width:36,height:36});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.setX=function(c){this._container.setX(c);};a.prototype.setY=function(c){this._container.setY(c);};a.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};a.prototype.getWidth=function(){return this._container.getWidth();};a.prototype.hide=function(){this._parentalRatingIcon.hide();a.superClass.hide.call(this);};a.prototype.update=function(c,d){if(d){this.setX(d);}if(c&&c.parentalRating){this._parentalRatingIcon.setHref(b.app.ImageUtil.getParentalRatingIconHref(c.parentalRating));this._parentalRatingIcon.show();}else{this._parentalRatingIcon.hide();}};a.prototype.isVisible=function(){return this._parentalRatingIcon.isVisible();};b.gui=b.gui||{};b.gui.ParentalRatingIcon=a;}($N||{}));(function(b){function a(e,c){a.superConstructor.call(this,e);var d=this;this._log=new b.apps.core.Log("CommonGUI","ReminderIcon");this._container=new b.gui.ClippedGroup(this._docRef);this._ReminderIcon=new b.gui.CachedImage(this._docRef,this._container);this._container.configure({x:-70,y:-150,width:37.5,height:37.5});this._ReminderIcon.configure({width:37.5,height:37.5,x:0,y:0,href:"../../../customise/resources/images/%RES/icons/botao_lembrete.png",quality:1,opacity:1,preserveAspect:true,visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this._currentOpacity=0;}b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};a.prototype.setWidth=function(c){this._container.setWidth(c);this._ReminderIcon.setWidth(c);};a.prototype.setHeight=function(c){this._container.setHeight(c);this._ReminderIcon.setHeight(c);};a.prototype.update=function(d,e){var c=b.app.EventUtil.isEventShowingNow;if(d&&b.platform.btv.Reminders.isReminderSetForEventId(d)&&!c(d)){if(e){this.setX(e);}this.show();this._ReminderIcon.show();}else{this.hide();this._ReminderIcon.hide();}};b.gui=b.gui||{};b.gui.ReminderIcon=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","StartOverIcon");this._container=new a.gui.ClippedGroup(this._docRef);this._startOverIcon=new a.gui.CachedImage(this._docRef,this._container);this._container.configure({width:37.5,height:37.5});this._startOverIcon.configure({href:"../../../customise/resources/images/%RES/icons/botao_startover_cinza.png",quality:1});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setX=function(c){this._container.setX(c);};b.prototype.setY=function(c){this._container.setY(c);};b.prototype.getTrueWidth=function(){return this._container.getTrueWidth();};b.prototype.getWidth=function(){return this._container.getWidth();};b.prototype.isVisible=function(){return this._startOverIcon.isVisible();};b.prototype.hide=function(){this._startOverIcon.hide();b.superClass.hide.call(this);};b.prototype.update=function(c,d){if(a.app.StartOverHelper.isStartOver(c)){if(d){this.setX(d);}this._startOverIcon.show();this.show();}else{this.hide();}};a.gui=a.gui||{};a.gui.StartOverIcon=b;}($N||{}));(function(c){var a={SVG:{createElements:function(e){var d=e.createElement("rect");return{root:d,inner:d};},setRounding:function(e,d){c.gui.GUIObject.abstractedMethods.changeStyle(e,"rx",d);c.gui.GUIObject.abstractedMethods.changeStyle(e,"ry",d);}},HTML:{createElements:function(e){var d=e.createElement("div");d.style.padding="0px";d.style.position="absolute";d.style.overflow="visible";return{root:d,inner:d};},setRounding:function(e,d){c.gui.GUIObject.abstractedMethods.changeStyle(e,"border-radius",d);}}}[c.gui.GUIObject.mode];function b(f,d){b.superConstructor.call(this,f);var e=a.createElements(this._docRef);this._rootSVGRef=e.root;this._innerSVG=e.inner;this._rounding=0;this.unHighLight();if(d){d.addChild(this);}}c.gui.Util.extend(b,c.gui.AbstractComponent);b.prototype.setRounding=function(d){this._rounding=d;a.setRounding(this._innerSVG,(String(this._rounding)+"px"));};b.prototype.getRounding=function(){return this._rounding;};b.prototype.highLight=function(){if(this.getCssHighlightClass()){this._innerSVG.setAttribute("class",this.getCssHighlightClass());}else{if(this.getCssHighlightStyle()){this._innerSVG.setAttribute("style",this.getCssHighlightStyle());}}};b.prototype.unHighLight=function(){if(this.getCssClass()){this._innerSVG.setAttribute("class",this.getCssClass());}else{if(this.getCssStyle()){this._innerSVG.setAttribute("style",this.getCssStyle());}}};b.prototype.getClassName=function(){return("BackgroundBox");};c.gui=c.gui||{};c.gui.BackgroundBox=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this.DEFAULT_WIDTH=254;this._log=new a.apps.core.Log("CommonGUI","MenuItem");this._width=this.DEFAULT_WIDTH;this._height=50;this._container=new a.gui.Layer(this._docRef);this._container.setWidth(this._width);this._container.setHeight(this._height);this._title=new a.gui.Label(this._docRef,this._container);this._title.configure({x:this._width,y:38,width:this._width,cssClass:"menuItem"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._title.setWidth(c);return this;};b.prototype.setAlignment=function(c){if(c==="left"){this._title.configure({x:0,cssClass:"menuItemLeft"});}else{this._title.configure({x:this._width,cssClass:"menuItem"});}return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.highlight=function(c){};b.prototype.unHighlight=function(){};b.prototype.update=function(f){if(f){var c=this._dataMapper.getTitle(f).split(" "),e=1,h=12,g="",d;if(c.length>e&&this._width<=this.DEFAULT_WIDTH){for(d=0;d<c.length;d++){if((g.length+c[d].length)<h){g+=c[d]+" ";}else{break;}}this._title.setText(g);}else{this._title.setText(this._dataMapper.getTitle(f));}}};b.prototype.moveToNext=function(c){if(!c){c=this._movementPositions.isSelectedAtLast();}this._movementPositions.selectNext();var d=this._movementPositions.getSelectedItem();this._moveItem(d,c);};b.prototype.moveToPrevious=function(c){if(!c){c=this._movementPositions.isSelectedAtFirst();}this._movementPositions.selectPrevious();var d=this._movementPositions.getSelectedItem();this._moveItem(d,c);};a.gui=a.gui||{};a.gui.MenuItem=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container=new a.gui.Container(this._docRef);this._icon=new a.gui.Image(this._docRef,this._container);this._title=new a.gui.TextArea(this._docRef,this._container);this._UPPER_TEXT_POS=52;this._LOWER_TEXT_POS=68.5;this._container.configure({width:121.5,height:121.5,cssClass:"optionsMenuItem",cssHighlightClass:"optionsMenuItemHighlighted",rounding:0,opacity:1});this._icon.configure({x:37.5,y:15,width:45,height:45,quality:1});this._title.configure({x:1.5,y:this._LOWER_TEXT_POS,width:118.5,cssClass:"optionsMenuItemTitle"});this.setDataMapper({getTitle:function(d){return d.title;},getIcon:function(d){return d.url;}});this._rootSVGRef=this._container.getRootSVGRef();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.highlight=function(){this._container.highLight();};b.prototype.unHighlight=function(){this._container.unHighLight();};b.prototype.update=function(e){var c,d;if(e){c=this._dataMapper.getIcon(e);d=this._dataMapper.getType(e);this._icon.setHref(c);this._title.setText(this._dataMapper.getTitle(e));if(d==="smallerText"){this._title.setCssClass("optionsMenuItemTitleSmaller");}}};b.prototype.getWidth=function(){return this._container.getWidth();};a.gui=a.gui||{};a.gui.OptionsMenuItem=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container=new a.gui.Container(this._docRef);this._icon=new a.gui.Image(this._docRef,this._container);this._title=new a.gui.Label(this._docRef,this._container);this._cursor=new a.gui.Label(c,this._container);this._directChannelEntry=null;this._container.configure({cssClass:"optionsMenuItem",cssHighlightClass:"optionsMenuItemHighlighted",opacity:1});this._originalValue=null;this._title.configure({cssClass:"dialogButtonText"});this._cursor.configure({cssClass:"popupDirectTextEntryCursor",width:150,height:40});this.setDataMapper({getTitle:function(d){return d.title;}});this._rootSVGRef=this._container.getRootSVGRef();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype._isSelectable=function(c){if(c&&!a.app.StringUtil.isNullOrUndefined(c.selectable)){return c.selectable;}return true;};b.prototype._isLabel=function(c){return(c.type&&c.type===a.app.constants.POPUP_MULTIROW_DATA_TYPE.LABEL);};b.prototype._isDirectTextEntry=function(c){return(c.type&&c.type===a.app.constants.POPUP_MULTIROW_DATA_TYPE.DIRECT_ENTRY);};b.prototype._initDirectTextEntry=function(f){var d=f.maxLength||2,c=1200,e=this;this._directChannelEntry=new a.app.DirectChannelEntry(d,c);this._directChannelEntry.allowZero(true);this._directChannelEntry.setChannelEnteredCallback(function(g){if(a.app.StringUtil.isNullOrUndefined(g)){g=this._originalValue;}else{g=a.app.StringUtil.removeLeadingZeros(g);if(g===""){g=0;}}e._title.setText(g);this._originalValue=g;if(f.callback){f.callback(g);}});};b.prototype.highlight=function(){this.isHighlighted=true;this._container.highLight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this._container.unHighLight();};b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this.highlight();}else{this.unHighlight();}};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype.styleVerticalNavigation=function(d){var c=50;this._container.setWidth(this._dataMapper.getVerticalItemWidth());this._container.setHeight(this._dataMapper.getItemHeight());this._title.setX(30);this._title.setY((this._dataMapper.getItemHeight()*0.75));this._title.setWidth(this._dataMapper.getVerticalItemWidth()-c);this._title.setCssClass("dialogButtonTextLeft");};b.prototype.styleHorizontalNavigation=function(c,d){this._container.setWidth(this._dataMapper.getHorizontalItemWidth(c));this._container.setHeight(this._dataMapper.getItemHeight());this._title.setY((this._dataMapper.getItemHeight()*0.75));this._title.setWidth(this._dataMapper.getHorizontalItemWidth(c));if(!this._isLabel(c)){this._title.setX((this._dataMapper.getHorizontalItemWidth(c)/2));}this._title.setCssClass(d);};b.prototype.update=function(h){var e=h.maxLength||2,c=1200,g=this,d="optionsMenuItem",f="optionsMenuItemHighlighted",l="dialogButtonText",k=(h)?this._dataMapper.getTitle(h):"";if(this._isLabel(h)){d="labelBackplate";f="labelBackplate";l="dialogButtonTextLabel";}else{if(this._isDirectTextEntry(h)){this._initDirectTextEntry(h);}if(!this._isSelectable(h)){k="0";d="unSelectableOptionsMenuItem";f="unSelectableOptionsMenuItem";l="unSelectableDialogButtonText";}}this._container.configure({cssClass:d,cssHighlightClass:f,opacity:1});if(h.xPos){this._container.setX(h.xPos);}if(h.width){this._container.setWidth(h.width);}if(this._dataMapper.isVertical()){this.styleVerticalNavigation(h);}else{this.styleHorizontalNavigation(h,l);}if(k){this._originalValue=k;this._title.setText(k);}};b.prototype.getWidth=function(){return this._container.getWidth();};b.prototype.setCssClass=function(c){this._container.setCssClass(c);};b.prototype.setCssHighlightClass=function(c){this._container.setCssHighlightClass(c);};b.prototype.keyHandler=function(c){var d=a.apps.core.KeyInterceptor.getKeyMap();if(this._directChannelEntry){switch(c){case d.KEY_LEFT:case d.KEY_ZERO:case d.KEY_ONE:case d.KEY_TWO:case d.KEY_THREE:case d.KEY_FOUR:case d.KEY_FIVE:case d.KEY_SIX:case d.KEY_SEVEN:case d.KEY_EIGHT:case d.KEY_NINE:return this._directChannelEntry.updateChannelDigits(c,this._title,this._cursor,true);}}return false;};a.gui=a.gui||{};a.gui.ButtonGroupItem=b;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._log=new b.apps.core.Log("CommonGUI","LongMenuItem");this._container=new b.gui.Group(c);this._title=new b.gui.Label(c,this._container);this._title.configure({x:0,y:38,cssClass:"logoMenuItemUnhighlighted"});this._rootSVGRef=this._container.getRootSVGRef();this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;return this;};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.updateHighlight=function(){if(this.isHighlighted&&!this.isFocused){this._title.setOpacity(0.7);}else{this._title.setOpacity(1);}if(this.isHighlighted){this._title.setCssClass("logoMenuItemHighlighted");}else{this._title.setCssClass("logoMenuItemUnhighlighted");}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(c){if(c){this.unHighlight();this._title.setText(this._dataMapper.getTitle(c));}};a.prototype.setCssClass=function(c){this._title.setCssClass(c);};b.gui=b.gui||{};b.gui.LongMenuItem=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._log=new b.apps.core.Log("CommonGUI","LogoMenuItem");this._container=new b.gui.Group(c);this._title=new b.gui.Label(c,this._container);this._highlightIcon=new b.gui.CachedImage(c,this._container);this._highlightIconIndicator=new b.gui.CachedImage(c,this._container);this._icon=new b.gui.CachedImage(c,this._container);this._iconIndicator=new b.gui.CachedImage(c,this._container);this._TITLE_ALTERNATE_X_POSITION=90;this._title.configure({x:0,y:42,cssClass:"logoMenuItemUnhighlighted",visible:false});this._highlightIcon.configure({x:0,y:0,width:60,height:60,preserveAspect:true,visible:false,cssClass:"logoMenuItemIconHighlighted"});this._highlightIconIndicator.configure({x:47.5,y:0,width:25,height:25,preserveAspect:true,visible:false});this._icon.configure({x:0,y:0,width:60,height:60,preserveAspect:true});this._iconIndicator.configure({x:47.5,y:0,width:25,height:25,preserveAspect:true});this._iconPadding=82;this._rootSVGRef=this._container.getRootSVGRef();this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;return this;};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.select=function(c){if(this._itemHandler&&c){this._itemHandler.select(c);}};a.prototype.enter=function(c){if(this._itemHandler&&c){this._itemHandler.enter(c);}};a.prototype.updateHighlight=function(){if(this.isHighlighted&&!this.isFocused){this._title.setOpacity(0.7);this._highlightIcon.setOpacity(0.7);this._highlightIconIndicator.setOpacity(0.7);}else{this._title.setOpacity(1);this._highlightIcon.setOpacity(1);this._highlightIconIndicator.setOpacity(1);}if(this.isHighlighted){this._icon.hide();this._iconIndicator.hide();this._highlightIcon.show();this._highlightIconIndicator.show();this._title.setCssClass("logoMenuItemHighlighted");}else{this._highlightIcon.hide();this._highlightIconIndicator.hide();this._icon.show();this._iconIndicator.show();this._title.setCssClass("logoMenuItemUnhighlighted");}};a.prototype.highlight=function(c){if(!this.isHighlighted){this.isHighlighted=true;this.updateHighlight();if(this._itemHandler&&c){this._itemHandler.highlight(c);}}};a.prototype.unHighlight=function(){if(this.isHighlighted){this.isHighlighted=false;this.updateHighlight();}};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(h){var f=this,k,e,d,c,g=function(){f._title.show();},l=function(){f._title.setX(0);f._title.show();};if(h){this._title.setText(this._dataMapper.getTitle(h));k=this._dataMapper.getLogo(h);if(k&&k!==""){this._title.setX(f._TITLE_ALTERNATE_X_POSITION);this._icon.setLoadFailedCallback(l);this._icon.setLoadSuccessful(g);this._icon.setHref(k);if(this._dataMapper.getLogoIndicator){e=this._dataMapper.getLogoIndicator(h);if(e){this._iconIndicator.setHref(e);}else{this._iconIndicator.setHref("");}}}else{this._icon.setLoadFailedCallback(null);this._icon.setLoadSuccessful(null);this._icon.setHref("");this._title.setX(0);this._title.show();}if(this._dataMapper.getLogoHighlight){d=this._dataMapper.getLogoHighlight(h);if(d&&d!==""){this._title.setX(f._TITLE_ALTERNATE_X_POSITION);this._highlightIcon.setLoadFailedCallback(l);this._highlightIcon.setLoadSuccessful(g);this._highlightIcon.setHref(d);if(this._dataMapper.getLogoIndicatorHighlight){c=this._dataMapper.getLogoIndicatorHighlight(h);if(c){this._highlightIconIndicator.setHref(c);}else{this._highlightIconIndicator.setHref("");}}}else{this._highlightIcon.setLoadFailedCallback(null);this._highlightIcon.setLoadSuccessful(null);this._highlightIcon.setHref("");this._title.setX(0);this._title.show();}}}};a.prototype.setCssClass=function(c){this._title.setCssClass(c);};a.prototype.setItemHandler=function(c){this._itemHandler=new c();};a.prototype.setHandlerData=function(c){this._itemHandler.setHandlerData(c);};b.gui=b.gui||{};b.gui.LogoMenuItem=a;}($N||{}));(function(){function a(b){this._log=new $N.apps.core.Log("CommonGUI","RecordItem");a.superConstructor.call(this,b);this._container=new $N.gui.Group(this._docRef);this._container.setWidth(210);this._container.setHeight(60);this._recordIcon=new $N.gui.RecordIcon(this._docRef,this._container);this._text=new $N.gui.Label(this._docRef,this._container);this._recordIcon.configure({x:0,y:30});this._text.configure({x:60,y:47,cssClass:"textItemText"});this.setDataMapper({getText:function(c){return c.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}$N.gui.Util.extend(a,$N.gui.AbstractListItem);a.prototype.setWidth=function(b){this._width=b;return this;};a.prototype.setHeight=function(b){this._height=b;return this;};a.prototype.highlight=function(){};a.prototype.unHighlight=function(){};a.prototype.setTextCssClass=function(b){this._text.setCssClass(b);};a.prototype.update=function(b){if(b){this._text.setText(this._dataMapper.getText(b));this._recordIcon.update(b);}};$N.gui=$N.gui||{};$N.gui.RecordItem=a;}($N||{}));(function(a){function c(d){c.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","EventListItem");this._container=new a.gui.ClippedGroup(this._docRef);this._container.setWidth(1620);this._container.setHeight(150);this._chanLogo=new a.gui.Image(this._docRef,this._container);this._eventName=new a.gui.Label(this._docRef,this._container);this._chanLogo.configure({x:100,y:5,width:175,height:60,quality:1});this._eventName.configure({x:300,y:52,width:1150,cssClass:"eventName"});this._rootSVGRef=this._container.getRootSVGRef();this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(c,a.gui.AbstractListItem);var b=c.prototype;b.setWidth=function(d){this._width=d;return this;};b.setHeight=function(d){this._height=d;return this;};b.highlight=function(d){};b.unHighlight=function(){};b.update=function(d){if(d){this._chanLogo.setHref(this._dataMapper.getChannelLogo(d));this._eventName.setText(this._dataMapper.getTitle(d));}};b.setChannelLogoWidth=function(d){this._chanLogo.setWidth(d);};b.setChannelLogoHeight=function(d){this._chanLogo.setHeight(d);};b.setChannelLogoXPosition=function(d){this._chanLogo.setX(d);};b.setChannelLogoYPosition=function(d){this._chanLogo.setY(d);};b.hideEventName=function(){this._eventName.hide();};b.showEventName=function(){this._eventName.show();};a.gui=a.gui||{};a.gui.EventListItem=c;}($N||{}));(function(a){function b(e,c){b.superConstructor.call(this,e);this._log=new a.apps.core.Log("CommonGUI","ChannelListItem");this.isFocused=true;this.isHighlighted=false;var d=this;this._container=new a.gui.ClippedGroup(this._docRef);this._container.configure({width:518,height:102});this._channelNumber=null;this._HIGHLIGHT_BUFFER=3;this._INNER_CONTENT_HEIGHT=102-(this._HIGHLIGHT_BUFFER*2);this._LOGO_LABEL_Y_OFFSET=14;this._LABEL_CONTAINER_WIDTH=393;this._LABEL_CONTAINER_X_OFFSET=111;this._LABEL_BUFFER=13.5;this._CONNECTOR_WIDTH=11;this._logoHighlight=new a.gui.Container(this._docRef,this._container);this._logoHighlight.configure({x:this._HIGHLIGHT_BUFFER/2,y:this._HIGHLIGHT_BUFFER/2,width:this._INNER_CONTENT_HEIGHT+this._HIGHLIGHT_BUFFER,height:this._INNER_CONTENT_HEIGHT+this._HIGHLIGHT_BUFFER,cssClass:"channelLogoListItemHighlight",rounding:1,visible:false});this._channelLogo=new a.gui.ChannelLogo(this._docRef,this._container);this._channelLogo.configure({x:this._HIGHLIGHT_BUFFER,y:this._HIGHLIGHT_BUFFER,width:this._INNER_CONTENT_HEIGHT,height:this._INNER_CONTENT_HEIGHT});this._background=new a.gui.FastContainer(this._docRef,this._container);this._background.configure({x:this._LABEL_CONTAINER_X_OFFSET+this._HIGHLIGHT_BUFFER,y:this._HIGHLIGHT_BUFFER,width:this._LABEL_CONTAINER_WIDTH,height:this._INNER_CONTENT_HEIGHT,cssClass:"channelListItemBackground"});this._highlight=new a.gui.Container(this._docRef,this._container);this._highlight.configure({x:this._LABEL_CONTAINER_X_OFFSET+this._HIGHLIGHT_BUFFER,y:this._HIGHLIGHT_BUFFER,width:this._LABEL_CONTAINER_WIDTH,height:this._INNER_CONTENT_HEIGHT,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._connector=new a.gui.Container(this._docRef,this._container);this._connector.configure({x:this._LABEL_CONTAINER_X_OFFSET+this._HIGHLIGHT_BUFFER+this._LABEL_CONTAINER_WIDTH,y:this._HIGHLIGHT_BUFFER,width:this._CONNECTOR_WIDTH,height:this._INNER_CONTENT_HEIGHT,cssClass:"channelListItemBackgroundSelected",visible:false});this._channelNum=new a.gui.Label(this._docRef,this._container);this._channelNum.configure({x:this._LABEL_CONTAINER_X_OFFSET+this._LABEL_BUFFER+this._HIGHLIGHT_BUFFER,y:47,width:this._LABEL_CONTAINER_WIDTH-(this._LABEL_BUFFER*2),height:this._INNER_CONTENT_HEIGHT/2,cssClass:"channelListChanNum"});this._cursor=new a.gui.Label(this._docRef,this._container);this._cursor.configure({cssClass:"directChannelNumberEntry"});this._channelName=new a.gui.Label(this._docRef,this._container);this._channelName.configure({x:this._LABEL_CONTAINER_X_OFFSET+this._LABEL_BUFFER+this._HIGHLIGHT_BUFFER,y:89,width:this._LABEL_CONTAINER_WIDTH-(this._LABEL_BUFFER*2),height:this._INNER_CONTENT_HEIGHT/2,cssClass:"channelListChanName"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.update=function(c){if(c){this._highlight.hide();this._logoHighlight.hide();this._background.setCssClass("channelListItemBackground");this._background.show();this._channelLogo.update(c);this._channelNum.show();this._channelName.show();this._channelNum.setText(this._dataMapper.getChannelNumber(c));this._channelName.setText(this._dataMapper.getChannelName(c));}};b.prototype.getNumberItem=function(){if(!this._channelNumber){this._channelNumber=this._channelNum.getText();}this._channelName.hide();return this._channelNum;};b.prototype.getCursor=function(){return this._cursor;};b.prototype.restoreNumberItem=function(){if(this._channelNumber){this._channelNum.setText(this._channelNumber);this._channelName.show();this._channelNumber=null;}};b.prototype.resetCss=function(){this._channelNum.setY(47);this._channelNum.setCssClass("channelListChanNum");};b.prototype.setDirectEntryCss=function(){this._channelNum.setY(67);this._channelNum.setCssClass("directChannelNumberEntry");};b.prototype.clearNumberItem=function(){this._channelName.show();this._channelNumber=null;};b.prototype.updateHighlight=function(){if(this.isHighlighted){if(this.isFocused){this._background.hide();this._highlight.show();}else{this._highlight.hide();this._background.setCssClass("channelListItemBackgroundSelected");this._background.show();}this._logoHighlight.show();}else{this._highlight.hide();this._logoHighlight.hide();this._background.setCssClass("channelListItemBackground");this._background.show();this.hideConnector();}};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype.showConnector=function(){this._connector.show();};b.prototype.hideConnector=function(){this._connector.hide();};b.prototype.setDataMapper=function(c){b.superClass.setDataMapper.call(this,c);this._channelLogo.setDataMapper(c);};a.gui=a.gui||{};a.gui.ChannelListItem=b;}($N||{}));(function(b){var a={SVG:{createElement:function(d,e){return d.createElement("tspan");}},HTML:{createElement:function(d,e){return d.createElement("span");}}}[b.gui.GUIObject.mode];function c(e,d){c.superConstructor.call(this,e);this._log=new b.apps.core.Log("CommonGUI","DiacriticSpanLabel");this._spanElement=null;this._spanCssClass="DiacriticSpanLabelText";this._caseSensitive=true;this._firstWordsOnly=false;if(d){d.addChild(this);}}b.gui.Util.extend(c,b.gui.Label);c.prototype.setSpanCssClass=function(d){this._spanCssClass=d;if(this._spanElement){this._spanElement.setAttribute("class",this._spanCssClass);}};c.prototype.setSpanOnText=function(l){var d,n,m,g,f=0,k=null,h,e;if(l&&(typeof(l)==="string")){d=(this._caseSensitive)?this.getText():this.getText().toUpperCase();n=(this._caseSensitive)?l:l.toUpperCase();f=0;k=null;n=b.app.SearchCriteriaUtil.getDiacriticisedKeyword(n);if(this._firstWordsOnly){m=new RegExp("(^"+n+"|\\s+"+n+")","i");g=d.search(m);if(g>-1){while(d.charAt(g)===" "){g++;}}}else{g=d.indexOf(n);}if(g>-1){if(g>0){this._innerElement.textContent=this.getText().substring(0,g);}else{this._innerElement.textContent="";}f=g+l.length;this._spanElement=a.createElement(this._docRef,this._innerElement);this._spanElement.textContent=this.getText().substring(g,f);this._spanElement.setAttribute("class",this._spanCssClass);this._innerElement.appendChild(this._spanElement);if(f<this.getText().length){k=a.createElement(this._docRef,this._innerElement);k.textContent=this.getText().substring(f,this.getText().length);this._innerElement.appendChild(k);}}}else{if(l&&(typeof(l)==="object")){for(e=0;e<l.length;e++){this.setSpanOnText(l[e]);}h=l.join(" ");this.setSpanOnText(h);}else{this.setText(this.getText());}}};c.prototype.setCaseSensitive=function(d){this._caseSensitive=d;};c.prototype.setFirstWordsOnly=function(d){this._firstWordsOnly=d;};c.prototype.getClassName=function(){return("DiacriticSpanLabel");};b.gui=b.gui||{};b.gui.DiacriticSpanLabel=c;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("Search","SearchResultListItem");this._isHighlighted=false;this._isFocused=false;this._backgroundCssClass="searchResultListItemBackground";this._highlightedCssClass="searchResultListItemHighlighted";this._container=new b.gui.ClippedGroup(this._docRef);this._container.configure({width:1162.5,height:62});this._background=new b.gui.Container(d,this._container);this._background.configure({x:5,y:5,width:1152.5,height:51,cssClass:this._backgroundCssClass});this._content=new b.gui.DiacriticSpanLabel(this._docRef,this._container);this._content.configure({x:12,y:43,width:1138.5,height:51,TextOverflow:"...",FirstWordsOnly:true,cssClass:"searchResultListItemContent",spanCssClass:"searchResultListItemContentSpan"});this._content.setFirstWordsOnly(true);this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.update=function(e){var d,c;if(e){this._content.setText(this._dataMapper.getContent(e));d=this._dataMapper.getContentSpanText(e);this._content.setSpanOnText(d);}};a.prototype.highlight=function(){this._isHighlighted=true;if(this._isFocused){this._background.setCssClass(this._highlightedCssClass);this._content.setCssClass("searchResultListItemContentHighlighted");this._content.setSpanCssClass("searchResultListItemContentSpanHighlighted");}};a.prototype.unHighlight=function(){this._isHighlighted=false;this._background.setCssClass(this._backgroundCssClass);this._content.setCssClass("searchResultListItemContent");this._content.setSpanCssClass("searchResultListItemContentSpan");};a.prototype.focus=function(){if(this._isHighlighted){this._background.setCssClass(this._highlightedCssClass);this._content.setCssClass("searchResultListItemContentHighlighted");this._content.setSpanCssClass("searchResultListItemContentSpanHighlighted");}this._isFocused=true;};a.prototype.defocus=function(){this._background.setCssClass(this._backgroundCssClass);this._content.setCssClass("searchResultListItemContent");this._content.setSpanCssClass("searchResultListItemContentSpan");this._isFocused=false;};a.prototype.setCssClass=function(c){this._backgroundCssClass=c||"searchResultListItemBackground";};a.prototype.setHighlightCssClass=function(c){this._highlightedCssClass=c||"searchResultListItemHighlighted";};b.gui=b.gui||{};b.gui.SearchResultListItem=a;}($N||{}));(function(b){function a(e,c){var d=this;a.superConstructor.call(this,e);this._log=new b.apps.core.Log("CommonGUI","AgoraListItem");this.EVENT_NAME_WIDTH=676;this.isFocused=true;this.isHighlighted=false;this.recordIconTimeout=null;this._currentEventText=null;this.SEPARATOR=" - ";this._event=null;this._container=new b.gui.ClippedGroup(this._docRef);this._container.configure({width:942,height:97.5});this._background=new b.gui.Container(e,this._container);this._background.configure({x:225,y:0,width:717,height:97.5,cssClass:"agoraListItemBackground"});this._highlight=new b.gui.Container(e,this._container);this._highlight.configure({x:0,y:0,width:942,height:97.5,cssClass:"channelListItemHighlight",rounding:1,visible:true});this._channelLogo=new b.gui.ChannelLogo(this._docRef,this._container);this._channelLogo.configure({x:115.5,y:0,width:96,height:96});this._channelNum=new b.gui.Label(this._docRef,this._container);this._channelNum.configure({x:24,y:60,width:120,height:52.5,cssClass:"channelListChanNum"});this._cursor=new b.gui.Label(this._docRef,this._container);this._cursor.configure({x:24,y:60,width:120,height:52.5,cssClass:"channelListChanNum"});this._eventName=new b.gui.DelayedScrollingLabel(this._docRef,this._container);this._eventName.configure({x:240,y:7.5,width:d.EVENT_NAME_WIDTH,duration:"250ms"});this._eventSeriesEpisodeTitle=new b.gui.Label(this._docRef,this._container);this._eventSeriesEpisodeTitle.configure({x:240,y:37.5,width:d.EVENT_NAME_WIDTH,height:39,cssClass:"agoraSeriesEpisodeTitle"});this._progressBarGroup=new b.gui.Group(e,this._container);this._progress=new b.gui.ContentProgressBar(e,this._progressBarGroup);this._startTime=new b.gui.Label(e,this._progressBarGroup);this._endTime=new b.gui.Label(e,this._progressBarGroup);this._progressBarGroup.configure({width:808.5,height:50,x:240,y:56,visible:true});this._startTime.configure({x:0,y:26,width:this._startTimeWidth,height:50,text:"00:00",cssClass:"startAndEndTimeMiniguideEventGroup"});this._progress.configure({x:95,y:10,width:316.5,height:10,minimumValue:0,maximumValue:300,progress:150,outerCssClass:"agoraProgressOuter",innerCssClass:"agoraProgressInner"});this._endTime.configure({x:417,y:26,width:140,height:50,text:"24:00",cssClass:"startAndEndTimeMiniguideEventGroup"});this._catchupIcn=new b.gui.Image(e,this._container);this._startOverIcon=new b.gui.StartOverIcon(e,this._container);this._recordIcon=new b.gui.RecordIcon(e,this._container);this._reminderIcn=new b.gui.ReminderIcon(e,this._container);this._catchupIcn.configure({width:36,height:36,x:910,y:6,href:"../../../customise/resources/images/%RES/icons/optionIcons/catchup_icon.png",visible:false});this._startOverIcon.configure({x:910,y:6,visible:false});this._recordIcon.configure({x:910,y:6});this._reminderIcn.configure({x:910,y:6});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this.iconX=0;this.iconStepX=48;this.setAnimationDuration("200ms");this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.updateEventTitle=function(e){var c=12,d=this._container.getTrueWidth()-this.iconStepX*3;this._eventName.setText(this._dataMapper.getTitle(e),true);this._eventSeriesEpisodeTitle.setText(this._dataMapper.getSeriesEpisodeTitle(e),true);this.iconX=this._eventName.getTrueTextLength()+this._eventName.getTrueX()+c;if(this.iconX>d){this.iconX=d;this._eventName.setWidth(this.iconX-this._eventName.getTrueX()-c);this._eventSeriesEpisodeTitle.hide();return;}this._eventSeriesEpisodeTitle.setX(this.iconX);this._eventSeriesEpisodeTitle.show();this.iconX+=this._eventSeriesEpisodeTitle.getTrueTextLength()+c;if(this.iconX>d){this.iconX=d;this._eventSeriesEpisodeTitle.setWidth(this.iconX-this._eventSeriesEpisodeTitle.getTrueX()-c);}};a.prototype.updateRecordIcon=function(){if(this._event){this._recordIcon.update(this._event);}};a.prototype.updateEventIcons=function(c){this._recordIcon.update(c);this._recordIcon.setX(this._container.getTrueWidth()-this.iconStepX);this._reminderIcn.setX(this._container.getTrueWidth()-this.iconStepX);this._startOverIcon.setX(this._container.getTrueWidth()-this.iconStepX);if(this._recordIcon.isVisible()){this._reminderIcn.setX(this._container.getTrueWidth()-2*this.iconStepX);this._startOverIcon.setX(this._container.getTrueWidth()-2*this.iconStepX);}this._reminderIcn.update(c);this._startOverIcon.update(c);};a.prototype.updateRedIcon=function(d){var e=this._dataMapper.getRedButton().getHref(),c=d?b.app.constants.ACTIVE_INFO_BUTTON_PATH:b.app.constants.INACTIVE_INFO_BUTTON_PATH;if(e!==c){this._dataMapper.getRedButton().setHref(c);}};a.prototype.update=function(d){if(d){this._highlight.hide();this._channelLogo.update(d);this.updateForChannelEntryOver();this._channelNum.show();this._eventName.show();this._channelNum.setText(b.app.GeneralUtil.padNumberWithZeroes(this._dataMapper.getChannelNumber(d),3));var c=this._dataMapper.getEventObj(d);this._event=c;if(c){this._eventName.setWidth(this.EVENT_NAME_WIDTH);this._eventSeriesEpisodeTitle.setWidth(this.EVENT_NAME_WIDTH);this._catchupIcn.hide();this._startOverIcon.hide();this._recordIcon.hide();this._reminderIcn.hide();if(b.app.EventUtil.isValidEvent(c)){this._progressBarGroup.show();if(this._dataMapper.isAseguirView()){this._background.setCssClass("aseguirListItemBackground");}else{this._background.setCssClass("agoraListItemBackground");}this._eventName.setCssClass("agoraEventName");this.updateProgress(this._dataMapper.getProgressBarData(c));this.updateEventTitle(c);this.updateEventIcons(c);}else{this._eventName.setText(this._dataMapper.getString("programInfoUnavailable"),true);this._eventSeriesEpisodeTitle.hide();this._background.setCssClass("agoraInvalidChannelBackground");this._eventName.setCssClass("agoraInvalidEventName");this._progressBarGroup.hide();}}c=null;}};a.prototype.updateProgress=function(c){var e=b.apps.util.Util.formatTime(new Date(c.minimum),"HH:MM"),d=b.apps.util.Util.formatTime(new Date(c.maximum),"HH:MM");this._progress.setMinimumValue(c.minimum);this._progress.setMaximumValue(c.maximum);this._startTime.setText(e);this._endTime.setText(d);this._progress.setProgress(c.progress);if(c.minimum>Date.now()){this._progressBarGroup.show();this._progress.hide();this._endTime.hide();this._startTime.setText(e+" - "+d);this._isProgressBarDisplayed=false;}else{this._progress.show();this._endTime.show();this._progressBarGroup.show();this._isProgressBarDisplayed=true;}};a.prototype.setServiceNumber=function(c){this._channelNum.setText(b.app.GeneralUtil.padNumberWithZeroes(c,3));};a.prototype.getServiceNumber=function(){return this._channelNum.getText();};a.prototype.getCursor=function(){return this._cursor.getText();};a.prototype.setServiceNumberCssClass=function(c){this._channelNum.setCssClass(c);};a.prototype.setCursorCssClass=function(c){this._cursor.setCssClass(c);};a.prototype.updateForChannelEntry=function(){this._channelNum.setX(9);this._channelNum.setY(65);this._channelNum.setCssClass("directChannelNumberEntry");this._cursor.setCssClass("directChannelNumberEntry");};a.prototype.updateForChannelEntryOver=function(){this._channelNum.setX(24);this._channelNum.setY(60);this._channelNum.setCssClass("channelListChanNum");};a.prototype.updateHighlight=function(){if(this.isHighlighted){if(this.isFocused){this._highlight.show();var c=this._dataMapper.getFocusServiec(),d=this._dataMapper.getEventObj(c);if(b.app.EventUtil.isValidEvent(d)){this.updateRedIcon(true);}else{this.updateRedIcon(false);}this._dataMapper.setReminderButtonLabel(d);c=null;d=null;}else{this._highlight.hide();}}else{this._highlight.hide();}};a.prototype.highlight=function(){var d=null,c=null;this.isHighlighted=true;this.updateHighlight();if((this.EVENT_NAME_WIDTH>this._eventSeriesEpisodeTitle.getTrueWidth())&&!this._currentEventText){c=this._currentEventText+this.SEPARATOR+this._eventSeriesEpisodeTitle.getText();d=this._eventName.getWidth()+this._eventSeriesEpisodeTitle.getWidth();this._currentEventText=this._eventName.getText();this._eventName.setText(this._currentEventText+this.SEPARATOR+this._eventSeriesEpisodeTitle.getText());this._eventName.setWidth(d);this._eventSeriesEpisodeTitle.hide();}this._eventName.start();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();this._eventName.stop();if((!this._eventSeriesEpisodeTitle.isVisible())&&this._currentEventText){this._eventName.setWidth(this.EVENT_NAME_WIDTH);this._eventName.setText(this._currentEventText);this._currentEventText=null;this._eventSeriesEpisodeTitle.show();}};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();if(this.isHighlighted){this._eventName.start();}};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();this._eventName.stop();};a.prototype.manualUpdateRecordIcon=function(){if(this.recordIconTimeout){clearTimeout(this.recordIconTimeout);this.recordIconTimeout=null;}this.recordIconTimeout=setTimeout(this.updateRecordIcon(),1000);};a.prototype.setDataMapper=function(c){a.superClass.setDataMapper.call(this,c);this._channelLogo.setDataMapper(c);};b.gui=b.gui||{};b.gui.AgoraListItem=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.ClippedGroup(this._docRef);this._container.setWidth(800);this._container.setHeight(160);this._title=new b.gui.Label(this._docRef,this._container);this._title.configure({x:63,y:30,width:450,cssClass:"dialogSubtitle"});this._subTitle=new b.gui.Label(this._docRef,this._container);this._subTitle.configure({x:63,y:75,width:450,cssClass:"menuSubTitle"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;return this;};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.highlight=function(){};a.prototype.unHighlight=function(){};a.prototype.update=function(c){if(c){this._title.setText(this._dataMapper.getTitle(c));this._subTitle.setText(this._dataMapper.getSubTitle(c));}};a.prototype.setTitleXPosition=function(c){this._title.setX(c);};a.prototype.setTitleYPosition=function(c){this._title.setY(c);};a.prototype.setTitleWidth=function(c){this._title.setWidth(c);};a.prototype.focus=function(){this.isFocused=true;};a.prototype.defocus=function(){this.isFocused=false;};b.gui=b.gui||{};b.gui.TitleSubtitleItem=a;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container=new a.gui.ClippedGroup(this._docRef);this._container.setWidth(1350);this._container.setHeight(40);this._title=new a.gui.Label(this._docRef,this._container);this._title.configure({x:39,y:30,width:500,cssClass:"fullViewLeftSubtitle"});this._subTitle=new a.gui.Label(this._docRef,this._container);this._subTitle.configure({x:663,y:30,width:625,cssClass:"fullViewRightSubtitle"});this.setDataMapper({getText:function(d){return d.name;}});this.isFocused=true;this.isHighlighted=false;this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.highlight=function(){};b.prototype.unHighlight=function(){};b.prototype.update=function(c){if(c){this._title.setText(this._dataMapper.getTitle(c));this._subTitle.setText(this._dataMapper.getSubTitle(c));}};b.prototype.setTitleXPosition=function(c){this._title.setX(c);};b.prototype.setTitleYPosition=function(c){this._title.setY(c);};b.prototype.setTitleWidth=function(c){this._title.setWidth(c);};b.prototype.focus=function(){this.isFocused=true;};b.prototype.defocus=function(){this.isFocused=false;};a.gui=a.gui||{};a.gui.SettingsSystemMenuItem=b;}($N||{}));(function(a){function b(d){this._log=new a.apps.core.Log("CommonGUI","RecordingListItem");b.superConstructor.call(this,d);this._NAME_X=95;this._NAME_WIDTH=1051.5;this._NUMBER_OF_EPISODES_WIDTH=120;this._NOVO_ICON_WIDTH=90;this._PADDING=5;this._ICON_PADDING=15-this._PADDING;this.isFocused=true;this.isHighlighted=false;this._data=null;var c=this;this._container=new a.gui.ClippedGroup(d);this._highlight=new a.gui.Container(d,this._container);this._icon=new a.gui.Image(d,this._container);this._novoIcon=new a.gui.Image(d,this._container);this._name=new a.gui.Label(this._docRef,this._container);this._numberOfEpisodes=new a.gui.Label(this._docRef,this._container);this._recordDate=new a.gui.Label(this._docRef,this._container);this._activeRecordIcon=new a.gui.ActiveRecordIcon(d,this._container);this._partialRecordIcon=new a.gui.PartialRecordIcon(d,this._container);this._container.configure({width:1291.5,height:72,visible:true});this._highlight.configure({x:2,y:2,width:1287.5,height:68,cssClass:"recordingListItemHighlight",rounding:2,visible:false});this._icon.configure({x:21,y:15,width:48,height:42,quality:1,preserveAspect:true,visible:false,loadSuccessful:function(){c._icon.show();}});this._novoIcon.configure({x:21,y:21,quality:1,preserveAspect:true,visible:false,loadSuccessful:function(){c._novoIcon.show();}});this._activeRecordIcon.configure({x:21,y:15.75,visible:false});this._partialRecordIcon.setY(21);this._name.configure({x:this._NAME_X,y:48,width:this._NAME_WIDTH,height:39,cssClass:"recordingItemName"});this._numberOfEpisodes.configure({x:this._NAME_X+this._NAME_WIDTH+this._PADDING,y:48,width:this._NUMBER_OF_EPISODES_WIDTH,height:39,cssClass:"recordingItemName"});this._recordDate.configure({x:1270.5,y:48,width:105,height:39,cssClass:"recordingItemDate"});this._rootSVGRef=this._container.getRootSVGRef();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.show();}else{this._highlight.hide();}};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype._updateIcon=function(c,d){if(c.getHref()!==d){c.setHref(d);}c.show();};b.prototype._getNumberOfEpisodesPosition=function(){return this._name.getTrueX()+this._name.getTrueTextLength()+this._PADDING;};b.prototype._getNovoIconPosition=function(){var d=this._numberOfEpisodes.getTrueTextLength(),c=this._getNumberOfEpisodesPosition()+this._ICON_PADDING;if(d&&this._numberOfEpisodes.isVisible()){c+=d;}return c;};b.prototype._getActiveRecordIconPositon=function(){if(this._novoIcon.isVisible()){return this._getNovoIconPosition()+this._NOVO_ICON_WIDTH+this._ICON_PADDING;}return this._getNovoIconPosition()+this._ICON_PADDING;};b.prototype._updatePositions=function(){var f=this._NAME_WIDTH,e=this._numberOfEpisodes.getTrueTextLength(),d=this._activeRecordIcon.getTrueWidth(),c=this._partialRecordIcon.getTrueWidth();if(e&&this._numberOfEpisodes.isVisible()){f-=e;}if(this._novoIcon.isVisible()){f-=this._NOVO_ICON_WIDTH+this._ICON_PADDING;}if(d&&this._activeRecordIcon.isVisible()){f-=d+this._ICON_PADDING;}else{if(c&&this._partialRecordIcon.isVisible()){f-=c+this._ICON_PADDING;}}this._name.setWidth(f);this._numberOfEpisodes.setX(this._getNumberOfEpisodesPosition());this._novoIcon.setX(this._getNovoIconPosition());this._activeRecordIcon.setX(this._getActiveRecordIconPositon());this._partialRecordIcon.setX(this._getActiveRecordIconPositon());};b.prototype.update=function(f){var l=this._dataMapper.getIcon(f),g=this._dataMapper.getNovoIcon(f),c=this._dataMapper.getEventId(f),d=this._dataMapper.getFolderName(f),m=this._dataMapper.isFolder(f),e=this._dataMapper.isFolderUserGenerated(f),h=this._dataMapper.getAuthorizationStatus(f),k=this._dataMapper.getNumberOfEpisodes(f)||"";this._highlight.hide();this._icon.hide();this._novoIcon.hide();if(l){this._updateIcon(this._icon,l);}if(a.app.PVRUtil.isTaskBlockedTitle(f)){if(m){if(!e){this._name.setText(a.app.PVRUtil.getString("adultContent"));}else{this._name.setText(this._dataMapper.getTitle(f).trim());}}else{this._name.setText(a.app.PVRUtil.getString("adultContent"));}}else{this._name.setText(this._dataMapper.getTitle(f).trim());}this._numberOfEpisodes.setText(k);if(g){this._updateIcon(this._novoIcon,g);}this._data=f;this._recordDate.setText(this._dataMapper.getRecordDate(f));if(m){this._activeRecordIcon.updateFolder(d);this._partialRecordIcon.updateFolder(d);}else{this._activeRecordIcon.updateByTask(f);this._partialRecordIcon.updateByTask(f);}if(h){this._name.setCssClass("recordingItemName");this._numberOfEpisodes.setCssClass("recordingItemName");this._recordDate.setCssClass("recordingItemDate");}else{this._name.setCssClass("greyRecordingItemName");this._numberOfEpisodes.setCssClass("greyRecordingItemName");this._recordDate.setCssClass("greyRecordingItemDate");}this._updatePositions();};a.gui=a.gui||{};a.gui.RecordingListItem=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._log=new a.apps.core.Log("CommonGUI","GeneralItem");this._container=new a.gui.ClippedGroup(c);this._container.setWidth(300);this._container.setHeight(60);this._image=new a.gui.Image(c,this._container);this._text=new a.gui.Label(c,this._container);this._text.configure({x:40,y:45,width:115,cssClass:"generalItemText"});this._image.configure({x:0,y:24,width:32,height:28,quality:1});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){if(c>this._container.getTrueWidth()){this._container.setWidth(c);}this._width=c;this._text.setWidth(c-40);return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.highlight=function(c){var d=this;if(c||!this._moveAnim){d._text.setCssClass("selected");}else{this._moveAnim.setAnimationEndCallback(function(){d._text.setCssClass("selected");});}};b.prototype.unHighlight=function(){if(this._moveAnim){this._moveAnim.setAnimationEndCallback(null);}this._text.setCssClass("generalItemText");};b.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));if(this._dataMapper.getIcon(c)===""){this._image.hide();}else{this._image.setHref(this._dataMapper.getIcon(c));this._image.show();}}};b.prototype.setTextClass=function(c){this._text.setCssClass(c);};b.prototype.setTextWidth=function(c){this._text.setWidth(c);};a.gui=a.gui||{};a.gui.GeneralItem=b;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this._log=new b.apps.core.Log("CommonGUI","MusicGenreItem");this._container=new b.gui.ClippedGroup(c);this._container.setWidth(733.5);this._container.setHeight(96);this._image=new b.gui.Image(c,this._container);this._text=new b.gui.Label(c,this._container);this._text.configure({x:136.5,y:65,width:600,cssClass:"musicGenreItem"});this._image.configure({x:2,y:2,width:96,height:96,quality:1});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){if(c>this._container.getTrueWidth()){this._container.setWidth(c);}this._width=c;this._text.setWidth(c-40);return this;};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.highlight=function(c){var d=this;if(c||!this._moveAnim){d._text.setCssClass("musicGenreItemSeleted");}else{this._moveAnim.setAnimationEndCallback(function(){d._text.setCssClass("musicGenreItemSeleted");});}};a.prototype.unHighlight=function(){if(this._moveAnim){this._moveAnim.setAnimationEndCallback(null);}this._text.setCssClass("musicGenreItem");};a.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));if(this._dataMapper.getIcon(c)===""){this._image.hide();}else{this._image.setHref(this._dataMapper.getIcon(c));this._image.show();}}};a.prototype.setTextClass=function(c){this._text.setCssClass(c);};a.prototype.setTextWidth=function(c){this._text.setWidth(c);};b.gui=b.gui||{};b.gui.MusicGenreItem=a;}($N||{}));(function(a){function b(c){this._log=new a.apps.core.Log("CommonGUI","MusicSubCategoryItem");b.superConstructor.call(this,c);this._container=new a.gui.Group(this._docRef);this._container.setWidth(1000);this._container.setHeight(60);this._icon=new a.gui.Image(this._docRef,this._container);this._text=new a.gui.Label(this._docRef,this._container);this._icon.configure({x:0,y:20});this._text.configure({x:60,y:67,cssClass:"musicSubCategoryItem"});this.setDataMapper({getText:function(d){return d.name;},getIcon:function(d){return d.icon;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.setTextWidth=function(c){this._text.setWidth(c);return this;};b.prototype.setTextHeight=function(c){this._text.setHeight(c);return this;};b.prototype.highlight=function(c){var d=this;if(c||!this._moveAnim){d._text.setCssClass("musicSubCategoryItemSeleted");}else{this._moveAnim.setAnimationEndCallback(function(){d._text.setCssClass("musicSubCategoryItemSeleted");});}};b.prototype.unHighlight=function(){if(this._moveAnim){this._moveAnim.setAnimationEndCallback(null);}this._text.setCssClass("musicSubCategoryItem");};b.prototype.setTextCssClass=function(c){this._text.setCssClass(c);};b.prototype.update=function(d){if(d){this._text.setText(this._dataMapper.getText(d));var c=this._dataMapper.getIcon(d);if(c){this._icon.setHref(c);this._icon.show();}else{this._icon.hide();}}};a.gui=a.gui||{};a.gui.MusicSubCategoryItem=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container=new a.gui.ClippedGroup(this._docRef);this._container.setWidth(1300);this._container.setHeight(50);this._text=new a.gui.Label(this._docRef,this._container);this._text.configure({x:0,y:35,width:1300,cssClass:"textItemText"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.highlight=function(c){this._text.setCssClass("selected");};b.prototype.unHighlight=function(){this._text.setCssClass("textItemText");};b.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));}};b.prototype.setCssClass=function(c){this._text.setCssClass(c);};b.prototype.setTextWidth=function(c){this._text.configure({width:c});};b.prototype.setContainerWidth=function(c){this._container.setWidth(c);};a.gui=a.gui||{};a.gui.TextItem=b;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(this._docRef);this._container.setWidth(682);this._container.setHeight(54);this._container.configure({x:-20});this._background=new b.gui.Container(c,this._container);this._background.configure({width:660,height:49,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight=new b.gui.Container(c,this._container);this._highlight.configure({x:0,width:660,height:49,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._text=new b.gui.Label(this._docRef,this._container);this._text.configure({x:27,y:38,width:1300,cssClass:"dialogSubtitle"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.TextItem);a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("channelListItemHighlight");this._background.setCssClass("menuItemBackgroundFocus");this._background.show();this._highlight.show();}else{this._highlight.setCssClass("recordingsWindowBackgroundActivated");this._background.setCssClass("menuItemBackgroundDefocus");this._background.hide();this._highlight.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.gui=b.gui||{};b.gui.MenuItemWithHighlight=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this._container=new b.gui.Group(this._docRef);this._container.setWidth(682);this._container.setHeight(54);this._container.configure({x:-20});this._background=new b.gui.Container(c,this._container);this._background.configure({width:660,height:49,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight=new b.gui.Container(c,this._container);this._highlight.configure({x:0,width:660,height:49,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._text=new b.gui.Label(this._docRef,this._container);this._text.configure({x:63,y:35,width:660,cssClass:"dialogSubtitle"});this._icon=new b.gui.Image(this._docRef,this._container);this._icon.configure({x:24,y:12,width:25,height:25,href:"../../../customise/resources/images/%RES/icons/tick_17x17.png",visible:true});this.setDataMapper({getTitle:function(d){return d.name;},getIcon:function(d){return d.icon;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.TextItem);a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.setCssClass("menuItemBackgroundFocus");this._background.show();this._highlight.show();}else{this._background.setCssClass("menuItemBackgroundDefocus");this._background.hide();this._highlight.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.updateIcon=function(d){if(d){var c=this._dataMapper.getIcon(d);if(c){this._icon.setHref(c);this._icon.show();}else{this._icon.hide();}}};a.prototype.update=function(d){if(d){this._text.setText(this._dataMapper.getTitle(d));var c=this._dataMapper.getIcon(d);if(c){this._icon.setHref(c);this._icon.show();}else{this._icon.hide();}}};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.setTextWidth=function(c){this._text.setWidth(c);};b.gui=b.gui||{};b.gui.MenuItemIconWithHighlight=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this._container=new b.gui.ClippedGroup(this._docRef);this._container.setWidth(1300);this._container.setHeight(50);this._text=new b.gui.Label(this._docRef,this._container);this._text.configure({x:0,y:35,width:1300,cssClass:"selected"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;return this;};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.highlight=function(c){var d=this;if(c||!this._moveAnim){d._text.setCssClass("selected");}else{this._moveAnim.setAnimationEndCallback(function(){d._text.setCssClass("selected");});}};a.prototype.unHighlight=function(){if(this._moveAnim){this._moveAnim.setAnimationEndCallback(null);}this._text.setCssClass("selected");};a.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));}};a.prototype.setCssClass=function(c){this._text.setCssClass(c);};a.prototype.setTextWidth=function(c){this._text.configure({width:c});};a.prototype.setContainerWidth=function(c){this._container.setWidth(c);};b.gui=b.gui||{};b.gui.DeviceItem=a;}($N||{}));(function(a){function b(d,c){this._log=new a.apps.core.Log("CommonGUI","DynamicTable");b.superConstructor.call(this,d);this._container=new a.gui.Group(d);this._tableContainer=new a.gui.Group(d,this._container);this._tableItems=[];this._itemCount=0;this._itemTemplate=null;this._itemConfig={};this._data={};this._dataMapper=null;this._itemHighlightedImmediateCallback=null;this._itemHighlightedCallback=null;this._itemSelectedCallback=null;this._tableScale={};this._cellPadding=24;this._highlight=new a.gui.Container(d,this._container);this._highlight.configure({cssClass:"dynamicTableHighlight",rounding:5,visible:false});this._rootCellIndex=null;this._emptyMessage=new a.gui.Label(d,this._container);this._emptyMessage.configure({x:588,y:288,alignment:"centre",cssClass:"noMailText",visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this._controller=new a.gui.DynamicTableController();this.hasFocus=false;}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._tableContainer.setWidth(c);};b.prototype.setHeight=function(c){this._height=c;this._container.setHeight(c);this._tableContainer.setHeight(c);};b.prototype.setCellPadding=function(c){this._cellPadding=c;};b.prototype.setHighlightCssClass=function(c){this._highlight.setCssClass(c);};b.prototype.setHighlightRounding=function(c){this._highlight.setRounding(c);};b.prototype.setItemTemplate=function(c){if(typeof c==="string"){this._itemTemplate=window.$N.gui[c]||window[c];}else{this._itemTemplate=c;}};b.prototype.setItemConfig=function(c){this._itemConfig=c;};b.prototype._highlightCell=function(e){var g=-2,f=4,c=this._data.items[e],d=this._tableItems[this._controller.getSelectedCellIndex()];if(d&&d.unHighlight){d.unHighlight();}this._controller.setSelectedCellIndex(e);this._highlight.configure({x:(c.x*this._tableScale.x)+g,y:(c.y*this._tableScale.y)+g,width:(c.width*this._tableScale.x)-this._cellPadding+f,height:(c.height*this._tableScale.y)-this._cellPadding+f-1});this._handleItemHighlighted(c);};b.prototype._unHighlightCell=function(){var c=this._tableItems[this._controller.getSelectedCellIndex()];if(c&&c.unHighlight){c.unHighlight();}};b.prototype._navigate=function(d){var c=null;c=this._controller.getDestinationCellIndex(this._data.items,d);if(c!==null){this._highlightCell(c);return true;}return false;};b.prototype._addCell=function(d){var f=null,c=this._data.items[d],e=this._data.items[this._rootCellIndex];if(!this._itemTemplate){throw ("DynamicTable - _addCell: No list item template provided");}if(this._tableItems.length>this._itemCount){f=this._tableItems[this._itemCount];f.reset();}else{f=new this._itemTemplate(this._docRef,this._tableContainer);this._tableItems.push(f);f.hide();}this._itemCount=this._itemCount+1;f.configure(this._itemConfig);f.configure({x:c.x*this._tableScale.x,y:c.y*this._tableScale.y,width:(c.width*this._tableScale.x)-this._cellPadding,height:(c.height*this._tableScale.y)-this._cellPadding});if(this._dataMapper&&f.setDataMapper){f.setDataMapper(this._dataMapper);}if(c.data){f.configure(c.data);}f.show();if(!e||(c.x+c.y)<(e.x+e.y)){this._rootCellIndex=d;}};b.prototype._clearTable=function(){var c,d=this._tableItems.length;for(c=0;c<d;c++){this._tableItems[c].hide();}this._itemCount=0;this._rootCellIndex=null;};b.prototype._drawTable=function(){var c,d=this._data.items.length;this._clearTable();this._tableScale={x:(Number(this._width)+Number(this._cellPadding))/this._data.gridSize.width,y:(Number(this._height)+Number(this._cellPadding))/this._data.gridSize.height};for(c=0;c<d;c++){this._addCell(c);}};b.prototype.setData=function(d){var c=this._controller.getSelectedCellIndex(),e=(d&&d.items&&d.items.length)?d.items.length:0;this._data=d;if(!e){this._clearTable();}else{this._drawTable();if(this.hasFocus){c=(c<e)?c:0;this._highlightCell(c);}}};b.prototype.initialise=function(){var d,e,c=10;for(d=0;d<c;d++){e=new this._itemTemplate(this._docRef,this._tableContainer);if(this._dataMapper&&e.setDataMapper){e.setDataMapper(this._dataMapper);}this._tableItems.push(e);e.hide();}};b.prototype.preview=function(c){if(c){this._emptyMessage.hide();this.setData(c);}else{this.setData(null);this._emptyMessage.show();}};b.prototype.activate=function(){this._highlightCell(this._rootCellIndex);this._highlight.show();this.hasFocus=true;};b.prototype.setRootCellIndex=function(c){this._rootCellIndex=c;};b.prototype.getController=function(){return this._controller;};b.prototype.passivate=function(){var c=this._tableItems[this._controller.getSelectedCellIndex()];if(c&&c.unHighlight){c.unHighlight();}this._highlight.hide();this.hasFocus=false;};b.prototype._handleItemHighlighted=function(e){var d=this,c;c=this._tableItems[this._controller.getSelectedCellIndex()];if(c&&c.highlight){c.highlight();}if(this._itemHighlightedImmediateCallback){this._itemHighlightedImmediateCallback(e);}};b.prototype.setItemSelectedCallback=function(c){this._itemSelectedCallback=c;};b.prototype.setItemHighlightedCallback=function(c){this._itemHighlightedCallback=c;};b.prototype.setItemHighlightedImmediateCallback=function(c){this._itemHighlightedImmediateCallback=c;};b.prototype.doForAllItems=function(c){var d,e=this._tableItems.length;for(d=0;d<e;d++){c(this._tableItems[d]);}};b.prototype.setEmptyText=function(c){this._emptyMessage.setText(c);};b.prototype.setDataMapper=function(c){this._dataMapper=c;};b.prototype.keyHandler=function(c){var d=a.apps.core.KeyInterceptor.getKeyMap(),e=false,f=this._controller.getSelectedCellIndex();switch(c){case d.KEY_LEFT:e=this._navigate(a.app.constants.LEFT);break;case d.KEY_RIGHT:e=this._navigate(a.app.constants.RIGHT);break;case d.KEY_UP:e=this._navigate(a.app.constants.UP);break;case d.KEY_DOWN:e=this._navigate(a.app.constants.DOWN);break;case (d.KEY_LEFT+this._KEY_RELEASE_SUFFIX):case (d.KEY_RIGHT+this._KEY_RELEASE_SUFFIX):case (d.KEY_UP+this._KEY_RELEASE_SUFFIX):case (d.KEY_DOWN+this._KEY_RELEASE_SUFFIX):if(this._itemHighlightedCallback&&f!==null){this._itemHighlightedCallback(this._data.items[f]);}e=true;break;}if(e===false&&f!==null&&this._tableItems[f]&&this._tableItems[f].keyHandler){e=this._tableItems[f].keyHandler(c);}return e;};a.gui=a.gui||{};a.gui.DynamicTable=b;}($N||{}));(function(b){var a=function(){var k=null,c=1,l=2;function g(m){k=m;}function e(){return k;}function d(m,p,n,o,q,r){if(m===p){if(n<r&&o>q){return l;}else{if(n===r||o===q){return c;}}}return 0;}function f(n,o,p){var m=0;switch(p){case b.app.constants.UP:m=d(n.y,o.y+o.height,n.x,n.x+n.width,o.x,o.x+o.width);break;case b.app.constants.DOWN:m=d(n.y+n.height,o.y,n.x,n.x+n.width,o.x,o.x+o.width);break;case b.app.constants.LEFT:m=d(n.x,o.x+o.width,n.y,n.y+n.height,o.y,o.y+o.height);break;case b.app.constants.RIGHT:m=d(n.x+n.width,o.x,n.y,n.y+n.height,o.y,o.y+o.height);break;}return m;}function h(u,s){var q=null,o,n,r,p,m,t;if(k!==null){p=u.length;for(m=0;m<p;m++){t=u[m];n=f(u[k],t,s);if(n&&(n===l||!r)){if(!o||(t.x<=o.x&&t.y<=o.y)||(!r&&n===l)){q=m;o=t;if(n===l){r=true;}}}}}return q;}return{setSelectedCellIndex:g,getSelectedCellIndex:e,getDestinationCellIndex:h};};b.gui=b.gui||{};b.gui.DynamicTableController=a;}($N||{}));(function(a){function b(e,c){this._log=new a.apps.core.Log("CommonGUI","PromotionItem");b.superConstructor.call(this,e);this._itemSelectedCallback=null;this._link=null;this._container=new a.gui.ClippedGroup(e);this._image=new a.gui.CachedImage(this._docRef,this._container);this._backgroundGradient=new a.gui.BackgroundBox(e,this._container);this._title=new a.gui.Label(this._docRef,this._container);this._image._innerElement.setAttribute("preserveAspectRatio","xMidYMid slice");this._DEFAULT_GRADIENT_HEIGHT=75;this._CELLPADDING_LEFT=15;this._CELLPADDING_BOTTOM=16;this._DEFAULT_TEXT_PADDING_LEFT=16;this._backgroundGradient.configure({x:0,height:this._DEFAULT_GRADIENT_HEIGHT,cssClass:"textUnderlayGradient",visible:false});this._title.configure({x:this._DEFAULT_TEXT_PADDING_LEFT,height:26,cssClass:"promotionItemTitle"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}var d=this;this._image.setLoadSuccessful(function(){d._image.show();});this._image.setLoadFailedCallback(function(){d._image.hide();});}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setItemSelectedCallback=function(c){this._itemSelectedCallback=c;};b.prototype.reset=function(){this._link=null;this._backgroundGradient.hide();this._title.setText("");this._title.setWidth(this._width-this._DEFAULT_TEXT_PADDING_LEFT);this._title.setX(this._DEFAULT_TEXT_PADDING_LEFT);this._title.setY(this._height-10);};b.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._image.setWidth(c);this._title.setWidth(this._width-this._DEFAULT_TEXT_PADDING_LEFT);this._backgroundGradient.setWidth(c);};b.prototype.setHeight=function(c){this._height=c;this._container.setHeight(c);this._title.setY(c-10);this._image.setHeight(c);this._backgroundGradient.setY(c-(this._DEFAULT_GRADIENT_HEIGHT-1));};b.prototype.setHref=function(c){this._image.setHref(c);};b.prototype.setLocalHref=function(c){var d=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true);if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){d=a.app.Config.getConfigValue("mds.developer.server");}this._image.setHref(d+c);};b.prototype.setText=function(c){this._title.setText(c);if(c!==""){this._backgroundGradient.show();}else{this._backgroundGradient.hide();}};b.prototype.setLink=function(c){this._link=c;};b.prototype.highlight=function(){};b.prototype.unHighlight=function(){};b.prototype.setCssClass=function(c){this._title.setCssClass(c);};b.prototype._handleOKKeyPress=function(){if(this._itemSelectedCallback){this._itemSelectedCallback(this._link);}else{if(this._link&&this._link.context){a.app.ContextHelper.openContext(this._link.context,{activationContext:this._link.activationObject});}}};b.prototype.keyHandler=function(c){var d=a.apps.core.KeyInterceptor.getKeyMap(),e=false;if(c===d.KEY_OK){this._handleOKKeyPress();e=true;}return e;};a.gui=a.gui||{};a.gui.PromotionItem=b;}($N||{}));(function(b){function a(e,c){a.superConstructor.call(this,e,c);var d=this;this._currentEvent=null;this._eventId=null;this._LOGO_PADDING_Y=20;this._LOGO_WIDTH=96;this._LOGO_HEIGHT=96;this._PROGRESSBAR_GRADIENT_HEIGHT=180;this._TITLE_AND_PROGRESSBAR_X=127;this._progressBarVisible=false;this._channelLogo=new b.gui.ChannelLogo(this._docRef,this._container);this._progressBar=new b.gui.LabelledProgressBar(this._docRef,this._container);this._eventTime=new b.gui.Label(this._docRef,this._container);this._eventTime.configure({x:this._DEFAULT_TEXT_PADDING_LEFT,cssClass:"promotionItemEventDetails"});this._progressBar.configure({x:this._TITLE_AND_PROGRESSBAR_X,y:0,width:400,progressBarLabelsCssClass:"startAndEndTimeProgressBarLabels",progressOuterCssClass:"progressOuter",progressInnerCssClass:"progressInner",progressBarHeight:10,startLabelWidth:80,visible:false});this._progressBar.initialise();this._channelLogo.configure({x:this._CELLPADDING_LEFT,height:this._LOGO_HEIGHT,width:this._LOGO_WIDTH});}b.gui.Util.extend(a,b.gui.PromotionItem);a.prototype._initialiseProgressBar=function(){var d=b.app.DateTimeUtil.getFormattedTimeString(new Date(this._currentEvent.startTime),"HH:mm"),c=b.app.DateTimeUtil.getFormattedTimeString(new Date(this._currentEvent.endTime),"HH:mm");this._progressBar.setProgressBarLabels(d,c);this._progressBar.updateProgressBar(this._currentEvent.startTime,this._currentEvent.endTime,Date.now());};a.prototype.reset=function(){this._channelLogo.hide();this._progressBar.hide();this._progressBarVisible=false;this._currentEvent=null;this._eventId=null;a.superClass.reset.call(this);};a.prototype.setHeight=function(c){a.superClass.setHeight.call(this,c);this._channelLogo.setY(c-this._LOGO_HEIGHT-this._CELLPADDING_BOTTOM);this._progressBar.setY(c-this._LOGO_PADDING_Y-18);this._eventTime.setY(c-48);};a.prototype._moveLayout=function(){this._title.setY(this._height-63);this._eventTime.setY(this._height-this._title.getHeight()-5);this._backgroundGradient.setY(this._height-this._PROGRESSBAR_GRADIENT_HEIGHT);this._backgroundGradient.setHeight(this._PROGRESSBAR_GRADIENT_HEIGHT);this._progressBar.show();this._progressBarVisible=true;};a.prototype._resetLayout=function(){this._title.setX(this._DEFAULT_TEXT_PADDING_LEFT);this._title.setY(this._height-10);this._backgroundGradient.setY(this._height-(this._DEFAULT_GRADIENT_HEIGHT-1));this._backgroundGradient.setHeight(this._DEFAULT_GRADIENT_HEIGHT);this._channelLogo.hide();this._progressBar.hide();this._progressBarVisible=false;};a.prototype.update=function(){var c=0;if(this._currentEvent){c=(this._currentEvent&&this._currentEvent.startTime)?Date.now():0;if(b.app.EventUtil.isValidEvent(this._currentEvent)&&b.app.EventUtil.isEventShowingNow(this._currentEvent)){this._eventTime.hide();if(!this._progressBarVisible){this._moveLayout();}this._progressBar.updateProgressBar(this._currentEvent.startTime,this._currentEvent.endTime,c);return;}else{if(b.app.EventUtil.isFutureEvent(this._currentEvent)){this._eventTime.setText(b.app.DateTimeUtil.getDayMonthStringWithSlashFromDate(new Date(this._currentEvent.startTime))+" "+b.app.DateTimeUtil.getString("at")+" "+b.app.DateTimeUtil.getFormattedTimeString(new Date(this._currentEvent.startTime),b.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT));this._eventTime.show();return;}}}this._currentEvent=null;b.app.TimerUtil.removeItem(this);if(this._progressBarVisible){this._resetLayout();}};a.prototype._showEventInfo=function(){this._currentEvent=b.platform.btv.EPG.getEventById(this._eventId);var d=this,e="",c;if(b.app.EventUtil.isValidEvent(this._currentEvent)&&b.app.EventUtil.isEventShowingNow(this._currentEvent)){e=b.app.epgUtil.getChannelLogoUrl(this._currentEvent.serviceId);c=b.platform.btv.EPG.getChannelByServiceId(this._currentEvent.serviceId);if(c){this._channelLogo.update(c);this._title.setX(this._TITLE_AND_PROGRESSBAR_X);this._title.setWidth(this._width-d._TITLE_AND_PROGRESSBAR_X);this._channelLogo.show();}else{this._channelLogo.hide();}}else{this._channelLogo.hide();}if(b.app.EventUtil.isValidEvent(this._currentEvent)&&(b.app.EventUtil.isEventShowingNow(this._currentEvent)||b.app.EventUtil.isFutureEvent(this._currentEvent))){this._initialiseProgressBar();this.update();b.app.TimerUtil.addItem(this);}else{this._eventTime.hide();}};a.prototype.setEventId=function(c){this._eventId=c;this._showEventInfo();};a.prototype._tuneToService=function(){var c=null;if(this._currentEvent&&this._currentEvent.serviceId){c=b.platform.btv.EPG.getChannelByServiceId(this._currentEvent.serviceId);b.app.fullScreenPlayer.tuner.tune(c.uri);b.app.epgUtil.storeChannelToPrefs(this._currentEvent.serviceId);b.app.ContextHelper.exitContext();return true;}else{return false;}};a.prototype._handleOKKeyPress=function(){var c;if(this._eventId){if(this._currentEvent&&b.app.EventUtil.isEventShowingNow(this._currentEvent)){this._tuneToService();}else{if(this._currentEvent&&b.app.EventUtil.isFutureEvent(this._currentEvent)){b.app.ContextHelper.openContext("LISTGUIDE",{activationContext:{event:this._currentEvent}});}else{c=this._currentEvent?this._currentEvent.title:this._title.getText();b.app.ContextHelper.openContext("SEARCH",{activationContext:{title:c}});}}}else{a.superClass._handleOKKeyPress.call(this);}};a.prototype.setDataMapper=function(c){this._channelLogo.setDataMapper(c);};b.gui=b.gui||{};b.gui.EventPromotionItem=a;}($N||{}));(function(a){function b(d){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","ScheduledRecordingItem");this.isFocused=true;this.isHighlighted=false;this._data=null;var c=this;this._container=new a.gui.ClippedGroup(d);this._highlight=new a.gui.Container(d,this._container);this._channelLogo=new a.gui.ChannelLogo(this._docRef,this._container);this._logoHighlight=new a.gui.Container(d,this._container);this._name=new a.gui.Label(this._docRef,this._container);this._recordDate=new a.gui.Label(this._docRef,this._container);this._activeRecordIcon=new a.gui.ActiveRecordIcon(d,this._container);this._LOGO_SIZE=96;this._LOGO_TEXT_PADDING=60;this._container.configure({width:1291.5,height:120,visible:true});this._activeRecordIcon.configure({x:15,y:12});this._highlight.configure({x:127,y:2,width:1162.5,height:this._LOGO_SIZE+2,cssClass:"recordingListItemHighlight",rounding:2,visible:false});this._channelLogo.configure({x:3,y:3,width:this._LOGO_SIZE,height:this._LOGO_SIZE});this._logoHighlight.configure({x:2,y:2,width:this._LOGO_SIZE+2,height:this._LOGO_SIZE+2,cssClass:"recordingListLogoHighlight",rounding:2,visible:false});this._name.configure({x:144,y:43,width:1074,height:39,cssClass:"scheduledItemName"});this._recordDate.configure({x:144,y:86,width:1074,height:39,cssClass:"recordingItemName"});this._rootSVGRef=this._container.getRootSVGRef();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.show();this._logoHighlight.show();}else{this._highlight.hide();this._logoHighlight.hide();}};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype.showActiveRecordIcon=function(d){var c;if(d){c=this._LOGO_SIZE+this._LOGO_TEXT_PADDING+this._name.getTrueTextLength();this._activeRecordIcon.updateByTask(d,c);}else{this._activeRecordIcon.hide();}};b.prototype.update=function(d){var c="",e=a.app.epgUtil.getServiceById(d.serviceId);this._highlight.hide();this._logoHighlight.hide();this._channelLogo.update(e);this._recordDate.setText(this._dataMapper.getRecordDate(d)+" "+this._dataMapper.getRecordTime(d));if(a.app.PVRUtil.isTaskBlockedTitle(d)){c=a.app.PVRUtil.getString("adultContent");}else{c=this._dataMapper.getSeriesEpisodeTitle(d);if(this._dataMapper.getDisplaySeasonEpisode(d)){c+=" "+this._dataMapper.getSeasonEpisodeShort(d);}}this._name.setText(c);this.showActiveRecordIcon(d);this._data=d;};b.prototype.setDataMapper=function(c){b.superClass.setDataMapper.call(this,c);this._channelLogo.setDataMapper(c);};a.gui=a.gui||{};a.gui.ScheduledRecordingItem=b;}($N||{}));(function(a){function b(c){a.apps.core.Language.adornWithGetString(b,"customise/resources/");this._log=new a.apps.core.Log("CommonGUI","TimeItem");b.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._isPlayable=true;this._noEventInfo=false;this._container=new a.gui.ClippedGroup(this._docRef);this._background=new a.gui.Container(c,this._container);this._highlight=new a.gui.Container(c,this._container);this._timeLine=new a.gui.Container(c,this._container);this._container.setWidth(1246);this._container.setHeight(53);this._time=new a.gui.Label(this._docRef,this._container);this._eventName=new a.gui.SpanLabel(this._docRef,this._container);this._recordIcon=new a.gui.RecordIcon(this._docRef,this._container);this._reminderIcon=new a.gui.ReminderIcon(this._docRef,this._container);this._startOverIcon=new a.gui.StartOverIcon(this._docRef,this._container);this._RECORD_ICON_PADDING=50;this._ROW_BACKGROUND_HEIGHT=42;this._ROW_BACKGROUND_WIDTH=1242;this._CLASS_BACKGROUND="timeListItemBackgroundInListGuide";this._CLASS_BACKGROUND_HIGHLIGHT="timeListItemHighlight";this._CLASS_BACKGROUND_TIMELINE="timeListItemBackgroundCurrent";this._titleNoEvent=b.getString("noEventTitle");this._REMINDERICON_XCORDINATE=1181;this._REMINDERICON_XCORDINATE_WHENREMINDERSET=1130;this._background.configure({x:0,y:8,width:this._ROW_BACKGROUND_WIDTH,height:this._ROW_BACKGROUND_HEIGHT,cssClass:this._CLASS_BACKGROUND});this._highlight.configure({x:0,y:8,width:this._ROW_BACKGROUND_WIDTH,height:this._ROW_BACKGROUND_HEIGHT,cssClass:this._CLASS_BACKGROUND_HIGHLIGHT,rounding:1,visible:false});this._timeLine.configure({x:0,y:0,width:this._ROW_BACKGROUND_WIDTH,height:2,cssClass:"timeListItemTimeLine",rounding:1,visible:false});this._time.configure({x:13,y:41,cssClass:"timeItemText"});this._eventName.configure({x:117,y:41,width:960,cssClass:"timeItemText",spanCssClass:"timeItemTextGrey"});this._recordIcon.configure({x:1181,y:11,visible:false});this._reminderIcon.configure({x:this._REMINDERICON_XCORDINATE,y:12,visible:false});this._startOverIcon.configure({x:this._REMINDERICON_XCORDINATE,y:11});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.updateHighlight=function(){if(this._noEventInfo){this._highlight.hide();return;}if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("timeListItemHighlight");this._highlight.show();if(this._isPlayable){this._eventName.setCssClass("timeItemText");}else{this._eventName.setCssClass("timeItemTextUnplayableFocused");}this._eventName.setSpanCssClass("timeItemTextGreyFocused");}else{this._highlight.hide();if(this._isPlayable){this._eventName.setCssClass("timeItemText");this._eventName.setSpanCssClass("timeItemTextGrey");}else{this._eventName.setCssClass("timeItemTextUnplayable");this._eventName.setSpanCssClass("timeItemTextGrey");}}};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype.showTimeLine=function(){this._timeLine.show();};b.prototype.hideTimeLine=function(){this._timeLine.hide();};b.prototype.setHighlightCss=function(c){this._highlight.setCssClass(c);};b.prototype.updateIcons=function(e){var f=0,c=this._dataMapper.getRecordingStatus(e),d=this._REMINDERICON_XCORDINATE;if(c){this._recordIcon.show();this._recordIcon.update(e,f,c);}else{this._recordIcon.hide();}if(this._recordIcon.isVisible()){d=this._REMINDERICON_XCORDINATE_WHENREMINDERSET;}this._reminderIcon.update(e,d);this._startOverIcon.update(e,d);};b.prototype.update=function(d){var e=this._dataMapper.getTitle(d),c;if(d){if(d.startTime){this._time.setText(this._dataMapper.getText1(d));}if(d.eventId===a.app.epgUtil.BAD_EVENT_ID){this._time.setText("");this._noEventInfo=true;}else{this._noEventInfo=false;}if(this._dataMapper.isInPast(d)){this._time.setCssClass("timeItemPastText");this._isPlayable=this._dataMapper.isCatchUp(d);if(this._isPlayable){this._eventName.setCssClass("timeItemText");}else{this._eventName.setCssClass("timeItemTextUnplayable");}}else{this._isPlayable=true;this._time.setCssClass("timeItemText");this._eventName.setCssClass("timeItemText");}c=a.app.epgUtil.getSeasonEpisodeShort(d);if(c){if(this._dataMapper.isBlockedAdultTitle()){this._eventName.setText(e);}else{this._eventName.setText(e+"    "+c);}this._eventName.setSpanOnText(c);}else{if(!this._noEventInfo){this._eventName.setText(e);}else{this._eventName.setText("");}}this.updateIcons(d);if(this._dataMapper.isEventOnNow(d)){this.showTimeLine();}else{this.hideTimeLine();}}else{this._eventName.setText(this._titleNoEvent);}this._highlight.hide();};a.gui=a.gui||{};a.gui.TimeItem=b;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._log=new a.apps.core.Log("CommonGUI","IconTextItem");this._imageRight=new a.gui.Image(c,this._container);this._imageRight.configure({y:18,width:32,height:28,quality:1});this._image.setY(16);}a.gui.Util.extend(b,a.gui.GeneralItem);b.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));if(this._dataMapper.getRightIcon){this._imageRight.setHref(this._dataMapper.getRightIcon(c));this._imageRight.setX(this._text.getTrueTextLength()+50);this._imageRight.show();}else{this._imageRight.hide();}if(this._dataMapper.getIcon(c)===""){this._image.hide();}else{this._image.setHref(this._dataMapper.getIcon(c));this._image.show();}}};a.gui=a.gui||{};a.gui.IconTextItem=b;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","Flags");this._container=new a.gui.Group(d);this._flags=[];this._maxFlags=5;this._flagWidth=37.5;this._flagHeight=18;this._padding=6;this._flagCount=0;this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setMaxFlags=function(c){this._maxFlags=c;};b.prototype.setFlagHeight=function(c){this._flagHeight=c;};b.prototype.setFlagWidth=function(c){this._flagWidth=c;};b.prototype.setPadding=function(c){this._padding=c;};b.prototype.initialise=function(){var c,d=this;for(c=0;c<this._maxFlags;c++){this._flags[c]=new a.gui.Image(this._docRef,this._container);this._flags[c].configure({x:(d._flagWidth+d._padding)*c,y:0,width:d._flagWidth,height:d._flagHeight,visible:false});}};b.prototype.setFlags=function(d){d=d||[];var c;for(c=0;c<this._maxFlags;c++){if(d[c]){this._flags[c].setHref(d[c]);this._flags[c].show();}else{this._flags[c].hide();}}this._flagCount=d.length;};b.prototype.getWidth=function(){return(this._flagWidth+this._padding)*this._flagCount;};a.gui=a.gui||{};a.gui.Flags=b;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);a.apps.core.Language.adornWithGetString(b);this._isPIPEnabled=true;this._contentStartFailed=a.app.constants.CA_PLAY_ERRORS.contentStartFailedReason;this._contentError=a.app.constants.CA_PLAY_ERRORS.contentErrorReason;this._streamDisabled=a.app.constants.CA_PLAY_ERRORS.streamDisabledReason;this._log=new a.apps.core.Log("CommonGUI","Summary");this._container=new a.gui.Group(d);this._title=new a.gui.Label(d,this._container);this._seasonAndEpisode=new a.gui.Label(d,this._container);this._startAndEndTime=new a.gui.Label(d,this._container);this._genres=new a.gui.Label(d,this._container);this._description=new a.gui.SpanTextArea(d,this._container);this._recordIcon=new a.gui.RecordIcon(this._docRef,this._container);this._reminderIcon=new a.gui.ReminderIcon(this._docRef,this._container);this._parentalRatingIcon=new a.gui.ParentalRatingIcon(this._docRef,this._container);this._startOverIcon=new a.gui.StartOverIcon(this._docRef,this._container);this._pipWindow=new a.gui.Pip(this._docRef,this._container);this._PADDING=15;this._ICON_Y_POS=92;this._TEXT_OPACITY_SUBSCRIBED=1;this._TEXT_OPACITY_NOT_SUBSCRIBED=0.5;this._title.configure({y:71.5,cssClass:"summaryTitle",width:1100,visible:false});this._description.configure({y:145.5,width:1359,height:100,cssClass:"summaryDescription"});this._startAndEndTime.configure({y:121,cssClass:"summaryStartAndEndTime"});this._genres.configure({y:121,cssClass:"summaryGenres"});this._seasonAndEpisode.configure({y:71.5,cssClass:"summarySeasonAndEpisode"});this._recordIcon.configure({x:0,y:this._ICON_Y_POS,visible:false});this._reminderIcon.configure({x:0,y:this._ICON_Y_POS,visible:false});this._startOverIcon.configure({x:0,y:this._ICON_Y_POS,visible:false});this._parentalRatingIcon.configure({x:0,y:this._ICON_Y_POS});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._container.setWidth(c);};b.prototype.setHeight=function(c){this._container.setHeight(c);};b.prototype.setIsPIPEnabled=function(c){this._pipWindow.setIsPIPEnabled(c);};b.prototype.setSummaryFade=function(c){this._summaryFade=c;};b.prototype.setTitle=function(c){this._title.setText(c);this.updateSeasonAndEpisodePosition();};b.prototype.showTitle=function(){this._title.show();};b.prototype.hideTitle=function(){this._title.hide();};b.prototype.setDescription=function(c){this._description.setText(c);};b.prototype.setSeasonAndEpisode=function(c){this._seasonAndEpisode.setText(c);};b.prototype.setStartAndEndTime=function(c){this._startAndEndTime.setText(c);this.updateGenresPosition();};b.prototype.setGenres=function(c){if(c){this._genres.setX(this._PADDING+this._startAndEndTime.getTrueX()+this._startAndEndTime.getTrueTextLength());}else{this._genres.setX(this._startAndEndTime.getTrueX()+this._startAndEndTime.getTrueTextLength());}this._genres.setText(c);};b.prototype.showDefaultSummary=function(e,f,c,h,d,g){if(!f){this.showSummaryDetail();}this.setStartAndEndTime(e.startEndTime);this.showTitle();if(e){this.setTitle(e.title);this.setDescription(e.description);this.setGenres(e.genres);this.setSeasonAndEpisode(e.seasonEpisodeShort);this.updateIcons(e);}this.updateRatingIcon(true);this.setTextOpacity(!c.isSubscribed?this._TEXT_OPACITY_NOT_SUBSCRIBED:this._TEXT_OPACITY_SUBSCRIBED);this._pipWindow.updatePipVideo(e,c.uri,h,d);this.showSummary(g);};b.prototype.showNoInfoSummary=function(d,e,c){this.hideSummaryDetail();this.setTitle(d.title);this.setDescription("");this.setSeasonAndEpisode("");this.setGenres("");this.setStartAndEndTime("");this.showTitle();this._pipWindow.updatePipVideoNoInfo(d.isEventShowingNow,c,e);this.updateRatingIcon(false);};b.prototype.showLockedSummary=function(c,d){this.showSummaryDetail();this.hideIcons();this.showTitle();this.setStartAndEndTime(c.startEndTime);this.setDescription(b.getString("synopsisUnavailable"));if(d){this.setTitle(b.getString("adultContent"));this.setSeasonAndEpisode("");}else{this.setTitle(c.title);this.setSeasonAndEpisode(c.seasonEpisodeShort);this.setDescription(c.description);}this.show();this._pipWindow.updatePipLockedMessage(c,d);if(c){this.setGenres(c.genres);this.updateIcons(c);}this.updateRatingIcon(true);};b.prototype.updateSummary=function(e,c,h,g,d,f){if(e.isLocked){this.showLockedSummary(e,a.app.genreUtil.isAdultChannel(c));}else{this._pipWindow.hideBlockedText();if(e.title===b.getString("noEventTitle")){this.showNoInfoSummary(e,h,c.uri);}else{this.showDefaultSummary(e,f,c,h,d,g);}}this.fadeSummary(e);};b.prototype.setTextOpacity=function(c){this.setTitleProperties({opacity:c});this.setDescriptionProperties({opacity:c});};b.prototype.stopPip=function(){this._pipWindow.stopPip();};b.prototype.showSummary=function(c){if(!c){this.showEventDetails();this.show();}};b.prototype.fadeSummary=function(c){this._summaryFade.setVisible(!c.isCatchUp&&c.endTime<Date.now());};b.prototype.showSummaryDetail=function(){this.showSeasonAndEpisode();this.showEventDetails();};b.prototype.hideSummaryDetail=function(){this.hideSeasonAndEpisode();this.hideEventDetails();};b.prototype.updateIconPosition=function(c,d,e){c.update(d,e);if(c.isVisible()){e=e+c.getTrueWidth()+this._PADDING;}return e;};b.prototype.updateIcons=function(d){var c=this._genres.getTrueX()+this._genres.getTrueTextLength()+this._PADDING;c=this.updateIconPosition(this._parentalRatingIcon,d,c);c=this.updateIconPosition(this._reminderIcon,d,c);c=this.updateIconPosition(this._startOverIcon,d,c);this._recordIcon.update(d,c);};b.prototype.updateGenresPosition=function(){this._genres.setX(this._startAndEndTime.getTrueX()+this._startAndEndTime.getTrueTextLength()+this._PADDING);};b.prototype.updateSeasonAndEpisodePosition=function(){this._seasonAndEpisode.setX(this._title.getTrueX()+this._title.getTrueTextLength()+this._PADDING);};b.prototype.showSeasonAndEpisode=function(){this._seasonAndEpisode.show();};b.prototype.hideSeasonAndEpisode=function(){this._seasonAndEpisode.hide();};b.prototype.setTitleProperties=function(c){this._title.configure(c);};b.prototype.setDescriptionProperties=function(c){this._description.configure(c);};b.prototype.hideEventDetails=function(){this._startAndEndTime.hide();this._genres.hide();this._description.hide();this.hideIcons();this._pipWindow.hideEventImage();this._pipWindow.hideBlockedText();};b.prototype.showEventDetails=function(){this._startAndEndTime.show();this._genres.show();this._description.show();this.showIcons();};b.prototype.hideIcons=function(){this._parentalRatingIcon.hide();this._reminderIcon.hide();this._recordIcon.hide();this._startOverIcon.hide();};b.prototype.showIcons=function(){this._parentalRatingIcon.show();this._reminderIcon.show();this._recordIcon.show();this._startOverIcon.show();};b.prototype.updateRatingIcon=function(c){this._parentalRatingIcon.setVisible(c);};b.prototype.getClassName=function(){return"Summary";};b.prototype.setFocusedChannel=function(c){this._pipWindow.setFocusedChannel(c);};b.prototype.setFocusedEvent=function(c){this._pipWindow.setFocusedEvent(c);};b.prototype.onEventChange=function(){this._pipWindow.onEventChange();};b.prototype.showHideSmallVideoArea=function(c){this._pipWindow.showHideSmallVideoArea(c);};b.prototype.registerSmallVideoPlayerCallbacks=function(){this._pipWindow.registerSmallVideoPlayerCallbacks();};b.prototype.unregisterSmallVideoPlayerCallbacks=function(){this._pipWindow.unregisterSmallVideoPlayerCallbacks();};b.prototype.activatePip=function(){this.registerSmallVideoPlayerCallbacks();this._pipWindow.showHideSmallVideoArea(false);};b.prototype.deactivatePip=function(){this._pipWindow.showHideSmallVideoArea(false);this._pipWindow.deactivatePIPVideo();this._pipWindow.clearPlayingTimeout();};a.gui=a.gui||{};a.gui.Summary=b;}($N||{}));(function(a){function b(e,c){b.superConstructor.call(this,e);a.apps.core.Language.adornWithGetString(b);this._log=new a.apps.core.Log("CommonGUI","Pip");this._isPIPEnabled=true;this._contentStartFailed=a.app.constants.CA_PLAY_ERRORS.contentStartFailedReason;this._contentError=a.app.constants.CA_PLAY_ERRORS.contentErrorReason;this._streamDisabled=a.app.constants.CA_PLAY_ERRORS.streamDisabledReason;this._container=new a.gui.Group(e);this._eventImageContainer=new a.gui.Container(e,this._container);this._eventImage=new a.gui.Image(e,this._eventImageContainer);this._blockedText=new a.gui.TextArea(e,this._eventImageContainer);this._imageServer=a.app.epgUtil.getPosterImageServer();this._videoUnavailableContainer=new a.gui.Container(e,this._container);this._videoUnavailableText=new a.gui.TextArea(e,this._videoUnavailableContainer);this._focusedChannel=null;this._focusedEvent=null;this._callbackId=null;this._isImageLoadSuccessful=null;this._TEXT_X_OFFSET=30;this._TEXT_Y_OFFSET=50;this._PLAYING_TIMEOUT=1000;this._validVideoSize=false;this._videoDetails=null;this._VIDEO_TEXT_Y_OFFSET=130;this._videoUnavailableTimeout=null;this._VIDEO_UNAVAILABLE_TIMEOUT=500;this._eventImageContainer.configure({x:1419,y:43.5,width:337.5,height:193.5,cssClass:"eventImageContainer",visible:false});this._eventImage.configure({x:3,y:3,width:331.5,height:187.5,preserveAspect:false,quality:1,visible:false});this._blockedText.configure({x:this._TEXT_X_OFFSET,y:this._TEXT_Y_OFFSET,width:331.5-this._TEXT_X_OFFSET*2,height:187.5-this._TEXT_Y_OFFSET*2,visible:false});this._videoUnavailableContainer.configure({x:1419,y:43.5,width:337.5,height:193.5,cssClass:"videoUnavailabBackground",visible:false});this._videoUnavailableText.configure({x:this._TEXT_X_OFFSET,y:this._VIDEO_TEXT_Y_OFFSET,width:331.5-this._TEXT_X_OFFSET*2,height:187.5-this._VIDEO_TEXT_Y_OFFSET,cssClass:"videoUnavailableText",visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}var d=this;this._eventImage.addFadeAnimation();this._eventImage.setLoadFailedCallback(function(){d._isImageLoadSuccessful=false;d.hideEventImage();d._eventImage.setHref("");});this._fadeAnim=this._eventImage.getFadeAnimation();this._fadeAnim.setAnimationEndCallback(function(){d.showHideSmallVideoArea(true);d.hideEventImage();d.hideBlockedText();});this._pipUnsubscribed=false;this._resetCallbackId=function(){this._callbackId=new Date().valueOf();};this._clearCallbackId=function(){this._callbackId=null;};this._smallVideoPlayStartedCallback=function(){};this._smallVideoStreamAvailableCallback=function(){if(!d.isPIPCanPlaying()){return;}if(!a.app.EventUtil.isEventShowingNow(d._focusedEvent)||(d._focusedEvent.serviceId!==d._focusedChannel.serviceId)){return;}a.app.smallScreenPlayer.activatePIPVideoTrack();};this._smallVideoStreamStartedCallback=function(){if(!a.app.EventUtil.isEventShowingNow(d._focusedEvent)||(d._focusedEvent.serviceId!==d._focusedChannel.serviceId)){d.showHideSmallVideoArea(false);d.deactivatePIPVideo();return;}d.showHideSmallVideoLayer(true);};this._smallVideoIframeDecode=function(){if(!d._validVideoSize){d._videoDetails=a.app.smallScreenPlayer.getVideoDetail();d.smallVideoStreamPlaying();d._validVideoSize=true;}};this._smallVideoPlayErrorCallback=function(f){d.showHideSmallVideoArea(false);d.showHideSmallVideoLayer(false);d.loadEventImage(d._focusedEvent);d.displayVideoUnavailableText();d.deactivatePIPVideo();};this._smallVideoPlayStartFailedCallback=function(f){d.showHideSmallVideoArea(false);d.showHideSmallVideoLayer(false);if(f&&f.contentStartFailedInfo&&f.contentStartFailedInfo.reason){switch(f.contentStartFailedInfo.reason){case d._contentStartFailed.CA_ACCESS_DENIED:case d._contentStartFailed.CA_ACCESS_BLACKED_OUT:case d._contentStartFailed.CA_NO_VALID_SECURE_DEVICE:case d._contentStartFailed.CA_ACCESS_PAIRING_REQUIRED:case d._contentStartFailed.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:d.displayUnsubscribedText();d._pipUnsubscribed=true;break;case d._contentStartFailed.LACK_OF_RESOURCES:case d._contentStartFailed.CONFLICT:d.displayVideoUnavailableText();d.loadEventImage(d._focusedEvent);break;case d._contentStartFailed.CONTENT_PLAY_FAILED_REASON_NO_LOCK:d.loadEventImage(d._focusedEvent);break;default:d.loadEventImage(d._focusedEvent);break;}}else{d.loadEventImage(d._focusedEvent);}d.deactivatePIPVideo();};this._smallVideoStreamDisabledCallback=function(f){d.showHideSmallVideoArea(false);d.showHideSmallVideoLayer(false);if(f&&f.streamDisabledInfo&&f.streamDisabledInfo.reason){switch(f.streamDisabledInfo.reason){case d._streamDisabled.CA_ACCESS_DENIED:case d._streamDisabled.CA_ACCESS_BLACKED_OUT:case d._streamDisabled.CA_NO_VALID_SECURE_DEVICE:case d._streamDisabled.CA_ACCESS_PAIRING_REQUIRED:case d._streamDisabled.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:d.displayUnsubscribedText();d._pipUnsubscribed=true;break;}}else{d.loadEventImage(d._focusedEvent);}};this._smallVideoBlockedCallback=function(){if(d._focusedEvent){}if(a.app.genreUtil.isAdultChannel(d._focusedEvent)){d.displayBlockedText(d._focusedEvent);}else{d.loadEventImage(d._focusedEvent);}};this._smallVideoUnblockedCallback=function(){d.hideBlockedText();};this._signalLoss=function(){d.hideEventImage();d.hideBlockedText();};this._signalGain=function(){var f=a.app.epgUtil.getServiceById(d._focusedChannel.serviceId);if(a.app.smallScreenPlayer.tuner.getCurrentUri()){d.activatePIPVideo();}else{d.tuneSmallVideo(f.uri);}};this._smallVideoEnabledStream=function(){d.hideBlockedText();if(a.app.EventUtil.isEventShowingNow(d._focusedEvent)&&(d._focusedEvent.serviceId===d._focusedChannel.serviceId)&&(a.app.smallScreenPlayer.getSource()===d._focusedChannel.uri)){d.showHideSmallVideoArea(true);}};this._smallVideoStreamStopped=function(){};this._smartCardInsert=function(){d._pipUnsubscribed=false;};}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._container.setWidth(c);};b.prototype.setHeight=function(c){this._container.setHeight(c);};b.prototype.setIsPIPEnabled=function(c){this._isPIPEnabled=c;};b.prototype.setEventImage=function(c){var d=this,e=this._callbackId,f=function(){if(e!==d._callbackId){return;}d._isImageLoadSuccessful=true;d._clearCallbackId();d.showEventImage();};if(c===this._eventImage.getHref()&&d._isImageLoadSuccessful){d.showEventImage();return;}this._eventImage.setLoadSuccessful(f);this._eventImage.setHref(c);};b.prototype.updatePipVideoNoInfo=function(d,c,e){this._fadeAnim.cancelAnimation();this.showHideSmallVideoArea(false);if(this._isPIPEnabled&&d){this.showVideo(e,c);}else{this.deactivatePIPVideo();this.hideEventImage();}};b.prototype.updatePipVideo=function(e,c,f,d){this._fadeAnim.cancelAnimation();this._eventImage.setOpacity(1);if(this._isPIPEnabled&&!d&&e.isEventShowingNow){this.hideEventImage();this._blockedText.hide();this.loadEventImage(e);this.showVideo(f,c);}else{this.loadEventImage(e);this.showHideSmallVideoArea(false);this.deactivatePIPVideo();}};b.prototype.updatePipLockedMessage=function(c,d){if(d||a.app.EventUtil.isEventShowingNow(c)){this.hideEventImage();this.displayBlockedText(c);}else{this.hideBlockedText();this.loadEventImage(c);}this.showHideSmallVideoArea(false);this.deactivatePIPVideo();};b.prototype.showVideo=function(d,c){if(a.app.smallScreenPlayer.getSource()===d){this.activatePIPVideo();}else{this.tuneSmallVideo(c);}if(this._videoUnavailableTimeout){clearTimeout(this._videoUnavailableTimeout);this._videoUnavailableTimeout=null;}};b.prototype.stopPip=function(){this.showHideSmallVideoArea(false);this.stopPIPVideo();};b.prototype.setEventImageProperties=function(c){this._eventImage.configure(c);};b.prototype.setEventImageContainerProperties=function(c){this._eventImageContainer.configure(c);};b.prototype.showEventImage=function(){if(!this._eventImage.getHref()){return;}this._eventImage.setOpacity(1);this._eventImage.show();this._eventImageContainer.show();};b.prototype.hideEventImage=function(){this._eventImageContainer.hide();this._eventImage.hide();};b.prototype.tuneSmallVideo=function(c){this._log("tuneSmallVideo",c+" at "+a.apps.core.ContextManager.getActiveContext().getId());if(!this.isPIPCanPlaying()){return;}this._validVideoSize=false;this._pipUnsubscribed=false;this.showHideSmallVideoArea(false);this.deactivatePIPVideo();a.app.smallScreenPlayer.requestPlayoutWithoutPlay(c);};b.prototype.hideBlockedText=function(){if(this._blockedText.isVisible()){this._eventImageContainer.hide();this._blockedText.hide();}};b.prototype.displayBlockedText=function(c){this.setEventImage("../../../customise/resources/images/net/Mosaico_blocked_content.png");this._blockedText.setText(b.getString("pipBlockedText"));this._blockedText.setCssClass("blockedTextInGuide");this._blockedText.show();this._eventImageContainer.show();};b.prototype.displayUnsubscribedText=function(d){var c=a.app.ConditionalAccessCAK73.getCASmartCardInfo();this._blockedText.setText(" ");this._blockedText.show();this._eventImageContainer.show();this._eventImage.hide();if(!c.smartcardInfo&&c.error.name==="NoSmartcard"){this._blockedText.setText(b.getString("caErrorSmartcardRemovedMessage"));}else{this._blockedText.setText(b.getString("pipUnsubscribedText"));}this._blockedText.setCssClass("mosaicUnsubscribePrompt");};b.prototype.displayVideoUnavailableText=function(d){var c=this;this._videoUnavailableContainer.show();this._videoUnavailableText.show();this._videoUnavailableText.setText(b.getString("videoUnavailable"));if(this._videoUnavailableTimeout){clearTimeout(this._videoUnavailableTimeout);this._videoUnavailableTimeout=null;}this._videoUnavailableTimeout=setTimeout(function(){c._videoUnavailableContainer.hide();c._videoUnavailableText.hide();},this._VIDEO_UNAVAILABLE_TIMEOUT);};b.prototype.setFocusedChannel=function(c){if(c){this._focusedChannel=c;}};b.prototype.setFocusedEvent=function(c){if(c){if(this._focusedEvent===null||c.startTime!==this._focusedEvent.startTime||c.serviceId!==this._focusedEvent.serviceId){this._focusedEvent=c;this.onEventChange();}}};b.prototype.onEventChange=function(){this.hideEventImage();this._resetCallbackId();this.stopPip();};b.prototype.loadEventImage=function(d){var c=this,e=this._callbackId,f=function(g){if(e!==c._callbackId){return;}if(g&&g.promoImage){c.setEventImage(c._imageServer+g.promoImage);}else{c.setEventImage("");c._eventImageContainer.hide();return;}};if(!a.platform.system.Network.isEthernetAvailable()){return;}if(d){if(d.promoImage){c.setEventImage(c._imageServer+d.promoImage);}else{a.app.epgUtil.getEventImageFromMDS(d,f);}}else{return;}};b.prototype.showHideSmallVideoArea=function(c){a.gui.SmallVideoArea.setVisible(c);};b.prototype.showHideSmallVideoLayer=function(c){a.app.smallScreenPlayer.showHideSmallVideoLayer(c);};b.prototype.isStretchAspectMode=function(){var d=false,c=a.platform.output.AV;if(c.isHDOutputAvailable()&&c.getHDVideoAspectMode()===c.VideoAspectMode.HDMI_STRETCH){d=true;}else{if(c.isAnalogueOutputAvailable()&&c.getAnalogueVideoAspectMode()===c.VideoAspectMode.ANALOGUE_STRETCH){d=true;}}return d;};b.prototype.isHDVideoResolution=function(){var c=a.platform.system.Preferences.get(a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,true),d=false;switch(c){case 0:case 1:d=false;break;case 4:case 5:case 6:d=true;break;}return d;};b.prototype.resizePipWindow=function(){var f=document.getElementById("smallScreenBorder"),e=0,c=0,d=1.5;this._log("resizePipWindow","smallScreenBorder(before resize):"+a.app.smallScreenPlayer.windowX+"& "+a.app.smallScreenPlayer.windowW);if(this.isStretchAspectMode()){a.app.smallScreenPlayer.resetPipWindow();}else{if(this._videoDetails.aspect===a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3){if(this.isHDVideoResolution()){e=4/3*a.app.smallScreenPlayer.sourceWindowH;}else{e=3/2*a.app.smallScreenPlayer.sourceWindowH+6;}c=a.app.smallScreenPlayer.sourceWindowX+(a.app.smallScreenPlayer.sourceWindowW-e)/2;this._log("resizePipWindow","resizePipWindow","smallScreenBorder(after resize):"+c*d+"& "+e*d);a.app.smallScreenPlayer.updatePipWindow(c*d,e*d);}else{if(this.isHDVideoResolution()){a.app.smallScreenPlayer.resetPipWindow();}else{e=2*a.app.smallScreenPlayer.sourceWindowH+6;c=a.app.smallScreenPlayer.sourceWindowX+(a.app.smallScreenPlayer.sourceWindowW-e)/2;this._log("resizePipWindow","smallScreenBorder(after resize):"+c*d+"& "+e*d);a.app.smallScreenPlayer.updatePipWindow(c*d,e*d);}}}};b.prototype.smallVideoStreamPlaying=function(){if(!this.isPIPCanPlaying()){return;}this._eventImage.doFade(0);this.resizePipWindow();};b.prototype.stopPIPVideo=function(){this._fadeAnim.cancelAnimation();a.app.smallScreenPlayer.stopPIPVideo();};b.prototype.deactivatePIPVideo=function(){a.app.smallScreenPlayer.deactivatePIPVideoTrack();};b.prototype.activatePIPVideo=function(){if(this._pipUnsubscribed===true){this.displayUnsubscribedText();}else{this._validVideoSize=false;a.app.smallScreenPlayer.activatePIPVideoTrack();}};b.prototype.registerSmallVideoPlayerCallbacks=function(){if(!this._isPIPEnabled){return;}a.app.smallScreenPlayer.registerPlayerPlayingListener(this._smallVideoPlayStartedCallback);a.app.smallScreenPlayer.registerStreamAvailableListener(this._smallVideoStreamAvailableCallback);a.app.smallScreenPlayer.registerPlayerConnectedListener(this._smallVideoStreamStartedCallback);a.app.smallScreenPlayer.registerIframeDecodeListeners(this._smallVideoIframeDecode);a.app.smallScreenPlayer.registerStreamStoppedListeners(this._smallVideoStreamStopped);a.app.smallScreenPlayer.registerPlayerConnectFailedListener(this._smallVideoPlayStartFailedCallback);a.app.smallScreenPlayer.registerStreamDisabledListener(this._smallVideoStreamDisabledCallback);a.app.smallScreenPlayer.registerPlayerPlayFailedListener(this._smallVideoPlayErrorCallback);a.app.smallScreenPlayer.registerBlockedCallbacks(this._smallVideoBlockedCallback,this._smallVideoUnblockedCallback);a.app.smallScreenPlayer.registerStreamEnabledListeners(this._smallVideoEnabledStream);CCOM.ConditionalAccess.addEventListener("onSmartcardInserted",this._smartCardInsert);a.app.smallScreenPlayer.tuner.registerQosDegradedListener(this._signalLoss);a.app.smallScreenPlayer.tuner.registerQosImprovedListener(this._signalGain);};b.prototype.unregisterSmallVideoPlayerCallbacks=function(){if(!this._isPIPEnabled){return;}a.app.smallScreenPlayer.unregisterPlayerPlayingListener(this._smallVideoPlayStartedCallback);a.app.smallScreenPlayer.unregisterStreamAvailableListener(this._smallVideoStreamAvailableCallback);a.app.smallScreenPlayer.unregisterPlayerConnectedListener(this._smallVideoStreamStartedCallback);a.app.smallScreenPlayer.unregisterIframeDecodeListeners(this._smallVideoIframeDecode);a.app.smallScreenPlayer.unregisterStreamStoppedListeners(this._smallVideoStreamStopped);a.app.smallScreenPlayer.unregisterPlayerConnectFailedListener(this._smallVideoPlayStartFailedCallback);a.app.smallScreenPlayer.unregisterStreamDisabledListener(this._smallVideoStreamDisabledCallback);a.app.smallScreenPlayer.unregisterPlayerPlayFailedListener(this._smallVideoPlayErrorCallback);a.app.smallScreenPlayer.unregisterBlockedCallbacks(this._smallVideoBlockedCallback,this._smallVideoUnblockedCallback);a.app.smallScreenPlayer.unregisterStreamEnabledListeners(this._smallVideoEnabledStream);CCOM.ConditionalAccess.removeEventListener("onSmartcardInserted",this._smartCardInsert);a.app.smallScreenPlayer.tuner.unregisterQosDegradedListener(this._signalLoss);a.app.smallScreenPlayer.tuner.unregisterQosImprovedListener(this._signalGain);};b.prototype.isPIPCanPlaying=function(){var c=(a.apps.core.ContextManager.getActiveContext().getId()==="LISTGUIDE");return c;};b.prototype.activatePip=function(){this.registerSmallVideoPlayerCallbacks();this.showHideSmallVideoArea(false);};b.prototype.deactivatePip=function(){this.showHideSmallVideoArea(false);this.deactivatePIPVideo();};a.gui=a.gui||{};a.gui.Pip=b;}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.ClockDisplay=(function(){var e=new $N.apps.core.Log("CommonGUI","ClockDisplay"),c={},f,g,b="DY DD/MM",h=$N.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT,d="TIME",a=false;return{initialise:function(l){var k=this;c=l;$N.apps.core.Language.adornWithGetString($N.app.ClockDisplay);f=c.timeDateLabel;g=c.dayDateLabel;$N.app.StandardTimers.minuteTimer.register("ClockDisplay",function(){k.updateTime();});$N.app.StandardTimers.minuteTimer.enable("ClockDisplay");k.updateTime();},updateTime:function(k){if(!k){k=new Date();}var l=$N.app.DateTimeUtil.getFormattedTimeString(k,h);k=$N.apps.util.Util.formatDate(k,b,null,null,null,$N.app.ClockDisplay.getString("shortDays"));f.setText(l);f.setCaseSensitive(false);g.setText(k);g.setCaseSensitive(true);},hide:function(k){c.hide();if(!k){$N.app.VolumeControl.resetWasClockVisible();}},show:function(){$N.app.VolumeControl.hide();c.show();},setX:function(k){c.setX(k);},setY:function(k){c.setY(k);},setDateTimeCss:function(k){f.setCssClass(k);},setDayDateCss:function(k){g.setCssClass(k);},showTimeBackground:function(){c.timeBackground.show();},hideTimeBackground:function(){c.timeBackground.hide();},isVisible:function(){return c.isVisible();}};}());(function(a){var b=function(g,e,c,f,d){b.superConstructor.call(this,g);this.LEFT_ARROW_URL="customise/resources/svg/icons.svg#guideLeftArrowIcon";this.RIGHT_ARROW_URL="customise/resources/svg/icons.svg#guideRightArrowIcon";this.ARROW_HEIGHT=20;this.ARROW_WIDTH=12;this.RIGHT_ARROW_OFFSET=24;this.OPTIONS_WIDTH=d||630;this._lists=f||new a.gui.BasicList();this._dataMapper=null;this._container=new a.gui.Group(g);this._optionsContainer=new a.gui.Container(g,this._container);this._rootSVGRef=this._container.getRootSVGRef();this._leftLabel=new a.gui.Label(g,this._container);this._leftArrow=new a.gui.SVGlink(g,this._optionsContainer);this._rightArrow=new a.gui.SVGlink(g,this._optionsContainer);this._optionLabel=new a.gui.Label(g,this._optionsContainer);this._height=67.5;this._cssClassName="popupButton";this._highlightCssClassName="popupButton_highlight";this._optionLabelCssClassName="recordingDialogOptionText";this._itemHighlightedCallback=function(){};this._itemSelectedCallback=function(){};this._container.configure({x:0,y:0,height:this._height,width:1035});this._leftLabel.configure({x:0,y:50,height:45,width:400,cssClass:"greyDialogLabel",text:c});this._optionsContainer.configure({x:406,y:0,height:this._height,width:this.OPTIONS_WIDTH,cssClass:this._cssClassName});this._leftArrow.configure({x:8,y:this.calculateArrowY(),opacity:0.5,href:this.LEFT_ARROW_URL,visible:false});this._rightArrow.configure({x:this.OPTIONS_WIDTH-this.RIGHT_ARROW_OFFSET,y:this.calculateArrowY(),opacity:0.5,href:this.RIGHT_ARROW_URL,visible:false});this._optionLabel.configure({x:40,y:50,height:45,width:this.OPTIONS_WIDTH-55,cssClass:this._optionLabelCssClassName});if(e){e.addChild(this);}this._updateArrowsVisibility=function(){this._leftArrow.setVisible(!this._lists.isSelectedAtFirst());this._rightArrow.setVisible(!this._lists.isSelectedAtLast());};this._getCaption=function(){return this._dataMapper?this._dataMapper.getTitle(this._lists.getSelectedItem()):this._lists.getSelectedItem();};this._doSelect=function(){this._optionLabel.setText(this._getCaption());this._updateArrowsVisibility();};};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setHeight=function(c){var d;this._height=c;this._container.setHeight(c);this._optionsContainer.setHeight(c);d=this.calculateArrowY();this._leftArrow.setY(d);this._rightArrow.setY(d);};b.prototype.getHeight=function(){return this._height;};b.prototype.setWidth=function(c){this._container.setWidth(405+c);this._optionsContainer.setWidth(c);this._rightArrow.setX(c-this.RIGHT_ARROW_OFFSET);};b.prototype.setCssClass=function(c){this._cssClassName=c;this._optionsContainer.setCssClass(this._cssClassName);};b.prototype.setHighlightCssClass=function(c){this._highlightCssClassName=c;this._optionsContainer.setCssHighlightClass(this._highlightCssClassName);};b.prototype.setTextCssClass=function(c){this._optionLabelCssClassName=c;this._optionLabel.setCssClass(c);};b.prototype.setLabelCssClass=function(c){this._leftLabel.setCssClass(c);};b.prototype.setOptionCssClass=function(c){this._optionLabel.setCssClass(c);};b.prototype.setItemHighlightedCallback=function(c){this._itemHighlightedCallback=c;};b.prototype.setItemSelectedCallback=function(c){this._itemSelectedCallback=c;};b.prototype.focus=function(){this._optionsContainer.setCssClass(this._highlightCssClassName);this._updateArrowsVisibility();};b.prototype.defocus=function(){this._optionsContainer.setCssClass(this._cssClassName);this._leftArrow.hide();this._rightArrow.hide();};b.prototype.hasFocus=function(){return this._optionsContainer.getCssClass()===this._highlightCssClassName;};b.prototype.calculateArrowY=function(){return Math.floor((this._height/2)-(this.ARROW_HEIGHT/2)-4);};b.prototype.setData=function(e,f){var d,c=e.length;this._lists.setData(e);if(f){this._dataMapper=f;}for(d=0;d<c;d++){if(e[d].isDefault){this._lists.selectRowAtIndex(d+1);this._itemSelectedCallback(this._dataMapper.getAction(this._lists.getSelectedItem()));break;}}this._optionLabel.setText(this._getCaption());};b.prototype.selectNext=function(){this._lists.selectNext();this._doSelect();this._itemHighlightedCallback(this._dataMapper.getAction(this._lists.getSelectedItem()));this._itemSelectedCallback(this._dataMapper.getAction(this._lists.getSelectedItem()));};b.prototype.selectPrevious=function(){this._lists.selectPrevious();this._doSelect();this._itemHighlightedCallback(this._dataMapper.getAction(this._lists.getSelectedItem()));this._itemSelectedCallback(this._dataMapper.getAction(this._lists.getSelectedItem()));};b.prototype.getSelectedItem=function(){return this._lists.getSelectedItem();};b.prototype.keyHandler=function(c){var d=a.gui.FrameworkCore.getKeys();switch(c){case d.KEY_LEFT:this.selectPrevious();return true;case d.KEY_RIGHT:this.selectNext();return true;case d.KEY_OK:return true;}return false;};b.prototype.toString=function(){return"HorizontalSelectorControl";};a.gui=a.gui||{};a.gui.HorizontalSelectorControl=b;}($N||{}));(function(a){function c(d){c.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","IconLabel");this._container=new a.gui.Group(d);this._icon=new a.gui.Image(this._docRef,this._container);this._labelText=new a.gui.Label(this._docRef,this._container);this._blueIcon="customise/resources/images/%RES/icons/Icn_colorBlue.png";this._greenIcon="customise/resources/images/%RES/icons/Icn_colorGreen.png";this._redIcon="customise/resources/images/%RES/icons/Icn_colorRed.png";this._yellowIcon="customise/resources/images/%RES/icons/Icn_colorYellow.png";this._labelText.configure({visible:true,width:200,x:45,y:25,cssClass:"description"});this._icon.setHref(this._blueIcon);this._icon.show();this._rootSVGRef=this._container.getRootSVGRef();}a.gui.Util.extend(c,a.gui.GUIObject);var b=c.prototype;b.setIconColor=function(d){switch(d){case"blue":this._icon.setHref(this._blueIcon);break;case"red":this._icon.setHref(this._redIcon);break;case"yellow":this._icon.setHref(this._yellowIcon);break;case"green":this._icon.setHref(this._greenIcon);break;}};b.getLabelText=function(){return this._labelText.getText();};b.setLabelText=function(d){this._labelText.setText(d);};b.setWidth=function(d){this._container.setWidth(d);};b.show=function(){this._container.show();};b.hide=function(){this._container.hide();};a.gui=a.gui||{};a.gui.IconLabel=c;}($N||{}));(function(a){function c(l,g){c.superConstructor.call(this,l);var h=this,k=1920,e=1080,f=null,d=null;this.PIN_ENTRY_Y=130;this.PIN_ENTRY_Y_PADDING=10;this.TITLE_IMAGE_SPACING=20;this._log=new a.apps.core.Log("CommonGUI","PinDialog");this._container=new a.gui.Group(l);this._dialogBackground=new a.gui.BackgroundBox(l,this._container);this._backplateUpperGlow=new a.gui.BackgroundBox(l,this._container);this._backplateLowerGlow=new a.gui.BackgroundBox(l,this._container);this._dialogueBackplate=new a.gui.Container(l,this._container);this._pinEntry=new a.gui.NumberEntry(l,this._container);this._pinBackArrow=new a.gui.SVGlink(l,this._container);this._title=new a.gui.Label(l,this._container);this._subTitle=new a.gui.Label(l,this._container);this._description=new a.gui.Label(l,this._container);this._pinBoxArray=[];this._eventImage=new a.gui.Image(l,this._container);this._titleImage=new a.gui.Image(l,this._container);this._numberOfDigits=a.app.constants.MAX_PIN_DIGITS;this._docRef=l;this._inProgressAppearance=false;this._inProgressIndicator=new a.gui.Label(l,this._container);this._dialogBackground.configure({x:0,y:0,width:k,height:e,cssClass:"dialogueBackground"});this._backplateUpperGlow.configure({x:0,y:186,width:k,height:50,cssClass:"dialogueGlowUpper"});this._backplateLowerGlow.configure({x:0,y:842,width:k,height:50,cssClass:"dialogueGlowLower"});this._dialogueBackplate.configure({x:-2,y:237,width:k+4,height:606,cssClass:"dialogueBackplate"});this._pinBackArrow.configure({x:88,y:525,href:"customise/resources/svg/icons.svg#guideLeftArrowIcon",visible:true});this._inProgressIndicator.configure({x:700,y:600,visible:false,cssClass:"dialogSubtitle"});for(f=0;f<this._numberOfDigits;f++){this.addPinEntryBox();this._pinBoxArray[0].highlight();}this._uiKeyPressedCallback=function(o,n){var m=null;for(m=0;m<this._numberOfDigits;m++){if(m<o.length){this._pinBoxArray[m].setText("*");}else{this._pinBoxArray[m].setText("");}if(m===o.length){this._pinBoxArray[m].highlight();}else{this._pinBoxArray[m].unHighlight();}}};this._pinEntry.configure({visible:false});this._eventImage.configure({x:1430,y:510,id:"pineventimg",visible:true,href:"customise/resources/images/%RES/icons/DVR_controle_parental.png"});this._titleImage.configure({x:435,y:316,id:"titleimg",width:60,height:60,visible:false});this._title.configure({x:435,y:373,cssClass:"pinEntryTitle"});this._description.configure({x:435,y:429,cssClass:"dialogSubtitle"});this._rootSVGRef=this._container.getRootSVGRef();if(g){g.addChild(this);}}a.gui.Util.extend(c,a.gui.AbstractDialog);c.prototype.addPinEntryBox=function(){var d=new a.gui.KeypadKeyItem(this._docRef,this._container);d.configure({width:225,height:292.5,x:435+(240*this._pinBoxArray.length),y:459,cssClass:"optionsMenuItem",highlightCssClass:"optionsMenuItemHighlighted",highlightOpacity:"0.5",textConfig:{y:250,cssClass:"pinKeys"}});this._pinBoxArray.push(d);};c.prototype.setNumberOfDigits=function(e){var d=0,f=null;if(e){if(e>this._numberOfDigits){f=e-this._numberOfDigits;for(d=0;d<f;d++){this.addPinEntryBox();}}this._numberOfDigits=e;}};c.prototype.setTitleCssClass=function(d){this._title.setCssClass(d);};c.prototype.setX=function(d){this._container.setX(d);};c.prototype.setPinEntryY=function(d){d=d||this.PIN_ENTRY_Y;if(d!==this.PIN_ENTRY_Y){this._pinEntry.setY(d);}};c.prototype.setY=function(d){this._container.setY(d);};c.prototype.resetTitlePosition=function(){this._title.configure({x:435,y:429,cssClass:"pinEntryTitle"});};c.prototype.resetDescriptionPosition=function(){this._description.configure({x:435,y:370,cssClass:"pinDialogMessage"});};c.prototype.setTitle=function(d){this._title.setText(d);if(this._title.getText()===""){this.resetDescriptionPosition();}};c.prototype.setSubTitle=function(d){this._subTitle.setText(d);};c.prototype.setSubTitleCssClass=function(d){this._subTitle.setCssClass(d);};c.prototype.setSubTitleX=function(d){this._subTitle.setX(d);};c.prototype.setSubTitleY=function(d){this._subTitle.setY(d);};c.prototype.setDescription=function(d){this._description.setText(d);if(this._description.getText()===""){this.resetTitlePosition();}};c.prototype.setTitleImage=function(d){if(d){this._titleImage.setHref(d);this._titleImage.show();this._title.setX(this._titleImage.getTrueX()+this._titleImage.getTrueWidth()+this.TITLE_IMAGE_SPACING);}};c.prototype.setEventImage=function(d){if(d){this._eventImage.setHref(d);this._eventImage.show();}};function b(e){var d=0;for(d=0;d<e._pinBoxArray.length;d++){e._pinBoxArray[d].hide();}e._inProgressIndicator.show();}c.prototype.setInProgressAppearance=function(d){this._inProgressAppearance=d;};c.prototype.setInProgressIndicatorText=function(d){this._inProgressIndicator.setText(d);};c.prototype.setEventImageConfig=function(d){if(d){this._eventImage.configure(d);}};c.prototype.setEventImageVisibility=function(d){if(d===true){this._eventImage.show();}else{if(d===false){this._eventImage.hide();}}};c.prototype.setLeftArrowVisibility=function(d){if(d===true){this._pinBackArrow.show();}else{if(d===false){this._pinBackArrow.hide();}}};c.prototype.setOkButtonText=function(d){};c.prototype.setCancelButtonText=function(d){};c.prototype.setOkCallback=function(d){this._pinEntry.setSelectedCallback(d);};c.prototype.setCancelCallback=function(d){this._cancelCallback=d;};c.prototype.setReset=function(d){var e=null;if(d){this._pinEntry.reset();this._uiKeyPressedCallback(this._pinEntry.getValue(),null);this._inProgressIndicator.hide();this._inProgressAppearance=false;for(e=0;e<this._pinBoxArray.length;e++){this._pinBoxArray[e].show();}}};c.prototype.setKeyPressedCallback=function(d){this._keyPressedCallback=d;};c.prototype.keyHandler=function(d){var e=a.apps.core.KeyInterceptor.getKeyMap(),f;switch(d){case e.KEY_RIGHT:f=true;break;case e.KEY_BACK:this._cancelCallback();f=true;break;case e.KEY_HOME:case e.KEY_EXIT:case e.KEY_MOSAIC:case e.KEY_RADIO:case e.KEY_GUIDE:case e.KEY_AGORA:case e.KEY_PPV:case e.KEY_VIEW:case e.KEY_MENU:case e.KEY_PORTAL:case e.KEY_VOD:this._cancelCallback();break;case e.KEY_FFW:case e.KEY_REW:case e.KEY_PLAY_PAUSE:case e.KEY_STOP:f=true;break;default:if(a.app.GeneralUtil.isKeyReleaseEvent(d)){return false;}if(d===e.KEY_LEFT&&this._pinEntry.getValue()===""){this._cancelCallback();f=true;}else{f=this._pinEntry.keyHandler(d);if(this._pinEntry.getValue().length===this._numberOfDigits){if(this._inProgressAppearance){b(this);}this._pinEntry._cancelDelayTimer();this._pinEntry._selectedCallback(this._pinEntry.getValue());f=true;}if(this._keyPressedCallback){this._keyPressedCallback(this._pinEntry.getValue(),d);}this._uiKeyPressedCallback(this._pinEntry.getValue(),d);}}return f;};a.gui=a.gui||{};a.gui.PinDialog=c;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","ChapterIndicators");this._container=new a.gui.Group(d);this._indicators=[];this._width=200;this._height=9;this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._width=c;};b.prototype.setHeight=function(c){this._height=c;};b.prototype.createIndicators=function(f){var e=this._width/f,c,d=this;for(c=1;c<f;c++){this._indicators.push(new a.gui.Container(this._docRef,this._container));this._indicators[c-1].configure({x:c*e,width:2,height:d._height,cssClass:"chapterIndicator"});}};a.gui=a.gui||{};a.gui.ChapterIndicators=b;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);this._chapterIndicators=new b.gui.ChapterIndicators(d,this._progressBox);if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.ContentProgressBar);a.prototype.setWidth=function(c){a.superClass.setWidth.call(this,c);this._chapterIndicators.setWidth(c);};a.prototype.setHeight=function(c){a.superClass.setHeight.call(this,c);this._chapterIndicators.setHeight(c*0.5);this._chapterIndicators.setY(c/2);};a.prototype.createChapterIndicators=function(c){this._chapterIndicators.createIndicators(c);};a.prototype.hideChapterIndicators=function(){this._chapterIndicators.hide();};a.prototype.showChapterIndicators=function(){this._chapterIndicators.show();};b.gui=b.gui||{};b.gui.ChapteredContentProgressBar=a;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);this._container=new b.gui.Group(d);this._loadingImage=new b.gui.Image(d,this._container);this._imageWidth=48;this._imageHeight=48;this._loadingImage.addRotationAnimation("linear");this._loadingImage.configure({quality:1,bufferedImage:true,animationDuration:"1000ms"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this.hide();}b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.show=function(){a.superClass.show.call(this);this._loadingImage.doRotate(360,true,false);};a.prototype.hide=function(){this._loadingImage._rotateAnim.cancelAnimation();a.superClass.hide.call(this);};a.prototype.setImage=function(c){this._loadingImage.setHref(c);};a.prototype.setImageWidth=function(c){this._loadingImage.setWidth(c);this._imageWidth=this._loadingImage.getWidth();};a.prototype.setImageHeight=function(c){this._loadingImage.setHeight(c);this._imageHeight=this._loadingImage.getHeight();};a.prototype.getClassName=function(){return"BufferIndicator";};b.gui=b.gui||{};b.gui.BufferIndicator=a;}($N||{}));(function(){function a(c,b){this._log=new $N.apps.core.Log("CommonGUI","TextOptionSelector");a.superConstructor.call(this,c);this._container=new $N.gui.Group(c);this._separator="";this._padding=5;this._UNDERSCORE_OFFSET=4;this._textWidth=50;this._optionLabels=[];this._optionLabelsLength=0;this._options=[];this._separatorLabels=[];this._highlighted=0;this._selected=0;this._underscore=new $N.gui.Image(this._docRef,this._container);this._underscore.configure({href:"../../../customise/resources/images/%RES/icons/Icn_underscore.png",y:14,visible:false});this._okCallback=function(){};this._cancelCallback=function(){};this._dataMapper=null;this._rootSVGRef=this._container.getRootSVGRef();if(b){b.addChild(this);}}$N.gui.Util.extend(a,$N.gui.AbstractComponent);a.prototype._recalculateOptionLabelPositions=function(){var c=0,b;for(b=0;b<this._optionLabelsLength;b++){if(this._optionLabels[b].isVisible()){this._optionLabels[b].configure({x:c,cssClass:"textOptionSelectorText"});if(String(this._textWidth)!=="auto"){c=c+this._textWidth+this._padding;}}}};a.prototype.initialise=function(b,g,f,e){var c=null,d;this._optionLabelsLength=b.length;this._options=b;this._separator=e;if(g!==undefined&&g!==null){this._textWidth=g;}if(f!==undefined&&f!==null){this.setPadding(f);}for(d=0;d<this._optionLabelsLength;d++){this._optionLabels[d]=new $N.gui.Label(this._docRef,this._container);}if(e){for(d=0;d<this._optionLabelsLength-1;d++){this._separatorLabels[d]=new $N.gui.Label(this._docRef,this._container);this._separatorLabels[d].setText(this._separator);this._separatorLabels[d].setCssClass("textOptionSelectorText");}}this._recalculateOptionLabelPositions();};a.prototype.setData=function(b,f){var e=0,c=null,d=0;this._options=b;if(f){this.displayData();}};a.prototype.setPadding=function(b){this._padding=b;};a.prototype.setX=function(b){this._container.setX(b);};a.prototype.setY=function(b){this._container.setY(b);};a.prototype.showUnderscore=function(){this._underscore.show();};a.prototype.hideUnderscore=function(){this._underscore.hide();};a.prototype.setOkCallback=function(b){this._okCallback=b;};a.prototype.setCancelCallback=function(b){this._cancelCallback=b;};a.prototype.keyHandler=function(c){var d=$N.apps.core.KeyInterceptor.getKeyMap(),b,e;switch(c){case d.KEY_LEFT:for(b=this._highlighted-1;b>=0;b--){if(this._optionLabels[b].isVisible()){this.highlightIndex(b);return true;}}break;case d.KEY_RIGHT:for(b=this._highlighted+1;b<this._optionLabelsLength;b++){if(this._optionLabels[b].isVisible()){this.highlightIndex(b);return true;}}break;case d.KEY_OK:this.selectIndex(this._highlighted);this._okCallback(this._options[this._highlighted]);return true;default:return false;}return false;};a.prototype.highlightIndex=function(b){var c;for(c=0;c<this._optionLabelsLength;c++){this._optionLabels[c].configure({cssClass:"textOptionSelectorText"});}this._optionLabels[b].configure({cssClass:"textOptionSelectorText textOptionSelectorTextHighlighted"});this._underscore.setX(this._optionLabels[b].getTrueX()+this._UNDERSCORE_OFFSET);this._underscore.show();this._highlighted=b;};a.prototype.selectIndex=function(b){this._optionLabels[this._selected].configure({cssClass:"textOptionSelectorText"});this._optionLabels[b].configure({cssClass:"textOptionSelectorText SpanLabelText"});this.highlightIndex(b);this._selected=b;};a.prototype.disableIndex=function(b){this._optionLabels[b].hide();this._recalculateOptionLabelPositions();};a.prototype.enableIndex=function(b){this._optionLabels[b].show();this._recalculateOptionLabelPositions();};a.prototype.selectData=function(c){var b;for(b=0;b<this._options.length;b++){if(this._options[b]===c){this.selectIndex(b);break;}}};a.prototype.setDataMapper=function(b){this._dataMapper=b;};a.prototype.displayData=function(){var c=0,b;for(b=0;b<this._optionLabelsLength;b++){this._optionLabels[b].setText(this._dataMapper.getText(this._options[b]));if(String(this._textWidth)==="auto"&&this._optionLabels[b+1]){if(this._optionLabels[b].isVisible()){c=c+this._optionLabels[b].getTrueTextLength()+this._padding;if(this._separatorLabels[b]){this._separatorLabels[b].setX(c);c=c+this._separatorLabels[b].getTrueTextLength()+this._padding;}}this._optionLabels[b+1].setX(c);}}};a.prototype.show=function(){a.superClass.show.call(this);if(String(this._textWidth)==="auto"){this.displayData();}};a.prototype.selectCurrentValue=function(c){var b,d=false;for(b=0;b<this._optionLabelsLength;b++){if(String(c)===String(this._dataMapper.getValue(this._options[b]))){this.selectIndex(b);d=true;break;}}if(!d){this.highlightIndex(0);}};a.prototype.getSelectedItem=function(){return this._options[this._selected];};a.prototype.deselect=function(){var b;for(b=0;b<this._optionLabelsLength;b++){this._optionLabels[b].setCssClass("textOptionSelectorText");}};$N.gui=$N.gui||{};$N.app.TextOptionSelector=a;}());(function(b){function a(e,d){a.superConstructor.call(this,e);this._log=new b.apps.core.Log("CommonGUI","NumberEntryWithCursor");this._cursor="_";this._text.setText(this._cursor);this._textChangedCallback=function(){};}b.gui.Util.extend(a,b.gui.NumberEntry);var c=a.prototype;c.setCursor=function(d){this._cursor=d;};c.appendNumber=function(f){var e=this,d=this._value+f;this._cancelDelayTimer();if(this._maxValue===null||parseInt(d,10)<=parseInt(this._maxValue,10)){if(this._value.length<this._maxCharacters){this._value+=f;if(this._passwordChar){if(!this._delayPasswordMode){this._text.setText(this._text.getText()+this._passwordChar+this._cursor);}else{if(this._text.getText().length>1){this._appendLastDigitToPassword();this._setNumberText(this._text.getText().substring(0,this._text.getText().length-1)+f);}else{this._setNumberText(this._text.getText().substring(0,this._text.getText().length-1)+f);}this._passwordDelayTimer=setTimeout(function(){e._appendLastDigitToPassword();},this._passwordDelayTimerMS);}}else{this._setNumberText(this._text.getText().substring(0,this._text.getText().length-1)+f);}}}this._alignText();};c.setValue=function(d){a.superClass.setValue.call(this,d);if(this._text.getText()===""){this._text.setText(this._cursor);this._textChangedCallback(this._text.getText());}};c.changeTextToPassword=function(){var e=this._text.getText().length-1,d,f="";if(this.getValue().length===this._maxCharacters&&this._text.getText()[this._text.getText().length-1]!==this._cursor){e=this._text.getText().length;}for(d=0;d<e;d++){f=f+this._passwordChar;}this._setNumberText(f);};c._appendLastDigitToPassword=function(){if(this.getValue().length===this._maxCharacters&&this._text.getText()[this._text.getText().length-1]!==this._cursor){this._setNumberText(this._text.getText().substring(0,this._text.getText().length-1)+this._passwordChar);}else{this._setNumberText(this._text.getText().substring(0,this._text.getText().length-2)+this._passwordChar);}};c._setNumberText=function(d){if(d.length<this._maxCharacters){d=d+this._cursor;}this._text.setText(d);this._textChangedCallback(this._text.getText());};c.setTextChangedCallback=function(d){this._textChangedCallback=d;};c.getTextWithoutCursor=function(){return this._text.getText().replace(new RegExp(this._cursor,"gi"),"");};c.keyHandler=function(d){var f=a.superClass.keyHandler.call(this,d),e=b.gui.FrameworkCore.getKeys();if(f&&d===e.KEY_LEFT){this._text.setText(this._text.getText()+this._cursor);this._textChangedCallback(this._text.getText());}return f;};b.gui=b.gui||{};b.gui.NumberEntryWithCursor=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","PageableList");this._items=[];this._data=new b.gui.CyclicPagingList();this._itemHeight=20;this._container=new b.gui.Container(this._docRef);this._container.setCssClass("logoMenuItem");this._rootElement=this._container.getRootElement();this._scrollType=null;this._upDownPageable=false;this._keyupIndex=1;this._listPagedCallback=function(){return null;};this._focusState=true;this.setOrientation(a.consts.ORIENTAION_VERTICAL);if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.AbstractCustomisableList);a.prototype._getSelectedObject=function(){return this._items[this._data.getViewSelectedRowIndex()-1];};a.prototype.initialise=function(){if(!this._itemTemplate){throw ("AbstractCustomisableList - initialise: No list item template provided");}var c,d=this._data.getVisibleRows();this._items=[];for(c=0;c<d;c++){this._items.push(new this._itemTemplate(this._docRef));this._items[c].configure(this._itemConfig);this._items[c].setY(c*this._itemHeight);if(this._dataMapper&&this._items[c].setDataMapper){this._items[c].setDataMapper(this._dataMapper);}this._rootElement.appendChild(this._items[c].getRootElement());}};a.prototype.reset=function(){if(this._items&&this._items.length>0){var c,d=this._items.length;for(c=0;c<d;c++){this._items[c].destroy();}this._items=[];this._data.clearList();}};a.prototype.doForAllItems=function(c){var d,e=this._items.length;for(d=0;d<e;d++){c(this._items[d]);}};a.prototype.visibleItemUpdate=function(c){var e=this._data.returnViewableList(),d;c=c%e.length;if(this._items&&this._items[c].isVisible()){this._items[c].update(e[c]);}};a.prototype.updateTickIconData=function(f,c){var e=this._data.returnViewableList(),d;for(d=0;d<e.length;d++){this._items[d].updateIcon(e[d]);if(!this._items[d].isVisible()){this._items[d].show();}}if(e.length<this._data.getVisibleRows()){for(d=e.length;d<this._data.getVisibleRows();d++){this._items[d].hide();}}if(!c){this._applySelectionTimeOut();}};a.prototype.displayData=function(f,c){var e=this._data.returnViewableList(),d;for(d=0;d<e.length;d++){this._items[d].unHighlight();this._items[d].update(e[d]);if(!this._items[d].isVisible()){this._items[d].show();}}if(e.length<this._data.getVisibleRows()){for(d=e.length;d<this._data.getVisibleRows();d++){this._items[d].hide();}}if(f){this.defocus();}this._getSelectedObject().highlight();if(!c){this._applySelectionTimeOut();}this._keyupIndex=this.getViewSelectedRowIndex();};a.prototype.updateIcons=function(){var e=this._data.returnViewableList(),d=e.length,c;for(c=0;c<d;c++){if(this._items[c].updateIcons&&this._items[c].isVisible()){this._items[c].updateIcons(e[c]);}}};a.prototype.setListPagedCallback=function(c){this._listPagedCallback=c;};a.prototype.isSelectionAtTop=function(){var c=false;if(!this.getWrapAround()){if(this._data.getFirstVisibleRowIndex()===1){c=true;}}return c;};a.prototype.isSelectionAtBottom=function(){var c=false;if(!this.getWrapAround()){if(this._data.getLastVisibleRowIndex()===this._data.getSize()){c=true;}}return c;};a.prototype._firePagedCallback=function(){this._listPagedCallback(this.isSelectionAtTop(),this.isSelectionAtBottom());};a.prototype.selectNext=function(c){var d=false;if(!this.getWrapAround()&&this._data.isSelectedAtLast()){return d;}this._getSelectedObject().unHighlight();d=this._data.selectNext();if(d){this.displayData(false,true);}this._getSelectedObject().highlight();if(this._focusState){if(d){this._firePagedCallback();}}return d;};a.prototype.selectPrevious=function(c){var d=false;if(!this.getWrapAround()&&this._data.isSelectedAtFirst()){return d;}this._getSelectedObject().unHighlight();d=this._data.selectPrevious();if(d){this.displayData(false,true);}this._getSelectedObject().highlight();if(this._focusState){if(d){this._firePagedCallback();}}return d;};a.prototype.setUpDownPageable=function(c){this._upDownPageable=c;};a.prototype.pageUp=function(){if(this._upDownPageable){this._getSelectedObject().unHighlight();this._data.pageUp();this.displayData(false,true);this._getSelectedObject().highlight();if(this._focusState){this._applySelectionTimeOut();this._firePagedCallback();}return true;}return false;};a.prototype.pageDown=function(){if(this._upDownPageable){this._getSelectedObject().unHighlight();this._data.pageDown();this.displayData(false,true);this._getSelectedObject().highlight();if(this._focusState){this._applySelectionTimeOut();this._firePagedCallback();}return true;}return false;};a.prototype.applyPageSelectionTimeOut=function(){if(this._upDownPageable){this._applySelectionTimeOut();return false;}return false;};a.prototype.getVisibleItemCount=function(){return this._data.getVisibleRows();};a.prototype.setVisibleItemCount=function(c){this._data.setVisibleRows(c);this._height=this._itemHeight*this._data.getVisibleRows();this._container.setHeight(this._height);};a.prototype.setItemHeight=function(c){this._itemHeight=c;this._height=this._itemHeight*this._data.getVisibleRows();this._container.setHeight(this._height);};a.prototype._selectItem=function(d,c){if(this._selectionTimeOut){this._itemHighlightedCallback(this._data.getSelectedItem());}this._itemSelectedCallback(d,c);};a.prototype.keyHandler=function(d){var e=b.apps.core.KeyInterceptor.getKeyMap(),g=false,c=false,f=this._data.getSelectedItem();switch(d){case this._previousKey:if((this.getScrollType()===a.consts.ScrollType.PAGE)&&(!this._data.isAtFirstPage())){g=this._data.pageUp();this.displayData(false,false);}else{g=this.selectPrevious();}break;case this._nextKey:if((this.getScrollType()===a.consts.ScrollType.PAGE)&&(!this._data.isAtLastPage())){g=this._data.pageDown();this.displayData(false,false);}else{g=this.selectNext();}break;case this._previousKeyRelease:case this._nextKeyRelease:if(this._keyupIndex!==this._data.getActualSelectedRowIndex()||(this.getViewSelectedRowIndex()===this.getActualSelectedRowIndex()&&this._keyupIndex!==1)){this._applySelectionTimeOut();}this._keyupIndex=this._data.getActualSelectedRowIndex();g=true;break;case e.KEY_CHAN_UP:g=this.pageUp();break;case e.KEY_CHAN_DOWN:g=this.pageDown();break;case (e.KEY_CHAN_UP+this._KEY_RELEASE_SUFFIX):g=this.applyPageSelectionTimeOut();break;case (e.KEY_CHAN_DOWN+this._KEY_RELEASE_SUFFIX):g=this.applyPageSelectionTimeOut();break;case e.KEY_OK:c=true;this._selectItem(f,c);g=true;break;case e.KEY_RIGHT:this._selectItem(f,c);g=true;break;}return g;};a.prototype._applySelectionTimeOut=function(){if(this._itemHighlightedImmediateCallback){this._itemHighlightedImmediateCallback(this._data.getSelectedItem());}this._itemHighlightedCallback(this._data.getSelectedItem());};a.prototype.focus=function(){var c;for(c=0;c<this._items.length;c++){this._items[c].focus();}this._focusState=true;};a.prototype.defocus=function(){var c;for(c=0;c<this._items.length;c++){this._items[c].defocus();}this._focusState=false;};a.prototype.getActualSelectedRowIndex=function(){return this._data.getActualSelectedRowIndex();};a.prototype.getDataSize=function(){return this._data.getSize();};a.prototype.getViewSelectedRowIndex=function(){return this._data.getViewSelectedRowIndex();};a.prototype.selectRowAtIndex=function(c){this._getSelectedObject().unHighlight();this._data.selectRowAtIndex(c);this._getSelectedObject().highlight();};a.prototype.selectActualItemAtIndex=function(c){var d=this.getData().length;this._getSelectedObject().unHighlight();this.selectItemAtIndex((c&&c<=d)?c:0,true);this._getSelectedObject().highlight();};a.prototype.selectRowByValidation=function(d){var e,f=this._data.getSize(),c;for(e=1;e<=f;e++){c=this._data.getRowAtIndex(e);if(c&&d(c)){this._data.selectRowAtIndex(e);return;}}this._data.selectRowAtIndex(1);};a.prototype.getActualSelectedItem=function(){var c=this._data.getViewSelectedRowIndex()||1;if(this._items[c-1]){return this._items[c-1];}return null;};a.prototype.returnViewableList=function(){return this._data.returnViewableList();};a.prototype.getSelectedItem=function(){return this._data.getSelectedItem();};a.prototype.hasFocus=function(){return this._focusState;};a.prototype.setScrollType=function(c){this._scrollType=c;};a.prototype.getScrollType=function(){return this._scrollType;};a.prototype.getIndexByUniqueData=function(e,c){var f=this.getData(),d=null;for(d=0;d<f.length;d++){if(f[d][e]===c){return d;}}};a.prototype.getData=function(){return this._data.getData();};a.consts=b.gui.AbstractCustomisableList.consts;a.consts.ScrollType={PAGE:"page",ITEM:"item"};b.gui=b.gui||{};b.gui.PageableList=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d,c);this._log=new b.apps.core.Log("CommonGUI","PageableListWithArrows");this._arrowsContainer=new b.gui.Container(this._docRef,this._container);this._arrowsContainer.hide();this._upArrow=new b.gui.SVGlink(this._docRef,this._arrowsContainer);this._downArrow=new b.gui.SVGlink(this._docRef,this._arrowsContainer);this._upArrow.configure({x:-1.5,y:-76.5,href:"../../../customise/resources/svg/icons.svg#guideUpArrowIcon",visible:false});this._downArrow.configure({x:-1.5,y:612,href:"../../../customise/resources/svg/icons.svg#guideDownArrowIcon",visible:false});};b.gui.Util.extend(a,b.gui.PageableList);a.prototype.setUpArrowProperties=function(c){this._upArrow.configure(c);};a.prototype.setDownArrowProperties=function(c){this._downArrow.configure(c);};a.prototype.focus=function(){a.superClass.focus.call(this);this._arrowsContainer.show();};a.prototype.defocus=function(){a.superClass.defocus.call(this);this._arrowsContainer.hide();};a.prototype._updateArrowVisibility=function(){this._upArrow.setVisible(!this.isSelectionAtTop());this._downArrow.setVisible(!this.isSelectionAtBottom());};a.prototype.displayData=function(d,c){a.superClass.displayData.call(this,d,c);this._updateArrowVisibility();};a.prototype._firePagedCallback=function(){a.superClass._firePagedCallback.call(this);this._updateArrowVisibility();};b.gui=b.gui||{};b.gui.PageableListWithArrows=a;}($N||{}));(function(c){var b=function(e,d){b.superConstructor.call(this,e);this._log=new c.apps.core.Log("CommonGUI","PageableListWithBackground");this._background=new c.gui.Container(e,this._container);this.ON_FOCUS_BACKGROUNDCLASS="menuBackgroundFocus";this.OUT_OF_FOCUS_BACKGROUNDCLASS="menuBackgroundDefocus";this._colorKeyCallbacks=null;this._successCallback=function(){};};c.gui.Util.extend(b,c.gui.PageableList);b.prototype.setBackgroundConfig=function(d){this._background.configure(d);};b.prototype.displayData=function(e,d){b.superClass.displayData.call(this,e,d);this._background.show();};b.prototype.focus=function(){b.superClass.focus.call(this);this._background.setCssClass(this.ON_FOCUS_BACKGROUNDCLASS);};b.prototype.defocus=function(){b.superClass.defocus.call(this);this._background.setCssClass(this.OUT_OF_FOCUS_BACKGROUNDCLASS);};b.prototype.setSuccessCallback=function(d){this._successCallback=d;};b.prototype._selectItem=function(h,f){var e=null,d=this.getActualSelectedRowIndex(),g=this.getActualSelectedItem();b.superClass._selectItem.call(this,h,f);if(d<=this.getSize()){e=this.getSuccessCallbackByIndex(d);if(e){e(h,f,g);}}};b.prototype.getSuccessCallbackByIndex=function(e){var d=this._data.getRowAtIndex(e).successCallback;if(d){return d;}else{return this._successCallback;}};b.prototype.setColorKeyCallbacks=function(d){this._colorKeyCallbacks=d;};function a(e,d,f){e._colorKeyCallbacks[d](f,e.getActualSelectedItem());}b.prototype.keyHandler=function(d){var e=c.apps.core.KeyInterceptor.getKeyMap(),g=false,f=this._data.getSelectedItem();g=b.superClass.keyHandler.call(this,d);if(!g){switch(d){case e.KEY_BLUE:case e.KEY_GREEN:case e.KEY_RED:case e.KEY_YELLOW:case e.KEY_INFO:if(this._colorKeyCallbacks&&this._colorKeyCallbacks[d]){a(this,d,f);g=true;}break;}}return g;};c.gui=c.gui||{};c.gui.PageableListWithBackground=b;}($N||{}));var $N=$N||{};$N.app=$N.app||{};(function(b){var a=function(d,c){a.superConstructor.call(this,d,c);this._log=new b.apps.core.Log("CommonGUI","PageableListWithScrolling");this._data=new b.gui.CyclicPagingListWithScrolling();};b.gui.Util.extend(a,b.gui.PageableList);b.gui=b.gui||{};b.gui.PageableListWithScrolling=a;a.prototype.selectRowAtIndex=function(c,e,d){this._getSelectedObject().unHighlight();this._data.selectRowAtIndex(c,e,d);this._getSelectedObject().highlight();};a.prototype.resetScrollDirection=function(){this._data.resetScrollDirection();};}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","ListLinker");this._listTemplate=null;this._listItemTemplate=null;this._listDataMapper=null;this._list=null;this._focusCallback=function(){};this._container=new a.gui.Group(d);this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.initialise=function(){this._list=new this._listTemplate(this._docRef,this._container);this._list.setItemTemplate(this._listItemTemplate);this._list.setDataMapper(this._dataMapper);this._list.setWidth(this._width);this._list.setHeight(this._height);this._list.setItemConfig({gridWidth:this._width});this._list.initialise();};b.prototype.initialiseWhenReady=function(){if(this._listTemplate&&this._listItemTemplate&&this._listDataMapper){this.initialise();}};b.prototype.setWidth=function(c){this._width=parseInt(c,10);this._container.setWidth(c);};b.prototype.setHeight=function(c){this._height=parseInt(c,10);this._container.setHeight(c);};b.prototype.setListTemplate=function(c){if(typeof c==="string"){this._listTemplate=window.$N.gui[c]||window[c];}else{this._listTemplate=c;}this.initialiseWhenReady();};b.prototype.setListItemTemplate=function(c){this._listItemTemplate=c;this.initialiseWhenReady();};b.prototype.setDataMapper=function(c){b.superClass.setDataMapper.call(this,c);this._listDataMapper=c;this.initialiseWhenReady();};b.prototype.setFocusCallback=function(c){this._focusCallback=c;};b.prototype.setGridRowItemCallback=function(c){this._list.setGridRowItemCallback(c);};b.prototype.setDataValidationFunction=function(c){this._list.setDataValidationFunction(c);};b.prototype.highlight=function(){this._focusCallback(this._list.getData());this._list.focus();this._list.select(true);};b.prototype.unHighlight=function(){this._list.defocus();};b.prototype.update=function(c){this._list.setData(c);this._list.displayData(true);};b.prototype.updateIcons=function(c){this._list.updateIcons(c);};b.prototype.getSelectedItem=function(){var c=this._list.getSelectedItem();return c;};b.prototype.setItemHighlightedCallback=function(c){this._list.setItemHighlightedCallback(c);};b.prototype.setItemHighlightedImmediateCallback=function(c){this._list.setItemHighlightedImmediateCallback(c);};b.prototype.setItemSelectedCallback=function(c){this._list.setItemSelectedCallback(c);};b.prototype.selectItemAtIndex=function(c,d){this._list.selectItemAtIndex(c,d);};b.prototype.selectFirst=function(){this._list.selectFirst();};b.prototype.selectLast=function(){this._list.selectLast();};b.prototype.select=function(){this._list.select();};b.prototype.selectDataItemOnNow=function(){this._list.selectDataItemOnNow();};b.prototype.keyHandler=function(c){var d=this._list.keyHandler(c);return d;};a.gui=a.gui||{};a.gui.ListLinker=b;}($N||{}));(function(b){function a(d,c){this._log=new b.apps.core.Log("CommonGUI","CollapsingGroup");a.superConstructor.call(this,d,c);this._itemPadding=0;}b.gui.Util.extend(a,b.gui.Group);a.prototype._redraw=function(){var d,e=this._children.length,c=0;for(d=0;d<e;d++){this._children[d].setX(c);if(this._children[d].isVisible()){c=c+parseInt(this._children[d].getTrueWidth(),10)+this._itemPadding;}}if(c>0){this.setWidth(c-this._itemPadding);}};a.prototype.setItemPadding=function(c){this._itemPadding=parseInt(c,10);};a.prototype.initialise=function(){var d=this,c,f=this._children.length,e=function(){d._redraw();};for(c=0;c<f;c++){this._children[c].setUpdatedCallback(e);}};b.gui=b.gui||{};b.gui.CollapsingGroup=a;}($N||{}));(function(a){function b(d,c){this._log=new a.apps.core.Log("CommonGUI","CollapsingGroupItem");b.superConstructor.call(this,d);this._updatedCallback=function(){};this._container=new a.gui.Group(d);this._image=new a.gui.Image(this._docRef,this._container);this._label=new a.gui.Label(this._docRef,this._container);this._container.configure({width:"37.5",height:"37.5"});this._image.configure({width:"37.5",height:"37.5"});this._label.configure({x:49,y:30,cssClass:"summaryDescription"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.AbstractComponent);b.prototype.setWidth=function(c){this._trueWidth=c;this._width=Math.round(c*this.resolutionHorizontalFactor);this._container.setWidth(c);this._updatedCallback();};b.prototype.setHref=function(c){this._image.setHref(c);};b.prototype.getHref=function(){return this._image.getHref();};b.prototype.setText=function(d,c){this._label.setText(d);if(!c){this.setWidth(this._label.getTrueTextLength()+this._label.getTrueX());}this._updatedCallback();};b.prototype.setCssClassForLabel=function(c){this._label.setCssClass(c);};b.prototype.show=function(){b.superClass.show.call(this);this._updatedCallback();};b.prototype.hide=function(){b.superClass.hide.call(this);this._updatedCallback();};b.prototype.setUpdatedCallback=function(c){this._updatedCallback=c;};a.gui=a.gui||{};a.gui.CollapsingGroupItem=b;}($N||{}));(function(b){function a(d,c){this._log=new b.apps.core.Log("CommonGUI","CollapsingGroupSvgItem");a.superConstructor.call(this,d);this._updatedCallback=function(){};this._container=new b.gui.Group(d);this._image=new b.gui.SVGlink(this._docRef,this._container);this._label=new b.gui.Label(this._docRef,this._container);this._container.configure({width:"37.5",height:"37.5"});this._image.configure({width:"22.5",height:"37.5"});this._label.configure({x:34,y:30,cssClass:"summaryDescription"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.AbstractComponent);a.prototype.setWidth=function(c){this._trueWidth=c;this._width=Math.round(c*this.resolutionHorizontalFactor);this._container.setWidth(c);this._updatedCallback();};a.prototype.setHref=function(c){this._image.setHref(c);};a.prototype.setText=function(c){this._label.setText(c);this.setWidth(this._label.getTrueTextLength()+this._label.getTrueX());this._updatedCallback();};a.prototype.show=function(){a.superClass.show.call(this);this._updatedCallback();};a.prototype.hide=function(){a.superClass.hide.call(this);this._updatedCallback();};a.prototype.setUpdatedCallback=function(c){this._updatedCallback=c;};b.gui=b.gui||{};b.gui.CollapsingGroupSvgItem=a;}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d);this._data.setWrapAround(false);this._items=[];this._width=1920;this._alignment=b.consts.ALIGNMENT_LEFT;this._container=new a.gui.Group(this._docRef);this._container.setWidth(this._width);this._rootSVGRef=this._container.getRootSVGRef();this.setOrientation(b.consts.ORIENTAION_VERTICAL);if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.AbstractCustomisableList);b.prototype.setDataMapper=function(c){this._dataMapper=c;var e=0,d;if(this._initialised){e=this._items.length;for(d=0;d<e;d++){this._items[d].setDataMapper(this._dataMapper);}}return this;};b.prototype.initialise=function(c){var e,d;if(!this._itemConfig.movementPositions){throw ("FixedList - initialise: No positions supplied in config");}if(!this._itemTemplate){throw ("FixedList - initialise: No list item template provided");}if(typeof(this._itemConfig.movementPositions)==="string"){e=this._itemConfig.movementPositions.split(";").length;}else{e=this._itemConfig.movementPositions.length;}for(d=0;d<e;d++){if(!this._items[d]){this._items.push(new this._itemTemplate(this._docRef));this._rootSVGRef.appendChild(this._items[d].getRootSVGRef());}this._itemConfig.movementPosition=d+1;this._items[d].configure(this._itemConfig);if(this._dataMapper){this._items[d].setDataMapper(this._dataMapper);}}this._initialised=true;if(typeof(this._itemConfig.movementPositions)==="string"){this._nextItemDistance=(this._itemConfig.movementPositions.split(";").length-1)/2;}else{this._nextItemDistance=(this._itemConfig.movementPositions.length-1)/2;}if(c){this.displayData();}};b.prototype.setAlignment=function(c){this._alignment=c;};b.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);};b.prototype.doForAllItems=function(c){var d;for(d=0;d<this._items.length;d++){c(this._items[d]);}};b.prototype.displayData=function(){var c=this._items.length,e,d;for(d=0;d<c;d++){e=this._data.getRowAtIndex(d+1);if(e){this._items[d].update(e,this._getUpdateParameter());this._items[d].show();this._items[d].unHighlight();if(e===this._data.getSelectedItem()){this._items[d].highlight();}}else{this._items[d].hide();}}this._handleItemHighlighted(this._data.getSelectedItem(),true);};b.prototype.selectPrevious=function(){this._getSelectedObject().unHighlight();this._data.selectPrevious();this._getSelectedObject().highlight();this._selectPreviousSelectableItem();};b.prototype.selectNext=function(){this._getSelectedObject().unHighlight();this._data.selectNext();this._getSelectedObject().highlight();this._selectNextSelectableItem();};b.prototype._isSelectedItemNotSelectable=function(){var c=this._data.getSelectedItem();return(c&&c.selectable!==undefined&&c.selectable===false);};b.prototype._selectNextSelectableItem=function(){var c=this._data.getActualSelectedRowIndex()+1,d=this._items.length;if(this._isSelectedItemNotSelectable()){if(c<d){this.selectNext();}else{if(c>=d){this.selectPrevious();}}}};b.prototype._selectPreviousSelectableItem=function(){var c=this._data.getActualSelectedRowIndex()+1,d=this._items.length;if(this._isSelectedItemNotSelectable()){if(c>2){this.selectPrevious();}else{if(c<=2){this.selectNext();}}}};b.prototype._getSelectedObject=function(){return this._items[this._data.getActualSelectedRowIndex()-1];};b.prototype.getCurrentIndex=function(){return this._data.getActualSelectedRowIndex();};b.prototype.focus=function(){var c=this._data.getActualSelectedRowIndex()-1;this._items[c].highlight();this._selectNextSelectableItem();};b.prototype.defocus=function(){var c=this._data.getActualSelectedRowIndex()-1;this._items[c].unHighlight();};b.prototype.keyHandler=function(d){var c=this._data.getActualSelectedRowIndex()-1,f=false,e=a.gui.FrameworkCore.getKeys();if(this._items[c].keyHandler){f=this._items[c].keyHandler(d);}if(!f){switch(d){case this._previousKey:this.selectPrevious();f=true;break;case this._nextKey:this.selectNext();f=true;break;case this._previousKeyRelease:case this._nextKeyRelease:if(this._itemHighlightedCallback){this._itemHighlightedCallback(this._data.getSelectedItem());}f=true;break;case e.KEY_RIGHT:case e.KEY_OK:this._itemSelectedCallback(this._data.getSelectedItem());f=true;break;}}return f;};b.consts=a.gui.AbstractCustomisableList.consts;b.consts.ALIGNMENT_LEFT="left";a.gui=a.gui||{};a.gui.FixedList=b;}($N||{}));(function(c){var a={SVG:{createElement:function(d,e){return d.createElement("tspan");}},HTML:{createElement:function(d,e){return d.createElement("span");}}}[c.gui.GUIObject.mode];function b(e,d){b.superConstructor.call(this,e);this._spanElement=null;this._spanCssClass="SpanTextAreaText";if(d){d.addChild(this);}}c.gui.Util.extend(b,c.gui.TextArea);b.prototype.setSpanCssClass=function(d){this._spanCssClass=d;if(this._spanElement){this._spanElement.setAttribute("class",this._spanCssClass);}};b.prototype.setSpanOnText=function(k){if(k){var g=this.getText().toUpperCase(),f=k.toUpperCase(),h,d,l=0,e=null;d=g.indexOf(f);if(d>-1){if(d>0){this._innerSVG.textContent=this.getText().substring(0,d);}else{this._innerSVG.textContent="";}l=d+k.length;this._spanElement=a.createElement(this._docRef,this._innerSVG);this._spanElement.textContent=this.getText().substring(d,l);this._spanElement.setAttribute("class",this._spanCssClass);this._innerSVG.appendChild(this._spanElement);if(l<this.getText().length){e=a.createElement(this._docRef,this._innerSVG);e.textContent=this.getText().substring(l,this.getText().length);this._innerSVG.appendChild(e);}}}else{this.setText(this.getText());}};b.prototype.getClassName=function(){return("SpanTextArea");};c.gui=c.gui||{};c.gui.SpanTextArea=b;}($N||{}));(function(a){var c,b;if(a.gui.GUIObject.mode==="HTML"){c=a.gui.Container;}else{c=function(e,d){c.superConstructor.call(this,e);this._rootSVGRef=this._docRef.createElement("g");this._innerSVG=this._docRef.createElementNS("http://www.ekioh.com/2007/ekioh","fastRect");this._rootSVGRef.appendChild(this._innerSVG);if(d){d.addChild(this);}this.unHighLight();};a.gui.Util.extend(c,a.gui.AbstractComponent);b=c.prototype;b.highLight=function(){if(this.getCssHighlightClass()){this._innerSVG.setAttribute("class",this.getCssHighlightClass());}else{this._innerSVG.setAttribute("style",this.getCssHighlightStyle());}};b.unHighLight=function(){if(this.getCssClass()){this._innerSVG.setAttribute("class",this.getCssClass());}else{this._innerSVG.setAttribute("style",this.getCssStyle());}};b.setRounding=function(d){};b.getClassName=function(){return("FastContainer");};}a.gui=a.gui||{};a.gui.FastContainer=c;}($N||{}));(function(a){var b=function(e,c){b.superConstructor.call(this,e);this._LOGO_LABEL_Y_OFFSET=8;this._DEFINITION_LABEL_Y_OFFSET=21;this._width=96;this._height=96;this._dataMapper={};this._container=new a.gui.Container(e);this._definitionLabel=new a.gui.Label(e,this._container);this._channelLogoLabel=new a.gui.Label(e,this._container);this._channelLogo=new a.gui.CachedImage(e,this._container);this._container.configure({width:this._width,height:this._height,cssClass:"blank"});this._definitionLabel.configure({x:this._width/2,y:(this._height/2)+this._DEFINITION_LABEL_Y_OFFSET,width:this._width,height:this._height,cssClass:"channelDefinitionLabel"});this._channelLogoLabel.configure({x:this._width/2,y:(this._height/2)+this._LOGO_LABEL_Y_OFFSET,width:this._width,height:this._height,cssClass:"channelLogoLabel"});var d=this;this._channelLogo.configure({width:this._width,height:this._height,loadSuccessful:function(){d._channelLogoLabel.hide();d._definitionLabel.hide();d._channelLogo.show();}});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._channelLogoLabel.setWidth(c);this._channelLogo.setWidth(c);};b.prototype.setHeight=function(c){this._height=c;this._container.setHeight(c);this._channelLogoLabel.setHeight(c);this._channelLogo.setHeight(c);};b.prototype.update=function(e,c){var d=c||this._dataMapper.getChannelLogo(e);if(this._channelLogo.getHref()!==d){this._channelLogo.hide();this._channelLogoLabel.setText(this._dataMapper.getChannelAbbreviation(e));this._definitionLabel.setText(this._dataMapper.getDefinition(e));this._channelLogoLabel.show();this._definitionLabel.show();this._channelLogo.setHref(d);}};b.prototype.setDataMapper=function(c){this._dataMapper=c;};a.gui=a.gui||{};a.gui.ChannelLogo=b;}($N||{}));(function(b){function a(e,d){a.superConstructor.call(this,e);b.apps.core.Language.adornWithGetString(a);this._log=new b.apps.core.Log("CommonGUI","EventPoster");this._LABEL_X_OFFSET=44;this._LABEL_Y_OFFSET=44;this._LOADING_WIDTH=48;this._LOADING_HEIGHT=48;this._BORDER_WIDTH=2;a._CONTENT_BLOCKED_HREF="../../../customise/resources/images/net/Mosaico_blocked_content.png";this._POSTER_PROMPT_CSS="posterPrompt";this._BOX_CSS="eventImageContainer";this._service=null;this._eventId=null;this._posterTimer=null;this._container=new b.gui.Group(this._docRef);this._box=new b.gui.Container(this._docRef,this._container);this._loadingImg=new b.gui.BufferIndicator(this._docRef,this._container);this._poster=new b.gui.Image(this._docRef,this._container);this._prompt=new b.gui.TextArea(this._docRef,this._container);this._posterImageServer=b.app.epgUtil.getPosterImageServer();this.hidePreviewArea();if(d){d.addChild(this);}this._rootSVGRef=this._container.getRootSVGRef();}b.gui.Util.extend(a,b.gui.GUIObject);var c=a.prototype;c.setWidth=function(d){this._width=d;};c.setHeight=function(d){this._height=d;};c.configureComponents=function(){var d=this;this._container.configure({width:this._width,height:this._height});this._box.configure({width:this._width,height:this._height,cssClass:this._BOX_CSS});this._loadingImg.configure({x:Math.round(this._width/2-this._LOADING_WIDTH/2),y:Math.round(this._height/2-this._LOADING_HEIGHT/2),imageWidth:this._LOADING_WIDTH,imageHeight:this._LOADING_HEIGHT,image:"../../../customise/resources/images/net/loading.png"});this._poster.configure({x:this._BORDER_WIDTH,y:this._BORDER_WIDTH,width:this._width-this._BORDER_WIDTH*2,height:this._height-this._BORDER_WIDTH*2,loadSuccessful:function(){d.posterTimerClear();d._poster.show();d._box.show();d._loadingImg.hide();},loadFailedCallback:function(){d.posterTimerClear();d._loadingImg.hide();d._showImageMissing();}});this._prompt.configure({x:this._LABEL_X_OFFSET,y:this._LABEL_Y_OFFSET,width:this._width-this._LABEL_X_OFFSET*2,height:this._height-this._LABEL_Y_OFFSET,visible:false});};c.updateEventPoster=function(g){var d=null,k=b.app.ParentalControlUtil.isChannelOrProgramLocked(g),h,f=this;this._callbackId=new Date().valueOf();h=this._callbackId;function e(l){f._poster.show();if(l&&l.promoImage){if(h!==f._callbackId){return;}f.setPoster(f._posterImageServer+l.promoImage);}else{f._showImageMissing();}}d=b.platform.btv.EPG.getChannelByServiceId(g.serviceId);if(k&&(d&&b.app.genreUtil.isAdultChannel(d))){this._showBlocked();return;}if(this._poster.getHref()===""){this._box.hide();}if(g.promoImage){this.setPoster(this._posterImageServer+g.promoImage);}else{b.app.epgUtil.getEventImageFromMDS(g,e);}};c._showBlocked=function(){this._poster.setHref(a._CONTENT_BLOCKED_HREF);this._poster.show();this._setBlockText();};c._showImageMissing=function(){this.hidePreviewArea();};c.posterTimerClear=function(){if(this._posterTimer){clearTimeout(this._posterTimer);this._posterTimer=null;}};c.posterTimerStart=function(){var d=this;this.posterTimerClear();this._posterTimer=setTimeout(function(){d._loadingImg.hide();if(d._poster.getHref()&&(d._poster.getHref().indexOf("Mosaico_blocked_content.png"))>-1){d._poster.show();}},3000);};c._setCurrentService=function(d){this._service=d;};c.setCurrentEventId=function(d){this._eventId=d;};c._setBlockText=function(){this._prompt.setText(a.getString("blockedContent"));this._prompt.setCssClass("posterPrompt ");this._prompt.show();};c._showBlockText=function(d,f){var e=false;this._prompt.setText(" ");this._box.show();this._loadingImg.hide();if(b.app.ParentalControlUtil.isChannelOrProgramLocked(f)){if(b.app.genreUtil.isAdultChannel(d)){this._showBlocked();}this._poster.show();e=true;}if(!e){this._loadingImg.show();this._prompt.hide();}};c.showUnsubscribeText=function(){this._prompt.setText(" ");this._box.show();this._loadingImg.hide();this._poster.hide();this._prompt.show();this._prompt.setText(a.getString("unSubscribedContent"));this._prompt.setCssClass("mosaicUnsubscribePrompt");};c.clearPoster=function(){this.setPoster("");this._box.hide();};c.setPoster=function(d){this._log=new b.apps.core.Log("setPoster",d);this._prompt.hide();this._poster.setHref(d);this.posterTimerStart();};c.hidePreviewArea=function(){this._box.hide();this._loadingImg.hide();this._prompt.hide();this._poster.hide();};c.showPreviewArea=function(){this._box.show();this._prompt.hide();this._loadingImg.show();this._poster.hide();};b.gui=b.gui||{};b.gui.EventPoster=a;}($N||{}));(function(a){function c(e,d){c.superConstructor.call(this,e);a.apps.core.Language.adornWithGetString(c);this._log=new a.apps.core.Log("CommonGUI","EventPreview");this._BOX_CSS="mosaicPreviewBackground";this._POSTER_PROMPT_CSS="mosaicPosterPrompt";this._LABEL_X_OFFSET=66;this._LABEL_Y_OFFSET=85.5;this._playoutCasId={casId:null};this._Playout={url:null,isLive:false,isMusic:null,context:null,serviceId:null};}a.gui.Util.extend(c,a.gui.EventPoster);var b=c.prototype;b._showBlockText=function(d,f){var e=false;this._prompt.setText(" ");this._box.show();this._loadingImg.hide();if(a.app.ParentalControlUtil.isChannelOrProgramLocked(f)||a.app.genreUtil.isAdultChannel(d)){this._showBlocked();this._poster.show();e=true;}if(!e){this._loadingImg.show();this._prompt.hide();}};b.updatePreview=function(d,e){this._setCurrentService(d);this._showBlockText(d,e);};b.showSmartCardNotInsertedText=function(){this._prompt.setText(" ");this._box.show();this._loadingImg.hide();this._poster.hide();this.setPoster("");this._prompt.show();this._prompt.setText(c.getString("caErrorSmartcardRemovedPipTitle"));this._prompt.setCssClass("mosaicUnsubscribePrompt");};b.setScalePlayout=function(d,f,e){a.app.AudioManager.mute();a.app.fullScreenPlayer.tuner.hideVideo();this._Playout.url=d.uri;this._Playout.isMusic=a.platform.btv.EPG.isRadioChannel(d);this._Playout.serviceId=d.serviceId;this._playoutCasId.casId=(d.conditionalAccessIDs)?d.conditionalAccessIDs[0]:null;a.app.fullScreenPlayer.requestPlayout(this._Playout,true,this._playoutCasId);a.apps.util.EventManager.fire("channelChanged",d);};b.showNoResourcePoster=function(){this._prompt.setText(" ");this._box.show();this._loadingImg.hide();this._prompt.show();this._prompt.setCssClass("mosaicUnsubscribePrompt");};b.tuneScaledVideo=function(d,e){if(d){this.setScalePlayout(d,e,false);}};a.gui=a.gui||{};a.gui.EventPreview=c;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container=new a.gui.ClippedGroup(c);this._container.setWidth(1376);this._container.setHeight(102);this._container.configure({x:24});this._INNER_CONTENT_HEIGHT=95;this._logoHighlight=new a.gui.Container(c,this._container);this._logoHighlight.configure({x:21,width:100,height:102,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._highlight=new a.gui.Container(c,this._container);this._highlight.configure({x:145,width:1173,height:102,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._channelLogo=new a.gui.ChannelLogo(c,this._container);this._channelLogo.configure({x:24,y:3,width:this._INNER_CONTENT_HEIGHT,height:this._INNER_CONTENT_HEIGHT});this._title=new a.gui.Label(c,this._container);this._title.configure({x:169,y:40,width:1120,cssClass:"dialogSubtitle"});this._subTitle=new a.gui.Label(c,this._container);this._subTitle.configure({x:169,y:85,width:1300,cssClass:"menuSubTitle"});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("channelListItemHighlight");this._logoHighlight.setCssClass("channelListItemHighlight");this._logoHighlight.show();this._highlight.show();}else{this._logoHighlight.hide();this._highlight.hide();}};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.updateIcon=function(d){var c=this._dataMapper.getChannelLogo(d);if(c){this._channelLogo.update(d);this._channelLogo.show();}else{this._channelLogo.hide();}};b.prototype.update=function(c){var d={};if(c){this._title.setText(this._dataMapper.getTitle(c));this._subTitle.setText(this._dataMapper.getSubTitle(c));d=a.app.epgUtil.getServiceById(c.serviceId);this.updateIcon(d);}};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};b.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};b.prototype.setCssClassTitle=function(c){this._title.setCssClass(c);};b.prototype.setCssClassSubtitle=function(c){this._subTitle.setCssClass(c);};b.prototype.setDataMapper=function(c){b.superClass.setDataMapper.call(this,c);this._channelLogo.setDataMapper(c);};a.gui=a.gui||{};a.gui.GenericReminderListItem=b;}($N||{}));(function(b){var a=8000;function c(d){c.superConstructor.call(this,d);var e=this;this._log=new b.apps.core.Log("HELPER","PlayoutManager");this._NOTIFY_SECONDS=0;this._parentalControlHelper=b.app.ParentalControlUtil;this._powerManager=b.common.helper.PowerManager;this._activeRequest=null;this._activeManage=null;this._casIdObj=null;this._lastLiveRequest=null;this._currentServiceId=null;this._locked=null;this._managed=false;this._backPlateImage=null;this._backPlateLockHref=null;this._backPlateNoVideoHref=null;this._bufferIcon=null;this._liveBufferIcon=null;this._isReconnecting=false;this._position=0;this._bufferTimer=null;this._retuneTimer=null;this._retuneCounter=0;this._MAX_RETUNE_ATTEMPTS=1;this._isReconnectingDialogEnabled=false;this._BUFFERING_TIME_BEFORE_RECONNECT=30000;this._isPlayerConnectFailed=false;this._isFirstRequestPlayout=false;this._audioLanguage=null;this._subtitleLanguage=null;this._prefSubState=null;this._retryCallback=null;this.contentStartFailed=b.app.constants.CA_PLAY_ERRORS.contentStartFailedReason;this.contentError=b.app.constants.CA_PLAY_ERRORS.contentErrorReason;this.streamDisabled=b.app.constants.CA_PLAY_ERRORS.streamDisabledReason;this._requestPlayoutCallback=function(){};this._pvrPlayerParentalLockCallback=function(){};this._tuneBlockedByConflictManagmentCallback=function(){};this._streamEnabledCallback=function(){};this._pinPopUpOnBlockedEventCallback=function(){};this._hidePinPopUpForUnblockedEventCallback=function(){};this._playerBufferingListener=function(f){e._clearBufferTimer();e._bufferIcon.show();e._bufferTimer=setInterval(function(){e._reconnectToStream();},e._BUFFERING_TIME_BEFORE_RECONNECT);};this._playerPlayingListener=function(f){b.app.ConditionalAccessCAK73.setStreamDisabled(false);e._bufferIcon.hide();if(e._isReconnecting&&e._activeRequest&&!e._activeRequest.isLive){e.setPlaybackPosition(e._position);e._position=0;}e._clearBufferTimer();e._clearRetuneTimer();e._retuneCounter=0;b.app.ErrorMessage.hideNoSignalDialogue();b.app.PPVHelper.hidePPVRelatedDialogs();b.app.ErrorMessage.hideErrorMessageDialogWithId(b.app.ErrorMessageType.reconnecting);e._isReconnecting=false;e._isPlayerConnectFailed=false;};this._playerPlayFailedListener=function(f){if(!e._isReconnecting&&e._activeRequest&&!e._activeRequest.isLive){e._position=f.position;}if(f&&f.ContentErrorInfo&&f.ContentErrorInfo.reason){switch(f.ContentErrorInfo.reason){case e.contentError.CA_ACCESS_DENIED:case e.contentError.CA_ACCESS_BLACKED_OUT:case e.contentError.CA_NO_VALID_SECURE_DEVICE:case e.contentError.CA_ACCESS_PAIRING_REQUIRED:case e.contentError.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:b.app.ConditionalAccessCAK73.handleError(f.ContentErrorInfo.reason);break;}}};this._streamDisabledListener=function(f){b.app.ConditionalAccessCAK73.setStreamDisabled(true);b.app.TracksUtil.hideSubtitles();switch(f.streamDisabledInfo.reason){case e.streamDisabled.CA_ACCESS_DENIED:case e.streamDisabled.CA_ACCESS_BLACKED_OUT:case e.streamDisabled.CA_NO_VALID_SECURE_DEVICE:case e.streamDisabled.CA_ACCESS_PAIRING_REQUIRED:case e.streamDisabled.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:b.app.ConditionalAccessCAK73.handleError(f.streamDisabledInfo.reason);break;}};this._streamEnabledListener=function(f){b.app.ConditionalAccessCAK73.setStreamDisabled(false);b.app.PPVHelper.hidePPVRelatedDialogs();b.app.TracksUtil.showSubtitles();if(e._streamEnabledCallback){e._streamEnabledCallback();}};this._isTuneBlockByConflictManagement=function(f){return(f.contentStartFailedInfo.reason===e.contentStartFailed.LACK_OF_RESOURCES||f.contentStartFailedInfo.reason===e.contentStartFailed.CONFLICT);};this._playerConnectFailedListener=function(k){var g,f,h;if(e._isTuneBlockByConflictManagement(k)){if(e._isFirstRequestPlayout===true){g=b.app.PVRUtil.getActiveRecordingsOrderedByJobId();if(g.length&&g[0].serviceId){b.app.AutoTuneHelper.tuneToChannel(g[0].serviceId,true);}}else{g=b.app.PVRUtil.getActiveAndSuspendedRecordingsOrderedByJobId();f=b.app.epgUtil.getEvent("current",e._currentServiceId);h=(b.app.Config.getConfigValue("faked.playback")==="true")?(b.app.StringUtil.isStringStartsWith(k.contentStartFailedInfo.sourceUri,"rtsp://")||(k.contentStartFailedInfo.sourceUri===b.app.Config.getConfigValue("faked.playback.serviceUri"))):(b.app.StringUtil.isStringStartsWith(k.contentStartFailedInfo.sourceUri,"rtsp://"));if(h){b.app.Conflicts.showConflictDialog(f,g,b.app.PVRUtil.VOD_PLAYBACK_CONFLICT,e._retryCallback||function(){});}else{if(g&&g.length){b.app.Conflicts.showConflictDialog(f,g,b.app.PVRUtil.WATCH_CONFLICT,function(){e._tuneToChannel(e._activeRequest,e._activeManage,e._casIdObj);});}else{b.app.DialogueHelper.createAndShowDialogue(b.app.constants.DLG_TUNE_FAILED_MSG);}e._tuneBlockedByConflictManagmentCallback(f);}}}else{switch(k.contentStartFailedInfo.reason){case e.contentStartFailed.CA_ACCESS_DENIED:case e.contentStartFailed.CA_ACCESS_BLACKED_OUT:case e.contentStartFailed.CA_NO_VALID_SECURE_DEVICE:case e.contentStartFailed.CA_ACCESS_PAIRING_REQUIRED:case e.contentStartFailed.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:b.app.ConditionalAccessCAK73.handleError(k.contentStartFailedInfo.reason);break;case e.contentStartFailed.CONTENT_PLAY_FAILED_REASON_NO_LOCK:if(e._retuneCounter<=e._MAX_RETUNE_ATTEMPTS){e._retuneToCurrentChannel();e._retuneCounter++;}else{e._clearRetuneTimer();if(b.common.helper.PowerManager.getCurrentPowerMode()===b.common.helper.PowerManager.SYSTEM_POWER_NORMAL){if(b.apps.core.ContextManager.getActiveContext().getId()==="ZAPPER"){b.app.ErrorMessage.showErrorDialog(b.app.ErrorMessageType.noSignal);}e._retuneTimer=setInterval(function(){e._retuneToCurrentChannel();},b.app.constants.NO_TUNER_LOCK_CHANNEL_RETUNE_TIMEOUT);}}break;}}e._isPlayerConnectFailed=true;};this._reachedEndOfContentListener=function(f){e._returnToLive();};this._reachedStartOfContentListener=function(g){var f=b.app.epgUtil.getEvent("current",e._currentServiceId);g.event=f;};this._onBlockedCallback=function(){e._locked=true;e._manageBackPlateForContent();e._pinPopUpOnBlockedEventCallback();var f=b.app.epgUtil.getEvent("current",e._currentServiceId);b.app.TracksUtil.deactivateAudioTrack();};this._onUnblockedCallback=function(){e._locked=false;e._hidePinPopUpForUnblockedEventCallback();b.app.fullScreenPlayer.tuner.showVideo();e._manageBackPlateForContent((e._activeRequest?e._activeRequest.isMusic:false));b.app.TracksUtil.activateAudioTrack();b.app.TracksUtil.activateCurrentPrefSubtitleTrack();};this._resourcesLostListener=function(){var g=b.platform.btv.PVRManager.getActiveRecordings(),f;if(g.length>0){f=e._createPlayoutRequestFromTaskId(g[0].taskId);e.requestPlayout(f,true,e._casIdObj);}};this._createPlayoutRequestFromTaskId=function(g){var k=b.platform.btv.EPG.getEventById(b.platform.btv.PVRManager.getTask(g).eventId),f=b.platform.btv.EPG.getChannelByServiceId(k.serviceId),h={url:f.uri,isMusic:b.platform.btv.EPG.isRadioChannel(f),serviceId:f.serviceId,context:"ZAPPER",casId:(f.conditionalAccessIDs)?f.conditionalAccessIDs[0]:null};return h;};b.platform.btv.EPG.setEventStartCallback(e._reachedStartOfContentListener);b.apps.util.EventManager.subscribe("settingsUpdated",this._setAndActivateAudioAndSubtitleLanguages,this);}b.apps.util.Util.extend(c,b.platform.output.VideoPlayer);c.prototype.initialise=function(d){this.setBackPlateImage(d.fullScreenPlayer.fullScreenBackPlate);this.setLiveBufferIcon(d.fullScreenPlayer.bufferingIcon);this.setBackPlateLockHref("");this.setBackPlateNoVideoHref("");this.setTrickPlayDirectMode(false);this.registerPlayerListeners();if(b.app.EnvironmentUtil.isIPEnabled()){this.registerPlayerFailureListeners();}this.registerStreamDiabledListeners();this.registerStreamEnabledListeners();};c.prototype._retuneToCurrentChannel=function(){if(this._lastLiveRequest){this.requestPlayout(this._lastLiveRequest,true,this._liveCasIdObj,this._retryCallback);}};c.prototype._returnToLive=function(){if(!this._activeRequest.url){this.getPlayer().jumpToLive();}else{if(this._lastLiveRequest){if(this._activeRequest.url&&(b.app.StringUtil.isStringStartsWith(this._activeRequest.url,"pvr://")||b.app.StringUtil.isStringStartsWith(this._activeRequest.url,"rtsp://")||(b.app.StringUtil.isStringStartsWith(this._activeRequest.url,"file://")||(b.app.StringUtil.isStringStartsWith(this._activeRequest.url,"dlna://")||(this._activeRequest.url===b.app.Config.getConfigValue("faked.playback.serviceUri")))))){this.requestPlayout(this._lastLiveRequest,true,this._liveCasIdObj);}}else{this._manageBackPlateForContent(true);}}};c.prototype._reconnectToStream=function(){this._bufferIcon.show();if(this._isReconnectingDialogEnabled){b.app.ErrorMessage.showErrorDialog(b.app.ErrorMessageType.reconnecting);}this.tuner.disconnect();if(b.platform.system.Preferences.get(b.app.constants.PREF_PRM_ENABLED)==="true"){b.app.ca.disposeLicense();}this.requestPlayout(this._activeRequest,this._activeManage,this._casIdObj);this._isReconnecting=true;};c.prototype._clearBufferTimer=function(){if(this._bufferTimer){clearInterval(this._bufferTimer);this._bufferTimer=null;}};c.prototype._clearRetuneTimer=function(){if(this._retuneTimer){clearInterval(this._retuneTimer);this._retuneTimer=null;}};c.prototype._manageBackPlateForContent=function(d){if(this._backPlateImage){if(d&&!this._locked){this._backPlateImage.setHref(this._backPlateNoVideoHref);this._backPlateImage.show();}else{if(this._locked){this._backPlateImage.setHref(this._backPlateLockHref);this._backPlateImage.show();this._pvrPlayerParentalLockCallback(true);}else{this._backPlateImage.hide();this._pvrPlayerParentalLockCallback(false);}}}};c.prototype.setRequestPlayoutCallback=function(d){this._requestPlayoutCallback=d||function(){};};c.prototype.setTuneBlockedByConflictManagmentCallback=function(d){this._tuneBlockedByConflictManagmentCallback=d||function(){};};c.prototype.setPinPopUpOnBlockedEventCallback=function(d){this._pinPopUpOnBlockedEventCallback=d||function(){};};c.prototype.setHidePinPopUpForUnblockedEventCallback=function(d){this._hidePinPopUpForUnblockedEventCallback=d||function(){};};c.prototype.setBackPlateImage=function(d){this._backPlateImage=d;};c.prototype.setBackPlateLockHref=function(d){this._backPlateLockHref=d;};c.prototype.setBackPlateNoVideoHref=function(d){this._backPlateNoVideoHref=d;};c.prototype.setBufferIcon=function(d){if(this._bufferIcon){this._bufferIcon.hide();}this._bufferIcon=d;};c.prototype.setBufferIconToLive=function(){if(this._bufferIcon){this._bufferIcon.hide();}this._bufferIcon=this._liveBufferIcon;};c.prototype.setLiveBufferIcon=function(d){this._liveBufferIcon=d;this.setBufferIconToLive();};c.prototype.enableReconnectingDialog=function(){this._isReconnectingDialogEnabled=true;};c.prototype.disableReconnectingDialog=function(){this._isReconnectingDialogEnabled=false;};c.prototype.registerPlayerListeners=function(){this.registerPlayerPlayingListener(this._playerPlayingListener);this.registerPlayerPlayingListener(this._playerPlayingListener);this.registerBlockedCallbacks();this.registerResourcesLostListener(this._resourcesLostListener);this.registerPlayerConnectFailedListener(this._playerConnectFailedListener);};c.prototype.registerPlayerFailureListeners=function(){this.registerPlayerBufferingListener(this._playerBufferingListener);this.registerPlayerPlayFailedListener(this._playerPlayFailedListener);this.registerPlayerConnectFailedListener(this._playerConnectFailedListenerForHlsPlayer);};c.prototype.registerStreamDiabledListeners=function(){this.registerStreamDisabledListener(this._streamDisabledListener);};c.prototype.registerStreamEnabledListeners=function(){this._player.addEventListener("onStreamEnabled",this._streamEnabledListener);};c.prototype.registerConnectFailedListener=function(){this.registerPlayerConnectFailedListener(this._playerConnectFailedListener);};c.prototype.registerPlayErrorListener=function(d){this._player.addEventListener("onPlayError",d);};c.prototype.unregisterPlayErrorListener=function(d){this._player.removeEventListener("onPlayError",d);};c.prototype.unregisterConnectFailedListener=function(){this.unregisterPlayerConnectFailedListener(this._playerConnectFailedListener);};c.prototype.unregisterStreamEnabledListeners=function(){this._player.removeEventListener("onStreamEnabled",this._streamEnabledListener);};c.prototype.unregisterStreamDiabledListeners=function(){this.unregisterStreamDisabledListener(this._streamDisabledListener);};c.prototype.unregisterPlayerListeners=function(){this.unregisterPlayerPlayingListener(this._playerPlayingListener);this.unregisterPlayerPlayingListener(this._playerPlayingListener);this.unregisterPlayerConnectFailedListener(this._playerConnectFailedListener);};c.prototype.unregisterPlayerFailureListeners=function(){this.unregisterPlayerBufferingListener(this._playerBufferingListener);this.unregisterPlayerPlayFailedListener(this._playerPlayFailedListener);this.unregisterPlayerConnectFailedListener(this._playerConnectFailedListener);this.unregisterPlayerConnectFailedListener(this._playerConnectFailedListenerForHlsPlayer);};c.prototype.registerReviewBufferCallbacks=function(d,e){if(d){this._player.addEventListener("onReviewBufferStarted",d);}if(e){this._player.addEventListener("onReviewBufferStopped",e);this._player.addEventListener("onReviewBufferDisabled",e);}};c.prototype.unregisterReviewBufferCallbacks=function(d,e){if(d){this._player.removeEventListener("onReviewBufferStarted",d,false);}if(e){this._player.removeEventListener("onReviewBufferStopped",e,false);this._player.removeEventListener("onReviewBufferDisabled",e,false);}};c.prototype.registerPvrPlayerParentalLockListener=function(d){this._pvrPlayerParentalLockCallback=d||function(){};};c.prototype.unregisterPvrPlayerParentalLockListener=function(d){this._pvrPlayerParentalLockCallback=function(){};};c.prototype.setStreamEnabledCallback=function(d){this._streamEnabledCallback=d;};c.prototype._setAndActivateAudioAndSubtitleLanguages=function(){this._audioLanguage=b.app.TracksUtil.getAudioLanguageFromPreferences();this._prefSubState=b.platform.system.Preferences.get(b.app.constants.PREF_SUBTITLE_STATE)||b.app.constants.SUBTITLE_STATE_DEFAULT;if(this._prefSubState!==b.app.constants.SUBTITLE_STATE_OFF){this._subtitleLanguage=b.app.TracksUtil.getLanguageForSubtitleTrackBasedOnPreference(this._prefSubState);}b.app.fullScreenPlayer.tracks.activateAudioTrackByLanguage(this._audioLanguage);if(this._subtitleLanguage){b.app.fullScreenPlayer.tracks.activateSubtitleTrackByLanguage(this._subtitleLanguage);}else{b.app.TracksUtil.deactivateCurrentSubtitleTrack();}};c.prototype._tuneToChannel=function(g,f,e){var d=g.bookmark;this._activeManage=f;this._locked=false;if(this.isManaged()){this.unManageStream();}if(g.isLive){this._isFirstRequestPlayout=g.isFromLaunch;this._lastLiveRequest=g;this._liveCasIdObj=e;}this._activeRequest=g;this._casIdObj=e;if(f){this.manageStream(g.serviceId);}this.playStream(g.url,d);this._manageBackPlateForContent(g.isMusic);this._isReconnecting=false;this._setAndActivateAudioAndSubtitleLanguages();};c.prototype.requestPlayout=function(f,e,d,g){if(this._activeRequest!==f){this._retuneCounter=0;}this._retryCallback=g;this._tuneToChannel(f,e,d);};c.prototype.jumpToLive=function(){var d=this.getLastLiveRequest();if(d){this._returnToLive();}};c.prototype.stopPlayout=function(d){if(d){this.jumpToLive();}this._locked=false;if(this.getActivePlayoutRequest()&&this.getActivePlayoutRequest().isLive){this._lastLiveRequest=null;this._liveCasIdObj=null;}this.tuner.disconnect();this._manageBackPlateForContent(true);this._isReconnecting=false;this._retryCallback=null;};c.prototype.getActivePlayoutRequest=function(){return this._activeRequest;};c.prototype.isActiveRequestLive=function(){return this._activeRequest.isLive?true:false;};c.prototype.getActiveContentObj=function(){return this._casIdObj;};c.prototype.getLastLiveRequest=function(){return this._lastLiveRequest;};c.prototype.isPlayerConnectFailed=function(){return this._isPlayerConnectFailed;};c.prototype.applyParentalControl=function(g){var f=this,e,d;this._previousId=this._currentServiceId;this.previousService=b.app.epgUtil.getServiceById(this._previousId);g=g||this._currentServiceId;e=b.app.epgUtil.getEvent("current",g);d=b.app.epgUtil.getServiceById(g);this._locked=this._parentalControlHelper.isChannelOrProgramLocked(e);if(e.eventId===b.app.epgUtil.BAD_EVENT_ID){e.serviceId=g;}return this._locked;};c.prototype.manageStream=function(d){this._managed=true;if(this._activeRequest&&!this._activeRequest.isLive){this.registerPlayerReachedEndListener(this._reachedEndOfContentListener);}else{if(this._activeRequest&&this._activeRequest.isLive){if(this._currentServiceId){b.platform.btv.EPG.unmonitorStartOfEvents(this._currentServiceId);}this.applyParentalControl(d);b.platform.btv.EPG.monitorStartOfEvents(d,this._NOTIFY_SECONDS);}}this._currentServiceId=d;};c.prototype.unManageStream=function(){this._managed=false;this.unregisterPlayerReachedEndListener(this._reachedEndOfContentListener);};c.prototype.isManaged=function(){return this._managed;};c.prototype.playStream=function(e,d){var f=this;if(d){e+="&startPos="+d*1000;}this.tuner.tune(e,d);};c.prototype.setCurrentServiceId=function(d){this._currentServiceId=d;};c.prototype.setVideoLayerZorder=function(d){var f=(this._player.videoLayerProperties.zorder===this._player.VIDEO_LAYER_ZORDER_TOP),e=((f&&d)||(!f&&!d));if(e){this._player.videoLayerProperties={opacity:1,zorder:(d)?this._player.VIDEO_LAYER_ZORDER_BOTTOM:this._player.VIDEO_LAYER_ZORDER_TOP};}};c.prototype.registerBlockedCallbacks=function(){b.app.fullScreenPlayer.registerLockerStatusUpdateListener(this._onBlockedCallback);b.app.fullScreenPlayer.registerLockerUnlockListener(this._onUnblockedCallback);};c.prototype.unregisterBlockedCallbacks=function(){b.app.fullScreenPlayer.unregisterLockerStatusUpdateListener(this._onBlockedCallback);b.app.fullScreenPlayer.unregisterLockerUnlockListener(this._onUnblockedCallback);};b.app=b.app||{};b.app.PlayoutManager=c;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);var d=this;this._log=new b.apps.core.Log("HELPER","PIPPlayer");}b.apps.util.Util.extend(a,b.platform.output.VideoPlayer);a.prototype.initialise=function(c){this.smallVideoGroup=c.smallVideoGroup;this.sourceWindowX=this.windowX=c.smallVideoGroup.smallScreenBorder.getX();this.sourceWindowY=this.windowY=c.smallVideoGroup.smallScreenBorder.getY();this.sourceWindowW=this.windowW=c.smallVideoGroup.smallScreenBorder.getWidth();this.sourceWindowH=this.windowH=c.smallVideoGroup.smallScreenBorder.getHeight();};a.prototype.updatePipWindow=function(c,d){this.smallVideoGroup.smallScreenBorder.setX(c);this.smallVideoGroup.smallScreenVideo.setX(c+2);this.smallVideoGroup.smallScreenBorder.setWidth(d);this.smallVideoGroup.smallScreenVideo.setWidth(d-6);};a.prototype.resetPipWindow=function(){var f=1.5,c=this.sourceWindowX*f,g=this.sourceWindowY*f,d=this.sourceWindowW*f,e=this.sourceWindowH*f;this.smallVideoGroup.smallScreenBorder.setX(c);this.smallVideoGroup.smallScreenVideo.setX(c+2);this.smallVideoGroup.smallScreenBorder.setY(g);this.smallVideoGroup.smallScreenVideo.setY(g+3);this.smallVideoGroup.smallScreenBorder.setWidth(d);this.smallVideoGroup.smallScreenVideo.setWidth(d-6);this.smallVideoGroup.smallScreenBorder.setHeight(e);this.smallVideoGroup.smallScreenVideo.setHeight(e-6);};a.prototype.requestPlayoutWithoutPlay=function(c){if(b.platform.system.Preferences.get(b.app.constants.PREF_PRM_ENABLED)!=="true"){if(this.tuner.getCurrentUri()!==c){this.tuner.tuneWithoutPlay(c);}}else{this.tuner.disconnect();}};a.prototype.activatePIPVideoTrack=function(){var c=b.app.smallScreenPlayer.tracks.getVideoTracks();if(c[0]){b.app.smallScreenPlayer.tracks.activateTrack(c[0]);}};a.prototype.deactivatePIPVideoTrack=function(){var c=b.app.smallScreenPlayer.tracks.getActiveVideoTrack();if(c){b.app.smallScreenPlayer.tracks.deactivateTrack(c);}};a.prototype.stopPIPVideo=function(){this._player.stop();};a.prototype.getVideoDetail=function(){return this._player.videoDetails;};a.prototype.showHideSmallVideoLayer=function(c){b.app.fullScreenPlayer.setVideoLayerZorder(c);};a.prototype.registerStreamAvailableListener=function(c){this._player.addEventListener("onStreamAvailable",c);};a.prototype.unregisterStreamAvailableListener=function(c){this._player.removeEventListener("onStreamAvailable",c);};a.prototype.registerStreamEnabledListeners=function(c){this._player.addEventListener("onStreamEnabled",c);};a.prototype.unregisterStreamEnabledListeners=function(c){this._player.removeEventListener("onStreamEnabled",c);};a.prototype.registerBlockedCallbacks=function(c,d){b.app.smallScreenPlayer.registerLockerStatusUpdateListener(c);b.app.smallScreenPlayer.registerLockerUnlockListener(d);};a.prototype.unregisterBlockedCallbacks=function(c,d){b.app.smallScreenPlayer.unregisterLockerStatusUpdateListener(c);b.app.smallScreenPlayer.unregisterLockerUnlockListener(d);};a.prototype.registerStreamStoppedListeners=function(c){this._player.addEventListener("onStreamStopped",c);};a.prototype.unregisterStreamStoppedListeners=function(c){this._player.removeEventListener("onStreamStopped",c);};a.prototype.registerIframeDecodeListeners=function(c){this._player.addEventListener("onIframeDecode",c);};a.prototype.unregisterIframeDecodeListeners=function(c){this._player.removeEventListener("onIframeDecode",c);};b.app=b.app||{};b.app.PIPPlayer=a;}($N||{}));(function(b){function a(e){var d=1920;var c=1080;a.superConstructor.call(this,e);this._backgroundContainer=new b.gui.Group(e,this._container);this._backgroundContainer.configure({x:0,y:0,width:d,height:c});}b.gui.Util.extend(a,b.gui.AbstractDialog);b.gui=b.gui||{};b.gui.AbstractConfirmationDialog=a;}($N||{}));(function(a){function c(k,n){var d=345,f=1920,e=1080,g=210,m=1237,l=60,h;c.superConstructor.call(this,k);this.INDENTATION=k.indentation||d;this._docRef=k;this.ORIENTATION="HORIZONTAL";this.BUTTON_HORIZONTAL_SPACING=30;this.BUTTON_VERTICAL_SPACING=30;this.VERTICAL_CHAR_COUNT=40;this.DIALOGUE_BACKPLATE_Y=236;this.DIALOGUE_BACKPLATE_H=608;this.verticalButtonMode=false;this.numberOfButtons=0;this.HORIZONTAL_BUTTON_WIDTH=210;this.HORIZONTAL_MOVEMENT_POSITIONS=[];this.VERTICAL_MOVEMENT_POSITIONS=[];this.OPACITY_VALUES=[];this.TITLE_IMAGE_SPACING=20;this.ERROR_HORIZONTAL_POS=1800;this._useRealMessageHeight=true;for(h=0;h<5;h++){this.HORIZONTAL_MOVEMENT_POSITIONS.push({x:(g+this.BUTTON_HORIZONTAL_SPACING)*h,y:0});this.VERTICAL_MOVEMENT_POSITIONS.push({x:0,y:(l+this.BUTTON_VERTICAL_SPACING)*h});this.OPACITY_VALUES.push(1);}this._dialogueBackground=new a.gui.BackgroundBox(k,this._backgroundContainer);this._dialogueBackground.configure({x:0,y:0,width:f,height:e,cssClass:"dialogueBackground"});this._dialogueBackplate=new a.gui.Container(k,this._backgroundContainer);this._dialogueBackplate.configure({x:-2,y:this.DIALOGUE_BACKPLATE_Y,width:f+4,height:this.DIALOGUE_BACKPLATE_H,cssClass:"dialogueBackplate"});this._titleImage=new a.gui.Image(k,this._backgroundContainer);this._titleImage.configure({x:this.INDENTATION,y:0,width:60,height:60,visible:false});this._alertImageBackGround=new a.gui.Container(k,this._backgroundContainer);this._alertImageBackGround.configure({x:0,y:386,width:267,height:266,cssClass:"displayQrCodeBackground",visible:false});this._alertImage=new a.gui.Image(k,this._backgroundContainer);this._alertImage.configure({x:114,y:476,width:177,height:177,href:"customise/resources/images/%RES/icons/Icn_AlertLarge.png",opacity:0.2,visible:false});this._backplateUpperGlow=new a.gui.BackgroundBox(k,this._backgroundContainer);this._backplateUpperGlow.configure({x:0,y:186,width:f,height:50,cssClass:"dialogueGlowUpper"});this._backplateLowerGlow=new a.gui.BackgroundBox(k,this._backgroundContainer);this._backplateLowerGlow.configure({x:0,y:842,width:f,height:50,cssClass:"dialogueGlowLower"});this._title.configure({x:this.INDENTATION,y:0,cssClass:"dialogTitle"});this._keypad=null;this._message.configure({visible:false});this._messageText=new a.gui.TextArea(k,this._container);this._messageText.configure({x:this.INDENTATION,y:50,width:f-(this.INDENTATION*2),maxHeight:348,cssClass:"dialogMessage"});this._title.bringToFront();this._errorCode=new a.gui.Label(k,this._container);this._errorCode.configure({x:1920-this.INDENTATION,cssClass:"errorCode",visible:false});this._alertImageText=new a.gui.Label(k,this._container);this._alertImageText.configure({x:645,y:67.5+this.DIALOGUE_BACKPLATE_Y,width:1000,visible:false,cssClass:"messageListItemTitle"});this._alertImageSubText=new a.gui.TextArea(k,this._container);this._alertImageSubText.configure({x:645,y:79.5+this.DIALOGUE_BACKPLATE_Y,width:1000,visible:false,cssClass:"fullViewLeftSubtitle fontSize22"});this._dataMapper={getTitle:function(o){return o.name;},isVertical:function(){return false;},getHorizontalItemWidth:function(){return g;},getVerticalItemWidth:function(){return m;},getItemHeight:function(){return l;}};this._menu=this.setupFixedList();this._highlightedItemLabel=new a.gui.Label(k,this._container);this._MENU_CONF={itemTemplate:a.gui.SubMenuItem};this._container.addChild(this._menu);this._container.addChild(this._highlightedItemLabel);if(n){n.addChild(this);}}a.gui.Util.extend(c,a.gui.AbstractConfirmationDialog);var b=c.prototype;b.setupFixedList=function(){var d=new a.gui.FixedList(this._docRef,this._container);d.configure({x:this.INDENTATION,y:650,width:462});d.setWrapAround(false);d.getItemConfig().opacityValues=this.OPACITY_VALUES;d.setItemTemplate("ButtonGroupItem");return d;};b.layoutDialogue=function(n){var h=47,k=60,f=a.app.DialogueHelper.configureBackPlateUsingContent(this._title,n,this._messageText,h,this.numberOfButtons,k,this.BUTTON_VERTICAL_SPACING,this.verticalButtonMode,this._useRealMessageHeight),o=f.backplateY,l=f.backplateH,e=f.backplateUpperGlow,g=f.backplateLowerGlow,m=f.overallHeightOfContent,d=f.heightOfButtons,p=f.messageTextConfig;this._dialogueBackplate.configure({y:o,height:l});this._backplateUpperGlow.configure({y:e});this._backplateLowerGlow.configure({y:g});if(p){this._messageText.configure(p);}this._errorCode.setY(this._menu.getTrueY()+25.5);a.app.DialogueHelper.layoutConfirmationDialog(this._title,n,this._messageText,this._menu,o,l,h,d,m);};b.selectDefaultItem=function(){this._menu.selectItemAtIndex(1,true);};b.setMessageMeasurementMode=function(d){this._useRealMessageHeight=d;};b.setMode=function(d){this._highlightedItemLabel.configure(this._highlightedItemLabelConf);this._menu.configure(this._MENU_CONF);this._menu.initialise();};b.setOrientation=function(d){this.ORIENTATION=d;};b.setVerticalOrientation=function(){this.verticalButtonMode=true;this._dataMapper.isVertical=function(){return true;};this._menu.setDataMapper(this._dataMapper);this._menu.getItemConfig().movementPositions=this.VERTICAL_MOVEMENT_POSITIONS;this._menu.setOrientation(a.gui.FixedList.consts.ORIENTAION_VERTICAL);this._menu.initialise(false);};b.setHorizontalOrientation=function(h,k){var g=this,f=0,e=36,d=24;g.horizontalButtonWidth=h*d+e*2*1.75;this.verticalButtonMode=false;this._dataMapper.isVertical=function(){return false;};if(this.HORIZONTAL_BUTTON_WIDTH<g.horizontalButtonWidth){this.HORIZONTAL_MOVEMENT_POSITIONS=[];this._dataMapper.getHorizontalItemWidth=function(){return g.horizontalButtonWidth;};for(f=0;f<5;f++){this.HORIZONTAL_MOVEMENT_POSITIONS.push({x:(g.horizontalButtonWidth+g.BUTTON_HORIZONTAL_SPACING)*f,y:0});}}k.setDataMapper(this._dataMapper);k.getItemConfig().movementPositions=this.HORIZONTAL_MOVEMENT_POSITIONS;k.setOrientation(a.gui.FixedList.consts.ORIENTAION_HORIZONTAL);k.initialise(false);return k;};b._determinateOrientationMode=function(f){var e=0,g=f.length,d;for(d=0;d<g;d++){e=(f[d].name.length>e)?f[d].name.length:e;}if((e>this.VERTICAL_CHAR_COUNT)||(g>5)||this.ORIENTATION==="VERTICAL"){this.setVerticalOrientation();}else{this._menu=this.setHorizontalOrientation(e,this._menu);}};b.invokeCallback=function(d){if(this._exitCallback){this._exitCallback(this._menu._data.getData());}else{this._callback(null,d);}};b.keyHandler=function(d){var e=a.apps.core.KeyInterceptor.getKeyMap(),f=false;if(this._keypad&&this._keypad.isVisible()){f=this._keypad.keyHandler(d);}else{switch(d){case e.KEY_UP:case e.KEY_DOWN:case e.KEY_RIGHT:case e.KEY_OK:f=this._menu.keyHandler(d);if(f){return true;}break;case e.KEY_LEFT:if(this.verticalButtonMode||(this._menu.getCurrentIndex()===1)){this.invokeCallback(d);return true;}f=this._menu.keyHandler(d);if(f){return true;}break;case e.KEY_BACK:case e.KEY_EXIT:this.invokeCallback(d);return true;case e.KEY_VOL_UP:case e.KEY_VOL_DOWN:case e.KEY_MUTE:GlobalKeysInterceptor.keyHandler(d);return true;case e.KEY_CHAN_UP:case e.KEY_CHAN_DOWN:this.invokeCallback(d);GlobalKeysInterceptor.defaultContextKeyHandler(d);return true;case e.KEY_HOME:case e.KEY_POWER:case e.KEY_MOSAIC:case e.KEY_INFO:case e.KEY_GUIDE:case e.KEY_AGORA:case e.KEY_FAVOURITES:case e.KEY_MENU:case e.KEY_VOD:case e.KEY_VIEW:case e.KEY_PPV:GlobalKeysInterceptor.keyHandler(d);this.invokeCallback(d);return true;default:return false;}}};b.setSelectedCallback=function(d){this._menu.setItemSelectedCallback(d);this._callback=d;this._exitCallback=null;};b.setExitCallback=function(d){this._exitCallback=d;};b.setHighlightedCallback=function(d){this._menu.setItemHighlightedImmediateCallback(d);};b.setTitle=function(d){this._title.setText(d);};b.setTitleImage=function(e){var d=57;if(e){this._titleImage.setHref(e);this._titleImage.show();this._titleImage.setY(this._title.getTrueY()-d);this._title.setX(this._titleImage.getTrueX()+this._titleImage.getTrueWidth()+this.TITLE_IMAGE_SPACING);}};b.setErrorCode=function(d){if(d){this._errorCode.setText(d);this._errorCode.show();}else{this._errorCode.hide();}};b.setAlertImageTextConfig=function(d){if(d){this._alertImageText.configure(d);}};b.setAlertImageSubTextConfig=function(d){if(d){this._alertImageSubText.configure(d);}};b.setAlertBigVisibility=function(d){if(d){this._alertImage.show();}else{this._alertImage.hide();}};b.setAlertImage=function(h,f,d){if(h){var e=26,g=25;this._alertImage.show();if(f==="right"){this._alertImage.setX(this._messageText.getTrueWidth()+this._messageText.getTrueX()-g);}else{this._alertImage.setX(g);}this._alertImage.configure(h);if(d){this.displayAlertImageBackGround(f);}}};b.setAlertImageBackground=function(f){var e=f.backgroundConfig,d=f.imagePadding||0;this._alertImageBackGround.configure(e);this._alertImageBackGround.configure({x:this._alertImage.getTrueX()-d,y:this._alertImage.getTrueY()-d,height:this._alertImage.getTrueHeight()+(d*2),width:this._alertImage.getTrueWidth()+(d*2)});};b.displayAlertImageBackGround=function(d){var e=30;this._alertImageBackGround.show();if(d==="right"){this._alertImageBackGround.setX(this._messageText.getTrueWidth()+this._messageText.getTrueX()-e);}else{this._alertImageBackGround.setX(e);}};b.setMessage=function(d){this._messageText.setText(d);this.layoutDialogue();};b.setOptions=function(d){if(d){this._determinateOrientationMode(d);this._menu.setData(d);this.numberOfButtons=d.length;}this._menu.displayData();};b.setOptionsText=function(d){if(d){this._menu.setData(d);}this._menu.displayData();};b.setDefaultButton=function(f){var g=this._menu.getData(),d=g.length,e;for(e=0;e<g.length;e++){if(g[e].action===f){this._menu.selectItemAtIndex(e+1,true);break;}}};b.setHighlightedItemLabel=function(d){this._highlightedItemLabel.setText(d);};b.select=function(){this._menu.select();};a.gui=a.gui||{};a.gui.ConfirmationDialog=c;}($N||{}));(function(b){function a(l,g){var k=1920,d=1080,f=1237,h=60,e;a.superConstructor.call(this,l);this.INDENTATION=345;this.ORIENTATION="VERTICAL";this.BUTTON_VERTICAL_SPACING=50;this.DIALOGUE_BACKPLATE_Y=236;this.DIALOGUE_BACKPLATE_H=608;this.VISIBLE_OPTIONS_ROWS=3;this.verticalButtonMode=true;this.numberOfButtons=0;this.VERTICAL_MOVEMENT_POSITIONS=[];this.OPACITY_VALUES=[];this._dialogueBackground=new b.gui.BackgroundBox(l,this._backgroundContainer);this._dialogueBackground.configure({x:0,y:0,width:k,height:d,cssClass:"dialogueBackground"});this._dialogueBackplate=new b.gui.BackgroundBox(l,this._backgroundContainer);this._dialogueBackplate.configure({x:-2,y:this.DIALOGUE_BACKPLATE_Y,width:k+4,height:this.DIALOGUE_BACKPLATE_H,cssClass:"dialogueBackplate"});this._alertImage=new b.gui.Image(l,this._backgroundContainer);this._alertImage.configure({x:114,y:476,width:177,height:177,href:"customise/resources/images/%RES/icons/Icn_AlertLarge.png",opacity:0.2,visible:true});this._backplateUpperGlow=new b.gui.BackgroundBox(l,this._backgroundContainer);this._backplateUpperGlow.configure({x:0,y:186,width:k,height:50,cssClass:"dialogueGlowUpper"});this._backplateLowerGlow=new b.gui.BackgroundBox(l,this._backgroundContainer);this._backplateLowerGlow.configure({x:0,y:842,width:k,height:50,cssClass:"dialogueGlowLower"});this._title.configure({x:this.INDENTATION,y:this.DIALOGUE_BACKPLATE_Y+120,cssClass:"dialogTitle"});this._message.configure({visible:false});this._messageText=new b.gui.TextArea(l,this._container);this._messageText.configure({x:this.INDENTATION,y:this.DIALOGUE_BACKPLATE_Y+150,height:160,width:k-(this.INDENTATION*2),cssClass:"dialogMessage"});this.maxStrLength=0;this._title.bringToFront();this._dialogueTypeLabel=new b.gui.Label(l,this._container);this._dataMapper={getTitle:function(m){return m.name;},isVertical:function(){return true;},getVerticalItemWidth:function(){return f;},getItemHeight:function(){return h;}};this._menu=new b.gui.PageableListWithArrows(l,this._container);this._menu.configure({x:this.INDENTATION,y:520,itemHeight:80});this._menu.setUpArrowProperties({x:1208,y:-30,width:25,height:30,href:"customise/resources/svg/icons.svg#guideUpArrowIcon",visible:true});this._menu.setDownArrowProperties({x:1208,y:232,width:25,height:30,href:"customise/resources/svg/icons.svg#guideDownArrowIcon",visible:true});this._menu.setWrapAround(false);this._menu.getItemConfig().opacityValues=this.OPACITY_VALUES;this._menu.setItemTemplate("ButtonGroupItem");this._highlightedItemLabel=new b.gui.Label(l,this._container);this._MENU_CONF={itemTemplate:b.gui.SubMenuItem};this._container.addChild(this._dialogueTypeLabel);this._container.addChild(this._menu);this._container.addChild(this._highlightedItemLabel);if(g){g.addChild(this);}}b.gui.Util.extend(a,b.gui.AbstractConfirmationDialog);var c=a.prototype;c.selectDefaultItem=function(){this._menu.selectItemAtIndex(1,true);};c.setMode=function(d){this._highlightedItemLabel.configure(this._highlightedItemLabelConf);this._menu.configure(this._MENU_CONF);this._menu.initialise();};c.setOrientation=function(d){this.ORIENTATION=d;};c.setVerticalOrientation=function(){this.verticalButtonMode=true;this._menu.setDataMapper(this._dataMapper);this._menu.getItemConfig().movementPositions=this.VERTICAL_MOVEMENT_POSITIONS;this._menu.setOrientation(b.gui.FixedList.consts.ORIENTAION_VERTICAL);this._menu._data.setVisibleRows(this.VISIBLE_OPTIONS_ROWS);this._menu.initialise(false);};c.keyHandler=function(d){var e=b.apps.core.KeyInterceptor.getKeyMap(),f=false;switch(d){case e.KEY_UP:case e.KEY_DOWN:case e.KEY_OK:f=this._menu.keyHandler(d);if(f){return true;}break;case e.KEY_BACK:case e.KEY_EXIT:case e.KEY_LEFT:if(this._exitCallback){this._exitCallback(this._menu._data.getData());}else{this._callback(null);}return true;case e.KEY_VOL_UP:case e.KEY_VOL_DOWN:case e.KEY_MUTE:GlobalKeysInterceptor.keyHandler(d);return true;case e.KEY_HOME:case e.KEY_POWER:case e.KEY_MOSAIC:case e.KEY_INFO:case e.KEY_GUIDE:case e.KEY_AGORA:case e.KEY_FAVOURITES:case e.KEY_CHAN_UP:case e.KEY_CHAN_DOWN:case e.KEY_MENU:case e.KEY_VOD:case e.KEY_VIEW:GlobalKeysInterceptor.keyHandler(d);if(this._exitCallback){this._exitCallback(this._menu._data.getData());}else{this._callback(null,d);}return true;default:return false;}if(!f&&d===e.KEY_LEFT){if(this._exitCallback){this._exitCallback(this._menu._data.getData());}return true;}};c.setSelectedCallback=function(d){this._menu.setItemSelectedCallback(d);this._callback=d;this._exitCallback=null;};c.setExitCallback=function(d){this._exitCallback=d;};c.setHighlightedCallback=function(d){this._menu.setItemHighlightedImmediateCallback(d);};c.setDialogueTypeLabel=function(f){var e=f.split(" "),d=1;if(e.length>d){this._dialogueTypeLabel.setText(e.shift());}else{this._dialogueTypeLabel.setText(f);}};c.setTitle=function(d){this._title.setText(d);};c.setMessage=function(d){this._messageText.setText(d);};c.setOptions=function(d){var e;if(d){this.setVerticalOrientation();this._menu.setData(d);this.numberOfButtons=d.length;for(e=0;e<d.length;e++){this.VERTICAL_MOVEMENT_POSITIONS.push({x:0,y:(this.BUTTON_HEIGHT+this.BUTTON_VERTICAL_SPACING)*e});this.OPACITY_VALUES.push(1);this._menu.getItemConfig().opacityValues=this.OPACITY_VALUES;}}this._menu.displayData();this._menu.focus();};c.setHighlightedItemLabel=function(d){this._highlightedItemLabel.setText(d);};c.select=function(){this._menu.select();};b.gui=b.gui||{};b.gui.ConflictDialog=a;}($N||{}));(function(b){function a(f,d){var e=1920,c=1080;a.superConstructor.call(this,f);this.DIALOGUE_BACKPLATE_Y=450;this.DIALOGUE_BACKPLATE_H=180;this._dialogueBackground=new b.gui.BackgroundBox(f,this._backgroundContainer);this._dialogueBackground.configure({x:0,y:0,width:e,height:c,cssClass:"dialogueBackground"});this._dialogueBackplate=new b.gui.BackgroundBox(f,this._backgroundContainer);this._dialogueBackplate.configure({x:-2,y:this.DIALOGUE_BACKPLATE_Y,width:e+4,height:this.DIALOGUE_BACKPLATE_H,cssClass:"dialogueBackplate"});this._backplateUpperGlow=new b.gui.BackgroundBox(f,this._backgroundContainer);this._backplateUpperGlow.configure({x:0,y:405,width:e,height:50,cssClass:"dialogueGlowUpper"});this._backplateLowerGlow=new b.gui.BackgroundBox(f,this._backgroundContainer);this._backplateLowerGlow.configure({x:0,y:630,width:e,height:50,cssClass:"dialogueGlowLower"});this._title.configure({x:630,y:550,cssClass:"blockingDialogTitle"});this._title.bringToFront();if(d){d.addChild(this);}}b.gui.Util.extend(a,b.gui.AbstractConfirmationDialog);a.prototype.setTitle=function(c){this._title.setText(c);};a.prototype.keyHandler=function(c){return true;};b.gui=b.gui||{};b.gui.BlockingDialog=a;}($N||{}));(function(b){var a=function(e,d,c){this.state=null;this._controls=c;this._docRef=e;this._totalControlItems=0;this._activeControlItemIndex=0;this._activeControlElement=null;this._folderNameListObject=null;this.dataMapper={getTitle:function(f){return f.name;},getAction:function(f){return f.action;}};a.superConstructor.call(this,e);this._controlsGroup=new b.gui.Group(e,this._container);this._controlsGroup.setWidth(1920);if(d){d.addChild(this);}};b.gui.Util.extend(a,b.gui.ConfirmationDialog);a.prototype.getFixedHorizontalList=function(f){var e=this.setupFixedList(),k=this,g=0,m=36,h=24,n=5,d=60,l=n*h+m*2*1.75,c={getTitle:function(o){return o.name;},isVertical:function(){return false;},getItemHeight:function(){return d;},getHorizontalItemWidth:function(o){if(o){return o.width||l;}return l;}};e.setDataMapper(c);e.getItemConfig().movementPositions=this.HORIZONTAL_MOVEMENT_POSITIONS;e.setOrientation(b.gui.FixedList.consts.ORIENTAION_HORIZONTAL);e.initialise(false);if(f.buttons){e.setData(f.buttons);}e.displayData();e.setItemSelectedCallback(f.callback);return e;};a.prototype.setCssForPopup=function(c,d){if(c.textCssClass){d.setTextCssClass(c.textCssClass);}if(c.cssClass){d.setCssClass(c.cssClass);}if(c.highlightCssClass){d.setHighlightCssClass(c.highlightCssClass);}};a.prototype.initialiseControls=function(){var k=30,g,d,h=0,e=0,f=0,l,c;for(l in this._controls){if(this._controls.hasOwnProperty(l)){d=this._controls[l];f++;if(d.listObjectName==="FixedList"){g=this.getFixedHorizontalList(d);}else{if(d.listObjectName){g=new b.gui[d.listObjectName](document,null,d.title,null,d.selectListWidth);if(typeof g.getHeight!=="function"){throw new Error("Given list object require getHeight(), needed for positioning.");}if(typeof g.getSelectedItem!=="function"){throw new Error("Given list object require getSelectedItem(), needed for general dialog callback selected key list.");}}}g.selectable=(d.selectable&&d.selectable===false)?false:true;g.index=null;if(g.selectable===true){g.index=this._totalControlItems;this._totalControlItems++;}this.setCssForPopup(d,g);if(d.highlightedCallback){g.setItemHighlightedCallback(d.highlightedCallback);}g.setData(d.buttons,this.dataMapper);this._controls[l].listObject=g;this._controlsGroup.addChild(g);g.configure({x:this.INDENTATION,y:h});if(l==="folderName"){this._folderNameListObject=g;}c=(g.getHeight)?g.getHeight():50;h+=c+k;}}this._activeControlItemIndex=this._totalControlItems;this._controlsGroup.setHeight(h);};a.prototype.setControls=function(c){};a.prototype.populateOptionalControlWithObjects=function(g,d){var f=this._controls[d.title],e=0,h,c;if(f&&f.buttons.length){e=f.buttons.length;for(c=0;c<e;c++){h=f.buttons[c];if(h.selectable){g[h.ctrlname]={control:{value:h.name}};}}}return g;};a.prototype.setSelectedCallback=function(e){var c=this,d=function(f){var h,g;f=(Object.prototype.toString.call(f)==="[object Object]")?f:{};f.optionalControl={};for(h in c._controls){if(c._controls.hasOwnProperty(h)){g=c._controls[h];if(g.listObjectName==="FixedList"){f.optionalControl=c.populateOptionalControlWithObjects(f.optionalControl,g);}else{f.optionalControl[h]={control:g.listObject.getSelectedItem()};}}}e(f);};a.superClass.setSelectedCallback.call(this,d);};a.prototype.layoutDialogue=function(c){if(!c){this.initialiseControls();}a.superClass.layoutDialogue.call(this,this._controlsGroup);};a.prototype._isControlItemSelectable=function(c){var d;for(d in this._controls){if(this._controls.hasOwnProperty(d)){if(this._controls[d].listObject.index===c){if(this._controls[d].selectable===false){return false;}}}}return true;};a.prototype._activateControlItem=function(){var c;for(c in this._controls){if(this._controls.hasOwnProperty(c)){if(this._controls[c].listObject.index===this._activeControlItemIndex){if(this._activeControlElement){this._activeControlElement.defocus();}this._controls[c].listObject.focus();this._activeControlElement=this._controls[c].listObject;this._menu.defocus();}}}};a.prototype.moveNext=function(){var c=this._activeControlItemIndex+1;if((this._activeControlItemIndex<this._totalControlItems-1)&&this._isControlItemSelectable(c)){this._activeControlItemIndex++;this._activateControlItem();}else{this._menu.focus();this._activeControlItemIndex=this._totalControlItems;if(this._activeControlElement){this._activeControlElement.defocus();}this._activeControlElement=null;}};a.prototype.movePrevious=function(){var c=this._activeControlItemIndex-1;if(this._activeControlItemIndex>0&&this._isControlItemSelectable(c)){this._activeControlItemIndex--;this._activateControlItem();}};a.prototype.getOptionalControlComponent=function(c){var d=null;if(this._controls.hasOwnProperty(c)){d=this._controls[c].listObject;}return d;};a.prototype.setFolderName=function(c){this._folderNameListObject.setData(c.buttons,this.dataMapper);this.setCssForPopup(c,this._folderNameListObject);this.layoutDialogue(true);};a.prototype.keyHandler=function(c){var g=false,e=b.apps.core.KeyInterceptor.getKeyMap(),d=this._activeControlElement&&this._activeControlElement._itemHighlightedCallback,f=((d)&&this._activeControlElement._itemHighlightedCallback.toString().indexOf("showKeypad")>-1);if(this._keypad&&this._keypad.isVisible()){g=this._keypad.keyHandler(c);}else{if(c===e.KEY_OK&&f){this._activeControlElement._itemHighlightedCallback();g=true;}else{if(this._activeControlElement&&this._activeControlElement.keyHandler(c)){g=true;}else{g=a.superClass.keyHandler.call(this,c);}}if(!g){switch(c){case e.KEY_UP:this.movePrevious();g=true;break;case e.KEY_DOWN:this.moveNext();g=true;break;}}}return g;};a.prototype.showKeypad=function(g,f,d){d=d||0;this._keypad=new b.gui.BaseKeypad(this._docRef,this._backgroundContainer);var e=this,k=function(){e._keypad.reset();e._keypad=null;e._title.show();e._menu.show();e._controlsGroup.show();e._messageText.show();},c={value:this._keypad.getInputValue()},h=function(l){if(e._controls[f]){if(e._controls[f].buttons.length){e._controls[f].buttons[d].name=l.value;}}e.initialiseControls();k();};this._keypad.reset();this._keypad.configure({keypadTitle:"title",x:680,y:270});this._keypad.resetKeyPadConfig();b.app.KeyboardUtils.setKeypad(this._keypad,b.app.KeyboardType.NUMERIC);this._keypad.configure({keypadTitle:g,visible:true,exitCallback:k,textInputAlignment:b.app.KeyboardType.ALIGNMENT.CENTRE});b.app.KeyboardUtils.setKeypadReturnObject(c);b.app.KeyboardUtils.setSaveCallback(h);this._keypad.clearInput();this._keypad.setInputFormat(2,0,"");this._keypad.setMinNumericKeypadValue(0);this._keypad.setMaxNumericKeypadValue(99);b.app.KeyboardUtils.showKeypad(b.app.KeyboardType.NUMERIC);this._messageText.hide();this._title.hide();this._menu.hide();this._controlsGroup.hide();this._keypad.focus();this._keypad.show();};b.gui=b.gui||{};b.gui.ConfirmationDialogWithControls=a;}($N||{}));(function(b){function a(e,l,k,s,n,o,m,f,r,g){var h=this,d=0,q=0,c=1240,p=280;a.superConstructor.call(this,e,true);if((m!==undefined)&&(m!==null)&&(m!==false)){this._dialogGUIObject=new b.gui.ConfirmationDialogWithControls(document,null,m);}else{if(g!==undefined){this._dialogGUIObject=new g(document);}else{this._dialogGUIObject=new a.GUITemplateObject(document);}}if(f){this._dialogGUIObject.setOrientation(f);}this._dialogGUIObject.setTitle(l);this._dialogGUIObject.setOptions(s);this._dialogGUIObject.setMessage(k);this._dialogGUIObject.setSelectedCallback(function(t){b.apps.dialog.DialogManager.hideDialog(h);if(n){n(t);}});this._dialogGUIObject.setHighlightedCallback(function(t){if(o){o(t);}});this.setExitCallback=function(t){this._dialogGUIObject.setExitCallback(function(u){b.apps.dialog.DialogManager.hideDialog(h);t(u);});};this._positionAndSizeDialog(d,q,c,p);this._dialogGUIObject.setTitleImage(r);this._dialogGUIObject.selectDefaultItem();}b.apps.util.Util.extend(a,b.apps.dialog.BaseDialog);a.prototype.setSelectedCallback=function(d){var c=this;this._dialogGUIObject.setSelectedCallback(function(e){b.apps.dialog.DialogManager.hideDialog(c);if(d){d(e);}});};a.prototype.setHighlightedCallback=function(c){this._dialogGUIObject.setHighlightedCallback(function(d){if(c){c(d);}});};a.GUITemplateObject=b.gui.ConfirmationDialog;b.apps.dialog=b.apps.dialog||{};b.apps.dialog.ConfirmationDialogue=a;}($N=$N||{}));(function(b){function a(e,k,h,q,m,n,l,f){var g=this,d=0,p=0,c=1240,o=280;a.superConstructor.call(this,e,true);this._dialogGUIObject=new a.GUITemplateObject(document,null);if(f){this._dialogGUIObject.setOrientation(f);}this._dialogGUIObject.setTitle(k);this._dialogGUIObject.setOptions(q);this._dialogGUIObject.setMessage(h);this._dialogGUIObject.setSelectedCallback(function(r){b.apps.dialog.DialogManager.hideDialog(g);if(m){m(r);}});this.setExitCallback=function(r){this._dialogGUIObject.setExitCallback(function(s){b.apps.dialog.DialogManager.hideDialog(g);r(s);});};this._positionAndSizeDialog(d,p,c,o);this._dialogGUIObject.selectDefaultItem();}b.apps.util.Util.extend(a,b.apps.dialog.BaseDialog);a.prototype.show=function(){b.app.TracksUtil.deactivateCurrentSubtitleTrack();a.superClass.show.call(this);};a.GUITemplateObject=b.gui.ConflictDialog;b.apps.dialog=b.apps.dialog||{};b.apps.dialog.ConflictDialogue=a;}($N=$N||{}));(function(a){function b(k,h){var f=this,d=0,c=0,g=780,e=280;b.superConstructor.call(this,k,true);this._dialogGUIObject=new b.GUITemplateObject(document);this._dialogGUIObject.setTitle(h);this._positionAndSizeDialog(d,c,g,e);}a.apps.util.Util.extend(b,a.apps.dialog.BaseDialog);b.GUITemplateObject=a.gui.BlockingDialog;a.apps.dialog=a.apps.dialog||{};a.apps.dialog.BlockingDialogue=b;}($N=$N||{}));var $N=$N||{};(function(a){function c(e,d){c.superConstructor.call(this,e);this._dialogueTypeLabel=new a.gui.Label(e,this._container);this._dialogueTypeLabelSubText=new a.gui.Label(e,this._container);this._reminderTitle=new a.gui.TextArea(e,this._container);this._description=new a.gui.TextArea(e,this._container);this._dialogueTypeLabel.configure({width:255,x:275,y:70,cssClass:"dialogueTypeLabel"});this._dialogueTypeLabelSubText.configure({width:255,x:275,y:120,cssClass:"dialogueTypeLabelSubText"});this._reminderTitle.configure({y:13,x:327.5,width:680,height:140,cssClass:"dialogTitle"});this._description.configure({y:180,x:327.5,width:700,height:140,cssClass:"dialogMessage"});this._menu.setY(100);this.setWidth(680);this.setHeight(300);this._container.addChild(this._dialogueTypeLabel);this._container.addChild(this._dialogueTypeLabelSubText);if(d){d.addChild(this);}}a.gui.Util.extend(c,a.gui.ConfirmationDialog);var b=c.prototype;b.keyHandler=function(d){var e=a.apps.core.KeyInterceptor.getKeyMap();switch(d){case e.KEY_POWER:GlobalKeysInterceptor.keyHandler(d);return true;case e.KEY_EXIT:this._menu.selectItemAtIndex(3);this._menu.keyHandler(e.KEY_OK);return true;default:return c.superClass.keyHandler.call(this,d);}};b.selectDefaultItem=function(){this._menu.selectItemAtIndex(1,true);};b.setDialogueTypeLabel=function(f){var e=f.split(" "),d=1;if(e.length>d){this._dialogueTypeLabel.setText(e.shift());this._dialogueTypeLabelSubText.setText(e.join(" "));}else{this._dialogueTypeLabel.setText(f);this._dialogueTypeLabelSubText.setText("");}};b.setTitle=function(d){this._reminderTitle.setText(d);};b.setDescription=function(d){this._description.setText(d);};a.gui=a.gui||{};a.gui.ReminderDialog=c;}($N||{}));var ReminderDialog=$N.gui.ReminderDialog;(function(a){function b(c,m,d,e){var h=this,f="minimised",l=450,k=735,g;if(!d){d=function(){};}if(!e){e=function(){};}b.superConstructor.call(this,c,true);this._dialogGUIObject=new b.GUITemplateObject(document);g=d||function(){};this._dialogGUIObject.setMode(f);this._dialogGUIObject.setOptions(m);this._dialogGUIObject.setSelectedCallback(function(n){a.apps.dialog.DialogManager.hideDialog(h);d(n);});this._dialogGUIObject.setHighlightedCallback(e);this._positionAndSizeDialog(l,k,725,280);this._dialogGUIObject.selectDefaultItem();}a.apps.util.Util.extend(b,a.apps.dialog.BaseDialog);b.prototype.show=function(){a.app.TracksUtil.deactivateCurrentSubtitleTrack();b.superClass.show.call(this);};b.GUITemplateObject=a.gui.ReminderDialog;a.apps.dialog=a.apps.dialog||{};a.apps.dialog.ReminderDialogue=b;}($N=$N||{}));(function(b){function a(d){a.superConstructor.call(this,d);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(d);this._container.setWidth(661);this._container.setHeight(114);this._background=new b.gui.Container(d,this._container);this._background.configure({width:660,height:100,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight=new b.gui.Container(d,this._container);this._highlight.configure({x:0,width:660,height:100,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._firstTitle=new b.gui.Label(this._docRef,this._container);this._firstTitle.configure({x:27,y:40,cssClass:"dialogSubtitle"});this._firstSubTitle=new b.gui.Label(this._docRef,this._container);this._firstSubTitle.configure({x:27,y:88,cssClass:"menuSubTitle"});this._secondTitle=new b.gui.Label(this._docRef,this._container);this._secondTitle.configure({x:360,y:40,width:317,cssClass:"dialogSubtitle"});this._secondSubTitle=new b.gui.Label(this._docRef,this._container);this._secondSubTitle.configure({x:360,y:88,width:317,cssClass:"menuSubTitle"});this.setDataMapper({getFirstTitle:function(e){return e.firstTitle;},getFirstSubTitle:function(e){return e.firstSubTitle;},getSecondTitle:function(e){return e.secondTitle;},getSecondSubTitle:function(e){return e.secondSubTitle;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);var c=a.prototype;c.setSecondTitleSubTitleData=function(d){this.setFirstTitleWidth(317);this.setFirstSubTitleWidth(317);this._secondTitle.setText(this._dataMapper.getSecondTitle(d));this._secondSubTitle.setText(this._dataMapper.getSecondSubTitle(d));};c.setWidth=function(d){this._width=d;return this;};c.setHeight=function(d){this._height=d;return this;};c.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("channelListItemHighlight");this._background.setCssClass("menuItemBackgroundFocus");this._highlight.show();this._background.show();}else{this._background.setCssClass("menuItemBackgroundDefocus");this._highlight.hide();this._background.hide();}};c.highlight=function(){this.isHighlighted=true;this.updateHighlight();};c.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};c.focus=function(){this.isFocused=true;this.updateHighlight();};c.defocus=function(){this.isFocused=false;this.updateHighlight();};c.update=function(d){if(d){this._firstTitle.setText(this._dataMapper.getFirstTitle(d));this._firstSubTitle.setText(this._dataMapper.getFirstSubTitle(d));if(this._dataMapper.getSecondTitle(d)){this.setSecondTitleSubTitleData(d);}else{this.setFirstTitleWidth(661);this.setFirstSubTitleWidth(610);this._secondTitle.setText("");this._secondSubTitle.setText("");}}};c.setFirstTitleWidth=function(d){this._firstTitle.setWidth(d);};c.setFirstSubTitleWidth=function(d){this._firstSubTitle.setWidth(d);};c.setFirstSubTitle=function(d){this._firstSubTitle.setText(d);};c.setSecondSubTitle=function(d){this._secondSubTitle.setText(d);};b.gui=b.gui||{};b.gui.MultipleTitleSubtitleItem=a;}($N||{}));(function(a){function c(e,d){c.superConstructor.call(this,e);this._log=new a.apps.core.Log("CommonGUI","MultiItemTypePageableList");this._isDefaultHighlightEnabled=true;this._defaultHighlight=new a.gui.Container(e,this._container);}a.gui.Util.extend(c,a.gui.PageableListWithBackground);var b=c.prototype;b.initialise=function(){if(!this._itemTemplate){throw ("MultiItemTypePageableList - initialise: No list item template provided");}var g,h=this._data.getSize()>=this._data.getVisibleRows()?this._data.getVisibleRows():this._data.getSize(),f=null,e=null,d=null;this._items=[];for(g=0;g<h;g++){f=new (this.getItemTemplateByIndex(g))(this._docRef);d=this.getDataMapperByIndex(g);e=this.getItemConfigByIndex(g);this._items.push(f);this._items[g].configure(e);this._items[g].setY(g*this._itemHeight);if(d){this._items[g].setDataMapper(d);}this._rootElement.appendChild(this._items[g].getRootElement());}};b.displayData=function(m,l){var o=this._data.returnViewableList(),h,e=null,n=null,f=this._data.getFirstVisibleRowIndex()-1,d=this._data.getSize()>=this._data.getVisibleRows()?this._data.getVisibleRows():this._data.getSize(),g=null,k;for(h=0;h<d;h++){if(h<o.length){this._items[h].unHighlight();g=this.getItemTemplateByIndex(f+h);if(this._items[h].constructor!==g){e=this.getDataMapperByIndex(f+h);n=this.getItemConfigByIndex(f+h);k=new (this.getItemTemplateByIndex(f+h))(this._docRef);this.replaceListItem(h,k);this._items[h].setDataMapper(e);this._items[h].configure(n);this._items[h].setY(h*this._itemHeight);}this._items[h].update(o[h]);if(!this._items[h].isVisible()){this._items[h].show();}}else{this._items[h].hide();}}if(m){this.defocus();}this._getSelectedObject().highlight();if(!l){this._applySelectionTimeOut(true);}this._background.show();};b.setDefaultHighlightConfig=function(d){this._defaultHighlight.configure(d);};b.enableDefaultHighlight=function(){this._isDefaultHighlightEnabled=true;};b.disableDefaultHighlight=function(){this._isDefaultHighlightEnabled=false;};b.hideDefaultHighlight=function(){if(this._isDefaultHighlightEnabled&&this.getScrollType()===c.consts.ScrollType.ITEM){this._defaultHighlight.hide();}};b.itemHighlight=function(){if(this._isDefaultHighlightEnabled&&this.getScrollType()===c.consts.ScrollType.ITEM){var d=this.getActualSelectedItem();if(!d.isHighlighted){this._defaultHighlight.configure({y:d.getTrueY(),height:d._container.getTrueHeight(),visible:true});}else{this.hideDefaultHighlight();}}};b.focus=function(){c.superClass.focus.call(this);this.itemHighlight();};b.defocus=function(){c.superClass.defocus.call(this);this.hideDefaultHighlight();};b.replaceListItem=function(d,e){var f=this._items[d];this.getRootElement().insertBefore(e.getRootElement(),f.getRootElement());this._items[d]=e;f.destroy();};b.getDataMapperByIndex=function(e){var d=this._data.getRowAtIndex(e+1).dataMapper;if(d){if(typeof d==="string"){d=window.$N.app.DataMappers["get"+d]();}}else{d=this._dataMapper;}return d;};b.getItemConfigByIndex=function(e){var d=this._data.getRowAtIndex(e+1).itemConfig;if(!d){d=this._itemConfig;}return d;};b.getItemTemplateByIndex=function(d){var e=this._data.getRowAtIndex(d+1).template;if(e){if(typeof e==="string"){e=window.$N.gui[e]||window[e];}}else{e=this._itemTemplate;}return e;};b.keyHandler=function(d){var e=a.gui.FrameworkCore.getKeys(),f=false;f=c.superClass.keyHandler.call(this,d);switch(d){case e.KEY_UP:case e.KEY_DOWN:if(this.getScrollType()!==c.consts.ScrollType.PAGE){this.itemHighlight();}break;}return f;};c.consts=a.gui.PageableList.consts;a.gui=a.gui||{};a.gui.MultiItemTypePageableList=c;}($N||{}));(function(a){function d(f,e){d.superConstructor.call(this,f);this.isFocused=true;this.isHighlighted=false;this._progressBarMinimum=0;this._progressBarMaximum=100;this._PROGRESSBAR_GLOW_HEIGHT_DIFFERENCE=19;this._container=new a.gui.Group(this._docRef);this._container.setWidth(1350);this._container.setHeight(40);this._title=new a.gui.Label(this._docRef,this._container);this._title.configure({x:39,y:30,width:450,cssClass:"fullViewLeftSubtitle"});this._progressBar=new a.gui.ProgressBar(f,this._container);this._progressBar.configure({x:663,y:9,innerCssClass:"progressInner",outerCssClass:"progressOuter",height:10,width:210,minimumValue:this._progressBarMinimum,maximumValue:this._progressBarMaximum});this._progressText=new a.gui.Label(this._docRef,this._container);this._progressText.configure({x:895,y:30,cssClass:"fullViewRightSubtitle"});this.setDataMapper({getTitle:function(g){return g.title;},getProgress:function(g){return g.progress;}});this._rootSVGRef=this._container.getRootSVGRef();if(e){e.addChild(this);}this.addMoveAnimation();this.addFadeAnimation();this.progressIndicatorText="%";}a.gui.Util.extend(d,a.gui.AbstractListItem);var c=d.prototype;function b(k,g,h,f){var e=h||k._progressBarMinimum,l=f||k._progressBarMaximum;g=g<e?Math.max(e,g):g;g=g>l?Math.min(l,g):g;return{value:g,text:g+k.progressIndicatorText};}c.setProgressIndicatorText=function(e){this.progressIndicatorText=e;};c.setProgressBarMinimum=function(e){this._progressBarMinimum=e;this._progressBar.setMinimumValue(e);};c.setProgressBarMaximum=function(e){this._progressBarMaximum=e;this._progressBar.setMaximumValue(e);};c.focus=function(){this.isFocused=true;};c.defocus=function(){this.isFocused=false;};c.setWidth=function(e){this._width=e;return this;};c.setHeight=function(e){this._height=e;return this;};c.highlight=function(){};c.unHighlight=function(){};c.setProgressBarMinimumValue=function(e){this._progressBar.setMinimumValue(e);};c.setProgressBarMaximumValue=function(e){this._progressBar.setMaximumValue(e);};c.updateProgressBar=function(g,k,e,h){var f=b(this,e,g,k);h=h||0;this._progressBar.setMinimumValue(g);this._progressBar.setMaximumValue(k);this._progressBar.setProgress(f.value,h);this._progressText.setText(f.text);};c.setProgressBarHeight=function(e){this._progressBar.setHeight(e);};c.setProgressBarWidth=function(e){this._progressBar.setWidth(e);};c.setTitleConfig=function(e){this._title.configure(e);};c.setProgressTextConfig=function(e){this._progressText.configure(e);};c.setProgressBarConfig=function(e){this._progressBar.configure(e);};c.update=function(e){if(e){this._title.setText(this._dataMapper.getTitle(e));this.updateProgressBar(this._progressBar._minimum,this._progressBar._maximum,this._dataMapper.getProgress(e));}};a.gui=a.gui||{};a.gui.SettingsProgressBarMenuItem=d;}($N||{}));(function(a){function b(c,d){b.superConstructor.call(this,c);this._log=new a.apps.core.Log("CommonGUI","ChannelMosaicTile");this.isHighlighted=false;this._container=new a.gui.Container(this._docRef);this._container.setRounding(4);this._rootElement=this._container.getRootElement();this._highlighter=new a.gui.Container(this._docRef,this._container);this._highlighter.configure({x:0,y:0,width:96,height:96,cssClass:"mosaicChannelHighlight",rounding:1,visible:false});this._channelLogo=new a.gui.ChannelLogo(this._docRef,this._container);this._channelLogo.configure({x:0,y:0,width:96,height:96});}a.gui.Util.extend(b,a.gui.AbstractMosaicTile);b.prototype.setCssStyle=function(c){this._highlighter.setCssStyle(c);};b.prototype.setCssHighlightStyle=function(c){this._highlighter.setCssHighlightStyle(c);};b.prototype.setCssClass=function(c){this._highlighter.setCssClass(c);};b.prototype.setCssHighlightClass=function(c){this._highlighter.setCssHighlightClass(c);};b.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};b.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};b.prototype.updateHighlight=function(){if(this.isHighlighted){this._highlighter.show();}else{this._highlighter.hide();}};b.prototype.setContainerRounding=function(c){this._container.setRounding(c);this._highlighter.setRounding(c);};b.prototype.setWidth=function(c){b.superClass.setWidth.call(this,c);this._highlighter.setWidth(this._width-10);};b.prototype.setHeight=function(c){b.superClass.setHeight.call(this,c);this._highlighter.setHeight(this._height);};b.prototype.configure=function(){if(!this._itemConfig){throw ("ChannelMosaicTile - configure: item configuration details not found");}};b.prototype.update=function(c){if(!c&&!this._data){throw ("ChannelMosaicTile - update: no data found to update tile with");}this.setData(c);this._channelLogo.update(c);};b.prototype.setDataMapper=function(c){b.superClass.setDataMapper.call(this,c);this._channelLogo.setDataMapper(c);};a.gui=a.gui||{};a.gui.ChannelMosaicTile=b;}($N||{}));(function(a){function b(c){a.apps.core.Language.adornWithGetString(b,"customise/resources/");this._log=new a.apps.core.Log("CommonGUI","SearchActorDetailResultListItem");b.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new a.gui.ClippedGroup(this._docRef);this._background=new a.gui.Container(c,this._container);this._container.setWidth(1755);this._container.setHeight(58);this._date=new a.gui.Label(this._docRef,this._container);this._startEndTime=new a.gui.Label(this._docRef,this._container);this._title=new a.gui.Label(this._docRef,this._container);this._vodTitle=new a.gui.DelayedScrollingLabel(this._docRef,this._container);this._episodeTitle=new a.gui.DelayedScrollingLabel(this._docRef,this._container);this._channelNum=new a.gui.Label(this._docRef,this._container);this._channelName=new a.gui.Label(this._docRef,this._container);this._recordIcon=new a.gui.RecordIcon(this._docRef,this._container);this._reminderIcon=new a.gui.ReminderIcon(this._docRef,this._container);this._startOverIcon=new a.gui.StartOverIcon(this._docRef,this._container);this._RECORD_ICON_PADDING=50;this._ROW_BACKGROUND_HEIGHT=51;this._ROW_BACKGROUND_WIDTH=1755;this._CLASS_BACKGROUND="timeListItemBackground";this._CLASS_BACKGROUND_HIGHLIGHT="timeListItemHighlight";this._background.configure({x:0,y:0,width:this._ROW_BACKGROUND_WIDTH,height:this._ROW_BACKGROUND_HEIGHT,cssClass:this._CLASS_BACKGROUND});this.resetPositions();this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.resetPositions=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:337.5,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:670,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:748,y:40,width:600,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1300,y:7.5,width:730,duration:"250ms",cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1300,y:7.5,width:730,duration:"250ms",cssClass:"searchDetailResultListItemText"});this._recordIcon.configure({x:1660,y:8,visible:false});this._reminderIcon.configure({x:1710,y:8,visible:false});this._startOverIcon.configure({x:1710,y:8,visible:false});};b.prototype.setPositionsForSeries=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:300,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:600,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:680,y:40,width:570,cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1200,y:7.5,width:440,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1120,y:7.5,width:440,cssClass:"searchDetailResultListItemText"});};b.prototype.setCssClass=function(c){this._CLASS_BACKGROUND=c||"timeListItemBackground";};b.prototype.setHighlightCssClass=function(c){this._CLASS_BACKGROUND_HIGHLIGHT=c||"timeListItemHighlight";};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this._date.setCssClass("searchDetailResultListItemTextHighlighted");this._startEndTime.setCssClass("searchDetailResultListItemTextHighlighted");this._channelNum.setCssClass("searchDetailResultListItemTextHighlighted");this._channelName.setCssClass("searchDetailResultListItemTextHighlighted");this._vodTitle.setCssClass("searchDetailResultListItemTextHighlighted");}else{this._background.setCssClass(this._CLASS_BACKGROUND);this._date.setCssClass("searchDetailResultListItemText");this._startEndTime.setCssClass("searchDetailResultListItemText");this._channelNum.setCssClass("searchDetailResultListItemText");this._channelName.setCssClass("searchDetailResultListItemText");this._vodTitle.setCssClass("searchDetailResultListItemText");}};b.prototype.highlight=function(){if(!this.isHighlighted){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this.isHighlighted=true;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.start();}if(this._vodTitle.isVisible()){this._vodTitle.start();}}};b.prototype.unHighlight=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isHighlighted){this.isHighlighted=false;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};b.prototype.focus=function(){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);if(!this.isFocused){this.isFocused=true;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.start();}if(this._vodTitle.isVisible()){this._vodTitle.start();}}};b.prototype.defocus=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isFocused){this.isFocused=false;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};b.prototype.showBTVRelatedFields=function(c){if(c.type&&(c.type===a.app.constants.SEARCH_TYPE.PVR)){this._recordIcon.update(c,null,a.platform.btv.PVRManager.getTaskRecordingStatus(c));}else{this._recordIcon.update(c);}this._reminderIcon.update(c);this._channelNum.setText(a.app.GeneralUtil.padNumberWithZeroes(this._dataMapper.getChannelNumber(c),3));this._channelName.setText(this._dataMapper.getChannelName(c));this._startOverIcon.update(c);};b.prototype.update=function(f){var d,e,c;if(f){d=f.uniqueEventId;this._channelNum.show();if(f.type===a.app.constants.SEARCH_TYPE.EPG||f.type===a.app.constants.SEARCH_TYPE.MDSEPG){if(f.startTime){this._date.setText(this._dataMapper.getDate(f));this._startEndTime.setText(this._dataMapper.getStartEndTime(f));}else{this._date.setText("");this._startEndTime.setText("");}e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._vodTitle.hide();this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===a.app.constants.SEARCH_TYPE.VOD){this._vodTitle.show();this._vodTitle.setText(this._dataMapper.getTitle(f));this._date.setText(this._dataMapper.getVodSeries(f));this._date.show();this._startEndTime.hide();this._episodeTitle.hide();this._channelNum.hide();this.setPositionsForSeries();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this._date.setX(1264);this._vodTitle.setX(22.5);this._channelName.setX(800);}else{if(f.type===a.app.constants.SEARCH_TYPE.CATCHUP){this._date.setText(this._dataMapper.getCathupDate(f));this._startEndTime.setText(this._dataMapper.getCatchupIndicator(f));this._vodTitle.hide();e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===a.app.constants.SEARCH_TYPE.PVR){this._date.setText(this._dataMapper.getRecordedDate(f));e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._vodTitle.hide();this._date.show();this._startEndTime.hide();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this.showBTVRelatedFields(f);}else{this._log("update","Unknown item type ("+f.type+")");this.resetPositions();this._vodTitle.show();this._vodTitle.setText(f.title);this._date.hide();this._episodeTitle.hide();this._startEndTime.hide();this._vodTitle.show();this._channelNum.hide();this._channelName.hide();}}}}if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};a.gui=a.gui||{};a.gui.SearchActorDetailResultListItem=b;}($N||{}));(function(b){function a(c){b.apps.core.Language.adornWithGetString(a,"customise/resources/");this._log=new b.apps.core.Log("CommonGUI","SearchTitleDetailResultListItem");a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.ClippedGroup(this._docRef);this._background=new b.gui.Container(c,this._container);this._container.setWidth(1755);this._container.setHeight(58);this._date=new b.gui.Label(this._docRef,this._container);this._startEndTime=new b.gui.Label(this._docRef,this._container);this._vodTitle=new b.gui.DelayedScrollingLabel(this._docRef,this._container);this._episodeTitle=new b.gui.DelayedScrollingLabel(this._docRef,this._container);this._channelNum=new b.gui.Label(this._docRef,this._container);this._channelName=new b.gui.Label(this._docRef,this._container);this._recordIcon=new b.gui.RecordIcon(this._docRef,this._container);this._reminderIcon=new b.gui.ReminderIcon(this._docRef,this._container);this._startOverIcon=new b.gui.StartOverIcon(this._docRef,this._container);this._RECORD_ICON_PADDING=50;this._ROW_BACKGROUND_HEIGHT=51;this._ROW_BACKGROUND_WIDTH=1755;this._CLASS_BACKGROUND="timeListItemBackground";this._CLASS_BACKGROUND_HIGHLIGHT="timeListItemHighlight";this._CLASS_BACKGROUND_TIMELINE="timeListItemBackgroundCurrent";this._background.configure({x:0,y:0,width:this._ROW_BACKGROUND_WIDTH,height:this._ROW_BACKGROUND_HEIGHT,cssClass:this._CLASS_BACKGROUND});this.resetPositions();this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;return this;};a.prototype.resetPositions=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:337.5,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:670,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:748,y:40,width:600,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1300,y:7.5,width:730,duration:"250ms",cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1300,y:7.5,width:730,duration:"250ms",cssClass:"searchDetailResultListItemText"});this._recordIcon.configure({x:1660,y:8,visible:false});this._reminderIcon.configure({x:1710,y:8,visible:false});this._startOverIcon.configure({x:1710,y:8,visible:false});};a.prototype.setPositionsForSeries=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:300,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:600,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:680,y:40,width:570,cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1200,y:7.5,width:440,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1120,y:7.5,width:440,cssClass:"searchDetailResultListItemText"});};a.prototype.setCssClass=function(c){this._CLASS_BACKGROUND=c||"timeListItemBackground";};a.prototype.setHighlightCssClass=function(c){this._CLASS_BACKGROUND_HIGHLIGHT=c||"timeListItemHighlight";};a.prototype.setHeight=function(c){this._height=c;return this;};a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this._date.setCssClass("searchDetailResultListItemTextHighlighted");this._startEndTime.setCssClass("searchDetailResultListItemTextHighlighted");this._channelNum.setCssClass("searchDetailResultListItemTextHighlighted");this._channelName.setCssClass("searchDetailResultListItemTextHighlighted");this._vodTitle.setCssClass("searchDetailResultListItemTextHighlighted");}else{this._background.setCssClass(this._CLASS_BACKGROUND);this._date.setCssClass("searchDetailResultListItemText");this._startEndTime.setCssClass("searchDetailResultListItemText");this._channelNum.setCssClass("searchDetailResultListItemText");this._channelName.setCssClass("searchDetailResultListItemText");this._vodTitle.setCssClass("searchDetailResultListItemText");}};a.prototype.highlight=function(){if(!this.isHighlighted){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this.isHighlighted=true;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.start();}if(this._vodTitle.isVisible()){this._vodTitle.start();}}};a.prototype.unHighlight=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isHighlighted){this.isHighlighted=false;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};a.prototype.focus=function(){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);if(!this.isFocused){this.isFocused=true;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.start();}if(this._vodTitle.isVisible()){this._vodTitle.start();}}};a.prototype.defocus=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isFocused){this.isFocused=false;this.updateHighlight();if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};a.prototype.showBTVRelatedFields=function(c){if(c.type&&(c.type===b.app.constants.SEARCH_TYPE.PVR)){this._recordIcon.update(c,null,b.platform.btv.PVRManager.getTaskRecordingStatus(c));}else{this._recordIcon.update(c);}this._reminderIcon.update(c);this._channelNum.setText(b.app.GeneralUtil.padNumberWithZeroes(this._dataMapper.getChannelNumber(c),3));this._channelName.setText(this._dataMapper.getChannelName(c));this._startOverIcon.update(c);};a.prototype.update=function(f){var d,e,c;if(f){d=f.uniqueEventId;this._channelNum.show();if(f.type===b.app.constants.SEARCH_TYPE.EPG||f.type===b.app.constants.SEARCH_TYPE.MDSEPG){if(f.startTime){this._date.setText(this._dataMapper.getDate(f));this._startEndTime.setText(this._dataMapper.getStartEndTime(f));}else{this._date.setText("");this._startEndTime.setText("");}e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._vodTitle.hide();this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===b.app.constants.SEARCH_TYPE.VOD){this._vodTitle.show();this._vodTitle.setText(this._dataMapper.getTitle(f));this._date.setText(this._dataMapper.getVodSeries(f));this._date.show();this._startEndTime.hide();this._episodeTitle.hide();this._channelNum.hide();this.setPositionsForSeries();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this._date.setX(1264);this._vodTitle.setX(22.5);this._channelName.setX(800);}else{if(f.type===b.app.constants.SEARCH_TYPE.CATCHUP){this._date.setText(this._dataMapper.getCathupDate(f));this._startEndTime.setText(this._dataMapper.getCatchupIndicator(f));this._vodTitle.hide();e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===b.app.constants.SEARCH_TYPE.PVR){this._date.setText(this._dataMapper.getRecordedDate(f));e=this._dataMapper.getEpisodeTitle(f);c=this._dataMapper.getTitle(f);if(e&&e.length>0){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(e);}else{if(c){this.setPositionsForSeries();this._episodeTitle.show();this._episodeTitle.setText(c);}else{this._episodeTitle.hide();this.resetPositions();}}this._vodTitle.hide();this._date.show();this._startEndTime.hide();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this.showBTVRelatedFields(f);}else{this._log("update","Unknown item type ("+f.type+")");this.resetPositions();this._vodTitle.show();this._vodTitle.setText(f.title);this._date.hide();this._episodeTitle.hide();this._startEndTime.hide();this._vodTitle.show();this._channelNum.hide();this._channelName.hide();}}}}if(this._episodeTitle.isVisible()){this._episodeTitle.stop();}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};b.gui=b.gui||{};b.gui.SearchTitleDetailResultListItem=a;}($N||{}));(function(a){function b(c){a.apps.core.Language.adornWithGetString(b,"customise/resources/");this._log=new a.apps.core.Log("CommonGUI","SearchGeneralTitleDetailResultListItem");b.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new a.gui.ClippedGroup(this._docRef);this._background=new a.gui.Container(c,this._container);this._container.setWidth(1755);this._container.setHeight(58);this._date=new a.gui.Label(this._docRef,this._container);this._startEndTime=new a.gui.Label(this._docRef,this._container);this._vodTitle=new a.gui.DelayedScrollingLabel(this._docRef,this._container);this._episodeTitle=new a.gui.Label(this._docRef,this._container);this._channelNum=new a.gui.Label(this._docRef,this._container);this._channelName=new a.gui.Label(this._docRef,this._container);this._recordIcon=new a.gui.RecordIcon(this._docRef,this._container);this._reminderIcon=new a.gui.ReminderIcon(this._docRef,this._container);this._startOverIcon=new a.gui.StartOverIcon(this._docRef,this._container);this._RECORD_ICON_PADDING=50;this._ROW_BACKGROUND_HEIGHT=51;this._ROW_BACKGROUND_WIDTH=1755;this._CLASS_BACKGROUND="timeListItemBackground";this._CLASS_BACKGROUND_HIGHLIGHT="timeListItemHighlight";this._CLASS_BACKGROUND_TIMELINE="timeListItemBackgroundCurrent";this._background.configure({x:0,y:0,width:this._ROW_BACKGROUND_WIDTH,height:this._ROW_BACKGROUND_HEIGHT,cssClass:this._CLASS_BACKGROUND});this.resetPositions();this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.AbstractListItem);b.prototype.setWidth=function(c){this._width=c;return this;};b.prototype.resetPositions=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:337.5,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:670,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:748,y:40,width:600,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1300,y:7.5,width:730,duration:"250ms",cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1300,y:40,width:730,cssClass:"searchDetailResultListItemText"});this._recordIcon.configure({x:1660,y:8,visible:false});this._reminderIcon.configure({x:1710,y:8,visible:false});this._startOverIcon.configure({x:1710,y:8,visible:false});};b.prototype.setPositionsForSeries=function(){this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:300,y:40,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:600,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:680,y:40,width:600,cssClass:"searchDetailResultListItemText"});this._episodeTitle.configure({x:1120,y:7.5,width:520,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:1120,y:7.5,width:520,cssClass:"searchDetailResultListItemText"});};b.prototype.setCssClass=function(c){this._CLASS_BACKGROUND=c||"timeListItemBackground";};b.prototype.setHighlightCssClass=function(c){this._CLASS_BACKGROUND_HIGHLIGHT=c||"timeListItemHighlight";};b.prototype.setHeight=function(c){this._height=c;return this;};b.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this._date.setCssClass("searchDetailResultListItemTextHighlighted");this._startEndTime.setCssClass("searchDetailResultListItemTextHighlighted");this._channelNum.setCssClass("searchDetailResultListItemTextHighlighted");this._channelName.setCssClass("searchDetailResultListItemTextHighlighted");this._vodTitle.setCssClass("searchDetailResultListItemTextHighlighted");}else{this._background.setCssClass(this._CLASS_BACKGROUND);this._date.setCssClass("searchDetailResultListItemText");this._startEndTime.setCssClass("searchDetailResultListItemText");this._channelNum.setCssClass("searchDetailResultListItemText");this._channelName.setCssClass("searchDetailResultListItemText");this._vodTitle.setCssClass("searchDetailResultListItemText");}};b.prototype.highlight=function(){if(!this.isHighlighted){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);this.isHighlighted=true;this.updateHighlight();if(this._vodTitle.isVisible()){this._vodTitle.start();}}};b.prototype.unHighlight=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isHighlighted){this.isHighlighted=false;this.updateHighlight();if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};b.prototype.focus=function(){this._background.setCssClass(this._CLASS_BACKGROUND_HIGHLIGHT);if(!this.isFocused){if(this._vodTitle.isVisible()){this._vodTitle.start();}this.isFocused=true;this.updateHighlight();}};b.prototype.defocus=function(){this._background.setCssClass(this._CLASS_BACKGROUND);if(this.isFocused){if(this._vodTitle.isVisible()){this._vodTitle.stop();}this.isFocused=false;this.updateHighlight();}};b.prototype.showBTVRelatedFields=function(c){this._recordIcon.update(c);this._reminderIcon.update(c);this._channelNum.setText(a.app.GeneralUtil.padNumberWithZeroes(this._dataMapper.getChannelNumber(c),3));this._channelName.setText(this._dataMapper.getChannelName(c));this._startOverIcon.update(c);};b.prototype.update=function(f){var d,e,c;if(f){d=f.uniqueEventId;this._channelNum.show();if(f.type===a.app.constants.SEARCH_TYPE.EPG||f.type===a.app.constants.SEARCH_TYPE.MDSEPG){if(f.startTime){this._date.setText(this._dataMapper.getDate(f));this._startEndTime.setText(this._dataMapper.getStartEndTime(f));}else{this._date.setText("");this._startEndTime.setText("");}this.setPositionsForSeries();this._vodTitle.show();this._vodTitle.setText(this._dataMapper.getTitle(f));this._episodeTitle.hide();this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===a.app.constants.SEARCH_TYPE.VOD){this._vodTitle.show();this._vodTitle.setText(this._dataMapper.getTitle(f));this._date.setText(this._dataMapper.getVodSeries(f));this._date.show();this._startEndTime.hide();this._episodeTitle.hide();this._channelNum.hide();this.setPositionsForSeries();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this._date.setX(1264);this._vodTitle.setX(22.5);this._channelName.setX(800);}else{if(f.type===a.app.constants.SEARCH_TYPE.CATCHUP){this._date.setText(this._dataMapper.getCathupDate(f));this._startEndTime.setText(this._dataMapper.getCatchupIndicator(f));this._vodTitle.hide();this.setPositionsForSeries();this._vodTitle.show();this._vodTitle.setText(this._dataMapper.getTitle(f));this._episodeTitle.hide();this._date.show();this._startEndTime.show();this._channelName.show();this.showBTVRelatedFields(f);}else{if(f.type===a.app.constants.SEARCH_TYPE.PVR){this._date.setText(this._dataMapper.getRecordedDate(f));this.setPositionsForSeries();this._vodTitle.show();this._vodTitle.setText(f.title);this._episodeTitle.hide();this._date.show();this._startEndTime.hide();this._channelName.setText(this._dataMapper.getChannelName(f));this._channelName.show();this.showBTVRelatedFields(f);}else{this._log("update","Unknown item type ("+f.type+")");this.resetPositions();this._vodTitle.show();this._vodTitle.setText(f.title);this._date.hide();this._episodeTitle.hide();this._startEndTime.hide();this._vodTitle.show();this._channelNum.hide();this._channelName.hide();}}}}if(this._vodTitle.isVisible()){this._vodTitle.stop();}}};a.gui=a.gui||{};a.gui.SearchGeneralTitleDetailResultListItem=b;}($N||{}));(function(b){function a(c){b.apps.core.Language.adornWithGetString(a,"customise/resources/");this._log=new b.apps.core.Log("CommonGUI","SearchEpisodeDetailResultListItem");a.superConstructor.call(this,c);}b.gui.Util.extend(a,b.gui.SearchActorDetailResultListItem);a.prototype.shiftPositionsToLeft=function(){this._title.configure({x:22.5,y:40,width:700,cssClass:"searchDetailResultListItemText"});this._date.configure({x:22.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:337.5,y:40,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:732.5,y:40,width:460,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:771,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:849,y:40,width:320,cssClass:"searchDetailResultListItemText"});this._recordIcon.configure({x:1660,y:8,visible:false});this._reminderIcon.configure({x:1710,y:8,visible:false});this._startOverIcon.configure({x:1710,y:8,visible:false});};a.prototype.resetPositions=function(){this._title.configure({x:22.5,y:40,width:700,cssClass:"searchDetailResultListItemText"});this._date.configure({x:732.5,y:40,cssClass:"searchDetailResultListItemText"});this._startEndTime.configure({x:950,y:40,cssClass:"searchDetailResultListItemText"});this._vodTitle.configure({x:732.5,y:40,width:460,cssClass:"searchDetailResultListItemText"});this._channelNum.configure({x:1228,y:40,cssClass:"searchDetailResultListItemText"});this._channelName.configure({x:1308,y:40,width:320,cssClass:"searchDetailResultListItemText"});this._recordIcon.configure({x:1660,y:8,visible:false});this._reminderIcon.configure({x:1710,y:8,visible:false});this._startOverIcon.configure({x:1710,y:8,visible:false});};a.prototype.update=function(e){var f=0,c,d;if(e){c=e.uniqueEventId;this._vodTitle.hide();d=this._dataMapper.getEpisodeTitle(e);if((d==="")||(d===" ")||(!d)){this._title.hide();this.shiftPositionsToLeft();}else{this.resetPositions();this._title.show();this._title.setText(d);}if(e.startTime){this._date.setText(this._dataMapper.getDate(e));}else{this._date.setText("");}if(e.type===b.app.constants.SEARCH_TYPE.CATCHUP){this._startEndTime.setText(this._dataMapper.getCatchupIndicator(e));}else{this._startEndTime.setText(this._dataMapper.getStartEndTime(e));}this._channelNum.setText(b.app.GeneralUtil.padNumberWithZeroes(this._dataMapper.getChannelNumber(e),3));this._channelName.setText(this._dataMapper.getChannelName(e));this._recordIcon.update(e,f);this._reminderIcon.update(e,f);this._startOverIcon.update(e,f);}this._highlight.hide();};b.gui=b.gui||{};b.gui.SearchEpisodeDetailResultListItem=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","PageableMosaic");if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.PagingMosaicMenu);a.prototype.setListPagedCallback=function(c){this._listPagedCallback=c;};a.prototype.getRowsPerPage=function(){return this._rows;};a.prototype.getColumnsPerPage=function(){return this._columns;};a.prototype.isSelectedItemAtFirstColumn=function(){return this._items.isSelectedItemAtFirstColumn()||(this._columns===1);};a.prototype.selectPrevious=function(){if(!this.isSelectedItemAtFirstColumn()){this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex()-1);return true;}return false;};a.prototype.selectNext=function(){if(!this.isSelectedItemAtLastColumn()){this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex()+1);return true;}return false;};a.prototype.pageUp=function(){if(!this.isAtFirstPage()){this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex(),this.getCurrentPageNumber()-1);return true;}return false;};a.prototype.pageDown=function(){var d,c;if(!this.isAtLastPage()){d=this._data.getSize()-this.getCurrentPageNumber()*this.getItemsPerPage();c=this.getSelectedRowIndex()*this.getSelectedColumnIndex();if(d<c){this.selectItemAtPosition(1,1,this.getCurrentPageNumber()+1);}else{this.selectItemAtPosition(this.getSelectedRowIndex(),this.getSelectedColumnIndex(),this.getCurrentPageNumber()+1);}return true;}return false;};a.prototype.selectAbove=function(){if(this.isSelectedItemAtFirstRow()){if(!this.isAtFirstPage()){this.moveToPreviousPage(this._rows,this.getSelectedColumnIndex());return true;}}else{this.selectItemAtPosition(this.getSelectedRowIndex()-1,this.getSelectedColumnIndex());return true;}return false;};a.prototype.selectBelow=function(){if(this.isSelectedItemAtLastRow()){if(!this.isAtLastPage()){this.moveToNextPage(1,this.getLastColumnIndex());return true;}}else{this.selectItemAtPosition(this.getSelectedRowIndex()+1,this.getLastColumnIndex());return true;}return false;};a.prototype.getLastColumnIndex=function(){var c=null,e=null,d=null;if(this.isAtLastPage()){c=this._data.getSize()%this.getItemsPerPage();d=Math.ceil(c/this._columns);if((this.getSelectedRowIndex()+1)===d){e=c%this._columns;}}if(e&&(this.getSelectedColumnIndex()>e)){return e;}else{return this.getSelectedColumnIndex();}};a.prototype.selectRowByValidation=function(d){var e,f=this._data.getSize(),c;for(e=1;e<=f;e++){c=this._data.getRowAtIndex(e);if(c&&d(c)){this._data.selectRowAtIndex(e);this._items.selectRowAtIndex(this._data.getViewSelectedRowIndex());return;}}this._data.selectRowAtIndex(1);this._items.selectRowAtIndex(this._data.getViewSelectedRowIndex());};a.prototype._moveSelection=function(){this._items.getSelectedItem().unHighlight();this._items.selectRowAtIndex(this._data.getViewSelectedRowIndex());this._items.getSelectedItem().highlight();this._handleItemHighlighted(this.getSelectedItem());};a.prototype.initialise=function(){this.setOrientation(b.gui.AbstractCustomisableList.consts.ORIENTAION_HORIZONTAL);a.superClass.initialise.call(this);};a.prototype.displayData=function(g,c){var f=this._data.returnViewableList(),e,d;for(e=0;e<f.length;e++){d=this._items.getRowAtIndex(e+1);d.unHighlight();d.update(f[e]);if(!d.isVisible()){d.show();}}if(f.length<this._data.getVisibleRows()){for(e=f.length;e<this._data.getVisibleRows();e++){this._items.getRowAtIndex(e+1).hide();}}if(g){this.defocus();}this._items.selectRowAtIndex(this._data.getViewSelectedRowIndex());this._items.getSelectedItem().highlight();if(!c){this._handleItemHighlighted(this.getSelectedItem(),true);}};a.prototype.focus=function(){var d,e=this._items.getSize(),c;for(d=1;d<=e;d++){c=this._items.getRowAtIndex(d);c.focus();}};a.prototype.defocus=function(){var d,e=this._items.getSize(),c;for(d=1;d<=e;d++){c=this._items.getRowAtIndex(d);c.defocus();}};a.prototype.keyHandler=function(c){var e=a.superClass.keyHandler.call(this,c),d=b.apps.core.KeyInterceptor.getKeyMap();if(!e){switch(c){case this._previousKeyRelease:case this._nextKeyRelease:case d.KEY_DOWN+this._KEY_RELEASE_SUFFIX:case d.KEY_UP+this._KEY_RELEASE_SUFFIX:if(this._itemHighlightedCallback){this._itemHighlightedCallback(this._data.getSelectedItem());}e=true;break;case d.KEY_CHAN_UP:e=this.pageUp();break;case d.KEY_CHAN_DOWN:e=this.pageDown();break;}}return e;};b.gui=b.gui||{};b.gui.PageableMosaic=a;}($N||{}));(function(c){var e=null,d=null;function a(k,h){a.superConstructor.call(this,k);this._log=new c.apps.core.Log("CommonGUI","BaseKeypad");this._container=new c.gui.Container(this._docRef);this._container.configure({cssClass:"outOfFocusBackground"});this._title=new c.gui.Label(this._docRef,this._container);this._title.configure({x:36,y:70,width:580,height:75,cssClass:"zapperTitle"});this._textBox=new c.gui.KeypadTextInput(this._docRef,this._container);this._textBox.configure({id:"textBox_check",x:36,y:85,width:580,height:100,cssClass:"keypadInputBar",cursorDisplay:null,clippedWidth:580,clippedHeight:75,labelY:65,labelCssClass:"keypadInputTextNumeric",labelAutoAlign:false});this._textBox._cursor.setCssClass("keypadInputTextAlphaNumeric");this._keypad=new c.gui.MultiItemTypeDynamicTable(this._docRef,this._container);this._keypad.configure({id:"keypad_check",x:36,y:199,width:580,height:320,cellPadding:10});this._keypad.setItemTemplate("KeypadKeyItem");this._keyPressCallback=function(){};this._exitCallback=null;this._colorKeyCallbacks=null;this._isSplitInputModeEnabled=false;this._splitInputSeperator=null;this._splitInputLeftKeySize=null;this._splitInputRightKeySize=null;this._keypadType=null;this._maxNumericKeypadValue=null;this._minNumericKeypadValue=null;this.CURSOR_TEXT="_ ";this.INVALID_ENTRY_TEXT="Invalid entry";this.CELLPADDING_NUMERIC_KEYPAD=14;this.CURSOR_TEXT_LEFT_PADDING=12;this.DEFAULT_WIDTH=580;this.DEFAULT_MAX_CHARACTERS=1000;this._rootSVGRef=this._container.getRootSVGRef();if(h){h.addChild(this);}this._isLowerCaseMode=false;this._focusState=false;this._allCapsDisplayMode=false;this._smsInput=new c.app.SMSInput();}c.gui.Util.extend(a,c.gui.GUIObject);d=a.prototype;function g(k){var m=k._keypad._controller.getSelectedCellIndex(),h=k._keypad._tableItems[m],l=k._keypad._data.items[m];switch(h.getId()){case"delete":k.backSpaceText();break;case"space":k.enterSpace();break;case"save":if(!k.isMinimumValueAllowed(k.getInputValue())){k.showErrorMessageAndReset(k);return false;}break;default:k.enterText(h);}if(l.keyPressCallback){l.keypadReturnObject.value=k.getInputValue();l.keyPressCallback(l.keypadReturnObject);}return true;}function b(k,h){k._colorKeyCallbacks[h](k._textBox.getLabelText());}function f(h){var k=h._keypad._controller.getSelectedCellIndex();if(!h._isLowerCaseMode){c.app.KeyboardUtils.showKeypad(c.app.KeyboardType.ALPHA_NUMERIC_LOWERCASE);h._isLowerCaseMode=true;}else{if(h._isLowerCaseMode){c.app.KeyboardUtils.showKeypad(c.app.KeyboardType.ALPHA_NUMERIC_UPPERCASE);h._isLowerCaseMode=false;}}h._keypad._highlightCell(k);}d.isNumberAllowedToEnter=function(h){if(this._keypadType===c.app.KeyboardType.NUMERIC){return(this._maxNumericKeypadValue===null||parseInt(h,10)<=parseInt(this._maxNumericKeypadValue,10));}else{return true;}};d.isMinimumValueAllowed=function(h){if(this._keypadType===c.app.KeyboardType.NUMERIC){return(this._minNumericKeypadValue===null||parseInt(h,10)>=parseInt(this._minNumericKeypadValue,10));}else{return true;}};d.showErrorMessageAndReset=function(h){this.clearInput();h._textBox.appendCharacter(h.INVALID_ENTRY_TEXT);if(h._isSplitInputModeEnabled){setTimeout(function(){h.clearInput();h.setInputFormat(h._splitInputLeftKeySize,h._splitInputRightKeySize,h._splitInputSeperator);},2000);}else{setTimeout(function(){h.clearInput();},2000);}};d.getKeypadTitle=function(){return this._title.getText();};d.setKeypadTitle=function(h){this._title.setText(h);};d.setCssClassForKeypadTitle=function(h){this._title.setCssClass(h);};d.getSize=function(){return this._keypad._tableItems.length;};d.enterSpace=function(){this._textBox.appendCharacter(" ");};d.enterSmsText=function(k){var h=null;if(this._keypadType!==c.app.KeyboardType.NUMERIC||(this._keypadType===c.app.KeyboardType.NUMERIC&&this.isNumberAllowedToEnter(k))){if(this._isSplitInputModeEnabled){h=this._textBox.getLabelText();h=h.replace(this.CURSOR_TEXT,k);this._textBox.setLabelText(h);}else{this._textBox.setLabelText(k);}}};d.enterText=function(k){var h=k.getText(),m=this.getInputValue()+h,l=null;if(this._keypadType!==c.app.KeyboardType.NUMERIC||(this._keypadType===c.app.KeyboardType.NUMERIC&&this.isNumberAllowedToEnter(m))){if(this._isSplitInputModeEnabled){l=this._textBox.getLabelText();l=l.replace(this.CURSOR_TEXT,h);this._textBox.setLabelText(l);}else{this._textBox.appendCharacter(h);}}};d.searchCharIndexInSplitterText=function(){var h,k=null;k=this._textBox.getLabelText();h=k.length-1;while(k[h]===this._splitInputSeperator||k[h]==="_"||k[h]===" "){h--;}return h;};d.removeCharacterWithCursor=function(){var l=null,h,k;l=this._textBox.getLabelText();h=(this._splitInputRightKeySize+this._splitInputLeftKeySize)*2+this._splitInputSeperator.length;if(l.length<h){k=this.searchCharIndexInSplitterText();l=l.substr(0,k)+this.CURSOR_TEXT+l.substr(k+1);this._textBox.setLabelText(l);}};d.backSpaceText=function(){if(this._isSplitInputModeEnabled){this.removeCharacterWithCursor();}else{this._textBox.removeCharacter();}};d.hasFocus=function(){return this._focusState;};d.focus=function(h){var k;if(h===undefined||h===true){k=0;}else{k=this._keypad._controller.getSelectedCellIndex()||0;}this._focusState=true;if(this._keypad._data.items){this._keypad._highlightCell(k);}this._container.setCssClass("onFocusBackground");};d.defocus=function(){this._focusState=false;if(this._keypad._data.items){this._keypad._unHighlightCell();}this._container.setCssClass("outOfFocusBackground");};d.reset=function(){this.hide();};d.setMaxNumericKeypadValue=function(h){this._maxNumericKeypadValue=h;};d.setMinNumericKeypadValue=function(h){this._minNumericKeypadValue=h;};d.setCssClass=function(h){this._container.setCssClass(h);};d.setHeight=function(h){this._container.setHeight(h);};d.setWidth=function(h){this._container.setWidth(h);};d.setKeyConfig=function(h){this._keypad.setItemConfig(h);};d.setKeys=function(h){if(this._keypadType===c.app.KeyboardType.ALPHA_NUMERIC_UPPERCASE||this._keypadType===c.app.KeyboardType.ALPHA_NUMERIC_LOWERCASE){this._textBox.configure({labelCssClass:"keypadInputTextAlphaNumeric"});}else{this._textBox.configure({labelCssClass:"keypadInputTextNumeric"});this._keypad.configure({cellPadding:this.CELLPADDING_NUMERIC_KEYPAD});}this._keypad.setData(h);};d.setCursorEnable=function(h){if(h){this.enableBlinkingCursor();}};d.setLabelWidth=function(h){this._textBox._label.setWidth(h);};d.setLabelAutoAlign=function(h){this._textBox.setLabelAutoAlign(h);};d.setMaxCharacters=function(h){this._textBox.setMaxCharacters(h);};d.setClippedWidth=function(h){this._textBox.setClippedWidth(h);};d.setAllCapsDisplayMode=function(h){this._allCapsDisplayMode=h;};d.setTextInputAlignment=function(h){if(h==="left"){this._textBox.setClippedX(this.CURSOR_TEXT_LEFT_PADDING);}else{if(h==="centre"){this._textBox._label.setWidth(580);}}};d.resetKeyPadConfig=function(){this._maxNumericKeypadValue=null;this._minNumericKeypadValue=null;this._allCapsDisplayMode=false;this.disableCursor();this._textBox.setLabelAutoAlign(false);this._textBox.setClippedWidth(this.DEFAULT_WIDTH);this._textBox.setMaxCharacters(this.DEFAULT_MAX_CHARACTERS);this._textBox.setClippedX(this.CURSOR_TEXT_LEFT_PADDING);this.clearInput();this._textBox.configure({labelCssClass:"keypadInputTextNumeric"});};d.clearKeys=function(){var h;for(h=0;h<this._keypad._tableItems.length;h++){this._keypad._tableItems[h].destroy();}this._keypad._tableItems=[];};d.clearInput=function(){this._textBox.clear();};d.getInputValue=function(){var k=null,h;if(this._keypadType===c.app.KeyboardType.NUMERIC){h=new RegExp(this.CURSOR_TEXT,"g");k=this._textBox.getLabelText().replace(h,"");}else{k=this._textBox.getLabelText();}return k;};d.getKeyDataByIndex=function(h){return this._keypad._data.items[h];};d.setInputValue=function(h){if(this._allCapsDisplayMode){h=h.toUpperCase();}this._textBox.setLabelText(h);};d.enableSplitInput=function(){this._isSplitInputModeEnabled=true;};d.disableSplitInput=function(){this._isSplitInputModeEnabled=false;};d.setSplitInputSeperator=function(h){this._splitInputSeperator=h;};d.setSplitInputLeftKeySize=function(h){this._splitInputLeftKeySize=h;};d.setSplitInputRightKeySize=function(h){this._splitInputRightKeySize=h;};d.setInputChangeCallback=function(h){this._textBox.setTextChangedCallback(h);};d.setKeyPressCallback=function(h){this._keyPressCallback=h;};d.setKeyCssClass=function(k){var h=null;for(h=0;h<this._keypad._tableItems.length;h++){this._keypad._tableItems.setCssClass(k);}};d.setKeyHighlightCssClass=function(h){this._keypad._highlight.setCssClass(h);};d.setTextBoxCssClass=function(h){this._textBox.setCssClass(h);};d.setTextInputCssClass=function(h){this._textBox.setLabelCssClass(h);};d.setExitCallback=function(h){this._exitCallback=h;};d.setColorKeyCallbacks=function(h){this._colorKeyCallbacks=h;};d.setInputFormat=function(m,k,l){var h=null;this.setSplitInputRightKeySize(k);this.setSplitInputLeftKeySize(m);this.setSplitInputSeperator(l);this.enableSplitInput();for(h=0;h<m;h++){this._textBox.appendCharacter(this.CURSOR_TEXT);}this._textBox.appendCharacter(l);for(h=0;h<k;h++){this._textBox.appendCharacter(this.CURSOR_TEXT);}};d.enableCursor=function(){this._textBox.setCursorDisplay("on");};d.enableBlinkingCursor=function(){this._textBox._cursor.setAnimationDuration("500ms");this._textBox._cursor.show();this._textBox.setCursorDisplay("pulse");};d.disableCursor=function(){this._textBox.setCursorDisplay(null);};d.setCssClasses=function(h){if(h.keypadInputBar){this._textBox.setCssClass(h.keypadInputBar);}if(h.keyInactive||h.keyActive){this._keypad.doForAllItems(function(k){if(h.keyInactive){k.setCssClass(h.keyInactive);}if(h.keyActive){k.setHighlightCssClass(h.keyActive);}});}};d.initialise=function(h){var k=null;this._keypadType=h||c.app.KeyboardType.ALPHA_NUMERIC_LOWERCASE;this._allCapsDisplayMode=false;switch(this._keypadType){case c.app.KeyboardType.ALPHA_NUMERIC_LOWERCASE:k=a.getString("smsAlphabet");this._isLowerCaseMode=true;break;case c.app.KeyboardType.ALPHA_NUMERIC_UPPERCASE:k=a.getString("smsAlphabet");this._isLowerCaseMode=false;break;case c.app.KeyboardType.NUMERIC:k=a.getString("numericAlphabet");break;}this._smsInput.initKeypad(k);};d.keyHandler=function(q,n){var s,o=false,p,r,l=this._textBox.getLabelText(),m=null,k=null,h=null;s=c.apps.core.KeyInterceptor.getKeyMap();o=this._keypad.keyHandler(q);if(!o){switch(q){case s.KEY_ZERO:case s.KEY_ONE:case s.KEY_TWO:case s.KEY_THREE:case s.KEY_FOUR:case s.KEY_FIVE:case s.KEY_SIX:case s.KEY_SEVEN:case s.KEY_EIGHT:case s.KEY_NINE:if(this.isNumberAllowedToEnter(this.getInputValue()+q)){m=this._smsInput.inputChar(q,l);k=m.charAt(m.length-1);h=m.substr(0,m.length-1);if(this._isSplitInputModeEnabled){if(!this._isLowerCaseMode){h=k;}else{h=k.toLowerCase();}}else{if(!this._isLowerCaseMode){h+=k;}else{h+=k.toLowerCase();}}this.enterSmsText(h);return true;}break;case s.KEY_OK:if(g(this)){if(this._keypad._tableItems[this._keypad._controller.getSelectedCellIndex()].getId()==="save"){if(this._isSplitInputModeEnabled){this.disableSplitInput();}this.resetKeyPadConfig();}}o=true;break;case s.KEY_LEFT:case s.KEY_BACK:case s.KEY_EXIT:if(!n){if(this._exitCallback){this._exitCallback(q);o=true;}}if(this._isSplitInputModeEnabled){this.disableSplitInput();}o=true;break;case s.KEY_YELLOW:if(this._keypadType!==c.app.KeyboardType.NUMERIC){f(this);}o=true;break;case s.KEY_BLUE:case s.KEY_GREEN:case s.KEY_RED:if(this._colorKeyCallbacks&&this._colorKeyCallbacks[q]){b(this,q);o=true;}break;}}return o;};c.gui=c.gui||{};c.gui.BaseKeypad=a;}($N||{}));$N.apps.core.Language.adornWithGetString($N.gui.BaseKeypad);(function(b){function a(e,d){a.superConstructor.call(this,e);this._log=new b.apps.core.Log("CommonGUI","MultiItemTypeDynamicTable");this._rootSVGRef=this._container.getRootSVGRef();if(d){d.addChild(this);}}b.gui.Util.extend(a,b.gui.DynamicTable);var c=a.prototype;c._addCell=function(e){var g=null,d=this._data.items[e],f=this._data.items[this._rootCellIndex];if(!this._itemTemplate){throw ("MultiItemTypeDynamicTable - _addCell: No list item template provided");}if(this._tableItems.length>this._itemCount){g=this._tableItems[this._itemCount];if(g.reset){g.reset();}else{g.hide();}}else{g=new (this.getItemTemplateByIndex(e))(this._docRef,this._tableContainer);this._tableItems.push(g);g.hide();}this._itemCount=this._itemCount+1;g.configure(this.getItemConfigByIndex(e));g.configure({x:d.x*this._tableScale.x,y:d.y*this._tableScale.y,width:(d.width*this._tableScale.x)-this._cellPadding,height:(d.height*this._tableScale.y)-this._cellPadding});if(g.update&&this.getDataMapperByIndex(e)){g.setDataMapper(this.getDataMapperByIndex(e));g.update(d.data);}else{if(d.data){g.configure(d.data);}}g.show();if(!f||(d.x+d.y)<(f.x+f.y)){this._rootCellIndex=e;}};c.initialise=function(){var e,f,d=10;for(e=0;e<d;e++){f=new (this.getItemTemplateByIndex(e))(this._docRef,this._tableContainer);this._tableItems.push(f);f.hide();}};c.setDataMapper=function(d){this._dataMapper=d;};c.getDataMapperByIndex=function(e){var d=this._data.items[e].dataMapper;if(d){if(typeof d==="string"){d=window.$N.app.DataMappers["get"+d]();}}else{d=this._dataMapper;}return d;};c.getItemTemplateByIndex=function(d){var e=this._data.items[d].template;if(e){if(typeof e==="string"){e=window.$N.gui[e]||window[e];}}else{e=this._itemTemplate;}return e;};c.getItemConfigByIndex=function(d){if(this._data.items[d].itemConfig){return this._data.items[d].itemConfig;}else{return this._itemConfig;}};b.gui=b.gui||{};b.gui.MultiItemTypeDynamicTable=a;}($N||{}));(function(a){function c(e,d){this._log=new a.apps.core.Log("CommonGUI","KeypadKeyItem");c.superConstructor.call(this,e);this._container=new a.gui.Container(e);this._container.configure({rounding:2});this._highlight=new a.gui.Container(e,this._container);this._highlight.configure({x:0,width:580.5,height:105,cssClass:"keyActive",rounding:1,visible:false});this._text=new a.gui.Label(this._docRef,this._container);this._text.configure({y:46,cssClass:"keypadEntryKey",fontSize:"30px"});this._rootSVGRef=this._container.getRootSVGRef();if(d){d.addChild(this);}}a.gui.Util.extend(c,a.gui.AbstractComponent);var b=c.prototype;b.highlight=function(d){this._highlight.setWidth(this._container.getTrueWidth());this._highlight.setHeight(this._container.getTrueHeight());this._highlight.show();};b.unHighlight=function(){this._highlight.hide();};b.setCssClass=function(d){this._container.setCssClass(d);};b.setLabelCssClass=function(d){this._text.setCssClass(d);};b.setHighlightCssClass=function(d){this._highlight.setCssClass(d);};b.setHighlightOpacity=function(d){this._highlight.setOpacity(d);};b.setLabelFontSize=function(d){this._text.setFontSize(d);};b.setWidth=function(d){this._container.setWidth(d);this._text.setWidth(d);};b.setHeight=function(d){this._container.setHeight(d);this._text.setHeight(d);};b.setText=function(d){this._text.setText(d);};b.setTextY=function(d){this._text.setY(d);};b.setTextConfig=function(d){this._text.configure(d);};b.getText=function(){return this._text.getText();};a.gui=a.gui||{};a.gui.KeypadKeyItem=c;}($N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this.FOLDER_X_POSITION=63;this.TEXT_X_POSITION=125;this._folderIcon=new a.gui.Image(this._docRef,this._container);this._folderIcon.configure({x:63,y:8,href:"../../../customise/resources/images/%RES/icons/DVR_pasta_menor.png",visible:true});this._text.configure({x:125,y:40});this._container.setWidth(682);this.setDataMapper({getTitle:function(d){return d.name;},getIcon:function(d){return d.icon;},getFolderIcon:function(d){return d.foldericon;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.MenuItemIconWithHighlight);b.prototype.setWidth=function(c){this._container.setWidth(c);};b.prototype.setHighlightWidth=function(c){this._highlight.setWidth(c);};b.prototype.setHighlightOpacity=function(c){this._highlight.setOpacity(c);};b.prototype.update=function(c){b.superClass.update.call(this,c);if(c){var d=this._dataMapper.getAdditionalIcon(c);if(d){if(d==="MOVETEXT"){this._text.setX(this.FOLDER_X_POSITION);d="";}else{this._text.setX(this.TEXT_X_POSITION);}this._folderIcon.setHref(d);}}};a.gui=a.gui||{};a.gui.RecordingFolderMenuItem=b;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.FOLDER_X_POSITION=63;this.TEXT_X_POSITION=125;this.MOVE_TEXT="MOVETEXT";this.TEXT_WIDTH=500;this.TRIPLE_SPACE=b.app.constants.TRIPLE_SPACE_UNICODE;this._scrollingText=new b.gui.DelayedScrollingLabel(this._docRef,this._container);this._scrollingText.configure({x:125,y:10,width:500,cssClass:"dialogSubtitle",duration:"250ms",visible:true});}b.gui.Util.extend(a,b.gui.RecordingFolderMenuItem);a.prototype.update=function(c){var d=this._dataMapper.getAdditionalIcon(c);a.superClass.update.call(this,c);if(c){this._container.setWidth(500);this._scrollingText.show();this._scrollingText.setText(this._dataMapper.getTitle(c));if(d){if(d===this.MOVE_TEXT){this._scrollingText.setX(this.FOLDER_X_POSITION);d="";}else{this._scrollingText.setX(this.TEXT_X_POSITION);}}this._scrollingText.stop();this._scrollingText.hide();}};a.prototype.highlight=function(){var c="";this.isHighlighted=true;this.updateHighlight();this._scrollingText.show();c=this._scrollingText.getText().trim()+this.TRIPLE_SPACE;this._scrollingText.setText(c);if(this._scrollingText.getTrueTextLength()>this.TEXT_WIDTH){this._text.hide();this._scrollingText.show();this._scrollingText.start();}else{this._scrollingText.hide();this._text.show();}};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();this._text.show();if(this._scrollingText.isVisible()){this._scrollingText.stop();this._scrollingText.hide();}};a.prototype.defocus=function(){this._text.show();if(this._scrollingText.isVisible()){this._scrollingText.stop();this._scrollingText.hide();}this.isFocused=false;this.updateHighlight();};b.gui=b.gui||{};b.gui.MediaBrowserMenuItem=a;}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","Breadcrumb");this._path=[];this._container=new a.gui.Group(this._docRef);this._parentFolderLabel=new a.gui.Label(this._docRef,this._container);this._currentFolderLabel=new a.gui.Label(this._docRef,this._container);this._container.configure({width:1260,height:50});this._parentFolderLabel.configure({x:0,y:0,width:800,cssClass:"breadcrumbParent"});this._currentFolderLabel.configure({x:21,y:0,cssClass:"breadcrumbCurrent"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype._updateLabels=function(){if(this._path.length<=1){if(this._path.length===0){this._parentFolderLabel.setText("");}else{this._parentFolderLabel.setText(this._path[this._path.length-1]);}this._currentFolderLabel.setText("");}else{this._parentFolderLabel.setText(this._path[this._path.length-2]);this._currentFolderLabel.setText(this._path[this._path.length-1]);this._currentFolderLabel.setX(this._parentFolderLabel.getTrueTextLength()+12);this._currentFolderLabel.setWidth(this._container.getTrueWidth()-this._currentFolderLabel.getTrueX());}};b.prototype.push=function(c){this._path.push(c);this._updateLabels();};b.prototype.pop=function(){this._path.pop();this._updateLabels();};b.prototype.setParentLabelCss=function(c){this._parentFolderLabel.setCssClass(c);};b.prototype.setChildLabelCss=function(c){this._currentFolderLabel.setCssClass(c);};b.prototype.getBreadCrumbLength=function(){return this._parentFolderLabel.getTrueTextLength()+this._currentFolderLabel.getTrueTextLength();};b.prototype.reset=function(){this._path=[];this._updateLabels();};b.prototype.setPath=function(c){this._path=c.slice(0);this._updateLabels();};a.gui=a.gui||{};a.gui.Breadcrumb=b;}($N||{}));(function(a){var b=function(e,c){var d=this;b.superConstructor.call(this,e);this._log=new a.apps.core.Log("CommonGUI","FadingImage");this._container=new a.gui.Group(this._docRef);this._underImage=new a.gui.CachedImage(this._docRef,this._container);this._image=new a.gui.Image(this._docRef,this._container);this._underImage.configure({width:204,height:285,href:a.app.ImageUtil.DEFAULT_TITLE_IMAGE,preserveAspect:false});this._image.addFadeAnimation();this._image.configure({width:204,height:285,opacity:0,loadSuccessful:function(){var f=function(){d._image.getFadeAnimation().setAnimationEndCallback(null);d._underImage.hide();};this.getFadeAnimation().setAnimationEndCallback(f);this.doFade(1);},preserveAspect:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setWidth=function(c){this._underImage.setWidth(c);this._image.setWidth(c);this._width=c;};b.prototype.setHeight=function(c){this._underImage.setHeight(c);this._image.setHeight(c);this._height=c;};b.prototype.setUnderImageConfig=function(c){this._underImage.configure(c);};b.prototype.setImageConfig=function(c){this._image.configure(c);};b.prototype.setHref=function(c){if(this._image.getHref()!==c){this._underImage.show();this._image.setOpacity(0);this._image.setHref(c);if(this._image._innerElement.naturalWidth){this._image.setOpacity(1);}}else{this._image.setOpacity(1);}};a.gui=a.gui||{};a.gui.FadingImage=b;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","ImageScrapbook");this._imageWidth=121.5;this._hrefArray=[];this._fadeQueue=[];this._timeoutId=null;this._container=new b.gui.Group(this._docRef);this._images=[];this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.GUIObject);a.prototype._doForAllImages=function(c){var d,e=this._images.length;for(d=0;d<e;d++){c(this._images[d],d);}};a.prototype.setWidth=function(c){this._width=c;};a.prototype.setHeight=function(c){this._doForAllImages(function(d){d.configure({width:c,height:c});});this._height=c;};a.prototype.setImageWidth=function(c){this._imageWidth=c;};a.prototype.setImageConfig=function(c){this._doForAllImages(function(d){d.configure(c);});};a.prototype._showImage=function(d){var c=this;d.bringToFront();d.setOpacity(1);d.doFade(0);d.doFade(1);clearTimeout(this._timeoutId);this._timeoutId=setTimeout(function(){c._timeoutId=null;c._fadeNextImage();},500+(Math.random()*1000));};a.prototype._fadeNextImage=function(){this._fadeQueue.shift();if(this._fadeQueue.length){this._showImage(this._fadeQueue[0]);}};a.prototype._imageReady=function(c){this._fadeQueue.push(c);if(this._fadeQueue.length===1){this._showImage(c);}};a.prototype._fetchNextImage=function(d){var c="";if(this._hrefArray.length){c=this._hrefArray.pop();}d.setOpacity(0);if(d.getHref()!==c){d.setHref(c);}else{this._imageReady(d);}};a.prototype.setImagePositions=function(d){var k=this,g,h,l,e=function(){k._imageReady(this);},c=function(){k._fetchNextImage(this);},f=this._width-this._imageWidth;d=b.app.ArrayUtil.arrayShuffle(d);if(!this._images.length){h=d.length;for(g=0;g<h;g++){l=new b.gui.Image(this._docRef,this._container);l.addFadeAnimation();l.configure({width:this._imageWidth,height:this._height,opacity:0,loadSuccessful:e,loadFailedCallback:c,preserveAspect:true});this._images[g]=l;}}this._doForAllImages(function(n,m){n.setX(d[m]*f);});};a.prototype.setHrefs=function(c){var d=this;this._fadeQueue=[];clearTimeout(this._timeoutId);this._hrefArray=c.slice(0);this._doForAllImages(function(e){d._fetchNextImage(e);});};b.gui=b.gui||{};b.gui.ImageScrapbook=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(this._docRef);this._container.setWidth(682);this._container.setHeight(54);this._container.configure({x:-20});this._background=new b.gui.Container(c,this._container);this._background.configure({width:660,height:49,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight=new b.gui.Container(c,this._container);this._highlight.configure({x:0,width:660,height:49,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._channelNumber=new b.gui.Label(this._docRef,this._container);this._channelNumber.configure({x:65,y:38,width:1300,cssClass:"dialogSubtitle"});this._text=new b.gui.Label(this._docRef,this._container);this._text.configure({x:155,y:38,width:1300,cssClass:"dialogSubtitle"});this._icon=new b.gui.Image(c,this._container);this._icon.configure({x:20,y:9,width:30,height:30,visible:true});this._cursor=new b.gui.Label(c,this._container);this._cursor.configure({x:24,y:60,width:120,height:52.5,cssClass:"textUbuntuMedium directChannelEntryFeedback"});this.setDataMapper({getText:function(d){return d.name;}});this._originalChannelNumber=null;this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.TextItem);a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("channelListItemHighlight");this._background.setCssClass("menuItemBackgroundFocus");this._background.show();this._highlight.show();}else{this._highlight.setCssClass("recordingsWindowBackground");this._background.setCssClass("menuItemBackgroundDefocus");this._background.hide();this._highlight.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(c){var d;if(c){d=this._dataMapper.getIcon(c);this._text.setText(this._dataMapper.getTitle(c));this._icon.setHref(d);this._channelNumber.setText(this._dataMapper.getChannelNumber(c));this._originalChannelNumber=this._dataMapper.getChannelNumber(c);}a.superClass.update.call(this);};a.prototype.updateIcon=function(c){var d;if(c){d=this._dataMapper.getIcon(c);this._icon.setHref(d);}};a.prototype.setIconUrl=function(c){if(c){this._icon.setHref(c);}};a.prototype.showIcon=function(){this._icon.show();};a.prototype.hideIcon=function(){this._icon.hide();};a.prototype.getOriginalChannelNumber=function(){return this._originalChannelNumber;};a.prototype.updateForChannelEntry=function(){this._channelNumber.setX(65);this._channelNumber.setY(38);this._channelNumber.setCssClass("textUbuntuMedium directChannelEntryFeedback");};a.prototype.updateForChannelEntryOver=function(){this._channelNumber.setX(65);this._channelNumber.setY(38);this._channelNumber.setCssClass("dialogSubtitle");};a.prototype.setServiceNumber=function(c){this._channelNumber.setText(c);};b.gui=b.gui||{};b.gui.ChannelListIconItem=a;}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d);this._data=null;this._isHighlighted=false;this._isFocused=false;this._ItemHighlightedTimeOutMS=5000;this._ItemHighlightedTimer=null;this._container=new b.gui.ClippedGroup(this._docRef);this._container.configure({width:661.5,height:117});this._highlight=new b.gui.Container(d,this._container);this._highlight.configure({x:0,width:661.5,height:117,cssClass:"messageListItemHighlight",rounding:1,visible:false});this._mailIcon=new b.gui.Image(d,this._container);this._mailIcon.configure({x:27,y:25.5});this._mailDate=new b.gui.Label(d,this._container);this._mailDate.configure({x:82,y:51,cssClass:"messageListItemDate"});this._mailTitle=new b.gui.DelayedScrollingLabel(d,this._container);this._mailTitle.configure({x:27,y:64,width:607,duration:"250ms",cssClass:"messageListItemTitle"});this._rootSVGRef=this._container.getRootSVGRef();}b.gui.Util.extend(a,b.gui.TextItem);a.prototype.setMailReadIcon=function(){this._mailIcon.setY(18);this._mailIcon.setHref("../../../customise/resources/images/net/mensagens_opened_envelope.png");};a.prototype.setMailUnreadIcon=function(){this._mailIcon.setY(25.5);this._mailIcon.setHref("../../../customise/resources/images/net/mensagens_closed_envelope.png");};a.prototype.update=function(d){var c;this._data=d;if(d){c=this._dataMapper.getMailReadStatus(d);if(c){this.setMailReadIcon();}else{this.setMailUnreadIcon();}this._mailDate.setText(this._dataMapper.getMailDate(d));this._mailTitle.setText(this._dataMapper.getMailTitle(d),true);}};a.prototype.itemHighlightTimeoutClear=function(){if(this._ItemHighlightedTimer){clearTimeout(this._ItemHighlightedTimer);this._ItemHighlightedTimer=null;}};a.prototype.setMailRead=function(){this.setMailReadIcon();this._dataMapper.setMailReadStatus(this._data);b.app.MessageUtil.setMessageMailRead(this._dataMapper.getMailId(this._data));};a.prototype.highlight=function(){var c=this;this._isHighlighted=true;if(this._isFocused){this._highlight.show();this._mailTitle.start();this.itemHighlightTimeoutClear();if(this._data&&!this._dataMapper.getMailReadStatus(this._data)){this._ItemHighlightedTimer=setTimeout(function(){c.setMailRead();},this._ItemHighlightedTimeOutMS);}}};a.prototype.unHighlight=function(){var c;this._mailTitle.stop();this._highlight.hide();this.itemHighlightTimeoutClear();if(this._isHighlighted&&this._isFocused&&this._data){c=this._dataMapper.getMailReadStatus(this._data);if(!c){this.setMailRead();}}this._isHighlighted=false;};a.prototype.focus=function(){var c=this;this._isFocused=true;if(this._isHighlighted){this._highlight.show();this._mailTitle.start();this.itemHighlightTimeoutClear();if(this._data&&!this._dataMapper.getMailReadStatus(this._data)){this._ItemHighlightedTimer=setTimeout(function(){c.setMailRead();},this._ItemHighlightedTimeOutMS);}}else{this._highlight.hide();}};a.prototype.defocus=function(){var c;this._highlight.hide();this._mailTitle.stop();this.itemHighlightTimeoutClear();if(this._isFocused&&this._isHighlighted&&this._data){c=this._dataMapper.getMailReadStatus(this._data);if(!c){this.setMailRead();}}this._isFocused=false;};b.gui=b.gui||{};b.gui.MessageListItem=a;}($N||{}));(function(b){function a(c){a.superConstructor.call(this,c);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(this._docRef);this._container.setWidth(682);this._container.setHeight(54);this._container.configure({x:-20});this._background=new b.gui.Container(c,this._container);this._background.configure({width:660,height:49,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight=new b.gui.Container(c,this._container);this._highlight.configure({x:0,width:660,height:49,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._channelNumber=new b.gui.Label(this._docRef,this._container);this._channelNumber.configure({x:60,y:38,width:1300,cssClass:"dialogSubtitle"});this._text=new b.gui.Label(this._docRef,this._container);this._text.configure({x:155,y:38,width:1300,cssClass:"dialogSubtitle"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}b.gui.Util.extend(a,b.gui.TextItem);a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._highlight.setCssClass("channelListItemHighlight");this._background.setCssClass("menuItemBackgroundFocus");this._background.show();this._highlight.show();}else{this._highlight.setCssClass("recordingsWindowBackground");this._background.setCssClass("menuItemBackgroundDefocus");this._background.hide();this._highlight.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(c){if(c){this._text.setText(this._dataMapper.getTitle(c));this._channelNumber.setText(this._dataMapper.getChannelNumber(c));}a.superClass.update.call(this);};b.gui=b.gui||{};b.gui.DoubleTextItem=a;}($N||{}));(function(a){var b=function(d,c){b.superConstructor.call(this,d);this._itemTemplate=a.gui.OptionsMenuItem;this._data.setWrapAround(false);this._itemConfig.movementPositions=a.app.MenuUtil.getItemPositionsOptionsMenu();this.setOrientation(a.gui.FixedList.consts.ORIENTAION_HORIZONTAL);this.setDataMapper({getText:function(e){return e.title;},getTitle:function(e){return e.title;},getIcon:function(e){return e.url;},getType:function(e){return e.type;}});if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.FixedList);b.prototype.initialise=function(){b.superClass.initialise.call(this,true);};b.prototype.keyHandler=function(c){var d=a.gui.FrameworkCore.getKeys(),e=false;switch(c){case this._previousKey:if(!this.isSelectedAtFirst()){this.selectPrevious();e=true;}else{e=false;}break;case this._nextKey:if(!this.isSelectedAtLast()){this.selectNext();e=true;}break;case d.KEY_RIGHT:case d.KEY_OK:this._itemSelectedCallback(this._data.getSelectedItem());e=true;break;}return e;};a.gui=a.gui||{};a.gui.OptionsBar=b;}($N||{}));$N.app.SelectionType={SINGLE:"single",MULTIPLE:"multiple"};(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._title=new b.gui.Label(this._docRef,this._container);this._log=new b.apps.core.Log("CommonGUI","SelectionList");this._selectionType=b.app.SelectionType.SINGLE;this._title.configure({x:65,y:-30,cssClass:"dialogSubtitle"});this._exitCallback=function(){};};b.gui.Util.extend(a,b.gui.PageableListWithArrows);a.prototype._hideAllIcons=function(){var c,d=this._items.length;for(c=0;c<d;c++){this._items[c].hideIcon();}};a.prototype.initialise=function(){a.superClass.initialise.call(this);if(typeof this._items[0].showIcon!=="function"||typeof this._items[0].hideIcon!=="function"){throw ("SelectionList - initialise: item template is not valid, please make sure it has showIcon and hideIcon function");}};a.prototype.setSelectionType=function(c){this._selectionType=c;};a.prototype.getSelectionType=function(){return this._selectionType;};a.prototype._selectItem=function(c){var d=this._data.getSelectedItem();if(this._selectionType===b.app.SelectionType.SINGLE){this._hideAllIcons();c.showIcon();}else{c.toggleIconVisibility();}d.selected=true;this._itemSelectedCallback(d);};a.prototype.keyHandler=function(c){var d=b.gui.FrameworkCore.getKeys(),f=false,e=this.getActualSelectedItem();switch(c){case d.KEY_OK:this._selectItem(e);f=true;break;case d.KEY_RIGHT:f=true;break;case d.KEY_LEFT:case d.KEY_BACK:if(this._exitCallback){f=true;this._exitCallback();}break;}if(!f){a.superClass.keyHandler.call(this,c);}return f;};a.prototype.setTitle=function(c){this._title.setText(c);};a.prototype.setExitCallback=function(c){this._exitCallback=c;};b.gui=b.gui||{};b.gui.SelectionList=a;}($N||{}));var $N=$N||{};(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonGUI","InfoList");a.apps.core.Language.importLanguageBundleForObject(b,null,"apps/firstInstall/common/","LanguageBundle.js",null,window);this._container=new a.gui.Group(this._docRef);this._background=new a.gui.Container(this._docRef,this._container);this._list=new a.gui.PageableListWithArrows(this._docRef,this._container);this._legend=new a.gui.Container(this._docRef,this._container);this._legendBack=new a.gui.Label(this._docRef,this._legend);this._legendBackArrow=new a.gui.Image(this._docRef,this._legend);this._WIDTH=1345.5;this._container.configure({width:this._WIDTH,height:576});this._background.configure({width:this._WIDTH,height:576,cssClass:"menuBackgroundDefocus"});this._list.configure({x:0,y:40,itemHeight:54,visibleItemCount:10,itemTemplate:"SettingsSystemMenuItem",scrollType:"page",upArrowProperties:{x:1295.5,y:-35,visible:false},downArrowProperties:{x:1295.5,y:490,visible:false}});this._legend.configure({x:0,y:600,width:660,height:72,cssClass:"menuBackgroundDefocus"});this._legendBack.configure({x:61.5,y:45,cssClass:"legend"});this._legendBackArrow.configure({x:28.5,y:21,href:"../../../customise/resources/images/%RES/icons/left_arrow.png"});this._exitCallback=null;this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.focus=function(){this._list.focus();this._legend.setWidth(this._WIDTH);this._background.setCssClass("menuBackgroundFocus");};b.prototype.initialise=function(){this._list.setDataMapper({getTitle:function(c){return c.key;},getSubTitle:function(c){return c.value;}});this._list.initialise();};b.prototype.preview=function(c){this._list.setData(c);this._list.displayData(true,true);this._legend.hide();this.show();};b.prototype.activate=function(c){this.focus();this._legendBack.setText(b.getString("menuSettingsBack"));this._legend.show();if(c){this._list.setData(c);this._list.displayData();}else{this._list._getSelectedObject().highlight();}this.show();};b.prototype.passivate=function(){this._list.defocus();this._legend.hide();this._background.setCssClass("menuBackgroundDefocus");};b.prototype.setExitCallback=function(c){this._exitCallback=c;};b.prototype.keyHandler=function(c){var d=a.apps.core.KeyInterceptor.getKeyMap(),e=false;e=this._list.keyHandler(c);if(!e){switch(c){case d.KEY_LEFT:case d.KEY_BACK:e=true;this.passivate();if(this._exitCallback){this._exitCallback();}break;}}return e;};a.gui=a.gui||{};a.gui.InfoList=b;}($N||{}));var $N=$N||{};(function(b){var a=function(d,c){a.superConstructor.call(this,d);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(d);this._background=new b.gui.Container(d,this._container);this._title1=new b.gui.Label(d,this._container);this._title2=new b.gui.Label(d,this._container);this._highlight=new b.gui.Container(d,this._container);this._width=1345.5;this._height=72;this.PADDING=27;this._COLUMN_2_X=622.4;this._container.configure({width:this._width,height:this._height});this._background.configure({width:this._width,height:this._height,cssClass:"menuItemBackgroundFocus",visible:false});this._title1.configure({x:this.PADDING,y:50,width:this._COLUMN_2_X-this.PADDING,cssClass:"libraryOptionsMenuText"});this._title2.configure({x:this._COLUMN_2_X,y:50,width:this._width-this._COLUMN_2_X,cssClass:"libraryOptionsMenuTextBold"});this._highlight.configure({width:this._width,height:this._height,cssClass:"menuItemHighlight",rounding:1,visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._background.setWidth(c);this._highlight.setWidth(c);this._title2.setWidth(this._width-this._COLUMN_2_X);};a.prototype.setColumn2X=function(c){this._COLUMN_2_X=c;this._title1.setWidth(this._COLUMN_2_X-this.PADDING);this._title2.setWidth(this._width-this._COLUMN_2_X);};a.prototype.setHeight=function(c){this._height=c;this._container.setHeight(c);this._background.setHeight(c);this._highlight.setHeight(c);};a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.show();this._highlight.show();}else{this._highlight.hide();this._background.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(c){this._title1.setText(this._dataMapper.getKey(c));this._title2.setText(this._dataMapper.getValue(c));};b.gui.TwoColumnsMenuItem=a;}($N||{}));var $N=$N||{};$N.gui=$N.gui||{};(function(a){var b=function(d,c){this._log=new a.apps.core.Log("CommonGUI","MessageDialog");b.superConstructor.call(this,d);this._blackUI=true;this._container=new a.gui.Group(d);this._background=new a.gui.BackgroundBox(this._docRef,this._container);this._barGroup=new a.gui.Group(this._docRef,this._container);this._basicGradientTop=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._basicGradientBottom=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._solidLineTop=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._solidLineBottom=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._radialGradient=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._barBackground=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._text=new a.gui.Label(this._docRef,this._barGroup);this._background.configure({x:0,y:0,width:1920,height:1080,cssClass:"nowDialogBackground"});this._barGroup.configure({x:0,y:337.5});this._basicGradientTop.configure({x:0,y:76.5,width:1920,height:39,cssClass:"nowFullAssetUniformGradient"});this._basicGradientBottom.configure({x:0,y:315,width:1920,height:39,cssClass:"nowFullAssetUniformGradientInvert"});this._solidLineTop.configure({x:0,y:115.5,width:1920,height:4.5,cssClass:"loadingBarSolidDivider"});this._solidLineBottom.configure({x:0,y:310.5,width:1920,height:4.5,cssClass:"loadingBarSolidDivider"});this._radialGradient.configure({x:0,y:-33,width:1920,height:463.5,cssClass:"nowFullAssetRadialGradient"});this._barBackground.configure({x:0,y:120,width:1920,height:190.5,cssClass:"blackFill"});this._text.configure({x:963,y:231,cssClass:"messageDialogText"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setMessage=function(c){if(c){this._text.setText(c);this.show();}else{this.hide();}};b.prototype.setBlockUI=function(c){this._blackUI=c;};b.prototype.keyHandler=function(c){return this._blackUI;};a.gui.MessageDialog=b;}($N||{}));var $N=$N||{};(function(b){var a=function(d,c){a.superConstructor.call(this,d);this.isFocused=true;this.isHighlighted=false;this._container=new b.gui.Group(d);this._background=new b.gui.Container(d,this._container);this._title=new b.gui.Label(d,this._container);this._highlight=new b.gui.Container(d,this._container);this._width=660;this._height=60;this.PADDING=55.5;this._container.configure({width:this._width,height:this._height});this._background.configure({width:this._width,height:this._height,cssClass:"menuItemBackgroundFocus",visible:false});this._title.configure({x:this.PADDING,y:40.5,width:this._width-(this.PADDING*2),cssClass:"libraryOptionsMenuText"});this._highlight.configure({width:this._width,height:this._height,cssClass:"menuItemHighlight",rounding:1,visible:false});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.AbstractListItem);a.prototype.setWidth=function(c){this._width=c;this._container.setWidth(c);this._background.setWidth(c);this._highlight.setWidth(c);this._title.setWidth(c-(this.PADDING*2));};a.prototype.setHeight=function(c){this._height=c;this._container.setHeight(c);this._background.setHeight(c);this._highlight.setHeight(c);};a.prototype.updateHighlight=function(){if(this.isHighlighted&&this.isFocused){this._background.show();this._highlight.show();}else{this._highlight.hide();this._background.hide();}};a.prototype.highlight=function(){this.isHighlighted=true;this.updateHighlight();};a.prototype.unHighlight=function(){this.isHighlighted=false;this.updateHighlight();};a.prototype.focus=function(){this.isFocused=true;this.updateHighlight();};a.prototype.defocus=function(){this.isFocused=false;this.updateHighlight();};a.prototype.update=function(c){this._title.setText(this._dataMapper.getTitle(c));};a.prototype.setTitleConfig=function(c){this._title.configure(c);};b.gui.ListMenuItem=a;}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._maxFlags=4;this._currentFlags=0;this._flags=[];this._flagWidth=76.5;this._flagheight=76.5;this._flagSpacing=19.5;this._container=new b.gui.Group(this._docRef);this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}this.initialise();};b.gui.Util.extend(a,b.gui.GUIObject);a.prototype.initialise=function(){var d,e,c=function(){this.show();};for(d=0;d<this._maxFlags;d++){e=new b.gui.Image(this._docRef,this._container);e.configure({x:d*(this._flagWidth+this._flagSpacing),y:0,width:this._flagWidth,height:this._flagheight,loadSuccessful:c,visible:false});this._flags.push(e);}};a.prototype.reset=function(){var c,d=this._currentFlags;for(c=0;c<d;c++){this._flags[c].hide();}this._currentFlags=0;};a.prototype.addFlag=function(c){var d;if(this._currentFlags<this._maxFlags){d=b.app.ImageUtil.getAudioVideoFlagUrl(c);if(d){if(this._flags[this._currentFlags].getHref()!==d){this._flags[this._currentFlags].hide();this._flags[this._currentFlags].setHref(d);}else{this._flags[this._currentFlags].show();}this._currentFlags++;}}};a.prototype.update=function(e){this.reset();var c,d=e.length;for(c=0;c<d;c++){this.addFlag(e[c]);}};a.prototype.hasFlags=function(){return(this._currentFlags>0);};b.gui.AudioVideoFlags=a;}($N||{}));(function(a){function b(d,c){b.superConstructor.call(this,d);this._log=new a.apps.core.Log("CommonHELP","ScrollingGroupCyclic");this._XAnim=null;this._validWidth=0;this._realWidth=0;this._interval=0;this._timerDelay=null;this._INTERVAL_PER_HUNDRED_PIXELS=40;this._isRightToLeft=true;this._isScroll=false;}a.gui.Util.extend(b,a.gui.ScrollableGroup);b.prototype._setValidWidth=function(c){this._validWidth=c;};b.prototype.getValidWidth=function(){return this._validWidth;};b.prototype._setRealWidth=function(c){this._realWidth=c;};b.prototype.getRealWidth=function(){return this._realWidth;};b.prototype._setInterval=function(c){this._interval=c;};b.prototype.getInterval=function(){return this._interval;};b.prototype._isXScrollable=function(){var c=false;if(this._validWidth<this._realWidth){c=true;}return c;};b.prototype._setDuration=function(){var c=1;if(this._realWidth>this._validWidth){c=(this._realWidth-this._validWidth)*this._INTERVAL_PER_HUNDRED_PIXELS;}this.setAnimationDuration(c+"ms");};b.prototype._animationEndCallback=function(){var c=this;if(this._timerDelay){clearTimeout(this._timerDelay);this._timerDelay=null;}this._timerDelay=setTimeout(function(){if(c._isRightToLeft){c._isRightToLeft=false;c.startXAnim(false);}else{c._isRightToLeft=true;c.startXAnim(true);}},this._interval);};b.prototype._setAnimationEndCallback=function(){this._XAnim=this.getXScrollAnimation();if(this._isXScrollable()){var c=this;this._XAnim.setAnimationEndCallback(function(){c._animationEndCallback();});}};b.prototype.update=function(c,e,d){this._setValidWidth(c);this._setRealWidth(e);this._setInterval(d);this._setDuration();this._setAnimationEndCallback();};b.prototype.startXAnim=function(){var c=this.getYScrollPosition();this._XAnim=this.getXScrollAnimation();if(this._isXScrollable()){if(this._isRightToLeft){this.setScrollPosition(0,c);this.scrollXPosition((this._realWidth-this._validWidth)*this.resolutionHorizontalFactor);}else{this.setScrollPosition((this._realWidth-this._validWidth)*this.resolutionHorizontalFactor,c);this.scrollXPosition((this._validWidth-this._realWidth)*this.resolutionHorizontalFactor);}this._isScroll=true;}};b.prototype.stopXAnim=function(){var c=this.getYScrollPosition();this._XAnim=this.getXScrollAnimation();if(this._isXScrollable()&&this._isScroll){this._isRightToLeft=true;if(this._timerDelay){clearTimeout(this._timerDelay);this._timerDelay=null;}this._XAnim.setAnimationEndCallback(null);this.setScrollPosition(0,c);this._isScroll=false;}};b.prototype.isScrolling=function(){return this._isScroll;};b.prototype.resetXAnimFlag=function(){this._isScroll=false;this._isRightToLeft=true;};a.gui=a.gui||{};a.gui.ScrollingGroupCyclic=b;}($N||{}));(function(a){var b=function(d,c){this._log=new a.apps.core.Log("CommonGUI","LoadingBar");b.superConstructor.call(this,d);this._loadingTimeout=a.app.LoadingTimeout(this);this._container=new a.gui.Group(d);this._background=new a.gui.BackgroundBox(this._docRef,this._container);this._barGroup=new a.gui.Group(this._docRef,this._container);this._basicGradientTop=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._basicGradientBottom=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._solidLineTop=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._solidLineBottom=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._additionalGradientGroup=new a.gui.Group(this._docRef,this._barGroup);this._barBackground=new a.gui.BackgroundBox(this._docRef,this._barGroup);this._text=new a.gui.Label(this._docRef,this._barGroup);this._background.configure({x:0,y:0,width:1920,height:1080,cssClass:"loadingBarBackground"});this._barGroup.configure({x:0,y:337.5});this._basicGradientTop.configure({x:0,y:112.5,width:1920,height:39,cssClass:"nowFullAssetUniformGradient"});this._basicGradientBottom.configure({x:0,y:250.5,width:1920,height:39,cssClass:"nowFullAssetUniformGradientInvert"});this._solidLineTop.configure({x:0,y:151.5,width:1920,height:1.5,cssClass:"loadingBarSolidDivider"});this._solidLineBottom.configure({x:0,y:249,width:1920,height:1.5,cssClass:"loadingBarSolidDivider"});this._barBackground.configure({x:0,y:153,width:1920,height:95.5,cssClass:"barFill"});this._text.configure({x:0,y:213,width:1920,cssClass:"loadingBarText"});this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}};a.gui.Util.extend(b,a.gui.GUIObject);b.prototype.setCss=function(c){if(c){if(c.backgroundClass){this._background.setCssClass(c.backgroundClass);}if(c.basicGradientTopClass){this._basicGradientTop.setCssClass(c.basicGradientTopClass);}if(c.basicGradientBottomClass){this._basicGradientBottom.setCssClass(c.basicGradientBottomClass);}if(c.solidLineTopClass){this._solidLineTop.setCssClass(c.solidLineTopClass);}if(c.solidLineBottomClass){this._solidLineBottom.setCssClass(c.solidLineBottomClass);}if(c.barBackgroundClass){this._barBackground.setCssClass(c.barBackgroundClass);}if(c.textClass){this._text.setCssClass(c.textClass);}}};b.prototype.setText=function(c){this._text.setText(c);};b.prototype.setTextX=function(c){this._text.setX(c);};b.prototype.setLoading=function(c){this._loadingTimeout.setLoading(c);};a.gui=a.gui||{};a.gui.LoadingBar=b;}($N||{}));var $N=$N||{};(function(c){var e,f="customise/resources/images/net/",b="camera.png",d=null,a=function(h,g){a.superConstructor.call(this,h);d=this;this._ppvIcon=new c.gui.Image(h,this._backgroundContainer);this._ppvOkCallback=function(){};this._purchaseObject=null;this._posterImageServer=c.app.epgUtil.getPosterImageServer();this._titleImage.configure({x:375,y:145+this.DIALOGUE_BACKPLATE_Y,height:195,width:336,visible:true,href:f+b,loadFailedCallback:function(){d._titleImage.setHref(f+b);}});this._ppvIcon.configure({x:670,y:365+this.DIALOGUE_BACKPLATE_Y,href:"customise/resources/images/%RES/icons/optionIcons/smaller_ticket_stub.png",visible:true});this._dialogueTypeLabel=new c.gui.Label(h,this._container);this._dialogueTypeLabel.configure({x:375,y:120+this.DIALOGUE_BACKPLATE_Y,cssClass:"PPVDefaultText"});this._alertImageText.configure({x:735,y:400.5+this.DIALOGUE_BACKPLATE_Y,visible:true,cssClass:"zapperTitle textUbuntuMedium"});this._alertImageSubText.configure({x:775,y:303+this.DIALOGUE_BACKPLATE_Y,cssClass:"PPVDefaultText",visible:true});this._highlightedItemLabel.configure({x:375,y:582+this.DIALOGUE_BACKPLATE_Y,width:1000,cssClass:"PPVSubText"});this._alertImage.configure({x:735,y:307+this.DIALOGUE_BACKPLATE_Y,width:30,height:36,opacity:1,visible:true});this._container.addChild(this._dialogueTypeLabel);};c.gui.Util.extend(a,c.gui.ConfirmationDialog);c.gui.PPVConfirmationDialog=a;e=a.prototype;e.refreshPPVPositions=function(){this._title.configure({x:735,y:190+this.DIALOGUE_BACKPLATE_Y,cssClass:"textUbuntuMedium PPVEventTitle"});this._messageText.configure({x:735,y:224+this.DIALOGUE_BACKPLATE_Y,cssClass:"PPVDefaultText"});};e.setAlertImage=function(g){this._alertImage.configure(g);};e.setDialogueTypeLabel=function(g){this._dialogueTypeLabel.setText(g);};e.setAlertImageSubTextConfig=function(g){if(g){this._alertImageSubText.configure(g);}};e.setTitleImage=function(g){if(g){this._titleImage.setHref(g);}};e.setTitleImageFromEvent=function(k){var g=null,h=this;if(k){if(k.promoImage){this._titleImage.setHref(this._posterImageServer+k.promoImage);}else{c.app.PPVHelper.loadEventImage(k,function(l){if(l){if(l.defaultImage){g=f+l.defaultImage;}else{g=this._posterImageServer+l.promoImage;}h._titleImage.setHref(g);}});}}};e.setPurchaseObject=function(g){this._purchaseObject=g;};e.setPPVOkCallback=function(g){this._ppvOkCallback=g;};e.setHighlightedItemLabelText=function(g){this._highlightedItemLabel.setText(g);};e.keyHandler=function(g){var h=c.apps.core.KeyInterceptor.getKeyMap();switch(g){case h.KEY_OK:if(this._ppvOkCallback&&typeof(this._ppvOkCallback)==="function"){this.invokeCallback(g);this._ppvOkCallback(this._purchaseObject);}return true;default:return a.superClass.keyHandler.call(this,g);}};c.apps.core.Language.adornWithGetString(a);}($N||{}));var $N=$N||{};(function(b){var c,a=function(e,d){a.superConstructor.call(this,e);this.DIALOGUE_BACKPLATE_Y=750;this.DIALOGUE_BACKPLATE_H=222;this.BACKPLATE_UPPER_GLOW_Y=700;this.BACKPLATE_LOWER_GLOW_Y=970;};b.gui.Util.extend(a,b.gui.ConfirmationDialog);b.gui.PPVSuccessConfirmationDialog=a;c=a.prototype;c.refreshPPVSuccessPositions=function(){this._dialogueBackground.configure({visible:false});this._dialogueBackplate.configure({y:this.DIALOGUE_BACKPLATE_Y,height:this.DIALOGUE_BACKPLATE_H,cssClass:"dialogueBackplate"});this._backplateUpperGlow.configure({y:this.BACKPLATE_UPPER_GLOW_Y});this._backplateLowerGlow.configure({y:this.BACKPLATE_LOWER_GLOW_Y});this._title.configure({x:240,y:this.DIALOGUE_BACKPLATE_Y+100,cssClass:"zapperTitle"});this._messageText.configure({x:240,y:this.DIALOGUE_BACKPLATE_Y+119,cssClass:"agoraEventName"});this._menu.configure({x:1400,y:this.DIALOGUE_BACKPLATE_Y+100,width:208.5});};b.apps.core.Language.adornWithGetString(a);}($N||{}));(function(b){function a(d,c){a.superConstructor.call(this,d,c);this._log=new b.apps.core.Log("CommonGUI","ButtonGroup");b.apps.core.Language.adornWithGetString(a);this._container=new b.gui.Group(d);this._buttonGroup=new b.gui.Group(d,this._container);this._infoButton=new b.gui.Image(d,this._buttonGroup);this._languageButton=new b.gui.Image(d,this._buttonGroup);this._subtitlesButton=new b.gui.Image(d,this._buttonGroup);this._optionsButton=new b.gui.Image(d,this._buttonGroup);this._infoString=new b.gui.Label(d,this._buttonGroup);this._languageString=new b.gui.Label(d,this._buttonGroup);this._subtitlesString=new b.gui.Label(d,this._buttonGroup);this._optionsString=new b.gui.Label(d,this._buttonGroup);this._TEXT_OFFSET=6;this._OPTION_X=675;this._OPTION_NEXT_VIEW_X=180;this._languageButton.configure({href:b.app.constants.INACTIVE_LANGUAGE_BUTTON_PATH,width:50});this._languageString.configure({text:a.getString("unavailable"),x:this._languageButton.getTrueWidth()+this._TEXT_OFFSET,y:30,cssClass:"miniguideButtonText"});this._subtitlesButton.configure({href:b.app.constants.INACTIVE_SUBTITLE_BUTTON_PATH,x:250,width:50});this._subtitlesString.configure({text:a.getString("unavailable"),x:250+this._subtitlesButton.getTrueWidth()+this._TEXT_OFFSET,y:30,cssClass:"miniguideButtonText"});this._infoButton.configure({href:b.app.constants.INACTIVE_INFO_BUTTON_PATH,width:50});this._infoString.configure({text:a.getString("info"),x:this._infoButton.getTrueWidth()+this._TEXT_OFFSET,y:30,cssClass:"miniguideButtonText"});this._optionsButton.configure({href:b.app.constants.INACTIVE_OPTIONS_BUTTON_PATH,x:this._OPTION_X,width:50});this._optionsString.configure({text:a.getString("options"),x:this._OPTION_X+this._optionsButton.getTrueWidth()+this._TEXT_OFFSET,y:30,cssClass:"miniguideButtonText"});this.isEventInfoAvailable=null;this._rootSVGRef=this._container.getRootSVGRef();if(c){c.addChild(this);}}b.gui.Util.extend(a,b.gui.GUIObject);b.apps.core.Language.adornWithGetString(a,"customise/resources/");a.prototype.setAudioTrackLabel=function(c){this._languageString.setText(c);};a.prototype.getAudioTrackText=function(){return this._languageString.getText();};a.prototype.getSubtitleText=function(){return this._subtitlesString.getText();};a.prototype.setSubtitleCssClass=function(c){this._subtitlesString.setCssClass(c);};a.prototype.setAudioCssClass=function(c){this._languageString.setCssClass(c);};a.prototype.setSubtitleLabel=function(c){this._subtitlesString.setText(c);};a.prototype.setOptionsLabel=function(c){this._optionsString.setText(c);};a.prototype.setAudioTrackIcon=function(c){this._languageButton.setHref(c);};a.prototype.setSubtitleIcon=function(c){this._subtitlesButton.setHref(c);};a.prototype.setInfoIcon=function(d){var e=this._infoButton.getHref(),c=d?b.app.constants.ACTIVE_INFO_BUTTON_PATH:b.app.constants.INACTIVE_INFO_BUTTON_PATH;if(e!==c){this._infoButton.setHref(c);}};a.prototype.setOptionsIcon=function(d){var e=this._optionsButton.getHref(),c=d?b.app.constants.ACTIVE_OPTIONS_BUTTON_PATH:b.app.constants.INACTIVE_OPTIONS_BUTTON_PATH;if(e!==c){this._optionsButton.setHref(c);}};a.prototype.showButtons=function(){var d,e,c=null;if(this.isEventInfoAvailable){c=[this._languageButton,this._languageString,this._subtitlesButton,this._subtitlesString,this._optionsButton,this._optionsString];}else{c=[this._languageButton,this._languageString,this._subtitlesButton,this._subtitlesString];}e=c.length;for(d=0;d<e;d++){c[d].show.call(c[d]);}};a.prototype.showInfoAndOptionsIcons=function(){var c=true;this.setInfoIcon(c);this.setOptionsIcon(c);this._infoButton.show();this._infoString.show();this._optionsButton.show();this._optionsString.show();};a.prototype.hideInfoAndOptionsIcons=function(){var c=false;this.setInfoIcon(c);this.setOptionsIcon(c);this._infoButton.hide();this._infoString.hide();this._optionsButton.hide();this._optionsString.hide();};a.prototype.setInfoAndOptionsIcons=function(c){this.isEventInfoAvailable=c;if(c){this.showInfoAndOptionsIcons();}else{this.hideInfoAndOptionsIcons();}};a.prototype.setButtonPositionsAndVisibility=function(d,c){if(d){this.setInfoAndOptionsIcons(c);this._optionsButton.setX(this._OPTION_X);this._optionsString.setX(this._OPTION_X+this._optionsButton.getTrueWidth()+this._TEXT_OFFSET);this.showButtons();}else{this._languageButton.hide();this._languageString.hide();this._subtitlesButton.hide();this._subtitlesString.hide();this.setInfoAndOptionsIcons(c);this._optionsButton.setX(this._OPTION_NEXT_VIEW_X);this._optionsString.setX(this._OPTION_NEXT_VIEW_X+this._optionsButton.getTrueWidth()+this._TEXT_OFFSET);}};a.prototype.toString=function(){return"ButtonGroup";};b.gui.ButtonGroup=a;}($N||window.parent.$N||{}));(function(a){function b(c){b.superConstructor.call(this,c);this._container.configure({width:1376,height:102,y:-50});this._background.configure({x:24,y:2,width:1290,height:98,cssClass:"menuItemBackgroundFocus",visible:false});this._highlight.configure({x:24,y:2,width:1290,height:98,cssClass:"channelListItemHighlight",rounding:1,visible:false});this._title=new a.gui.Label(this._docRef,this._container);this._title.configure({x:50,y:40,width:1100,cssClass:"synopsisXSmall colorCCCCCC"});this._subTitle=new a.gui.Label(this._docRef,this._container);this._subTitle.configure({x:50,y:85,width:1100,cssClass:"synopsisSmall colorCCCCCC"});this._text.configure({x:1160,y:65,width:130,cssClass:"synopsisSmall colorA3A3A3 rightAlign"});this.setDataMapper({getText:function(d){return d.name;}});this._rootSVGRef=this._container.getRootSVGRef();this.addMoveAnimation();this.addFadeAnimation();}a.gui.Util.extend(b,a.gui.MenuItemWithHighlight);b.prototype.update=function(c){if(c){this._title.setText(this._dataMapper.getTitle(c));this._subTitle.setText(this._dataMapper.getSubTitle(c));this._text.setText(this._dataMapper.getAdditionalText(c));}};b.prototype.updateHighlight=function(){b.superClass.updateHighlight.call(this);if(this.isHighlighted&&this.isFocused){this._title.setCssClass("synopsisXSmall");this._subTitle.setCssClass("PPVHistoryEventNameFocused");this._text.setCssClass("PPVHistoryEventName rightAlign");}else{this._title.setCssClass("synopsisXSmall colorCCCCCC");this._subTitle.setCssClass("PPVHistoryEventName colorCCCCCC");this._text.setCssClass("PPVHistoryEventName colorA3A3A3 rightAlign");}};a.gui=a.gui||{};a.gui.PurchaseListItem=b;}($N||{}));var $N=$N||{};(function(a){var b,c=1920,d=function(f,e){d.superConstructor.call(this,f);this._alertImageText.configure({x:735,y:350+this.DIALOGUE_BACKPLATE_Y,visible:true,cssClass:"socialAuthCode"});this._alertImageSubText.configure({x:0,width:c-100,y:this.DIALOGUE_BACKPLATE_Y+this.DIALOGUE_BACKPLATE_H-60,cssClass:"dialogMessage timerText",visible:true});};a.gui.Util.extend(d,a.gui.ConfirmationDialog);a.gui.SocialAccountAuthDialog=d;b=d.prototype;b.reconfigure=function(){var e={height:258,width:258,y:390,cssClass:"pinDialogMessage",opacity:0.8,visible:true};this._title.configure({y:120+this.DIALOGUE_BACKPLATE_Y});this._titleImage.configure({y:62.5+this.DIALOGUE_BACKPLATE_Y});this._messageText.configure({y:140+this.DIALOGUE_BACKPLATE_Y});this._menu.configure({y:420+this.DIALOGUE_BACKPLATE_Y});this.setAlertImage(e,a.app.constants.DISPLAY_CONTAINER_IN_RIGHT,true);};b.setQrCode=function(e){this._alertImage.setHref(e);};a.apps.core.Language.adornWithGetString(d);}($N||{}));(function(b){var a=function(d,c){a.superConstructor.call(this,d);this._log=new b.apps.core.Log("CommonGUI","SettingsPanelView");this._group=new b.gui.Group(this._docRef);this._settingsBGLines=new b.gui.SVGlink(this._docRef,this._group);this._firstSubMenuList=new b.gui.PageableListWithBackground(this._docRef,this._group);this._group.configure({id:"settingsPanelContent"});this._settingsBGLines.configure({id:"settingsBGLines",y:55,href:"../../customise/resources/svg/icons.svg#settingsBGLines",visible:false});this._firstSubMenuList.configure({y:95,itemTemplate:"MenuItemWithHighlight",itemHeight:72,upDownPageable:true,itemConfig:{height:60,width:576},backgroundConfig:{height:576,width:661,y:-65}});this._rootSVGRef=this._group.getRootSVGRef();if(c){c.addChild(this);}};b.gui.Util.extend(a,b.gui.GUIObject);b.gui.SettingsPanelView=a;}($N||{}));(function(a){var b=function(C,e,at){var am={},g=new a.apps.core.Log("SETTINGS","SettingsPanel"),o=[],c=null,ap=null,ax=false,I=false,az,Y,s=null,l=null,M=null,A=null,w=C.getSettingsPanelTitle(),m,h=null,ab=null,p=null,av=null,an=null,ar=null,ak=0,R=false,q=new a.app.DirectChannelEntry(a.app.constants.MAX_CHANNEL_DIGITS,a.app.constants.CHANNEL_ENTRY_TIMEOUT_MS),aB,Q=2,G=5,ao=6,ac=null,ai=null,z=false,aC=false,u=false,K=null;a.apps.core.Language.adornWithGetString(b);a.gui.FrameworkCore.loadGUIFromXML("common/xml/SettingsPanel.xml",at,am);am=am.settingsPanelContent;for(K=0;K<am._children.length;K++){e.addChild(am._children[K]);}function D(aK){var aJ=null,aL=aK._children;for(aJ=0;aJ<aL.length;aJ++){aL[aJ].hide();}am.settingsBGLines.hide();}function J(){am.errorLabel.setText("");D(am);}function U(aJ){am.errorLabel.setWidth(am[aJ[0].component]._background.getTrueWidth());}function ah(aK,aJ){switch(aK){case"menuPosts":case"menuReminders":am.errorLabel.setText(b.getString(aJ[0].errorText));U(aJ);am.errorLabel.show();am[aJ[0].component].defocus();ax=true;break;case"menuAutoTune":am.errorLabel.setText(b.getString("noAutoTuneSet"));U(aJ);aB(a.app.FormatUtils.getAutoTuneFooterConfig(false));am.errorLabel.show();I=true;break;case"menuHistoryOfPurchases":case"adultContent":am.errorLabel.setText(b.getString(aJ[0].errorText));U(aJ);aB(a.app.FormatUtils.getPurchasesFooterConfig());am.errorLabel.show();I=true;break;}}function W(aM,aL){var aJ=aM._data.isAtFirstPage(),aK=aM._data.isAtLastPage();if(aM.getSize()>aM.getVisibleItemCount()){if(!aJ&&!aK){aL.upArrow.show();aL.downArrow.show();}else{if(aJ){aL.downArrow.show();aL.upArrow.hide();}else{if(aK){aL.downArrow.hide();aL.upArrow.show();}}}aL.show();}else{aL.hide();}}function aA(aL){var aJ=aL.uiConfigs,aO=aJ.dataConfig,aK=aJ.componentConfig,aM=am[aL.component],aN;if(aO){for(aN=0;aN<aO.length;aN++){aM._data["set"+a.apps.util.Util.upcaseFirstLetter(aO[aN].setter)](aO[aN].value);}}if(aK){for(aN=0;aN<aK.length;aN++){aM["set"+a.apps.util.Util.upcaseFirstLetter(aK[aN].setter)](aK[aN].value);}}}function aI(aJ){D(aJ);}aB=function(aQ){if(aQ){var aK=aQ.uiConfigs,aP,aO,aN,aM,aL,aS,aJ,aR;aO=am[aQ.group];aI(aO);if(aK){aP=aK.length;for(aN=0;aN<aP;aN++){aL=aK[aN].componentConfig.length;aJ=aK[aN].component;for(aM=0;aM<aL;aM++){aS=aK[aN].componentConfig[aM];if(aS.setter==="text"){aR=b.getString(aS.value)||"";}else{aR=aS.value;}aO[aJ].show();aO[aJ]["set"+a.apps.util.Util.upcaseFirstLetter(aS.setter)](aR);}}}aO.show();}};function ae(aJ){if(aJ.length){return false;}return true;}function aj(aK,aJ){if(aJ){am[aJ].setText(aK);am[aJ].show();}else{am.secondSubMenuTitle.setText(aK);am.secondSubMenuTitle.show();}}function f(){if(o.length>0){return o[o.length-1];}else{return null;}}function L(aJ){if(aJ.length>0){return am[aJ[aJ.length-1]];}}function aF(aK){var aJ,aL=null;if(!aK){aK=f();}for(aJ=0;aJ<aK.configs.length;aJ++){if(am[aK.configs[aJ].component].hasFocus()){aL=am[aK.configs[aJ].component];}}if(!aL){aL=am[aK.configs[0].component];}return aL;}function X(){var aK,aJ=null,aL=f();for(aK=0;aK<aL.configs.length;aK++){if(am[aL.configs[aK].component].hasFocus()){aJ=aL.configs[aK];}}return aJ;}function F(aJ,aK,aM){var aN=aM||f(),aQ=null,aO=null,aL=false,aP=aF();switch(aN.title){case"menuFavorites":if(aJ==="allChannels"){if(aM){aO=aF().getData()[aF()._data.getFirstVisibleRowIndex()-1].channelInfo;}else{aO=aF().getSelectedItem();}if(a.app.ChannelManager.isFavouriteChannel(aO)){aJ="favorites";aK="allChannelsList";}else{aJ="allChannels";aK="allChannelsList";}}else{aJ="favorites";}aQ=a.app.FormatUtils.getFavoriteFooterConfig(aJ,aK);break;case"menuBlockChannels":aL=(am.secondSubMenuList.getSize()>0)?true:false;if(aJ==="allChannels"){aO=aP.getSelectedItem();aK="allChannelsList";if(aP.getSize()===0){aJ="empty";}else{if(a.app.ChannelManager.isBlockedChannel(aO)){aJ="blocked";}else{}}}else{aJ="blocked";}aQ=a.app.FormatUtils.getBlockFooterConfig(aJ,aK,aL);break;}return aQ;}function ag(aL){var aJ=am[aL.configs[0].component],aK=null;if(a.app.ChannelManager.isFavouriteChannel(aJ.getSelectedItem().channelInfo)){aK=F("favorites","allChannelsList",aL);aK=aK.footerConfig;}else{aK=aL.configs[0].footerConfig;}return aK;}function au(){var aK=aF(),aJ=aK.getActualSelectedItem();if(aJ._icon.getHref()===""||aJ._icon.getHref()===null){ar=F("allChannels","allChannelsList");aB(ar.footerConfig);}else{ar=F("favorites","allChannelsList");aB(ar.footerConfig);}}function n(){var aJ=aF().getActualSelectedItem();if(aJ){aJ.setServiceNumber(aJ.getOriginalChannelNumber());aJ.updateForChannelEntryOver();}q.cancelEntry();}function B(aJ){var aK=null,aM=aF(),aN=null,aL=f();if(aJ){aM.getActualSelectedItem().updateForChannelEntryOver();aK=a.app.epgUtil.getNextClosestService(aJ,a.app.ChannelManager.getAllChannelsOrderedByChannelNumber()).logicalChannelNum;aK=a.app.FormatUtils.formatChannelNumber(aK);aN=aM.getIndexByUniqueData("channelNumber",aK);if(aN>-1){aM.selectItemAtIndex(aN+1,true);W(aM,am[aL.configs[0].scrollComponent]);}}else{n();}if(aM&&(aM._id==="firstSubMenuList")&&(aL.title==="menuFavorites"||aL.title==="menuBlockChannels")){au();}}function aw(aJ){if(aJ){w.setText(aJ);}}function d(aM,aJ,aN){var aL=aJ.getData(),aK;switch(aM){case"menuPosts":for(aK=0;aK<aL.length;aK++){if(aN===a.app.MessageUtil.getMessageId(aL[aK])){aJ.selectRowAtIndex(aK+1);break;}}break;default:break;}}function N(aJ,aT){if(aJ.configs){var aQ,aL,aR,aV,aX,aK,aO,aU,aY,aN,aZ,aW,aS=aJ.configs,aM=aJ.title,aP;for(aR=0;aR<aJ.configs.length;aR++){aZ=f();aW=aZ?aF(aZ):null;aV=am[aS[aR].component];aX=aS[aR].itemTemplate;aK=aS[aR].dataMapper;aO=aS[aR].footerConfig;aU=aS[aR].scrollType;aY=aS[aR].itemSelected;aN=aS[aR].itemHighlightedImmediate;aV.reset();if(aT){aQ=aT;}else{aQ=ap.getData(aM,aJ,aV._id);}if(aX){aV.setItemTemplate(aX);}if(aK){aV.setDataMapper(a.app.DataMappers["get"+aK]());}if(aU){aV.setScrollType(aU);}if(aS[aR].uiConfigs){aA(aS[aR]);}if((aW===aV||(o.length>Q))&&!m){if(aS[aR].isClearView){aP=b.getString(aM)||aM;aw(a.app.StringUtil.upcaseFirstLetter(aP));}}if(aS[aR].showSubMenuTitle){aj(b.getString(aM));}if(aS[aR].title){aj(b.getString(aS[aR].title),aS[aR].titleId);}if(aQ){aV.setData(aQ);aV.initialise();if(aS[aR].selectedItemId){d(aM,aV,aS[aR].selectedItemId);aS[aR].selectedItemId=0;}if(aY){aV.setItemSelectedCallback(an[aY]);}else{aV.setItemSelectedCallback(c);}if(aN){aV.setItemHighlightedImmediateCallback(an[aN]);}else{aV.setItemHighlightedImmediateCallback(null);}aV.setSuccessCallback(aQ.successCallback);aV.setColorKeyCallbacks(aQ.colorKeyCallbacks);aV.displayData(false,true);ax=false;I=false;aV.defocus();if(aS[aR].scrollComponent&&aQ.length!==0){W(am[aJ.configs[aR].component],am[aJ.configs[aR].scrollComponent]);}}else{ah(aM,aS);}if(aO&&!ax&&R&&!I){if(aO.isFooterForDoubleMenu){aO=ag(aJ);}aB(aO);}aV.show();}am.show();}}function E(aJ){var aK=aJ.getActualSelectedItem();if(aK){aK._highlight.setCssClass("inactiveMenuItemHighlight").show();}}function aG(){var aJ,aK;if(o.length>0){aJ=f();aK=aF(aJ);aJ.lastSelectedIndex=aK.getData().length>0?aK.getSelectedItemIndex():null;}}function T(){var aJ=null;an.passivate(true);aJ=C.getActiveSettingsItem();an.activate(aJ);C.switchActiveComponent();}function O(){var aK,aJ=null,aL=0,aN=o.length,aM;if(o&&o.length>0){for(aK=0;aK<o.length;aK++){aM=o[aK].configs[aL].isAvailable;if(aM&&!aM()){aJ=aK;break;}}if(aJ){J();o.splice(aJ,aN-aJ);}}}function Z(aN){var aL,aO,aJ,aM=null,aK=null,aP=0;if(aN){aP=o.length-aN;}else{if((o.length>Q)&&((o.length%Q)>0)){aP=(o.length%Q)+1;}}for(aM=aP;aM<o.length;aM++){aO=o[aM];aJ=aO.configs;if(aJ.isClearView){J();}N(aO);for(aK=0;aK<aJ.length;aK++){aL=am[aJ[aK].component];if(aO.lastSelectedIndex){if(aL.getData().length<aO.lastSelectedIndex){aO.lastSelectedIndex=aL.getData().length;}aL.selectItemAtIndex(aO.lastSelectedIndex,true);}if(aJ.length<=1){E(aL);}}}}function t(){var aJ=1,aM=1,aK=o[0],aL=null;if(o&&(o.length>0)&&(aK.title==="menuPreferences")){O();aL=aF();if(o&&o.length===1){aJ=aF(aK).getSelectedItemIndex();aM=aJ;}else{aJ=aK.lastSelectedIndex;aM=aL.getSelectedItemIndex();}if((G<=aJ)&&a.app.PVRCapability.isPVREnabled(true)){aJ=aJ+1;}else{if((G<=aJ)&&!a.app.PVRCapability.isPVREnabled(true)){aJ=aJ-1;}}aK.lastSelectedIndex=aJ;if(o&&(o.length<=Q)){m=true;Z();aL=aF();if(o.length===Q){aL.selectItemAtIndex(aM,true);}aL.focus();if(X().scrollComponent){W(aL,am[X().scrollComponent]);}}}}function V(aN){var aJ=1,aM=1,aK=o[0],aL=null;if(o&&(o.length>0)&&(aK.title==="menuPreferences")){O();aL=aF();if(o&&o.length===1){aJ=aF(aK).getSelectedItemIndex();aM=aJ;}else{aJ=aK.lastSelectedIndex;aM=aL.getSelectedItemIndex();}if((ao<=aJ)){if(aN){aJ=aJ+1;}else{aJ=aJ-1;}}aK.lastSelectedIndex=aJ;if(o&&(o.length<=Q)){m=true;Z();aL=aF();if(o.length===Q){aL.selectItemAtIndex(aM,true);}aL.focus();if(X().scrollComponent){W(aL,am[X().scrollComponent]);}}}}function k(aN,aK){var aO=2,aJ,aM,aL=aF();Z(aO);aL.focus();aM=aL.getActualSelectedItem();aM._highlight.setCssClass("channelListItemHighlight").show();if(aN){aJ=aL.getIndexByUniqueData("title",aN);aL.selectItemAtIndex(aJ+1,true);}else{aL.selectItemAtIndex(aK,true);}w.setText(a.app.StringUtil.upcaseFirstLetter(b.getString(o[0].title)));aw(b.getString(o[1].title));}function y(aJ){ac=aJ;}function aD(aJ){ai=aJ;}function v(aN,aM,aK){var aL=aN.configs[0].subMenuTitleConfig,aJ=function(){am.secondSubMenuTitle.configure(aL.defaultConfig);};if(!aK){c(aN);}aj(aM.profileName);am.secondSubMenuTitle.configure(aL.modifiedConfig);am.secondSubMenuSubTitle.setText(b.getString("socialAccountLinkedDateText")+" "+aM.linkedDate).show();am.secondSubMenuTitleImage.setHref(aM.profileImageUrl);am.secondSubMenuTitleImage.show();y(aJ);aD(aJ);}function S(){return am[f().configs[0].scrollComponent];}function al(aJ){J();N(aJ);aw(b.getString("titleCreateNewFolder"));}function x(aL,aK){var aM=am.textWithTitleAndBK.textTitle,aJ=am.textWithTitleAndBK.textContent;am.textWithTitleAndBK.show();aM.setText(aL);if(aM.getTrueHeight()>60){aJ.setY(180);aJ.setHeight(376);}else{aJ.setY(130);aJ.setHeight(421);}aJ.setText(aK);}function aq(){am.textWithTitleAndBK.hide();}function af(aJ){if(this.hasFocus()){x(aJ.title,aJ.content);}}function r(aJ){var aK=aJ.getSelectedItem();if(aK){x(aK.title,aK.content);}}function ay(aL){var aJ,aK,aM;aJ=aL.configs;aK=am[aJ[0].component];if(aL.title==="menuFavorites"){a.app.ChannelManager.initialiseFavouritesList();}else{if(aL.title==="menuPosts"){r(aK);}}if(aK.getSize()>0){aK.focus();}if(o.length>0){aM=aF();aM.defocus();if(aK!==aM&&!aJ[0].isClearView){E(aM);}}o.push(aL);aF().focus();if(aL.drawMenuCallback){ap[aL.drawMenuCallback]();}}function aH(aK,aM){var aL=aK.getItems(),aJ=null;for(aJ=0;aJ<aL.length;aJ++){if(aL[aJ]._channelNumber.getText()===aM){return aJ;}}return -1;}h=function(aJ,aN){var aM=am[f().configs[0].component],aK=am[f().configs[1].component],aP=aF(),aR,aL=null,aQ,aO;ar=F("favorites");if(!aN){if(aM.hasFocus()&&aK.getSize()>0){aM.defocus();aK.focus();aK.selectItemAtIndex(aK._data.getFirstVisibleRowIndex(),true);aB(ar.footerConfig);ak+=1;}}else{if(aM.hasFocus()&&(aM.getSize()>0)){ab(aM.getSelectedItem(),aK,aM);}else{if(aK.hasFocus()){av(aK,aM,aK.getSelectedItemIndex()-1);}else{}}}};c=function(aM,aK){var aJ,aL=0;if(aM.configs){aJ=aM.configs;m=false;aG();if(aJ[aL].isClearView||(aF()===aF(aM))){aw(b.getString(aM.title));J();}N(aM);ay(aM);ap.startAutoRefreshData(aM.title,aF());}};p=function(aM,aL){var aJ=am[aM.configs[0].component],aK=am[aM.configs[1].component],aN=false;if(aK.hasFocus()){aK.defocus();aJ.focus();aJ.selectItemAtIndex(aJ._data.getFirstVisibleRowIndex(),true);ar=F("allChannels","allChannelsList",aM);aB(ar.footerConfig);aN=aL?false:true;ak-=1;}return aN;};ab=function(aO,aM,aL){var aN=f(),aK=null,aJ;if(typeof(aM.getIndexByUniqueData("channelNumber",aO.channelNumber))==="undefined"){aL.getActualSelectedItem().setIconUrl(f().href);aL.getActualSelectedItem().showIcon();aM.appendData(aO);aK=aM.getData();aK=aK.sort(a.app.SortUtil.sortByChannel);aM.setData(aK);aM.displayData();switch(aN.title){case"menuFavorites":a.app.ChannelManager.addToFavouritesList(aO.channelInfo);break;case"menuBlockChannels":a.app.ChannelManager.addToBlockedList(aO.channelInfo);break;}ar=F("favorites","allChannelsList");aB(ar.footerConfig);}else{aJ=aM.getIndexByUniqueData("channelNumber",aL.getSelectedItem().channelNumber);if(aJ>-1){av(aM,aL,aJ);}ar=F("allChannels","allChannelsList");aB(ar.footerConfig);}W(aM,am[aN.configs[1].scrollComponent]);};function H(aJ,aK){var aL=null,aN={},aM=false;aL=f();switch(aL.title){case"menuAutoTune":if(aJ===aK.KEY_RIGHT||aJ===aK.KEY_OK||aJ===aK.KEY_GREEN){aN.title="menuAutoTuneEdit";aN.drawMenuCallback="autoTuneTimeUpdate";a.app.AutoTuneHelper.resetAutoTuneProperties();aN.configs=a.app.FormatUtils.getAutoTuneEditConfig();c(aN);aM=true;}break;}return aM;}av=function(aO,aM,aQ){var aL,aK,aJ=aO.getSelectedItem(),aN=null,aP=f();if(aM.hasFocus()){aK=aM._items.indexOf(aM.getActualSelectedItem());aJ=aM.getSelectedItem();aN=aM.getSelectedItemIndex();}else{aK=aH(aM,aJ.channelNumber);aJ=aO.getSelectedItem();aN=aO.getSelectedItemIndex();}switch(aP.title){case"menuFavorites":a.app.ChannelManager.removeFromFavouritesList(aJ.channelInfo);break;case"menuBlockChannels":a.app.ChannelManager.removeFromBlockedList(aJ.channelInfo);break;}if(aK>-1&&aM._items[aK]._icon){if(aM._items[aK]._icon.getHref()!==""){aM._items[aK].updateIcon(aM.getData()[aN-1]);}}aL=aO.getData();aL.splice(aQ,1);aL=aO.getData();aO.setData(aL);aO.displayData();if(aO.hasFocus()){switch(aL.length){case 0:an.passivate(false);aM.selectItemAtIndex(1,true);break;case aQ:aO.selectItemAtIndex(aQ,true);break;default:aO.selectItemAtIndex(aQ+1,true);}}W(aF(),am[X().scrollComponent]);};function aE(aL){var aN,aZ,aO,aM,aT,aQ,aS,aY,a1,a0,aJ,aP={},aW,aX,aR="ONE_TIME",aK="RPT_TIME",aU=1,aV=60000;aN=aF().getData();aS=aN[0].frequency;aZ=aN[1].date.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3/$2/$1");aO=aN[2].time;aM=new Date(aZ+","+aO);aT=aM.getTime();aT=aT-aV;aM=new Date(aT);a1=aN[3].channelInfo.uri;a0=aN[3].channelInfo.serviceName;aJ=aN[3].channelInfo.serviceId;aQ=(aM.getHours()*3600)+(aM.getMinutes()*60);switch(aS){case"weekly":aY=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.WEEKLY,aM);aX=aK;break;case"daily":aY=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.DAILY);aX=aK;break;case"once":aY=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.ONCE);aX=aR;break;}aW={startTime:aT,duration:aU,sourceURL:a1,title:a0,serviceId:aJ,timeOfDay:aQ,repeatDaysArray:aY,extraInfo:JSON.stringify({jobType:aS})};if(a.gui.GUIObject.mode!=="HTML"){if(a.app.AutoTuneHelper.getAutoTuneProperty("jobId")){a.app.AutoTuneHelper.cancelAutoTune(a.app.AutoTuneHelper.getAutoTuneProperty("jobId"));}a.app.AutoTuneHelper.setAutoTune(aX,aW,function(a6,a5){var a2,a4=aF(),a3=f();if(a6){a2=ap.getAutoTuneData();if(a2){an.refreshMenu(a3,a2);a4.selectItemAtIndex((a3.lastSelectedIndex||1),true);W(a4,am[a3.configs[0].scrollComponent]);aB(a.app.FormatUtils.getAutoTuneFooterConfig(true));am.errorLabel.hide();}else{an.refreshMenu(a3,a2);aB(a.app.FormatUtils.getAutoTuneFooterConfig(false));}}else{}});}}function aa(aM){var aK=null,aL=null,aJ=null;for(aK=0;aK<aM.configs.length;aK++){aL=aM.configs[aK];aJ=am[aL.scrollComponent];if(aJ){aJ.hide();}}}function P(aK){var aJ="getShortCutConfigs"+a.app.StringUtil.upcaseFirstLetter(aK);return{title:aK,configs:a.app.FormatUtils[aJ]()};}function ad(aJ,aK){var aL=false,aM=aF();switch(aJ){case aK.KEY_ZERO:case aK.KEY_ONE:case aK.KEY_TWO:case aK.KEY_THREE:case aK.KEY_FOUR:case aK.KEY_FIVE:case aK.KEY_SIX:case aK.KEY_SEVEN:case aK.KEY_EIGHT:case aK.KEY_NINE:if(!q.isActive()){aM.getActualSelectedItem().updateForChannelEntry();}q.updateChannelDigits(aJ,aM.getActualSelectedItem()._channelNumber,aM.getActualSelectedItem()._cursor);aL=true;break;case aK.KEY_LEFT:if(q.isActive()){q.updateChannelDigits(aJ,aM.getActualSelectedItem()._channelNumber,aM.getActualSelectedItem()._cursor);aL=true;}break;case aK.KEY_BACK:if(q.isActive()){n();aL=true;}break;case aK.KEY_OK:if(q.okKeyHandler()){aL=true;}break;default:if(a.app.GeneralUtil.isKeyReleaseEvent(aJ)){return false;}if(q.isActive()){n();}}return aL;}return{preview:function(aJ){var aK;an=this;aC=false;u=false;q.setChannelEnteredCallback(B);if(ap===null){ap=new a.app.SettingsMenuHelper(this);}if(aJ.configs){J();if(l){Z();l=null;aK=aF();if(f().lastSelectedIndex){aK.selectItemAtIndex(f().lastSelectedIndex,true);}aK.focus();this.passivate(false);}else{N(aJ);}return true;}else{am.hide();return false;}},activate:function(aL,aJ){var aK,aM;Y=aJ;if(!ax&&aL.configs){ay(aL);for(aK=0;aK<aL.configs.length;aK++){aM=aL.configs[aK].footerConfig;if(aM){if(aM.isFooterForDoubleMenu){aM=ag(aL);}aB(aM);}}R=true;return true;}else{return false;}},passivate:function(aL){var aO,aP,aN,aK,aJ,aM,aQ=false;aC=false;u=false;if(aL){aJ=o[0];o=[];o.push(aJ);J();C.setSettingsPanelTitle(b.getString(aJ.title));}aM=f();if(aM.title==="menuAutoTuneEdit"){ap.stopAutoTuneTimeUpdate();}if(aM.title==="menuPosts"){aq();aP=aF(aO);aP.defocus();}if(aM.configs.length>1){aQ=p(aM,aL);}if(!aQ){aO=o.pop();aP=aF(aO);aN=aO.configs[0];aa(aO);am.textDescription.hide();aP.hide();if(aN.isClearView){am.errorLabel.setText("");Z();if(o.length<=Q){C.setSettingsPanelTitle(b.getString(o[0].title));}if(aO.title==="menuBlockChannels"){a.app.ChannelManager.saveBlockedChannelsList();}}ap.stopAutoRefreshData();if(o.length>0){aO=f();aP=aF(aO);aN=aO.configs[0];if(aP.isVisible()&&(aM.title!=="menuAutoTuneEdit")){aB(aN.footerConfig);}else{N(aO);C.setSettingsPanelTitle(b.getString(aO.title));}am.firstSubMenuTitle.hide();am.secondSubMenuTitle.hide();am.secondSubMenuSubTitle.hide();am.secondSubMenuTitleImage.hide();if(aO.lastSelectedIndex){aP.selectItemAtIndex(aO.lastSelectedIndex,true);if(aO.configs[ak].scrollComponent){W(aP,am[aO.configs[ak].scrollComponent]);}}aP.focus();}else{if(aO.title==="menuFavorites"){a.app.ChannelManager.saveFavouritesList();if(z){a.app.FavouritesUtil.refreshFavoriteChannels(true);z=false;}}am[aN.footerConfig.group].hide();R=false;N(aO);C.switchActiveComponent();}s=null;ak=0;}if(!aL&&ac){ac();ac=null;}else{if(aL&&ai){ai();ai=null;}}},refreshMenu:function(aJ,aK){var aL=aF();if(aJ===f()){m=true;N(aJ,aK);if(s&&aK){if(s>aK.length){aL.selectRowAtIndex(aK.length);}else{aL.selectRowAtIndex(s);}aL.displayData();}aL.focus();}},refreshSubMenu:function(aK){var aJ=1,aN=1,aL=o[0],aM=null;if(o&&(o.length>0)&&(aL.title==="menuPreferences")){aM=aF();if(o&&o.length===1){aJ=aF(aL).getSelectedItemIndex();aN=aJ;}else{aJ=aL.lastSelectedIndex;aN=aM.getSelectedItemIndex();}O();aL.lastSelectedIndex=aJ;if(o&&(o.length<=Q)){m=true;Z();aM=aF();if((f().title==="menuMedia")&&(aM.getSize()<aN)&&(!a.app.UsbBrowserHelper.getMediaPlaybackStatus())){aN=aM.getSize();}if(o.length===Q){aM.selectItemAtIndex(aN,true);}aM.focus();if(X().scrollComponent){W(aM,am[X().scrollComponent]);}}}},refreshMenuLanguage:function(){aG();l=true;},restorePortalMenuFocus:function(){C.reselectActiveItem();},keyHandler:function(aP,aL){var aR,aM,aO,aQ=f(),aJ,aK,aN;aR=a.apps.core.KeyInterceptor.getKeyMap();aO=aF();aJ=X();if(q&&aJ&&aJ.directChannelEntryEnabled&&aO.getSize()>0){if(ad(aP,aR)){return true;}}if(aO.getSize()===0){aM=H(aP,aR);}if(!aM&&aO.hasFocus()){if(ap.isPinDisplayed()&&(aP===aR.KEY_UP||aP===aR.KEY_DOWN)){aM=true;}else{aM=aO.keyHandler(aP,aL);if((aQ.configs[ak].scrollComponent)&&(aP===aR.KEY_UP||aP===aR.KEY_DOWN||aP===aR.KEY_CHAN_UP||aP===aR.KEY_CHAN_DOWN)){W(aO,am[aQ.configs[ak].scrollComponent]);s=aO._data.getFirstVisibleRowIndex();}}}else{aM=false;}if(aO&&(aO._id==="firstSubMenuList")&&(aQ.title==="menuFavorites"||aQ.title==="menuBlockChannels")&&(aP===aR.KEY_UP||aP===aR.KEY_DOWN||aP===aR.KEY_CHAN_UP||aP===aR.KEY_CHAN_DOWN)){au();}if(!aM){switch(aP){case aR.KEY_GREEN:if(aQ.title==="menuAutoTuneEdit"){aE(aQ);this.passivate(false);}aM=true;break;case aR.KEY_LEFT:this.passivate(false);aM=true;break;case aR.KEY_BACK:this.passivate(false);aM=true;break;case aR.KEY_YELLOW:if(f().title==="menuIPConnections"){Y.renewIpAddress();aM=true;}break;case aR.KEY_CHAN_UP:if(aJ.isMultiplePageSupported&&!u){this.passivate(false);aO=aF();aO.selectPrevious();if(aO.isSelectedAtFirst()){u=true;}this.itemSelected(aO.getSelectedItem(),true);aM=true;}break;case aR.KEY_CHAN_DOWN:if(aJ.isMultiplePageSupported&&!aC){this.passivate(false);aO=aF();aO.selectNext();if(aO.isSelectedAtLast()){aC=true;}this.itemSelected(aO.getSelectedItem(),true);aM=true;}break;default:if(a.app.GeneralUtil.isKeyReleaseEvent(aP)){return false;}}}return aM;},getActiveMenuItem:f,getActiveComponent:aF,getKeypadComponent:function(){return am.settingsKeypad;},getSettingsIpHandler:function(){return Y;},showBGLines:function(){am.settingsBGLines.show();},doubleMenuItemSelected:h,messageItemHighlightedImmediate:af,itemSelected:c,footerUIHandler:aB,keypadPanelSettings:al,exitKeypad:k,getActiveMenuScrollComponent:S,scrollIndicatorHandler:W,showSocialAccountInformation:v,setPassivateCallback:y,setExitCallback:aD,removeSocialAccountHandler:T,genericReminderDeletedListener:function(){ap.genericReminderDeletedListener();},setFavouritesRefresh:function(aJ){z=aJ;},focus:function(){var aK=f(),aL=null,aJ=1;if(aK){aL=aF(aK);}if(aL&&(aL._id==="firstSubMenuList"||aL._id==="secondSubMenuList")&&(aK.title==="menuFavorites")){aJ=aL.getSelectedItemIndex();Z();aL.focus();aL.selectItemAtIndex(aJ,true);}},defocus:function(){var aJ=f(),aK=null;if(aJ){aK=aF(aJ);}if(aK&&(aK._id==="firstSubMenuList"||aK._id==="secondSubMenuList")&&(aJ.title==="menuFavorites")){a.app.ChannelManager.saveFavouritesList();}},setSubMenuTitle:aj,getDoubleMenufooterConfig:F,redrawMenuFromActiveStack:Z,handlePVRStatusUpdateListener:t,getSettingsShortcutObject:P};};a.gui=a.gui||{};a.gui.SettingsPanel=b;}($N||{}));(function(a){a.app=a.app||{};a.app.ContextHelper=(function(){var c=new a.apps.core.Log("Helper","ContextHelper"),b=a.apps.core.ContextManager;return{openContext:function(h,f){var g=(f&&f.activationContext)?f.activationContext:null,k=(f&&f.navCompleteCallback)?f.navCompleteCallback:null,e=(f&&f.hideUnderlays===false)?false:true,d=b.getDefaultContext();if(d&&(h===d.getId())){b.navigateToDefaultContext(g,k);}else{if(b.getActiveContext()){b.overlay(h,g,k,e);}else{b.navigate(h,g,k);}}},closeContext:function(){if(b.isOverlayActive()){b.popOverlay();}else{b.navigateToDefaultContext();}},exitContext:function(d){if(b.isPlaybackContextInStack()){b.navigateToPlaybackContext();}else{b.navigateToDefaultContext(d);}}};}());}($N||{}));var GlobalKeysInterceptor=(function(){var d=new $N.apps.core.Log("HELPER","GlobalKeysInterceptor"),c,b;function e(p){var r=$N.apps.core.KeyInterceptor.getKeyMap(),m=false,q=$N.apps.core.ContextManager.getActiveContext(),k=(q)?q.getId():null,n=61455,s=false,o=false,f=function(t){if(t&&t.action===$N.app.constants.YES_OPTION){$N.apps.core.ContextManager.navigate("MUSIC",{activeMode:"musicKey"});}},l=function(t){if(t&&t.action===$N.app.constants.YES_OPTION){$N.apps.core.ContextManager.navigate("MOSAIC",{activeMode:"mosaicKey"});}},h=function(){},g=[];switch(p){case r.KEY_TV:if(k!=="ZAPPER"){$N.app.ContextHelper.openContext("ZAPPER");m=true;}break;case r.KEY_HOME:case r.KEY_MENU:if(k!=="PORTAL"){$N.app.ContextHelper.openContext("PORTAL");m=true;}break;case r.KEY_GUIDE:if(k!=="LISTGUIDE"){$N.app.ContextHelper.openContext("LISTGUIDE");m=true;}break;case r.KEY_PPV:if(k!=="LISTGUIDE"){$N.app.ContextHelper.openContext("LISTGUIDE",{activationContext:{genreToBeLoaded:$N.app.genreUtil.GENRE_PPV}});m=true;}break;case r.KEY_VOD:case r.KEY_VIEW:if($N.app.FeatureManager.isVODEnabled()&&k!=="NOW"){$N.app.ContextHelper.openContext("NOW");m=true;}break;case r.KEY_VOL_UP:$N.app.VolumeControl.handleVolumeUp();m=true;break;case r.KEY_VOL_DOWN:$N.app.VolumeControl.handleVolumeDown();m=true;break;case r.KEY_MUTE:$N.app.VolumeControl.handleVolumeMute();m=true;break;case r.KEY_POWER:$N.common.helper.PowerManager.togglePowerState();m=true;break;case r.KEY_FAVOURITES:$N.app.FavouritesUtil.toggleFavourites();m=true;break;case r.KEY_AGORA:if($N.apps.core.ContextManager.getActiveContext()._id==="AGORA"){$N.app.ContextHelper.openContext("ZAPPER");}else{$N.app.ContextHelper.openContext("AGORA");}m=true;break;case r.KEY_RADIO:if($N.apps.core.ContextManager.getActiveContext()._id!=="MUSIC"){if(k==="MEDIAPLAYER"){$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_STOP_PLAYBACK_GO_TO_MUSICA,$N.app.PVRUtil.getString("stopRecordingPlaybackTitle"),$N.app.PVRUtil.getString("stopRecordingPlaybackMessage"),[{name:$N.app.DialogueHelper.getString("yes"),action:$N.app.constants.YES_OPTION},{name:$N.app.DialogueHelper.getString("no"),action:$N.app.constants.NO_OPTION}],f);}else{$N.app.ContextHelper.openContext("MUSIC",{activationContext:{activeMode:"musicKey"}});m=true;}}break;case r.KEY_MOSAIC:if(k!=="MOSAIC"){if(k==="MEDIAPLAYER"){$N.app.DialogueHelper.createAndShowDialogue($N.app.constants.DLG_STOP_PLAYBACK_GO_TO_MOSAIC,$N.app.PVRUtil.getString("stopRecordingPlaybackTitle"),$N.app.PVRUtil.getString("stopRecordingPlaybackMessage"),[{name:$N.app.DialogueHelper.getString("yes"),action:$N.app.constants.YES_OPTION},{name:$N.app.DialogueHelper.getString("no"),action:$N.app.constants.NO_OPTION}],l);}else{$N.app.ContextHelper.openContext("MOSAIC",{activationContext:{activeMode:"normal"}});m=true;}}break;case r.KEY_BACK:$N.app.ContextHelper.closeContext();m=true;break;case r.KEY_EXIT:$N.app.ContextHelper.exitContext();m=true;break;}return m;}function a(k){var f=false,l=false,h=$N.apps.core.ContextManager.getActiveController(),g=$N.apps.dialog.DialogManager.getCurrentDialog();if(c===k){f=true;}c=k;if(b){clearTimeout(b);}b=setTimeout(function(){c=null;},500);if(g){l=$N.apps.dialog.DialogManager.keyHandler(k);}if(!l&&h&&h.keyHandler){l=h.keyHandler(k,f);}if(!k.KEY_RECORD){$N.app.SystemUtil.setAndRefreshStandbyTimer();}return l;}return{keyHandler:e,defaultContextKeyHandler:a};}());(function(a){a.app=a.app||{};a.app.MDSUtil=(function(){var f=new a.apps.core.Log("Helper","MDSUtil"),X={CATALOGUES:1,ASSETS:2,CLUBE:3,HIGHLIGHTS:4,MYCONTENT:5,MYSUBSCRIPTIONS:6,EMPTY:7},d=[],v=[],h=[],q=-1,D=[],l=a.services.sdp.MetadataService,P=a.app.constants,b,B=8,J={getEditorialId:function(ab){if(ab&&ab.id){return ab.id;}return null;},getTechnicalId:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].id){return ab.technicals[0].id;}return null;},getProductId:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].products[0]&&ab.technicals[0].products[0].id){return ab.technicals[0].products[0].id;}return null;},getTicketId:function(ab){return ab.ticketId;},getEntitlementId:function(ab){return ab.entitlementId;},isSubscription:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].products[0]&&ab.technicals[0].products[0].type){return ab.technicals[0].products[0].type==="subscription";}return false;},isAvailableToSubscribe:function(ab){if(ab.price&&(Number(ab.price)!==0)){return true;}return false;},getRatingValue:function(ad){var ac=a.app.ParentalControlUtil.PARENTAL_RATING_ADULT_VALUE,ab;if((ad.title==="Adultos")||(ad.Title==="Adultos")){return ac;}if(ad.Rating&&(ad.Rating.precedence||ad.Rating.code)){ab=ad.Rating.precedence||parseInt(ad.Rating.code,10);if(ab<4){ac=1;}else{if(ab<=8){ac=B;}else{if(ab<=10){ac=10;}else{if(ab<=12){ac=12;}else{if(ab<=14){ac=14;}else{if(ab<=16){ac=16;}}}}}}}return ac;},isAdult:function(ae){var ad=(ae.Categories)?ae.Categories.length:0,ac,ab="Adult";for(ac=0;ac<ad;ac++){if(ae.Categories[ac]===ab){return true;}}return false;},getTitle:function(ab){return ab.title||ab.Title;},getFilteredTitle:function(ab){if(J.isAdult(ab)&&!a.platform.ca.ParentalControl.isCurrentUserMaster()){return a.app.MDSUtil.getString("adultContent");}return this.getTitle(ab);},getSubtitle:function(ab){return ab.Episode||"";},getSeriesInfo:function(ae){var ad,ab,ac="";if(ae.episodeNumber){ad=Math.floor(ae.episodeNumber/1000);ab=ae.episodeNumber-(ad*1000);ac=a.app.StringUtil.join(" ",a.app.MDSUtil.getString("seasonShort"),ad.toString(),a.app.MDSUtil.getString("episodeShort"),ab.toString());}return ac;},getRatingIcon:function(ac){var ab=this.getRatingValue(ac);if(ab===B){ab="L";}return"../../../customise/resources/images/%RES/icons/parentalRatings/"+ab+".png";},getYear:function(ab){if(ab.Year){return ab.Year.toString();}return null;},getDuration:function(ac){var ab=ac.duration;if(ab){ab=Math.floor(ab/60)+a.app.MDSUtil.getString("min");}return ab;},getPrice:function(ac){var ab=ac.price;if(ab){if(ab>1000){ab=ab/10000;}return Number(ab);}return null;},getListPrice:function(ac){var ab=ac.listPrice;if(ab){if(ab>1000){ab=ab/10000;}return Number(ab);}return null;},getPriceText:function(af,ad,ag){var ae=this.getPrice(af),ab=this.getListPrice(af),ac=this.isSubscription(af)||ag;if(af.entitlementId&&!ad){if(ae!==null&&ae===0){return a.app.MDSUtil.getString("noCharge");}else{if(ac){return a.app.MDSUtil.getString("subscribed");}else{return a.app.MDSUtil.getString("rented");}}}if(ae!==null){if(ac&&!ad){return a.app.MDSUtil.getString("subscriptionRequired");}else{if(ae===0){return a.app.MDSUtil.getString("noCharge");}else{if(ab>ae){return a.app.StringUtil.join(" ",a.app.MDSUtil.getString("priceWas"),"R$"+a.app.GeneralUtil.getPriceString(ab,","),a.app.MDSUtil.getString("priceNow"),"R$"+a.app.GeneralUtil.getPriceString(ae,","),ac?a.app.MDSUtil.getString("perMonth"):"");}else{return"R$"+a.app.GeneralUtil.getPriceString(ae,",")+(ac?a.app.MDSUtil.getString("perMonth"):"");}}}}return"";},getProductName:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].products&&ab.technicals[0].products[0]&&ab.technicals[0].products[0].title){return ab.technicals[0].products[0].title;}return"";},getProductDescription:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].products&&ab.technicals[0].products[0]&&ab.technicals[0].products[0].Description){return ab.technicals[0].products[0].Description;}return"";},getRentalExpiry:function(ab){if(ab.entitlementTimeout){return new Date(ab.entitlementTimeout);}return null;},getAssetExpiry:function(ac){var ab=null;if(ac.technicals&&ac.technicals[0]&&ac.technicals[0].products[0]&&ac.technicals[0].products[0].endPurchase){ab=ac.technicals[0].products[0].endPurchase;}if(ab){return new Date(a.app.DateTimeUtil.convertEpochDateToMilliseconds(ab));}return null;},getEpisodes:function(ab){return"";},getActors:function(ab){return a.app.StringUtil.join(", ",ab.Actors);},getDirectors:function(ab){return a.app.StringUtil.join(", ",ab.Directors);},getGenres:function(ab){return a.app.StringUtil.join(", ",ab.Categories);},getSynopsis:function(ab){return ab.Synopsis;},getDescription:function(ac){if(ac.Description){return ac.Description;}else{if(ac.PrivateMetadata){var ab=JSON.parse(ac.PrivateMetadata);return ab.Description;}}},getCountries:function(ab){return ab.Countries;},getHref:function(ac){var ab="",ad;if(a.app.Config.getConfigValue("mds.developer.mode")==="off"&&ac&&ac.PromoImages&&ac.PromoImages[0]){ad=ac.PromoImages[0].substring(ac.PromoImages[0].lastIndexOf("/"));ab=b+a.app.Config.getConfigValue("vod.poster.prefix")+ad;return ab;}if(ac&&ac.image){return(b+ac.image);}if(ac&&ac.Images&&ac.Images[0]&&ac.Images[0].technicals){ac.Images[0].technicals.some(function(ae){if(ae.ImageType==="PosterResized"){ab=b+a.app.Config.getConfigValue("vod.poster.prefix")+"/"+ae.media.Image_Basic.fileName;return true;}});}return ab;},getAudioLanguages:function(ae){var ad=[],ac=[],ab;if(ae.Audio){ad=ae.Audio.split(";");}for(ab=0;ab<ad.length;ab++){if(ad[ab]){ac.push(ad[ab].split("-"));}}return ac;},getDefinition:function(ab){if(ab.technicals&&ab.technicals.length>0){return ab.technicals[0].Definition;}return null;},getFlags:function(ah){var ae=[],ag=this.getAudioLanguages(ah).length>1,aj,al,ac,ak,af,ad,ab,ai;if(ah.technicals&&ah.technicals.length>0){aj=ah.technicals[0];ad=aj.Definition;ab=aj.Aspect;ai=aj.AudioMode;ac=aj.Studio;if(aj.products&&aj.products.length>0){al=aj.products[0];ak=al.title;}}if(ad==="HD"){if(ab==="16:9"){ae.push("hd_16_9");}else{ae.push("hd_4_3");}}else{if(ad==="3D"){if(ab==="16:9"){ae.push("3D_16_9");}else{ae.push("3D_4_3");}}else{if(ab==="16:9"){ae.push("sd_16_9");}else{ae.push("sd_4_3");}}}if(ah.Countries==="BR"){ae.push("nacional");}else{if(ah.Language==="por"){ae.push("dub");}else{if(ah.Subtitles){if(ag){ae.push("leg_dub");}else{ae.push("leg");}}}}if(ai==="5.1"){ae.push("dolby_5_1");}else{if(ai==="2.0"){ae.push("dobly_2_0");}else{ae.push("stereo");}}af=a.app.NowMappingUtil.getStudioFlag(ac,ak);if(af!==null){ae.push(af);}return ae;},getContentRef:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].mainContentRef){return ab.technicals[0].mainContentRef;}return null;},getTrailerRef:function(ab){if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].promoRefs&&ab.technicals[0].promoRefs[0]){return ab.technicals[0].promoRefs[0];}return null;},getFilename:function(ab){if(ab.fileName){return ab.fileName;}if(ab.technicals&&ab.technicals[0]&&ab.technicals[0].media){return ab.technicals[0].media.AV_EncryptedTS.fileName;}return null;},getMDSServer:function(){return"";}},y={getTitle:function(ab){return ab.title||ab.Title;}},E=0,Q=function(){};a.apps.util.EventManager.create("mdsContentLoading");function K(){return a.app.ConditionalAccessCAK73.getCASmartCardInfo().smartcardInfo?true:false;}function Z(){return(a.app.FeatureManager.isVODEnabled()&&K()&&a.platform.system.Network.isNetworkAvailable(a.platform.system.Network.NetworkType.ETHERNET));}function aa(ab){d=ab;}function e(ab){v=ab;}function x(ab){h=ab;}function M(){q=-1;D=[];a.apps.util.EventManager.fire("mdsContentLoading",false);}function W(ac,ab){if(ac!==q){return false;}D[ab]=true;return true;}function R(ab){E=ab;}function Y(ac,ab){M();ac(ab);}function m(ag,af){var ac,ae=ag.length,ab,ad=[];for(ac=0;ac<ae;ac++){ab=J.isAdult(ag[ac]);if(ab===af){ad.push(ag[ac]);}}return ad;}function t(ah,ag){var ad,ai=ah.length,ac,ab,ae,af;for(ad=0;ad<ai;ad++){if(ah[ad]&&ah[ad].technicals&&ah[ad].technicals.length&&ah[ad].technicals[0].products&&ah[ad].technicals[0].products.length){ab=ah[ad].technicals[0].products;ae=ab.length;for(ac=0;ac<ae;ac++){af=ab[ac];ah[ad].entitlementTimeout=ag[af.id];}}}return ah;}function C(ae,ab,ad){try{a.services.sdp.VOD.getAssets(ae,function(af){if(W(ae,X.ASSETS)){ab(af);}},null,function(){if(W(ae,X.ASSETS)){ad();}});}catch(ac){ad();}}function k(ae,ac,ab,ad){a.app.TraxisUtil.getPurchasedProducts(function(aj){if(aj&&aj.length){var af=0,ah=aj.length,ag,al=[],ai=[];for(af=0;af<ah;++af){ag=aj[af];if(ag.producttype==="TVOD"){al.push(ag.productid);ai[ag.productid]=ag.entitlementtimeout;}}if(al.length>0){try{a.services.sdp.VOD.getPurchasedAssetsByProductIdArray(al,function(am){if(W(ae,X.MYCONTENT)){am=m(am,ac);am=t(am,ai);ab(am);}},[["editorial.title",1],["editorial.episodeNumber",1]],function(){if(W(ae,X.MYCONTENT)){ad();}});}catch(ak){ad();}}else{if(W(ae,X.MYCONTENT)){ab([]);}}}else{if(W(ae,X.MYCONTENT)){ab([]);}}},function(){ad(a.app.errorCodes.NOW.TRAXIS_DATA_FAILURE);});}function V(ac,ag,ad,af){var ae={},ab=function(ai){if(ag){ag(ai.products);}},ah=function(ai){if(af){af(ai);}else{f("getProducts","failure callback "+a.apps.util.JSON.stringify(ai));}};if(ac&&ac.length){ae.id={"$in":ac};}l.getVODData(this,ab,ah,l.RequestType.Products,ae,ad);}function T(ad,ab,ac){a.app.TraxisUtil.getPurchasedProducts(function(af){if(af&&af.length){var ae=0,ah=[];for(ae=0;ae<af.length;++ae){if(af[ae].producttype==="SVOD"){ah.push(af[ae].productid);}}if(ah.length>0){try{V(ah,function(ai){if(W(ad,X.MYSUBSCRIPTIONS)){ab(ai);}},[["title",1]],function(){if(W(ad,X.MYSUBSCRIPTIONS)){ac();}});}catch(ag){ac();}}else{if(W(ad,X.MYSUBSCRIPTIONS)){ab([]);}}}else{if(W(ad,X.MYSUBSCRIPTIONS)){ab([]);}}},function(){ac(a.app.errorCodes.NOW.TRAXIS_DATA_FAILURE);});}function n(ad,ab,ac){a.app.TraxisUtil.favourites.getFavourites(function(af){var ai=[],ag=af.length,ae;if(af){for(ae=0;ae<ag;ae++){if(af[ae].fileName){ai.push(af[ae].fileName);}}if(ai.length){try{a.services.sdp.VOD.getAssetsByFilename(ai,function(aj){if(W(ad,X.MYCONTENT)){ab(aj);}},function(){ac();});}catch(ah){ac();}return;}}if(W(ad,X.MYCONTENT)){ab([]);}},function(){ac(a.app.errorCodes.NOW.TRAXIS_DATA_FAILURE);});}function w(ad,ab,ac){a.app.PortalUtil.getWindowData("NOW",function(ae){if(W(ad,X.HIGHLIGHTS)){if(ae){ab(ae);}else{ac();}}});}function S(ab,ae){var ac=function(af){if(W(null,X.CATALOGUES)){if(af.length){af=af.concat(d);}ab(af);}};try{a.services.sdp.VOD.getRootCatalogues(ac,null,function(){if(W(null,X.CATALOGUES)){ae();}});}catch(ad){ae();}}function O(af,ab,ae){var ac=function(ag){if(W(af,X.CATALOGUES)){ab(ag);}};try{a.services.sdp.VOD.getDetailedCatalogues(ac,null,function(){if(W(af,X.CATALOGUES)){ae();}},af);}catch(ad){ae();}}function G(ac,ab,af,ad){var ae={};if(!ad){ad=["title","id","children","descendants"];}if(ac){ae.isRoot=true;}else{ae.isRoot=false;}ae.locale="pt_BR";l.getVODData(this,ab,af,l.RequestType.Catalogues,ae,null,ad);}function c(af,ab,ae){var ac={},ad=function(ag){ab(ag.total_records);};ac.locale="pt_BR";if(typeof af==="string"){ac["voditem.nodeRefs"]=af;}else{ac["voditem.nodeRefs"]={"$in":af};}ac.isPurchasable=true;ac.isVisible=true;ac["technical.deviceType"]={"$in":"STB"};l.getVODData(this,ad,ae,l.RequestType.Assets,ac,null,[""],0);}function A(ad,ab,ac){w(ad,function(ae){Y(ab,{type:X.HIGHLIGHTS,content:ae});},function(){Y(ac,a.app.errorCodes.NOW.PORTAL_DATA_FAILURE);});}function L(ad,ab,ac){n(ad,function(ae){Y(ab,{type:X.MYCONTENT,content:{dataType:"favourites",assets:ae}});},function(ae){Y(ac,ae);});}function p(ae,ac,ab,ad){k(ae,ac,function(af){Y(ab,{type:X.MYCONTENT,content:{dataType:"rentals",assets:af}});},function(af){Y(ad,af);});}function r(ad,ab,ac){T(ad,function(ae){Y(ab,{type:X.MYSUBSCRIPTIONS,content:{dataType:"subscriptions",assets:ae}});},function(ae){Y(ac,ae);});}function g(ae,ab,ad,ac){O(ae,function(af){if(af.length){if(ac&&Q(af,ac.data)){Y(ab,{type:ac.type,content:af,isAugmented:true});}else{Y(ab,{type:X.CATALOGUES,content:af});}}else{Y(ab,{type:X.EMPTY,content:{}});}},function(){Y(ad);});}function o(ad,ab,ac){C(ad,function(ae){if(ae.length){Y(ab,{type:X.ASSETS,content:ae});}else{Y(ab,{type:X.EMPTY,content:{}});}},function(){Y(ac);});}function u(ab,ac){S(function(ad){if(ad.length){Y(ab,{type:X.CATALOGUES,content:ad});}else{Y(ac);}},function(){Y(ac);});}function F(ag,ab,ad,ae,ac){var af=function(ah){ad(function(){F(ag,ab,ad,ae);},ah);};a.apps.util.EventManager.fire("mdsContentLoading",true);q=ag;if(!Z()){Y(af,a.app.errorCodes.NOW.USER_HARDWARE_FAULT_OR_BAD_USAGE_ID);return;}switch(ag){case E:A(ag,ab,af);break;case P.VOD_MENU_MY_VIDEOS:Y(ab,{type:X.CATALOGUES,content:v});break;case P.VOD_MENU_SEARCH:Y(ab,{type:X.CATALOGUES,content:h});break;case P.VOD_MENU_MY_VIDEOS_FAVORITES:L(ag,ab,af);break;case P.VOD_MENU_MY_VIDEOS_RENTED:p(ag,false,ab,af);break;case P.VOD_MENU_MY_VIDEOS_SUBSCRIPTIONS:r(ag,ab,af);break;case P.VOD_MENU_MY_VIDEOS_ADULT:p(ag,true,ab,af);break;default:if(ag){if(ac){g(ag,ab,af,ae);}else{o(ag,ab,af);}}else{u(ab,af);}break;}}function H(ad,ab,ac){a.services.sdp.VOD.getAssetByFilename(ad,ab,ac);}function U(ak,ad,ab){var ac={},ae=null,af=null,ag=1,ah=0,aj=false,ai=function(al){ad(al);};if(ad){ac["technical.id"]=ak;l.getVODData(this,ai,ab,l.RequestType.Trailers,ac,ae,af,ag,ah,aj);}}function s(ab){Q=ab;}function I(ac,ab,af){var ad={},ae=function(ag){ab(ag.nodes);};if(ac&&ac.length){ad.title={"$in":ac};}l.getVODData(this,ae,af,l.RequestType.Catalogues,ad);}function N(){var ab=function(ac){b=ac;if(ac&&ac.slice(0,7)==="http://"){ac=ac.slice(7);}a.services.sdp.BaseService.initialise(ac,null,null,null,a.platform.system.Preferences.get(P.PREF_SDP_PATH));a.app.LaunchUtil.initialiseMDS(true);};if(a.app.Config.getConfigValue("mds.developer.mode")==="off"){b=a.platform.system.Preferences.get(P.PREF_METADATA_SERVER,true);a.platform.system.Preferences.monitorValue(P.PREF_METADATA_SERVER,ab,this,true);}else{b=a.app.Config.getConfigValue("mds.developer.server");}}function z(){return b;}return{isServerAvailable:Z,setDefaultNOWCatalogues:aa,setMyContentCatalogues:e,setSearchCatalogues:x,clearRequest:M,getContent:F,CONTENT_TYPE:X,assetDataMapper:J,productDataMapper:y,getCatalogueForAsset:H,setHighlightsFolder:R,getTrailerByTechnicalId:U,setDataAugmentFunction:s,getNodesByNameArray:I,registerMetadataServerListener:N,getMDSAddress:z,getNodes:G,getNodeAssetCount:c};}());a.apps.core.Language.adornWithGetString(a.app.MDSUtil,"apps/now/common/");}($N||{}));(function(a){a.app=a.app||{};a.app.LaunchUtil=(function(b){var c=new b.apps.core.Log("Helper","LaunchUtil");return{setSDPAccountDetails:function(d){b.app.userUid=d.userUid;b.app.accountUid=d.accountUid;b.app.locale=d.locale;},basicInitialisation:function(e,d){var f;b.app.epgUtil=new EPGUtil();b.app.genreUtil=new GenreUtil();b.common.helper.PowerManager.initialise();this.initialiseEvents();b.app.Config.initialise();b.app.HDMIManager.initialise();b.app.AudioManager.initialise();b.app.MoCAManager.initialise();b.platform.system.Network.StateChange.registerListener();b.app.NetworkUtil.setWiredInterfaceName();this.initialiseFrameworkModules();this.initialiseLanguage();if(e==="svg"){b.gui.FrameworkCore.loadGUIFromXML("launch.xml",document.getElementById("content"),d);}else{b.gui.FrameworkCore.loadGUIFromXML("launch-html.xml",document.getElementById("content"),d);}b.app.PVRUtil.initialiseRemoteAccess(d.remoteAccessIndicator);d.logo.bootMessageTextArea.setText(b.app.LaunchUtil.getString("bootMessage"));b.gui.Label.prototype._mimicLabel=d.mimicLabel;b.gui.TextArea.prototype._mimicTextArea=d.mimicTextArea;this.initialiseApplicationModules(d);b.gui.ResolutionManager.initialiseContext(document,"customise/resources/css/"+b.gui.Image.resolution+"/common.css");b.apps.core.ContextManager.init(b.gui.ResolutionManager.getResDimensions());b.apps.core.KeyInterceptor.init(new b.platform.input.BaseKeyMap(),null,b.platform.system.Device.getManufacturer(),b.platform.system.Device.getModel(),0,true);this.initialiseFullScreenPlayer(d);this.initialiseSmallPlayer(d);b.app.ConditionalAccessCAK73=new b.app.ConditionalAccessNagraCAK73(new b.app.CAKALMEHandler());b.app.SystemUtil.setAndRefreshStandbyTimer();b.gui.SmallVideoArea=d.smallVideoGroup;b.gui.SmallVideoArea.hide();b.common.helper.ScanManager.initialise();b.app.ChannelManager.initialise();b.app.NowMappingUtil.init();b.app.MemoryUtil.setOrUpdateGarbageCollectInterval();f=b.app.SocialActivityFactory.getSocialAccountObject(b.app.SocialAccount.FACEBOOK);f.setDailyScheduler();if(f.isAccountAvailable()){f.setSchedulerForTokenRenewal();}b.app.ApplicationLauncher.initialise();},initialiseLanguage:function(){var d=b.platform.system.Preferences.get(b.app.constants.PREF_LANGUAGE);if(d&&(d==="en_gb"||d==="pt_br")){b.apps.core.Language.setLocale(d);b.apps.core.Language.refreshLanguageBundles();}},initialiseFullScreenPlayer:function(d){b.app.fullScreenPlayer=new b.app.PlayoutManager(d.fullScreenPlayer.fullScreenVideo.getRootElement());b.app.fullScreenPlayer.initialise(d);if(b.platform.system.Preferences.get(b.app.constants.PREF_PRM_ENABLED)==="true"){b.app.ca=new b.platform.ca.ConditionalAccessNagraCAK72();b.app.ca.setPlayer(b.app.fullScreenPlayer);}},initialiseSmallPlayer:function(d){b.app.smallScreenPlayer=new b.app.PIPPlayer(d.smallVideoGroup.smallScreenVideo.getRootElement());b.app.smallScreenPlayer.initialise(d);},initialiseVOD:function(){var e=b.platform.system.Preferences,f=b.app.constants,d=b.services.sdp;d.VOD.initialise(b.app.accountUid,b.app.userUid,null,true,e.get(f.PREF_METADATA_LANGUAGE),null);b.app.MDSUtil.registerMetadataServerListener();},initialiseMDS:function(g){var e=b.platform.system.Preferences,f=b.app.constants,d=b.services.sdp,h=30000;d.MetadataService.initialise(d.BaseService.getServerURL(),null,e.get(f.PREF_METADATA_BASE_URI),e.get(f.PREF_METADATA_PROVIDER),h,e.get(f.PREF_METADATA_LANGUAGE),null,null,e.get(f.PREF_METADATA_SEARCH_URI),false,false,g);},initialiseSDP:function(){var e=b.app.constants,d=b.platform.system.Preferences;b.platform.btv.EPG.initialise({dataSources:[b.platform.btv.EPG.DATA_SOURCES.SDP],useRAMCache:true,cacheEvents:false,extendedIPSchedule:true,cacheExpiryTime:d.get(e.PREF_EPG_CACHE_EXPIRY),cacheType:b.platform.btv.EPG.CACHE_TYPES.RAM});b.services.sdp.EPG.initialise(b.app.accountUid,b.app.locale);},initialiseEvents:function(){b.apps.util.EventManager.create("settingsUpdated");b.apps.util.EventManager.create("contextsLoaded");b.apps.util.EventManager.create("zapperOpened");b.apps.util.EventManager.create("zapperClosed");b.apps.util.EventManager.create("channelChanged");b.apps.util.EventManager.create("menuLanguageChanged");b.apps.util.EventManager.create("allMailsRead");b.apps.util.EventManager.create("oneMailRead");b.apps.util.EventManager.create("contextChanged");b.apps.util.EventManager.create("usbInterfaceStatus");b.apps.util.EventManager.create("PVREnabled");b.apps.util.EventManager.create("PVRDisabled");b.apps.util.EventManager.create("WHPVREnabled");b.apps.util.EventManager.create("WHPVRDisabled");b.apps.util.EventManager.create("VODEnabled");b.apps.util.EventManager.create("VODDisabled");b.apps.util.EventManager.create("favouritesToggled");b.apps.util.EventManager.create("genericReminderJobUpdated");b.apps.util.EventManager.create("favouritesListUpdated");b.apps.util.EventManager.create("usbMediaPlaybackEnabled");b.apps.util.EventManager.create("usbContentLoaded");b.apps.util.EventManager.create("usbMediaPlaybackDisabled");b.apps.util.EventManager.create("audioCapabilitiesUpdated");b.apps.util.EventManager.create("MediaPlaybackFeatureStatusUpdated");b.apps.util.EventManager.create("usageIdChanged");b.apps.util.EventManager.create("caPPVAccessDenied");b.apps.util.EventManager.create("MoCAEnabled");b.apps.util.EventManager.create("MoCADisabled");b.apps.util.EventManager.create("PIPEnabled");b.apps.util.EventManager.create("PIPDisabled");b.apps.util.EventManager.create("StartOverEnabled");b.apps.util.EventManager.create("StartOverDisabled");b.apps.util.EventManager.create("CatchUpDisabled");b.apps.util.EventManager.create("CatchUpEnabled");b.apps.util.EventManager.create("HideNoSignalDialogue");},initialiseFrameworkModules:function(){var d;if(b.app.Config.getConfigValue("mds.developer.mode")==="off"){d=b.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true);}else{d=b.app.Config.getConfigValue("mds.developer.server")+"/net";}if(d&&d.slice(0,7)==="http://"){d=d.slice(7);}b.platform.system.Preferences.initialise();b.platform.output.AV.initialise();b.gui.ResolutionManager.initialiseResolution();b.common.helper.ScanManager.initialise();b.app.DVBScanUtil.initialise();b.platform.btv.Favourites.init();b.services.sdp.BaseService.initialise(d,null,null,null,b.platform.system.Preferences.get(b.app.constants.PREF_SDP_PATH));},initialiseApplicationModules:function(d){b.common.helper.Analytics.initialise();b.app.ErrorMessage.initialise();b.app.PVRCapability.initialise();b.app.HotPlug.initialise();b.app.UsbBrowserHelper.initialise();b.app.DlnaHelper.initialise();b.app.DialogueHelper.initialise();b.app.ParentalControlUtil.initialise();b.app.BrandHelper.initialise(d.branding);b.app.CatchUpHelper.initialise(d.commonLoadingBar);b.app.StartOverHelper.initialise(d.commonLoadingBar);b.app.DateTimeUtil.initialise();b.app.ClockDisplay.initialise(d.clockContainer);b.app.MessageUtil.initialise(d.messageIndicator);b.app.ErrorMessage.initialise();b.app.DataMappers.initialise();b.app.FormatUtils.initialise();b.app.FolderUtil.initialise();b.app.FavouritesUtil.initialise();b.app.SettingsAPI.initialise();b.app.TracksUtil.initialise();b.app.SystemUtil.initialise();b.common.helper.FrontPanelManager.initialise();b.app.SignalInfoUtil.initialise();b.app.FeatureManager.initialise();},continueNormalInitialisation:function(e,d){if(!b.platform.system.Preferences.get(b.app.constants.PREF_UI_MIGRATION_STATUS)){b.app.UpgradeUtil.runMigrationProcess();}if(e==="svg"){b.platform.btv.ConflictManager=new b.platform.btv.ConflictManager(b.platform.btv.PVRManager);b.platform.btv.WHPVRManager.init();b.platform.btv.PVRManager.init(b.platform.btv.ConflictManager);}b.app.VODHelper.initialise();b.platform.ca.ParentalControl.initialise();b.platform.ca.ParentalControl.enableAuthentication();b.platform.ca.PINHandler.init();b.apps.dialog.PinDialog.GUITemplateObject=b.gui.PinDialog;b.app.VolumeControl.initialise(d.volumeContainer);b.app.Reminders.initialise();b.app.AutoTuneHelper.initialise();b.app.Conflicts.initialise();b.platform.btv.ChannelCategories.initialise();b.app.PVRUtil.initialise();b.app.SettingsPortalData.initialise();b.app.FavouritesUtil.initialise();b.app.SettingsAPI.initialiseAVOptions();b.app.MusicCategoriesData.initialise();if(b.app.EnvironmentUtil.isIPEnabled()){b.platform.media.UPnP.init();}},addContexts:function(e){var d=true,f=true;b.apps.core.ContextManager.addContext("ZAPPER","apps/zapper/view/zapper."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,d);b.apps.core.ContextManager.addContext("PORTAL","apps/portal/view/portal."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("LISTGUIDE","apps/listGuide/view/listGuide."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("SEARCH","apps/search/view/search."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("SETTINGS","apps/settings/view/settings."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("MEDIABROWSER","apps/mediaBrowser/view/mediabrowser."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("MINIGUIDE","apps/miniGuide/view/miniGuide."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("MEDIAPLAYER","apps/mediaPlayer/view/mediaPlayer."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false,null,null,null,null,null,null,f);b.apps.core.ContextManager.addContext("NOW","apps/now/view/now."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("LIBRARY","apps/library/view/library."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("SYNOPSIS","apps/synopsis/view/synopsis."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("OPTIONS","apps/options/view/options."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("AGORA","apps/agora/view/agora."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("MOSAIC","apps/mosaic/view/mosaic."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("MUSIC","apps/music/view/music."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.addContext("CHANNELSUBSCRIPTION","apps/channelSubscription/view/channelSubscription."+e,b.apps.core.ContextManager.CACHE_PRE_CACHE,false);b.apps.core.ContextManager.doPreCache();},isSetupWizardRequired:function(){var d=b.platform.system.Preferences.get(b.app.constants.PREF_ISINSTALLED)!=="true";return d;}};}(a));a.apps.core.Language.adornWithGetString(a.app.LaunchUtil);}($N||{}));(function(a){a.app=a.app||{};a.app.EventUtil=(function(){var g=new a.apps.core.Log("Helper","EventUtil"),e=0,f=-1;function k(r){var q=new Date(),p=new Date(r.startTime);return(q.getDate()===p.getDate()&&q.getMonth()===p.getMonth()&&q.getFullYear()===p.getFullYear());}function l(p){return(p&&p.startTime<=Date.now()&&p.endTime>=Date.now());}function m(q){var p=a.platform.btv.EPG.getChannelByServiceId(q.serviceId),s,r;if(p){s=p.uri;r=a.app.fullScreenPlayer.tuner.getCurrentUri();return(r===s&&l(q));}return false;}function o(p){return(p&&p.startTime&&p.startTime>Date.now());}function n(p){return(p&&p.endTime&&p.endTime<Date.now());}function h(p){return(p&&p!==f);}function c(p){if((p&&p.eventId&&h(p.serviceId))){return true;}return false;}function b(q){var r=q.length,p;for(p=0;p<r;p++){if(q[p]&&l(q[p])){return p+1;}}return 0;}function d(p,q){var s=1000,r=null;if(p&&!q){q=CCOM.ConditionalAccess.getEventInfo(p.eventId);}if(q.previewTime){r=p.startTime+(q.previewTime*s);return(p&&(p.startTime<=Date.now())&&(Date.now()<=r));}else{return false;}}return{isEventShowingToday:k,isEventShowingNow:l,isEventPlayingNow:m,isFutureEvent:o,isPastEvent:n,isValidEvent:c,isValidServiceId:h,getLiveEventIndex:b,BAD_EVENT_ID:e,BAD_SERVICE_ID:f,isEventPreviewTime:d};}());}($N||{}));var $N=$N||{};var EPGUtil=function(){var E=$N.platform.system.Preferences,h=new $N.apps.core.Log("Helper","EPGUtil"),M=$N.app.constants,v=$N.app.EventUtil.BAD_EVENT_ID,l=$N.app.EventUtil.BAD_SERVICE_ID,R="../../../customise/resources/images/%RES/flags/",r="Icn_cc.png",y="Icn_dolby.png",K="Icn_hd.png",C="Icn_startOver.png",g="Icn_reminder.png",O="/0000.jpg",b,H=0,s=["channelNumberAsc","channelNumberDec","channelNameAsc","channelNameDec","showTitle"];$N.apps.core.Language.adornWithGetString(EPGUtil);function W(ag,ad,Y,ac,ai,Z){var af=20,ae=CCOM.EPG.getEventsRSByQuery(ag,ad,Y),ab=[],ah,aa;ah=function(aj){if(aj.results&&aj.results.length){ab=ab.concat([].slice.call(aj.results,0));if((Z&&ab.length<Z)||aj.results.length===af){ae.fetchNext(af);}else{ae.reset();ae.removeEventListener("fetchNextOK",ah);ae.removeEventListener("fetchNextFailed",aa);ac(ab);ab=null;}}else{ae.reset();ae.removeEventListener("fetchNextOK",ah);ae.removeEventListener("fetchNextFailed",aa);ac(ab);ab=null;}};aa=function(aj){ai();ae.reset();ae.removeEventListener("fetchNextOK",ah);ae.removeEventListener("fetchNextFailed",aa);ab=null;};if(ae.error){ai();ae.reset();ab=null;}else{ae.addEventListener("fetchNextOK",ah);ae.addEventListener("fetchNextFailed",aa);if(Z<af){ae.fetchNext(Z);}else{ae.fetchNext(af);}}}b={channelNumberAsc:{eventFunction:$N.app.SortUtil.eventListChannelSortNumberAsc,channelFunction:$N.app.SortUtil.channelSortNumberAsc},channelNumberDec:{eventFunction:$N.app.SortUtil.eventListChannelSortNumberDec,channelFunction:$N.app.SortUtil.channelSortNumberDec},channelNameAsc:{eventFunction:$N.app.SortUtil.eventListChannelSortNameAsc,channelFunction:$N.app.SortUtil.channelSortNameAsc},channelNameDec:{eventFunction:$N.app.SortUtil.eventListChannelSortNameDec,channelFunction:$N.app.SortUtil.channelSortNameDec},showTitle:{eventFunction:$N.app.SortUtil.eventListEventSortNameAsc,channelFunction:null}};function p(Z){var Y;if(!Z||Z===l){return"";}Y=$N.platform.btv.EPG.getChannelByServiceId(Z);if(Y){if(Y.promoImage){return Y.promoImage;}if(Y._data&&Y._data.channelLogo&&Y._data.channelLogo!==null){return Y._data.channelLogo;}if(Y._data&&Y._data.promoImage){return Y._data.promoImage;}}return"";}function n(ab,aa){var Y=[],Z;if(aa&&aa.subTitles){Y.push(R+r);}if(aa&&aa.definition==="HD"){Y.push(R+K);}if(aa&&aa.audioMode==="1"){Y.push(R+y);}return Y;}function q(ac,ad,Z){var Y,ab,aa=EPGUtil.getString("noEventTitle");if(ac!==l){Y=$N.platform.btv.EPG.getChannelByServiceId(ac);}if(Y&&Y.serviceName&&Y.serviceType){ab=$N.platform.btv.EPG.isRadioChannel(Y);if(ab){aa=Y.serviceName;}}return{title:aa,serviceId:ac||l,startTime:ad||"",endTime:Z||"",shortDesc:EPGUtil.getString("noEventDescription"),eventId:v};}function F(aa,Z,ab,Y){aa=aa||[];if(aa.length===0){aa.push(q(Z,ab,Y));}return aa;}function x(ab,ad,Y){var ac=[],aa,Z=ab.length;for(aa=0;aa<Z;aa++){ac[aa]=[];ac[aa].push(q(ab[aa],ad,Y));}return ac;}function e(Z){var Y=Z||$N.platform.btv.EPG.getVideoChannelsOrderedByChannelNumber();if(Y.length===0){return[{serviceId:l,logicalChannelNum:0,uri:""}];}return Y;}function w(Z){var Y=$N.platform.btv.EPG.getChannelByServiceId(Z);if((Y===null)||(Y===undefined)){return[{serviceId:l,logicalChannelNum:0,uri:""}];}return Y;}function J(Y,Z){return(Y&&Z&&Y.serviceId===Z.serviceId&&Y.endTime>Z.startTime);}function B(aa,Y,ab,ad){var ac,Z=function(an){var ah,af,aj,ao=[],am=-1,al=null,ag=aa.length,ak=null,ae=null,ai=an.length;if(an&&ad){for(ah=0;ah<ag;ah++){ao[ah]=[];}for(ah=0;ah<ai;ah++){af=an[ah];aj=an[ah-1];if(al===null||al!==af.serviceId){al=af.serviceId;am=aa.indexOf(af.serviceId);}if(J(aj,af)){af.overlapStartTime=aj.endTime;}ao[am].push(af);}for(ah=0;ah<ag;ah++){if(ao[ah].length){ao[ah].sort($N.app.SortUtil.sortByDateAsc);ak=ao[ah][0];ae=ao[ah][ao[ah].length-1];if(ak.startTime>Y){ao[ah].unshift(q(aa[ah],Y,ak.startTime));}if(ae.endTime<ab){ao[ah].push(q(aa[ah],ae.endTime,ab));}}else{ao[ah].push(q(aa[ah],Y,ab));}}ad(ao,Y);}};$N.platform.btv.EPG.fetchEventsByWindow(aa,Y,ab,Z);}function G(Y,Z,ah,ai){var ae,aa=0,ac=[],af=[],ag=0,ab,ad;for(ab in Y){if(Y.hasOwnProperty(ab)){Y[ab]=$N.platform.btv.EPGEventFactory.mapObject(Y[ab]);if(ae===Y[ab]._data.serviceId){delete Y.event;}else{ae=Y[ab]._data.serviceId;ac.push(ae);}}}af=$N.app.ArrayUtil.arrayDifference(Z,ac);ag=af.length;for(ad=0;ad<ag;ad++){Y.push(q(af[ad],ah,ai));}return Y;}function A(ad){var Z,ac="",aa=ad.length,Y=new Date(),ab=Y.getTime();if(aa){ac="(";}for(Z=0;Z<aa;Z++){if(Z!==0){ac+=" OR ";}ac+="serviceId='"+ad[Z]+"'";}ac+=") AND startTime <= '"+ab+"' AND endTime >= '"+ab+"'";return ac;}function f(ah,aa,ad,ag,af){var Z=[],ab,Y,ac,ae=ah?ah.length:0;if(ae>0){if(ah[0].startTime>aa){Z.push(af(ag,aa,ah[0].startTime));}for(ab=0;ab<ae;ab++){Y=ah[ab];ac=ah[ab+1];Z.push(Y);if(ac&&Y.endTime<ac.startTime){Z.push(af(ag,Y.endTime,ac.startTime));}}if(Y.endTime<ad){Z.push(af(ag,Y.endTime,ad));}}else{Z.push(af(ag,aa,ad));}return Z;}function P(ac,ab,af){var Z="DISTINCT serviceId, eventId, title, startTime, endTime, parentalRating, shortDesc",Y="startTime ASC",ae="",aa=function(ag){af(ag);},ad=function(){af();};if(ab){Y=Y+" LIMIT "+ab;}if(!ac){ad();}else{ae="(serviceId='"+ac+"' AND endTime >= '"+Date.now()+"')";W(Z,ae,Y,aa,ad);}}function c(ad,ae,af){ad=$N.app.ArrayUtil.sortAndRemoveDuplicates(ad,function(){});var ag=$N.platform.btv.EPG.getEventsByWindow(ad,ae+1000,af-1000),Y=0,ac=[],Z=0,ab,aa=E.get(M.PREF_TV_SORT);if(!ad||ad.length===0){ac.push(q(l,ae,af));}else{for(ab=0;ab<ad.length;ab++){while(ag&&ag[Y]&&(parseInt(ad[ab],10)===parseInt(ag[Y].serviceId,10))){ac.push(ag[Y]);Y++;Z++;}if(Z===0){ac.push(q(ad[ab],ae,af));}else{Z=0;}}}if(aa&&aa!==s[0]){$N.app.epgUtil.applySortToEventList(ac,aa);}return ac;}function U(aa,Z){var Y={};if(Z!==undefined){if(aa.toLowerCase()==="next"){Y=$N.platform.btv.EPG.getNextEventForService(Z);}else{Y=$N.platform.btv.EPG.getCurrentEventForService(Z);}if(!Y){Y=q(Z);}}Y=$N.platform.btv.EPGEventFactory.mapObject(Y);return Y;}function N(aa){var Y=0,Z={};if(aa){if(aa.eventId){Y=aa.eventId;}else{if(aa._data){Z=$N.platform.btv.EPG.getCurrentEventForService(aa._data.serviceId)||$N.app.epgUtil.getDefaultEvent(aa._data.serviceId);Y=Z.eventId;}}}return Y;}function L(Y){if(Y){return"../../../customise/resources/images/%RES/icons/Icn_RecSingle.png";}return"";}function u(ac,Z){Z=Z||"";var Y=0,aa,ab;if(Z.length>3&&Z.length<5){Y=1;}else{if(Z.length>4){Y=2;}}if(Y){aa=Z.substring(0,Y);ab=Z.substring(Y,Z.length);return{seasonNumber:parseInt(aa,10),episodeNumber:$N.app.GeneralUtil.padNumberWithZeroes(parseInt(ab,10),2)};}return{seasonNumber:"",episodeNumber:""};}function S(ab,aa){var Z=u(ab,aa),Y="";if(Z.seasonNumber!==""){Y=Z.seasonNumber;}if(Z.episodeNumber!==""){Y+=" "+Z.episodeNumber;}return Y;}function a(ab,aa){var Z=u(ab,aa),Y="";if(Z.seasonNumber!==""){Y=EPGUtil.getString("seasonAbbreviation")+" "+$N.app.GeneralUtil.padNumberWithZeroes(parseInt(Z.seasonNumber,10),2);}if(Z.episodeNumber!==""){Y+=" "+EPGUtil.getString("episodeAbbreviation")+" "+$N.app.GeneralUtil.padNumberWithZeroes(parseInt(Z.episodeNumber,10),2);}return Y;}function I(Y,ab){var aa=ab||"",Z=null;if(Y&&Y.displaySeasonEpisode){Z=u(Y.seriesId,Y.episodeId);if(Z.seasonNumber!==""){aa+=EPGUtil.getString("seasonShort")+" "+$N.app.GeneralUtil.padNumberWithZeroes(parseInt(Z.seasonNumber,10),2);}if(Z.episodeNumber!==""){aa+=" "+EPGUtil.getString("episodeShort")+" "+$N.app.GeneralUtil.padNumberWithZeroes(parseInt(Z.episodeNumber,10),2);}return aa;}return"";}function o(ab){var ac={text:"",span:""},ad="",Y,aa,Z;if(ab.eventId){Y=new Date(ab.startTime);aa=$N.platform.btv.EPG.getNextEventForService(ab.serviceId);Z=$N.app.DateTimeUtil.getFormattedStartEndTimeString(Y,new Date(ab.actualStopTime||ab.endTime)).toUpperCase();if($N.app.EventUtil.isEventShowingNow(ab)){ad=EPGUtil.getString("showingNow");}else{if(aa&&aa.eventId&&aa.eventId===ab.eventId){ad=EPGUtil.getString("showingNext");}else{if($N.app.EventUtil.isEventShowingToday(ab)){ad=EPGUtil.getString("today");}else{ad=EPGUtil.getString("days")[Y.getDay()];}}}ac={text:Z,span:Z.substring(Z.length-2,Z.length)};}return{text:ad,obj:ac};}function D(ad,aa){var ac="",af="",Z="",ab,ae,Y=$N.app.genreUtil.getGenresByEvent(ad);if(Y){Y=" | "+Y;}if(ad){if(ad.serviceId!==M.NO_SERVICE_ID_AVAILABLE){ab=$N.platform.btv.EPG.getChannelByServiceId(ad.serviceId);if(ab){ac=String(ab.logicalChannelNum);af=p(ad);}}Z=o(ad);ae=$N.platform.btv.PVRManager.isPVREventScheduled(ad);return{channelNumber:ac,serviceId:ad.serviceId,logo:af,promoImage:ad.promoImage,thumbnail:"",title:ad.title||EPGUtil.getString("noEventTitle"),subTitle:Z.text||"",subTitle2:Z.obj||"",description:ad.shortDesc||ad.longDesc||"",rating:(ad.eventId===$N.app.epgUtil.BAD_EVENT_ID)?"":"../../../customise/resources/images/%RES/icons/Icn_Stars0.png",parentalRating:ad.parentalRating,eventId:ad.eventId,isStartOver:ad.isStartOver,isCatchUp:ad.isCatchUp,uniqueEventId:ad.uniqueEventId,flags:n(ad),icon:L(ae),genres:Y,isPVREventScheduled:ae,isLocked:$N.app.ParentalControlUtil.isChannelOrProgramLocked(ad),seasonEpisodeShort:$N.app.epgUtil.getSeasonEpisodeShort(ad),isAdultEvent:$N.app.epgUtil.isAdultEvent(ad),isEventShowingNow:$N.app.EventUtil.isEventShowingNow(ad),startTime:ad.startTime,endTime:ad.endTime,startEndTime:$N.app.DateTimeUtil.getFormattedStartEndTimeString(new Date(ad.startTime),new Date(ad.endTime),$N.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT)};}return{channelNumber:"",logo:"",thumbnail:"",title:EPGUtil.getString("noDataAvailable"),subTitle:"",subTitle2:{text:"",span:""},description:"",rating:"",flags:[],icon:""};}function m(Z){var Y;if(Z.uid){Y={eventId:Z.uid,startTime:Z.startTime,endTime:Z.endTime,serviceId:String(Z.channelUID),title:Z.eventName,shortDesc:Z.shortDescription};}return Y||null;}function X(ac,af){var aa={},ad,ab,ae,Z=["PromoImages"],Y=null;if(ac){Y=$N.app.ChannelManager.getServiceRef(ac.serviceId);if(Y){aa.serviceRef=Y;}if(ac.startTime){aa["period.start"]={"$gte":ac.startTime/1000};}if(ac.endTime){aa["period.end"]={"$lte":ac.endTime/1000};}ab=function(ag){if(ag&&ag.programmes&&ag.programmes.length>0){ad=$N.services.sdp.EPGEventFactory.mapObject(ag.programmes[0]);af(ad);}else{af(null);}};ae=function(ag){af(null,ac.eventId);};$N.services.sdp.MetadataService.getData(this,ab,ae,$N.services.sdp.MetadataService.RequestType.Events,aa,null,Z,null,0);}else{af(null);}}function Q(){if($N.app.Config.getConfigValue("mds.developer.mode")==="on"){return $N.app.Config.getConfigValue("mds.developer.server");}return $N.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true);}function k(aa){var Z,Y;if(aa){Y=$N.platform.btv.ChannelCategories.getCategoryByName(aa);if(Y){Z=e(Y.getChannels());}else{Z=$N.platform.btv.Favourites.getFavouriteChannels(aa);Z=Z||e();}}else{Z=e();}return Z;}function z(Y){if(Y.indexOf(O,Y.length-O.length)!==-1){return false;}return true;}function T(Z){var aa,Y;if(Z){Y=$N.platform.btv.ChannelCategories.getCategoryByName(Z);if(Y){aa=Y.getServiceIds();}else{aa=$N.platform.btv.Favourites.getFavouriteServiceIds(Z);aa=aa||$N.platform.btv.EPG.getServiceIdArraySortedByLCN();}}else{aa=$N.platform.btv.EPG.getServiceIdArraySortedByLCN();}return aa;}function d(aa,ag){var Z=ag.length,ae=null,af=null,ab=null,ac=null,Y=null,ad;for(ad=0;ad<Z;ad++){if(ag[ad].logicalChannelNum){if(aa===0){af=ag[ad].logicalChannelNum;ab=ad;break;}if(ag[ad].logicalChannelNum>=aa){ac=ag[ad].logicalChannelNum;Y=ad;break;}af=ag[ad].logicalChannelNum;ab=ad;}}if(ac){ae=((Math.round(ac-af)/2+af)<aa)?Y:ab;}else{ae=ab;}return(ae>=0)?ag[ae]:null;}function V(Y,Z){CCOM.EPG.addEventListener("addEventOK",Y);CCOM.EPG.addEventListener("addEventFailed",Z);}function t(Y,Z){CCOM.EPG.removeEventListener("addEventOK",Y);CCOM.EPG.removeEventListener("addEventFailed",Z);}return{storeChannelToPrefs:function(Y){if($N.app.EventUtil.isValidServiceId(Y)){E.set(M.PREF_TV_CURRENT_SERVICE_ID,String(Y));return true;}return false;},getChannelFromPrefs:function(){var Y=E.get(M.PREF_TV_CURRENT_SERVICE_ID);if(Y&&Y!==String(l)){return Y;}return null;},getNumServices:function(){var Y=e();if(Y[0]&&Y[0].serviceId===l){return 0;}return Y.length;},fetchEventsRSByQuery:function(Z,ac,Y,ab){var aa;setTimeout(function(){aa=CCOM.EPG.getEventsRSByQuery(Z,ac,Y);if(Object.prototype.toString.call(ab)==="[object Function]"){ab(aa);}},1);},fetchLatestLocalEPGEvent:function(ac,aa){var Z="DISTINCT serviceId, endTime",ab=aa?"(serviceId='"+aa+"')":null,Y="endTime DESC limit 1";this.fetchEventsRSByQuery(Z,ab,Y,function(af){var ad=af.getNext(1),ae;for(ae=0;ae<ad.length;ae++){if(Object.prototype.toString.call(ac)==="[object Function]"){ac(ad[ae]);}}af.reset();af=null;});},fetchLatestEvent:function(ad,aa){var Y,Z,ab,ac=function(af){var ae=!ab||!ab.hasOwnProperty("endTime");if(ae||(af&&af.endTime&&af.endTime>ab.endTime)){ab=af;}if(Y&&Z&&ab&&ad){ad(ab);}};$N.services.sdp.EPG.fetchLatestEvent(function(ae){Y=true;ac(ae);},aa);this.fetchLatestLocalEPGEvent(function(ae){Z=true;ac(ae);},aa);},fetchEarliestLocalEPGEvent:function(ac,aa){var Z="DISTINCT serviceId, startTime",ab=aa?"(serviceId='"+aa+"')":null,Y="startTime ASC limit 1";this.fetchEventsRSByQuery(Z,ab,Y,function(af){var ad=af.getNext(1),ae;for(ae=0;ae<ad.length;ae++){if(Object.prototype.toString.call(ac)==="[object Function]"){ac(ad[ae]);}}af.reset();af=null;});},fetchEarliestEvent:function(ad,aa){var Y,Z,ac,ab=function(af){var ae=!ac||!ac.hasOwnProperty("startTime");if(ae||(af&&af.startTime&&af.startTime<ac.startTime)){ac=af;}if(Y&&Z&&ac&&ad){ad(ac);}};$N.services.sdp.EPG.fetchEarliestEvent(function(ae){Y=true;ab(ae);},aa);this.fetchEarliestLocalEPGEvent(function(ae){Z=true;ab(ae);},aa);},fetchEventsByWindow:function(ab,Z,Y,ad){var ac,aa=function(ae){if(ad&&H===ac){ad(ae);}};if(Object.prototype.toString.call(ab)!=="[object Array]"){ab=[ab];}H++;ac=H;$N.platform.btv.EPG.fetchEventsByWindow(ab,Z,Y,aa);},BAD_EVENT_ID:v,BAD_SERVICE_ID:l,getEvent:U,getEventId:N,getDefaultEvent:q,getDefaultEventIfNoEvents:F,getDefaultEventsForGrid:x,getServiceById:w,getChannelLogoUrl:p,getFlagUrls:n,getMinimisedEventsForService:P,getAllChannelDataForTime:c,resolveEventIcon:L,getDataForInfoCard:D,getCCOMEventForQSPEvent:m,getEventImageFromMDS:X,getPosterImageServer:Q,getChannelsForCategory:k,getServiceIdsForCategory:T,getNextClosestService:d,getServices:e,isPromoImageValid:z,fetchGridEventsByWindow:B,getSeasonEpisodeNumber:S,getSeasonEpisodeShort:I,getSeasonEpisodeAbbreviation:a,getSeasonEpisodeNumberObject:u,applySortToEventList:function(aa,Y){var Z=b[Y];if(Z&&Z.eventFunction){return aa.sort(Z.eventFunction);}return aa;},applyCurrentSortToChannelList:function(aa){var Y=E.get(M.PREF_TV_SORT),Z=b[Y];if(Z&&Z.channelFunction){return aa.sort(Z.channelFunction);}return aa;},getSortOptions:function(){return s;},calculateEventLengthInSeconds:function(Z,Y){var ab=Y-Z,aa=ab/1000;return Math.floor(aa);},calculateEventLengthInMinutes:function(aa,Z){var Y=this.calculateEventLengthInSeconds(aa,Z)/60;return Math.floor(Y);},navigateToSynopsis:function(Y,Z,aa){$N.app.ContextHelper.openContext("SYNOPSIS",{activationContext:{data:Y,type:"epg",playing:Z,showBackgroundGradient:false},navCompleteCallback:aa});},isAdultEvent:function(Z){var Y=[];if(Z.eventId){Y=Z.genres||CCOM.EPG.getGenresByEventId(Z.eventId);if(Y.error){return false;}else{return this.isAdultGenre(Y);}}else{return false;}},isAdultGenre:function(Y){var aa=0,Z=0;aa=Y.length;for(Z;Z<aa;Z++){switch(Y[Z].contentNibbleLevel1){case M.FILM_GENRE_GROUP_ID:if(Y[Z].contentNibbleLevel2===M.EROTICO_GENRE_IN_FILM_GROUP_ID){return true;}break;case M.NONFICTION_GENRE_GROUP_ID:case M.EDUCATION_GENRE_GROUP_ID:if(Y[Z].contentNibbleLevel2===M.EROTICO_GENRE_IN_EDUCATION_GROUP_ID){return true;}break;case M.ADULT_GENRE_GROUP_ID:return true;default:break;}}return false;},getExtendedInfoByEventId:function(ad,aa){aa=aa||M.EVENT_EXTENDED_INFO.EPISODIC_INFO;var ae=M.EVENT_EXTENDED_INFO.LANGUAGE,Z=CCOM.EPG.getExtInfoByEventId(ad,ae,0),Y=Z.length,ac=[],ab;for(ab=0;ab<Y;ab++){if(aa[Z[ab].extInfoKey]){ac[aa[Z[ab].extInfoKey]]=Z[ab].extInfoValue;}}return ac;},getSeasonAndEpisodeStringByEventId:function(Z){var Y=this.getExtendedInfoByEventId(Z),aa=(Y.series)?Y.series+" "+EPGUtil.getString("seasonShort")+" ":"";aa+=(Y.episode)?EPGUtil.getString("episodeShort")+" "+Y.episode:"";return $N.apps.util.Util.upcaseFirstLetter(aa);},getMappedEventById:function(Y){var Z=null;if(Y){Z=$N.platform.btv.EPG.getEventById(Y);Z=$N.platform.btv.EPGEventFactory.mapObject(Z);}return Z;},getUniqueEventIdByEvent:function(Y){return Y.uniqueEventId||$N.platform.btv.EPGEventFactory.mapObject(Y).uniqueEventId;},addMdsEventToEPG:function(ae,Y,ad){var Z={},ab,ac,aa;ac=function(af){t(ac,aa);if(Y){Y();}};aa=function(af){t(ac,aa);if(ad){ad(af);}h("addMdsEventToEPG","Error ="+JSON.stringify(af));};Z.eventId=ae.eventId;Z.netUniqueEventId=ae.uniqueEventId;Z.serviceId=ae.serviceId;Z.startTime=ae.startTime;Z.endTime=ae.endTime;Z.parentalRating=ae.parentalRating;Z.title=ae.title;Z.shortDesc=ae.shortDesc;Z.longDesc=ae.longDesc;Z.seriesId=ae.seriesId;Z.episodeId=ae.episodeId;Z.netActorCast=ae.actors;Z.netDirector=ae.directors;Z.netOriginalName=ae.originalName;Z.netEpisodeName=ae.epOriginalName;Z.netProdYear=ae.year;Z.netCountry=ae.country;Z.netEventGenres=$N.app.genreUtil.getGenreStringFromGenreObject(ae.genres);Z.sourceId=$N.app.constants.EPG_SOURCE_DVB;t(ac,aa);if(Y||ad){V(ac,aa);}ab=CCOM.EPG.addEvent(Z,1);}};};(function(a){a.app=a.app||{};a.app.VideoUtil=(function(){return{is3DModeOn:function(){return(CCOM.System.get3dMode().mode===CCOM.System.STEREOSCOPIC_3D_MODE_ON);},enable3DMode:function(){CCOM.System.set3dMode(CCOM.System.STEREOSCOPIC_3D_MODE_ON);},disable3DMode:function(){CCOM.System.set3dMode(CCOM.System.STEREOSCOPIC_3D_MODE_OFF);}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.ManualRecordingHelper=(function(){var c=new a.apps.core.Log("Helper","ManualRecordingHelper"),b=a.platform.btv.PVRManager;function d(e){return((e.taskId||e._data.taskId)&&((e.taskType==="REC")||(e._data.taskType==="REC")));}return{cancelManualRecording:function(h){var f=d(h),g=null,e=null;if(f){g=h.taskId;}else{g=b.getActiveTaskIdForService(h.serviceId);}e=b.getTask(g,"taskType, objectState, scheduleType, jobId, taskId");if(e){b.cancelRecordingByTask(e);}},isManualRecordingTask:function(e){return(d(e)&&(!e.eventId)&&e.serviceId);}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.PVRUtil=(function(){var o=new a.apps.core.Log("Helper","PVRUtil"),N=a.platform.system.Preferences,ak=995,k=a.app.constants,L=a.platform.btv.PVRManager,F=0,R=0,M=null,q=null,K=null,v,T={BOOKED:0,PROCESSING:1,SUSPEND_PROCESSING:2,STOP_PROCESSING:3,PROCESSED:4,FINAL:5,ERROR:6,DELETING:7,DELETED:8},H={UNPLAYED_UNBLOCKED:0,PLAYED_UNBLOCKED:1,UNPLAYED_BLOCKED:2,PLAYED_BLOCKED:3},c={CA_ERROR:1,NO_RESOURCE:4,STARTED_LATE:64,POWER_LOSS:32,SIGNAL_LOSS:16},aa={NOT_APPLICABLE:1,ALLOWED:2,NOT_ALLOWED:3},G=null,J=null,am=0.96;function x(ao){ao=ao||1;q+=ao;}function h(ao){q=0;M=ao;}function ac(){var ao=a.platform.btv.PVRManager.getActiveRecordings();return(ao.length>0);}function Y(){if(M&&q&&M>0&&q>=0){if(q===M){return aa.ALLOWED;}return aa.NOT_ALLOWED;}return aa.NOT_APPLICABLE;}function r(at){var av={text:"",span:""},aw="",aq,ar,ap,ao,au;if(at){aq=new Date(at.actualStartTime||at.startTime-at.softPrepaddingDuration);ar=a.platform.btv.EPG.getNextEventForService(at.serviceId);ap=a.app.DateTimeUtil.getFormattedStartEndTimeString(aq,new Date(at.actualStopTime||at.endTime+at.softPostpaddingDuration)).toUpperCase();ao=new Date(at.startTime);au=a.app.DateTimeUtil.getFormattedStartEndTimeString(ao,new Date(at.actualStopTime||at.endTime)).toUpperCase();if(a.app.EventUtil.isEventShowingNow(at)){aw=a.app.PVRUtil.getString("showingNow");}else{if(ar&&ar.eventId&&ar.eventId===at.eventId){aw=a.app.PVRUtil.getString("showingNext");}else{if(a.app.EventUtil.isEventShowingToday(at)){aw=a.app.PVRUtil.getString("today");}else{aw=a.app.PVRUtil.getString("days")[aq.getDay()];}}}av={text:au,span:au.substring(au.length-2,au.length)};}return{text:aw,obj:av};}function e(ao){var aq="",ap=null;if(ao){ap=a.app.epgUtil.getSeasonEpisodeNumberObject(ao.seriesId,ao.episodeId);if(ap.seasonNumber!==""){aq+=a.app.PVRUtil.getString("seasonShort")+" "+a.app.GeneralUtil.padNumberWithZeroes(parseInt(ap.seasonNumber,10),2);}if(ap.episodeNumber!==""){aq+=" "+a.app.PVRUtil.getString("episodeShort")+" "+a.app.GeneralUtil.padNumberWithZeroes(parseInt(ap.episodeNumber,10),2);}return aq;}return"";}function D(ap){var ao=a.platform.btv.PVRManager.getTask(ap,"PlayedBlocked");return(ao&&ao._data&&ao._data.PlayedBlocked)?ao._data.PlayedBlocked:H.UNPLAYED_UNBLOCKED;}function m(){var ao=a.platform.system.Device.getTotalHardDriveSpace();return(ao);}function t(ao){var ap=D(ao);if(ap===H.UNPLAYED_UNBLOCKED){a.app.PVRUtil.updateRecording(ao,{PlayedBlocked:H.PLAYED_UNBLOCKED});}else{if(ap===H.UNPLAYED_BLOCKED){a.app.PVRUtil.updateRecording(ao,{PlayedBlocked:H.PLAYED_BLOCKED});}}}function C(ar){var ao,ap,aq="";if(ar){ao=(ar.getHours()===0)?12:ar.getHours();ap=ar.getMinutes();aq=(ap<=9)?"0":"";return(String(ao)+":"+aq+String(ap));}return"0:00";}function E(){return K;}function an(ao){K=ao;}function A(at,ar,aq){var ap=function(au){F=au;},ao=function(au){R=au;};F=(aq)?at:0;R=ar;return{title:"prePostPadding",listObjectName:"FixedList",callback:function(au){if(au.action){au.action();}},buttons:[{name:a.app.PVRUtil.getString("startRecording"),action:"",ctrlname:"labelPaddingBefore",selectable:false,type:a.app.constants.POPUP_MULTIROW_DATA_TYPE.LABEL,xPos:0,width:400},{name:at,action:"",ctrlname:"prePadding",selectable:aq,type:a.app.constants.POPUP_MULTIROW_DATA_TYPE.DIRECT_ENTRY,callback:ap,xPos:405,width:100},{name:a.app.PVRUtil.getString("minsBeforeAndFinish"),action:"",ctrlname:"labelPaddingAfter",selectable:false,type:a.app.constants.POPUP_MULTIROW_DATA_TYPE.LABEL,xPos:530,width:500},{name:ar,action:"",ctrlname:"postPadding",type:a.app.constants.POPUP_MULTIROW_DATA_TYPE.DIRECT_ENTRY,selectable:true,callback:ao,xPos:1020,width:100},{name:a.app.PVRUtil.getString("minsAfter"),action:"",ctrlname:"labelPaddingAfter",selectable:false,type:a.app.constants.POPUP_MULTIROW_DATA_TYPE.LABEL,xPos:1140,width:250}]};}function p(ap,ao){return[{name:a.app.PVRUtil.getString("recordConfirm"),action:ap},{name:a.app.PVRUtil.getString("cancel"),action:ao}];}function l(ap){var ao=N.get(k.PREF_EPISODIC_TYPE_OF_EPISODES);return(ap===ao);}function X(aq){var ao="RECORD_SERIES",ap="RECORD_EVENT";return{title:a.app.PVRUtil.getString("optionRecord"),selectListWidth:ak,listObjectName:"HorizontalSelectorControl",selectable:true,buttons:[{name:a.app.PVRUtil.getString("recordEvent"),action:ap,isDefault:!l(k.TYPE_OF_EPISODE_OPTION_ALL_EPISODE)},{name:a.app.PVRUtil.getString("recordSeries"),action:ao,isDefault:l(k.TYPE_OF_EPISODE_OPTION_ALL_EPISODE)}],highlightedCallback:aq};}function z(ar,aq){var ao=a.app.FolderUtil.getString("pvrSettingsRecordingHighlights"),ap=a.app.FolderUtil.getDislayedDefaultNonEpisodicFolderName();ar.folderName.buttons.push({name:ap,value:((ap===ao)?k.ROOT_PVR_FOLDER_VALUE:ap),action:aq});if(ap!==ao){ar.folderName.buttons.push({name:ao,value:k.ROOT_PVR_FOLDER_VALUE,action:aq});}}function ae(au,aq){au=au||0;aq=aq||0;var at=99,ap=a.platform.system.Preferences.get(a.app.constants.PVR_REVIEW_BUFFER_PERCENT_PREF,true)||a.app.constants.PVR_REVIEW_BUFFER_PERCENT_DEFAULT,aw=(aq-au),ar=(aw/aq)*100,ao=(1+(ap/100)),av=Math.ceil(ar*ao);if(av>at){return at;}else{return av;}}function V(aq,ap){aq=aq||0;ap=ap||0;var ao=ae(aq,ap);return Math.ceil(100-ao);}function aj(av,au){var ap=N.get(a.app.constants.PVR_NON_EPISODIC_FOLDER_LIST),aq,at,ar=ap.length,ao=a.app.FolderUtil.getDislayedDefaultNonEpisodicFolderName();for(aq=0;aq<ar;aq++){if(ap[aq].trim().length>0&&ao!==a.app.StringUtil.removeLeadingForwardSlash(ap[aq])&&!a.app.FolderUtil.isFolderRootFolder(ap[aq])){at={name:a.app.StringUtil.removeLeadingForwardSlash(ap[aq]),value:ap[aq],action:au};av.folderName.buttons.push(at);}}}function ah(ao){z(ao,"FOLDER_OPTION");aj(ao,"FOLDER_OPTION");}function w(ar,ap,ao){var at=ao.seriesName||ap.seriesName||ap.title,aq={name:at,value:at,action:"FOLDER_OPTION"};ar.folderName.buttons.push(aq);}function O(){return{folderName:{title:a.app.PVRUtil.getString("folderName"),selectListWidth:ak,listObjectName:"HorizontalSelectorControl",buttons:[]}};}function I(ao){ao.folderName.selectable=true;ao.folderName.cssClass="popupButton";ao.folderName.highlightCssClass="popupButton_highlight";ao.folderName.textCssClass="dialogButtonTextLabel";}function u(ao){ao.folderName.selectable=false;ao.folderName.cssClass="unSelectableOptionsMenuItem";ao.folderName.highlightCssClass="unSelectableOptionsMenuItem";ao.folderName.textCssClass="unSelectableDialogButtonTextLeft";}function W(au,at,ar,av){var ao=a.app.DialogueHelper.getDialogue(a.app.constants.DLG_RECORD_CONFIRMATION),ap="RECORD_SERIES",aq="RECORD_EVENT";if(!ao){return;}av.folderName.buttons=[];if(au===ap){u(av);w(av,at,ar);}else{if(au===aq){I(av);ah(av);}}ao.customise({folderName:av.folderName});}function b(){var ao=90,ap=function(ar){var aq=ae(ar,m());if(aq&&aq>ao){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DISK_SPACE);}};a.platform.system.Device.getFreeHardDriveSpace(ap);}function ai(ao){return N.get(ao?k.PREF_EPISODIC_BEFORE_PADDING:k.PREF_BEFORE_PADDING)||0;}function d(ao){return N.get(ao?k.PREF_EPISODIC_AFTER_PADDING:k.PREF_AFTER_PADDING)||0;}function n(av,ao,aw){var au=1,ar="RECORD_SERIES",ap=null,at=av.optionalControl.recordSeries&&av.optionalControl.recordSeries.control.action===ar,aq=null,ax=function(){if(at){aq=N.get(k.PREF_EPISODIC_KEEP_UNTIL)===k.KEEP_UNTIL_OPTION_MANUAL_DELETE;a.app.PVRUtil.requestSeriesRecording(ao,ap,aq);}else{aq=N.get(k.PREF_DEFAULT_KEEP_UNTIL)===k.KEEP_UNTIL_OPTION_MANUAL_DELETE;a.app.PVRUtil.requestEventRecording(ao,ap,aq);}if(aw){aw({state:"record"});}b();};if(av.action===au){if(av.optionalControl.folderName){ap={uiFolder:a.app.StringUtil.addLeadingForwardSlash(av.optionalControl.folderName.control.value)};}ap.softPrepaddingDuration=F;ap.softPostpaddingDuration=R;if(ao.source===a.data.EPGEvent.SOURCE.MDS){a.app.epgUtil.addMdsEventToEPG(ao,ax);}else{ax();}}}function s(ap,ay){var aw=a.app.epgUtil.getExtendedInfoByEventId(ap.eventId),av=1,ar=2,au=O(),aq=ap.seriesId&&ap.episodeId?ap.title+a.app.epgUtil.getSeasonEpisodeShort(ap," "):ap.title,aA,az=a.app.EventUtil.isFutureEvent(ap),at=ap.seriesId||aw.series,ao=function(aB){n(aB,ap,ay);},ax=function(aB){W(aB,ap,aw,au);};if(at){au.recordSeries=X(ax);}if(at&&l(k.TYPE_OF_EPISODE_OPTION_ALL_EPISODE)){u(au);w(au,ap,aw);}else{I(au);ah(au);}au.prePostPadding=A(ai(at),d(at),az);if(a.platform.btv.WHPVRManager.isLocalRecordServer()){aA="";}else{if(a.platform.btv.WHPVRManager.isRemoteRecordServerValid()){aA=a.app.PVRUtil.getString("remoteRecordConfirmMessage")+a.platform.btv.WHPVRManager.getCurrentRecordServerName();}}a.app.DialogueHelper.deleteDialogue(a.app.constants.DLG_RECORD_CONFIRMATION);a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_RECORD_CONFIRMATION,aq,aA,p(av,ar),ao,null,null,null,null,null,null,au);}function P(ao){if(G){G(ao);G=null;}}function Q(ao){if(J){J(ao);J=null;}}function Z(ar,aw,av,ap,ao){var au=a.app.constants.DLG_ACTIONS,aq=[{name:a.app.PVRUtil.getString("no"),action:au.EXIT_OPTION},{name:a.app.PVRUtil.getString("yes"),action:au.CONTINUE_CANCEL_EPISODE_OPTION}],at=function(ax){a.apps.dialog.DialogManager.hideDialogWithId("CancelRecordConfirmationDialogue");if(ax&&ax.action===au.CONTINUE_CANCEL_EPISODE_OPTION){if(aw){if(a.app.EventUtil.isFutureEvent(ar)){G=function(){aw({state:"cancel",event:ar});};}else{J=function(){aw({state:"cancel",event:ar});};}}if(a.app.PVRUtil.isRecordingSetForEvent(ar)){a.platform.btv.PVRManager.cancelEventRecording(ar);}else{a.app.ManualRecordingHelper.cancelManualRecording(ar);}}};return new a.apps.dialog.ConfirmationDialogue(ao,av,ap,aq,at);}function g(ap,at){var ar=a.app.constants.DLG_ACTIONS,ao=[{name:a.app.PVRUtil.getString("cancelSeriesDeleteCancel"),action:ar.EXIT_OPTION},{name:a.app.PVRUtil.getString("cancelSeriesDeleteEpisodeButton"),action:ar.CONTINUE_CANCEL_EPISODE_OPTION},{name:a.app.PVRUtil.getString("cancelSeriesDeleteSeriesButton"),action:ar.CONTINUE_CANCEL_SERIES_OPTION}],aq=function(au){a.apps.dialog.DialogManager.hideDialogWithId("CancelRecordConfirmationDialogue");if(au&&(au.action===ar.CONTINUE_CANCEL_EPISODE_OPTION||au.action===ar.CONTINUE_CANCEL_SERIES_OPTION)){if(au.action===ar.CONTINUE_CANCEL_SERIES_OPTION){if(a.app.PVRUtil.isRecordingSetForEvent(ap)){a.platform.btv.PVRManager.cancelSeriesRecordingByEventId(ap.eventId);}else{a.app.ManualRecordingHelper.cancelManualRecording(ap);}}else{if(a.app.PVRUtil.isRecordingSetForEvent(ap)){a.platform.btv.PVRManager.cancelEventRecording(ap);}else{a.app.ManualRecordingHelper.cancelManualRecording(ap);}}if(at){at({key:au});}}};return new a.apps.dialog.ConfirmationDialogue("CancelRecordConfirmationDialogue",a.app.PVRUtil.getString("cancelSeriesRecording"),a.app.PVRUtil.getString("cancelSeriesSubtitle"),ao,aq,null,null,"VERTICAL");}function S(ao,aq){var ap;if(a.app.PVRUtil.isSeriesRecordingSetForEvent(ao)||a.app.PVRUtil.isSeriesManualRecordingSet(ao.serviceId)){ap=g(ao,aq);a.app.DialogueHelper.displayDialogue(ap,a.app.constants.DLG_CANCEL_SERIES);}else{if(a.app.EventUtil.isEventShowingNow(ao)){ap=Z(ao,aq,a.app.PVRUtil.getString("endofRecording"),a.app.PVRUtil.getString("interruptRecording"),"CancelRecordConfirmation");a.app.DialogueHelper.displayDialogue(ap,a.app.constants.DLG_CANCEL_LIVE_RECORD);}else{ap=Z(ao,aq,a.app.PVRUtil.getString("cancelRecording"),"","CancelLiveRecordConfirmation");a.app.DialogueHelper.displayDialogue(ap,a.app.constants.DLG_CANCEL_RECORD);}}}function al(aq){var ap=a.app.constants.DLG_ACTIONS,ao=[{name:(aq)?a.app.PVRUtil.getString("cancelSeriesDeleteCancel"):a.app.PVRUtil.getString("no"),action:ap.EXIT_OPTION},{name:(aq)?a.app.PVRUtil.getString("cancelSeriesDeleteEpisodeButton"):a.app.PVRUtil.getString("yes"),action:ap.CONTINUE_CANCEL_EPISODE_OPTION}];if(aq){ao.push({name:a.app.PVRUtil.getString("cancelSeriesDeleteSeriesButton"),action:ap.CONTINUE_CANCEL_SERIES_OPTION});}return ao;}function f(ao,at){var aq=a.app.constants.DLG_ACTIONS,ar=(ao.recordingType===a.data.Recording.RECORDING_TYPE.SERIES),ap={dialogButtons:al(ar),buttonAlignment:""};if(ar){ap.title=a.app.PVRUtil.getString("cancelSeriesRecording");ap.subtitle=a.app.PVRUtil.getString("cancelSeriesSubtitle");ap.dialogueEnum=a.app.constants.DLG_CANCEL_SERIES;ap.dialogId="CancelSeriesConfirmation";ap.buttonAlignment="VERTICAL";}else{if(a.app.PVRUtil.isTaskActive(ao)){ap.title=a.app.PVRUtil.getString("endofRecording");ap.subtitle=a.app.PVRUtil.getString("interruptRecording");ap.dialogueEnum=a.app.constants.DLG_CANCEL_LIVE_RECORD;ap.dialogId="CancelLiveRecordConfirmation";}else{ap.title=a.app.PVRUtil.getString("cancelRecording");ap.subtitle="";ap.dialogueEnum=a.app.constants.DLG_CANCEL_RECORD;ap.dialogId="CancelRecordConfirmation";}}ap.dialogCallback=function(au){a.apps.dialog.DialogManager.hideDialogWithId(ap.dialogId);if(au&&au.action!==aq.EXIT_OPTION){if(at){at({key:au});}if(au.action===aq.CONTINUE_CANCEL_SERIES_OPTION){a.platform.btv.PVRManager.cancelSeriesRecording(ao.jobId);}else{a.platform.btv.PVRManager.cancelRecordingByTask(ao);}}};return ap;}function ab(ao,aq){var ap=f(ao,aq);a.app.DialogueHelper.createAndShowDialogue(ap.dialogueEnum,ap.title,ap.subtitle,ap.dialogButtons,ap.dialogCallback,null,ap.buttonAlignment);}function y(ao){h(ao.length);ao.forEach(function(ap){a.platform.btv.PVRManager.deleteTask(ap);});}function ag(au,at,ap){var ar=a.app.constants.DLG_ACTIONS,ao=al(false),aq=function(av){a.apps.dialog.DialogManager.hideDialogWithId("DeleteRecordConfirmation");if(av.action!==ar.EXIT_OPTION){if(at){at({key:av});}y(au);}};a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DELETE_RECORD,(ap&&ap.titleText)?ap.titleText:a.app.PVRUtil.getString("deleteRecording"),(ap&&ap.messageText)?ap.messageText:"",ao,aq,null,null,null,(ap&&ap.dialogObjectConfigParam)?ap.dialogObjectConfigParam:null);}function af(){v=[{name:"dateSort",action:a.app.SortUtil.sortByDateDesc},{name:"titleSort",action:a.app.SortUtil.sortByTitle},{name:"channelSort",action:a.app.SortUtil.sortByChannel}];}function B(ao){if(ao&&ao.action===a.app.constants.YES_OPTION){if(CCOM.ConfigManager.getValue("/network/rbs/RBS_State").keyValue===2){CCOM.ConfigManager.setValue("/network/rbs/RBS_State",3);}}else{if(ao&&ao.action===a.app.constants.NO_OPTION){CCOM.ConfigManager.setValue("/network/rbs/RBS_State",4);}}}function U(){var ao=[{name:a.app.PVRUtil.getString("yes"),action:a.app.constants.YES_OPTION},{name:a.app.PVRUtil.getString("no"),action:a.app.constants.NO_OPTION}];a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DVR_OPERATOR_DISABLED,a.app.PVRUtil.getString("remoteAccessAuthorisationTitle"),a.app.PVRUtil.getString("remoteAccessAuthorisationMessage"),ao,B);}function ad(ao){ao.addFadeAnimation();a.platform.system.Preferences.monitorValue("/network/rbs/RBS_State",function(){var ap=CCOM.ConfigManager.getValue("/network/rbs/RBS_State").keyValue;switch(ap){case 2:U();break;case 3:case 4:if(ao.spinningLoadIcon.isVisible()){ao.doFade(0);ao.spinningLoadIcon.hide();}return;case 5:ao.remoteAccessLabel.setText(a.app.PVRUtil.getString("remoteAccessMessage"));if(!ao.spinningLoadIcon.isVisible()){ao.doFade(1);ao.spinningLoadIcon.show();}break;default:if(ao.spinningLoadIcon.isVisible()){ao.doFade(0);ao.spinningLoadIcon.hide();}break;}},null,true);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.PVRUtil);a.app.PVROptionsUtil.initialise();af();a.platform.btv.PVRManager.addEventListener("onTasksChanged",P);a.platform.btv.PVRManager.addEventListener("stopTaskOK",Q);},navigateToSynopsis:function(ao,ap){a.app.ContextHelper.openContext("SYNOPSIS",{activationContext:{data:ao,type:ao.eventId?"PVR":"TBR",playing:false},navCompleteCallback:ap});},updateHDDProgress:function(ao){var ap=function(au){var aq=m(),ar=ae(au,aq),at=V(au,aq);if(isNaN(ar)){ar=0;ao.hide();}else{ao.show();}ao.progressBar.setProgress(ar);ao.progressBarLabel.setText(String(at)+"% "+a.app.PVRUtil.getString("diskSpaceFree"));};a.platform.system.Device.getFreeHardDriveSpace(ap);},applySortToRecordingsList:function(ap,ao){return ap.sort(ao.action);},getSortOptions:function(){return v;},isRecordingActiveOrScheduled:function(aq){var ap=a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED,ao=a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE;if(aq===ao||aq===ap){return true;}return false;},isRecordingActiveOrScheduledForSeries:function(ap){var ao=a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES,aq=a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES;if(ap===aq||ap===ao){return true;}return false;},requestEventRecording:function(ap,ao,aq){ao=a.app.PVROptionsUtil.addNonEpisodicRecordingMetaData(ao);a.platform.btv.PVRManager.requestEventRecording(ap,ao,aq);},requestSeriesRecording:function(ap,ao,aq){ao=a.app.PVROptionsUtil.addEpisodicRecordingMetaData(ao);a.platform.btv.PVRManager.requestSeriesRecording(ap,ao,aq);},getVideoConfig:function(ay,az,au,ar,ap,at){var ax=at.taskId,aq=new Date(at.actualStartTime),aw=new Date(at.actualStopTime||at.endTime+at.softPostpaddingDuration),av="",aA="",ao=at.eventId;av=C(aq);aA=C(aw);return{url:at.url,type:"PVR",title:ay,skip:true,trickplay:true,subtitle:az||a.app.PVRUtil.getString("pvr"),taskId:ax,channelNumber:ar,channelLogo:ap,scheduleStartTimeStr:av,scheduleEndTimeStr:aA,scheduleStartTime:at.actualStartTime||at.startTime-at.softPrepaddingDuration,scheduleEndTime:at.actualStopTime||at.endTime+at.softPostpaddingDuration,startPosition:au};},deleteOrBookmarkCurrentPosition:function(ap,ao){var aq=ao*am;return(ap<aq);},registerUIRefreshListener:function(ap,ao){a.platform.btv.PVRManager.registerUIRefreshListener(ap,ao);if(N.get(k.PREF_MOCK_PVR)==="true"){a.platform.btv.Reminders.registerUIRefreshListener(ap,ao);}},unregisterUIRefreshListener:function(ao){a.platform.btv.PVRManager.unregisterUIRefreshListener(ao);if(N.get(k.PREF_MOCK_PVR)==="true"){a.platform.btv.Reminders.unregisterUIRefreshListener(ao);}},setTaskAsPlaying:function(ao){an(ao);t(ao);o("setTaskAsPlaying",E());},unsetTaskAsPlaying:function(){an(null);o("unsetTaskAsPlaying",E());},isTaskPlaying:function(ao){K=E();if(!K){return false;}if(K!==ao){return false;}return true;},getRecordingTimingsData:function(aq){var at,au,av,ao,aw,ap,ax,ar;if(aq){ar=aq._data;if(ar.actualStartTime>ar.startTime){at=ar.actualStartTime-ar.startTime;ao=ar.startTime;}else{at=0;ao=ar.actualStartTime;}if(a.app.PVRUtil.ACTIVE===a.platform.btv.PVRManager.getTaskRecordingStatus(aq)){au=new Date().getTime()-ao;}else{if(ar.actualStopTime){au=ar.actualStopTime-ao;}else{au=ar.actualDuration||ar.duration;}}aw=(ar.actualStartTime<ar.startTime)?ar.actualStartTime:ar.startTime;ap=(ar.actualStopTime>ar.endTime)?ar.actualStopTime:ar.endTime;ax=ap-aw;av=ar.actualDuration||aq.duration;return{actualStartPosition:at,actualStopPosition:au,recordingDuration:av||au-at,eventDuration:ax,bookmarkPosition:aq.bookmark*1000};}return{actualStartPosition:0,actualStopPosition:0,recordingDuration:0,eventDuration:0,bookmarkPosition:0};},deleteSeriesOfRecordings:function(ap){var ar=a.platform.btv.PVRManager.getRecordingsBySeries(ap),aq=ar.length,ao;for(ao=0;ao<aq;ao++){a.platform.btv.PVRManager.deleteTask(ar[ao]);}},isRecordingSetForEvent:function(ao){return a.platform.btv.PVRManager.isPVREventScheduled(ao);},isManualRecordingSet:function(ao){return a.platform.btv.PVRManager.isManualRecordingActiveForService(ao);},isRecordable:function(at,ao){var au=a.app.EventUtil.isValidEvent(at),aq=a.app.EventUtil.isPastEvent(at),ap=ao||a.app.epgUtil.getServiceById(at.serviceId),ar=a.app.ChannelManager.isInteractiveChannel(ap);if(au&&!aq&&!ar){return true;}return false;},isRecordingPossible:function(ao){if(!a.app.PVRCapability.isOperatorPVREnabled()){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DVR_OPERATOR_DISABLED);return;}if(!a.app.PVRCapability.isHardDriveAvailable()&&a.platform.btv.WHPVRManager.isLocalRecordServer()){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DVR_DISC_NOT_PRESENT);return;}if(!a.platform.btv.WHPVRManager.isLocalRecordServer()&&!a.platform.btv.WHPVRManager.isRemoteRecordServerValid()&&a.platform.btv.WHPVRManager.hasRemoteServers()){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_WHPVR_SERVER_NOT_PRESENT);return;}if(!a.app.EventUtil.isValidEvent(ao)){return;}if(a.app.PPVHelper.isPPVEvent(ao)){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_PPV_RECORDING_BLOCKED,a.app.StringUtil.join("",[a.app.DialogueHelper.getString("attention"),"!"]),a.app.DialogueHelper.getString("ppvRecordingBlockedMessage"));return;}return true;},eventOrManualRecordSetOrCancel:function(ao,ap){if(a.app.PVRUtil.isRecordingPossible(ao)){if(this.isRecordingSetForEvent(ao)||(a.app.EventUtil.isEventShowingNow(ao)&&this.isManualRecordingSet(ao))){S(ao,ap);}else{s(ao,ap);}}},cancelEventOrManualRecord:function(ao,ap){if(this.isRecordingSetForEvent(ao)||this.isManualRecordingSet(ao)){S(ao,ap);}},recordOrCancelEvent:function(ao,ap){if(a.app.PVRUtil.isRecordingPossible(ao)){if(this.isRecordingSetForEvent(ao)){S(ao,ap);}else{s(ao,ap);}}},cancelEvent:function(ao,ap){if(this.isRecordingSetForEvent(ao)){S(ao,ap);}},cancelTask:function(ao,aq,ap){ab(ao,aq);},deleteTasks:function(ao){y(ao);},showDialogueAndDeleteTasks:function(aq,ap,ao){ag(aq,ap,ao);},isSeriesRecordingSetForEvent:function(ap){var ao=a.platform.btv.PVRManager.getRecordingStatusByEvent(ap);return ao===a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES||ao===a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES;},isSeriesManualRecordingSet:function(ap){var ao=a.platform.btv.PVRManager.getServiceRecordingStatus(ap);return ao===a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES||ao===a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES;},getLatestPlayableRecordings:function(ap){ap=ap||a.app.constants.PORTAL_RECORDINGS_LIMIT;var ao=a.app.PVRCapability.getCurrentMediaId()||-1,aq="taskType='REC' AND objectState<6 AND objectState>0 AND objectState!=2 AND isAuthorized = 1 AND mediumID = '"+ao+"'";return a.platform.btv.PVRManager.getEntriesByQuery(a.platform.btv.PVRManager.WIDE_TASK_FIELD_FILTER,aq,"actualStartTime DESC LIMIT "+ap);},getScheduledRecordings:function(){return a.platform.btv.PVRManager.getScheduleTasks();},getActiveAndSuspendedRecordings:function(){var ao="0",ap="taskType='REC' AND (objectState=1 OR objectState=2) AND inactive="+ao;return L.getTasksByQuery(a.platform.btv.PVRManager.WIDE_TASK_FIELD_FILTER,ap,"startTime");},getActiveRecordingsOrderedByJobId:function(){var ao="0",ap="taskType='REC' AND objectState=1 AND inactive="+ao;return L.getTasksByQuery(L.WIDE_TASK_FIELD_FILTER,ap,"jobId");},getActiveAndSuspendedRecordingsOrderedByJobId:function(){var ao="0",ap="taskType='REC' AND (objectState=1 OR objectState=2) AND inactive="+ao;return L.getTasksByQuery(L.WIDE_TASK_FIELD_FILTER,ap,"jobId");},isRecordingsActive:function(){var ao=a.platform.btv.PVRManager.getActiveRecordings();return(ao.length>0);},isRecordingsScheduled:function(){var ao=this.getScheduledRecordings();return(ao.length>0);},updateRecording:function(aq,ap){var ao=a.platform.btv.PVRManager.getTask(aq,"objectState");if(ao){if(ao._data.objectState<T.FINAL){CCOM.Scheduler.updateTask(aq,ap);}else{CCOM.MediaLibrary.updateEntry(aq,ap);}}},updateRecordingByTask:function(ap,ao){if(!a.platform.btv.PVRManager.isLocalRecording(ap)){return a.platform.btv.PVRManager.updateRemoteRecordingByTask(ap,ao);}return this.updateRecording(ap.taskId,ao);},updateBlockedState:function(ao,aq){var ap=D(ao),ar=null;switch(ap){case H.UNPLAYED_UNBLOCKED:ar=aq?H.UNPLAYED_BLOCKED:null;break;case H.PLAYED_UNBLOCKED:ar=aq?H.PLAYED_BLOCKED:null;break;case H.UNPLAYED_BLOCKED:ar=(!aq)?H.UNPLAYED_UNBLOCKED:null;break;case H.PLAYED_BLOCKED:ar=(!aq)?H.PLAYED_UNBLOCKED:null;break;}if(ap!==null){a.app.PVRUtil.updateRecording(ao,{PlayedBlocked:ar});}},isTaskPlayed:function(ao){return a.platform.btv.PVRManager.isTaskPlayed(ao);},isTaskBlocked:function(ao){return a.platform.btv.PVRManager.isTaskBlocked(ao);},isTaskBlockedTitle:function(ap){var ao,aq=a.platform.ca.ParentalControl.getUserRatingValue();if(a.platform.ca.ParentalControl.isCurrentUserMaster()){return false;}ao=a.app.epgUtil.getServiceById(ap.serviceId);if(ao&&a.app.genreUtil.isAdultChannel(ao)&&aq<18){return true;}return false;},isTaskBlockedSynopsis:function(ap){var ao,aq=a.platform.ca.ParentalControl.getUserRatingValue();if(a.platform.ca.ParentalControl.isCurrentUserMaster()){return false;}ao=a.app.epgUtil.getServiceById(ap.serviceId);if(ao&&a.app.genreUtil.isAdultChannel(ao)&&aq<18){return true;}if(ap.netEventGenres&&a.app.epgUtil.isAdultGenre(ap.netEventGenres)&&aq<18){return true;}return false;},isTaskBlockedPlaying:function(ap){var ao,aq=a.platform.ca.ParentalControl.getUserRatingValue();if(a.platform.ca.ParentalControl.isCurrentUserMaster()){return false;}ao=a.app.epgUtil.getServiceById(ap.serviceId);if(ao&&a.app.genreUtil.isAdultChannel(ao)&&aq<18){return true;}if(ap.netEventGenres&&a.app.epgUtil.isAdultGenre(ap.netEventGenres)&&aq<18){return true;}if(ao&&!a.platform.ca.ParentalControl.isServicePermitted(ao)){return true;}if(ap.parentalRating&&!a.platform.ca.ParentalControl.isRatingPermitted(ap.parentalRating)){return true;}return false;},isTaskFailedByEventId:function(ar){var ap=a.platform.btv.PVRManager.getTaskByEventId(ar,false,"cumulativeStatus"),ao,aq=a.app.GeneralUtil.bitwiseAnd;if(ap&&ap._data&&ap._data.cumulativeStatus){ao=ap._data.cumulativeStatus;if(aq(ao,c.CA_ERROR)){return true;}if(aq(ao,c.NO_RESOURCE)){return true;}if(aq(ao,c.POWER_LOSS)){return true;}if(aq(ao,c.SIGNAL_LOSS)){return true;}if(aq(ao,c.STARTED_LATE)){return true;}}return false;},isTaskAuthorizedByEventId:function(ap){var ao=a.platform.btv.PVRManager.getTaskByEventId(ap,false,"isAuthorized",true);if(ao&&ao.isAuthorized){return true;}return false;},isTaskActiveOrScheduled:function(ao){var aq=a.platform.btv.PVRManager.getTaskRecordingStatus(ao),ap=a.app.PVRUtil;switch(aq){case ap.ACTIVE:case ap.SCHEDULED:case ap.ACTIVE_IN_SERIES:case ap.SCHEDULED_BY_SERIES:return true;}return false;},isTaskActive:function(ao){return(a.platform.btv.PVRManager.getTaskRecordingStatus(ao)===a.app.PVRUtil.ACTIVE);},checkResources:function(aq,ao){var ap=a.platform.btv.PVRManager.getActiveRecordings(),ar=null,at=a.app.Config.getConfigValue("stb.numberOfTuners");if(ap.length>=at){ar=ap&&ap[0]&&ap[0].eventId?a.platform.btv.EPG.getEventById(ap[0].eventId):null;a.app.Conflicts.showConflictDialog(ar,ap,aq,ao);}else{ao();}},SCHEDULED:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED,ACTIVE:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE,UNSCHEDULED:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_UNSCHEDULED,ACTIVE_IN_SERIES:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_ACTIVE_IN_SERIES,SCHEDULED_BY_SERIES:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_SCHEDULED_BY_SERIES,PARTIAL:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_PARTIAL,COMPLETED:a.platform.btv.PVRManager.TaskStatus.TASK_STATUS_COMPLETED,WATCH_CONFLICT:1,RECORD_CONFLICT:2,RECORD_CONFLICT_WITH_RE_TUNE:3,VOD_PLAYBACK_CONFLICT:4,RECORD_CONFLICT_WITH_VOD_RE_TUNE:5,PLAYBACK_STATE:H,DATA_UPDATE_STATE:aa,incrementTasksCallbacksFired:x,initialiseTasksCallbackCount:h,getDataUpdateState:Y,getCancelSeriesPopup:g,getRecordedSeasonEpisodeShort:e,initialiseRemoteAccess:ad,areRecordingsInProgress:ac};}());}($N||{}));(function(a){a.app=a.app||{};a.app.PVRCapability=(function(){var m=new a.apps.core.Log("Helper","PVRCapability"),f=a.platform.system.Preferences,d=a.app.constants,g=null,k={capability:d.PVR_CAPABILITY.DISCONNECTED,mediaId:null,operatorPVREnabled:false,isEnabled:function(){return(k.operatorPVREnabled)&&(k.capability===d.PVR_CAPABILITY.ENABLED)&&a.platform.system.Device.isHardDriveAvailable();},isConnected:function(){return(k.operatorPVREnabled)&&(k.capability===d.PVR_CAPABILITY.ENABLED||k.capability===d.PVR_CAPABILITY.CONNECTED);}};function p(){return a.platform.system.Device.isHardDriveAvailable();}function w(){return k.operatorPVREnabled;}function l(){return k.isConnected();}function b(y){if(!y&&((a.platform.btv.WHPVRManager.isLocalRecordServer()&&k.isEnabled())||a.platform.btv.WHPVRManager.isRemoteRecordServerValid())){return true;}if(y&&((k.isEnabled())||a.platform.btv.WHPVRManager.hasRemoteServers())){return true;}return false;}function q(){if(g){clearInterval(g);g=null;}}function r(z){var y=2000;q();g=setInterval(z,y);}function v(){var y=0,z=function(){if(y>20){q();a.apps.util.EventManager.fire("PVRDisabled",k);}else{if(p()){q();k.capability=d.PVR_CAPABILITY.ENABLED;a.apps.util.EventManager.fire("PVREnabled",k);}}y+=1;};if(p()){k.capability=d.PVR_CAPABILITY.ENABLED;a.apps.util.EventManager.fire("PVREnabled",k);}else{r(z);}}function u(y,z){if(y){k.capability=y;}if(k.capability===d.PVR_CAPABILITY.DISCONNECTED){k.mediaId=null;}else{if(z){k.mediaId=z;}}if(k.mediaId!==null&&(l()||b())){v();}else{a.apps.util.EventManager.fire("PVRDisabled",k);}}function o(y){k.operatorPVREnabled=y;u();}function s(y,A,z){z=z||this;A=A||y||null;var B=[];B.push(a.apps.util.EventManager.subscribe("PVREnabled",y,z));B.push(a.apps.util.EventManager.subscribe("PVRDisabled",A,z));return B;}function c(z){z=z||[];var y=0;if(z.length){for(y=0;y<z.length;y++){a.apps.util.EventManager.unSubscribe(z[y]);}}return[];}function n(y){a.platform.btv.WHPVRManager.addEventListener("getDevicesOK",y);}function t(y){a.platform.btv.WHPVRManager.removeEventListener("getDevicesOK",y);}function x(B){var A=null,y=false,z;if(B.media&&B.media.length){for(z=0;z<B.media.length;z++){A=B.media[z].mediumID||null;if(A){y=a.app.HotPlug.handlePlaybackOnBoot(B,B.media[z]);if(!y){a.app.HotPlug.handlePVROnBoot(B.media[z]);}}else{u(d.PVR_CAPABILITY.DISCONNECTED);}}}}function h(y){u(d.PVR_CAPABILITY.DISCONNECTED);}function e(){return k.mediaId;}return{initialise:function(){var y=CCOM.MediaLibrary;y.addEventListener("getAllConnectedMediaOK",x);y.addEventListener("getAllConnectedMediaFailed",h);y.getAllConnectedMedia();},setPVRCapabilityState:u,setOperatorPVR:o,getCurrentMediaId:e,subscribeToPVRCapabilityEvent:s,unSubscribeFromPVRCapabilityEvent:c,isPVREnabled:b,isOperatorPVREnabled:w,isHardDriveAvailable:p,subscribeWHPvrDeviceUpdate:n,unSubscribeWHPvrDeviceUpdate:t};}());}($N||{}));(function(a){a.app=a.app||{};a.app.MessageUtil=(function(){var s=new a.apps.core.Log("Message","MessageUtil"),ac=null,ad=null,R=null,b=false,h,p=false,am=0,aj=false,P=null,Z=false,M=null,A=[],e="/users/messages",m=(e+"/mailbox"),c=(e+"/newmessage"),H=1,v=2,al=1,I=2,z="msg_send",D="tst1:256/1:E0",S=604800000,x=null,J=null,o={NORMAL:0,TIMEOUT:1,USERACK:2},N=false,af=0;function ak(an){return m+"/"+an;}function ah(an){var ap,ao;if(an.subType===al){ap=JSON.stringify(an);ao=CCOM.ConfigManager.setValue(ak(an.cookedID),ap);if(ao.error){}}else{if(an.subType===I){A.unshift(an);}}}function U(){var an,ap=null,ao=0;ap=M();if(ap&&ap.length){for(an=0;an<ap.length;an++){if(ap[an].read===false){ao++;}}}return ao;}function L(){var ao=CCOM.ConfigManager.getEntries(m),an,ap;if(ao.error){return null;}for(an in ao.keyValuePairs){if(ao.keyValuePairs.hasOwnProperty(an)){CCOM.ConfigManager.unsetValue(an);ap=JSON.parse(ao.keyValuePairs[an]);if(ap.type===v){CCOM.ConditionalAccess.removeIrdMail(ap.messageID);}}}}function ag(ap,aq){var an=ap.split("#"),ao=false;if(an.length<3){ao=true;}else{if(an[0]&&an[0]==="MAIL"){aq.subType=al;}else{if(an[0]&&an[0].charAt(0)==="F"){aq.subType=I;aq.channel=parseInt(an[0].substr(1,3),10);}else{ao=true;}}}if(ao){aq.subType=al;aq.title="";aq.content="".concat(ap);return true;}aq.title=an[1];aq.content=an[2];if(an[3]){aq.expireDate=parseInt(an[3],10)*1000;}return true;}function ai(ao){var an;for(an=0;an<A.length;an++){if(A[an].cookedID===ao.cookedID){A.splice(an,1);return;}}}function y(){var an;for(an=0;an<A.length;an++){if(A[an].channel===am||A[an].channel===0){return A[an];}}return null;}function G(){if(!P&&aj){P=h;a.apps.core.KeyInterceptor.registerInterceptor(h,a.app.MessageUtil);}}function f(){if(P&&!R.isVisible()&&!ac.isVisible()){a.apps.core.KeyInterceptor.unregisterInterceptor(h);P=null;}}function K(){if(ac.isVisible()){ac.hide();ac.setOpacity(0);f();if(ad){clearTimeout(ad);ad=null;}}}function X(){if(!ac.isVisible()){ac.show();ac.doFade(1);if(p){G();}if(ad){clearTimeout(ad);ad=null;}ad=setTimeout(function an(){ad=null;K();},a.app.constants.MAIL_INDICATOR_DURATIONS);}}function n(){if(!R.isVisible()){R.newPopupTitle.setText(a.app.MessageUtil.getString("messagePopupTitle"));R.newPopupTip.setText(a.app.MessageUtil.getString("messagePopupTip"));R.show();R.doFade(1);R.doMove(1275,R.getTrueY());G();}}function W(){if(R.isVisible()){R.hide();R.setOpacity(0);R.setX(1920);f();}}function g(){var ao=[{name:a.app.MessageUtil.getString("popupExit"),action:1}],ap=y(),an=null;an=new a.apps.dialog.ConfirmationDialogue("newPopupMailDialogue",ap.title,ap.content,ao,function(){ai(ap);if(!y()){W();}b=false;});an.customise({messageMeasurementMode:true,message:ap.content});a.app.DialogueHelper.displayDialogue(an,a.app.DialogueHelper.NEW_POPUP_MAIL);}function O(){a.app.ContextHelper.openContext("PORTAL",{activationContext:{context:"MESSAGES"}});}h=function h(an){var ao;if(a.app.GeneralUtil.isKeyReleaseEvent(an)){return true;}if(!b&&R.isVisible()){b=true;g();return true;}else{if(b){return false;}}if(p){ao=a.apps.core.KeyInterceptor.getKeyMap();if(an===ao.KEY_BLUE){K();O();return true;}}};function E(an){if(an.subType===al){Z=true;CCOM.System.setLedState("message",1);if(!aj){return;}X();}else{if(an.subType===I&&aj){if(y()){n();}}}}function d(ap){var an={},ao;an.messageID=ap.mailId;an.type=v;an.cookedID=ap.mailId+"_"+v;an.read=false;ao=CCOM.ConditionalAccess.getIrdMail(ap.mailId);if(ao.error){return;}if(!ag(ao.message,an)){return;}an.date=new Date().getTime();ah(an);E(an);}function w(){return true;}function aa(){if(!N){a.apps.core.KeyInterceptor.registerInterceptor(w,a.app.MessageUtil);N=true;}}function q(){if(N){a.apps.core.KeyInterceptor.unregisterInterceptor(w);N=false;}}function B(au,aq){var ap=null,ar=null,at=null,ao=null,an;an=CCOM.ConditionalAccess.getIrdPopupMessage();if(aq){x=aq;}else{if(an.error){return;}else{x=an.popupInfo;}}switch(x.persistence){case o.TIMEOUT:at=10000;ao=function(){J=null;q();};break;case o.USERACK:ap=[{name:a.app.MessageUtil.getString("ok"),action:1}];ar=function(){J=null;};break;case o.NORMAL:break;default:return;}J=new a.apps.dialog.ConfirmationDialogue("newCAPopupDialogue","",x.message,ap,ar);J.customise({messageMeasurementMode:true,message:x.message});a.app.DialogueHelper.displayDialogue(J,a.app.constants.DLG_NEW_POPUP_CA,at,null,ao);if(x.persistence===o.TIMEOUT||x.persistence===o.NORMAL){aa();}}function t(an){if(J){a.apps.dialog.DialogManager.hideDialog(J);J=null;}q();}function T(ao){var an="",aq,ap=0;if(ao[0]===255){ap=5;}for(aq=ap;aq<ao.length;aq++){an+=String.fromCharCode(ao[aq]);}return an;}function l(aq){var ar=aq.notifyMsg,an="message_payload",ap={},ao="";if(ar.action_handler&&ar.action_description){if(ar.action_handler!==z||ar.action_description!==D){return;}}else{return;}s("on_notify_message","message for NET !!! "+typeof(ar[an]));ap.messageID=ar.message_id;ap.type=H;ap.cookedID=ar.message_id+"_"+H;ap.read=false;if(ar.hasOwnProperty(an)&&ar[an]){ao=T(ar[an]);if(!ag(ao,ap)){return;}}else{return;}ap.date=new Date().getTime();ah(ap);E(ap);}function r(an){ac=an.newMail;R=an.newPopup;ac.setAnimationDuration("250ms");ac.addFadeAnimation();R.setAnimationDuration("250ms");R.addFadeAnimation();R.addMoveAnimation();}function ab(){var ap=a.app.epgUtil.getChannelFromPrefs(),an,ao;if(ap){an=a.platform.btv.EPG.getChannelByServiceId(ap);if(an){ao=an.logicalChannelNum||an.number||an.channelKey||"";if(ao){am=ao;}}}if(!aj){return;}if(Z){X();}if(y()){n();}else{W();}}function V(){var an;if(CCOM.NotifyService){an=CCOM.NotifyService.addEventListener("onNotifyMessage",l);if(an){}}an=CCOM.ConditionalAccess.addEventListener("onIrdMailNew",d);if(an){}an=CCOM.ConditionalAccess.addEventListener("onIrdPopupNew",B);if(an){}an=CCOM.ConditionalAccess.addEventListener("onIrdPopupRemove",t);if(an){}a.apps.util.EventManager.subscribe("channelChanged",ab,a.app.MessageUtil);}function C(ao){var an;a.apps.core.Language.adornWithGetString(a.app.MessageUtil);r(ao);V();if(U()){Z=true;CCOM.System.setLedState("message",1);}}function Y(ao){var an=CCOM.ConfigManager.getValue(ak(ao)),ap;if(an.error){return;}ap=JSON.parse(an.keyValue);ap.read=true;an=JSON.stringify(ap);CCOM.ConfigManager.setValue(ak(ao),an);a.apps.util.EventManager.fire("oneMailRead",ao);if(Z&&!U()){Z=false;CCOM.System.setLedState("message",0);a.apps.util.EventManager.fire("allMailsRead");}}function k(ao){var an=function(aq,ap){if(aq.date<ap.date){return 1;}if(aq.date>ap.date){return -1;}return 0;};ao.sort(an);return ao;}function Q(aq){var an,ap=new Date().getTime(),ao=false;if(aq.expireDate){if(ap>=aq.expireDate){ao=true;}}else{if(ap>=(aq.date+S)){ao=true;}}if(ao){CCOM.ConfigManager.unsetValue(ak(aq.cookedID));if(aq.type===v){CCOM.ConditionalAccess.removeIrdMail(aq.messageID);}}return !ao;}M=function(aq){var ap=CCOM.ConfigManager.getEntries(m),at,ao,ar=[],an=[];if(ap.error){return null;}for(ao in ap.keyValuePairs){if(ap.keyValuePairs.hasOwnProperty(ao)){at=JSON.parse(ap.keyValuePairs[ao]);if(Q(at)){ar.push(at);}}}k(ar);if(ar.length){if(ar.length>40){an=ar.splice(40);for(ao=0;ao<an.length;ao++){CCOM.ConfigManager.unsetValue(ak(an[ao].cookedID));if(an[ao].type===v){CCOM.ConditionalAccess.removeIrdMail(an[ao].messageID);}}}if(aq){return ar.slice(0,aq);}else{return ar;}}return null;};function u(an){if(aj){return;}aj=true;p=an;if(Z){X();}if(y()){n();}}function F(){return aj;}function ae(){if(!aj){return;}aj=false;p=false;W();K();}return{initialise:C,getMessageMails:M,setMessageMailRead:Y,hasMessageMailUnread:function(){return Z;},getMessageId:function(an){return an.cookedID;},activateMessageIndicator:u,deactivateMessageIndicator:ae,getMessageIndicatorStatus:F,isMailIconDisplaying:function(){return ac.isVisible();},mailIconKeyProcess:O,testMail:function(au){var at={messageID:7,read:false,date:1389097654158,title:"Test NEW",type:1,subType:1,cookedID:"7_1",content:"Give me one more time"},ar={messageID:8,read:false,date:1389097654158,title:"Test NEW Popup",type:1,subType:2,cookedID:"8_1",channel:1,content:"This is one Popup message for channel 1. This is one long Message. This is one long Message. This is one long Message. This is one long Message. This is one long Message."},ap={messageID:9,read:false,date:1389097654158,title:"Test NEW Popup",type:1,subType:2,cookedID:"9_1",channel:0,content:"This is one Popup message for all channels."},ao={},aq=0,av="",an={};if(au==="red"){at.messageID=af+1;at.cookedID=af+"_1";at.title="Test "+af;at.content=at.content+" "+af;at.date=new Date().getTime();af++;ah(at);E(at);}else{if(au==="green"){ah(ar);E(ar);ah(ap);E(ap);}else{if(au==="blue"){t();}else{if(au==="yellow"){if(aq===0){ao.persistence=o.NORMAL;ao.message="This is one Normal CA Popup message. This is one Normal CA Popup message. This is one Normal CA Popup message. This is one Normal CA Popup message. This is one Normal CA Popup message. This is one Normal CA Popup message.";B(null,ao);}else{if(aq===1){ao.persistence=o.TIMEOUT;ao.message="This is one Timeout CA Popup message";B(null,ao);}else{ao.persistence=o.USERACK;ao.message="This is one userACK CA Popup message";B(null,ao);}}}else{if(au==="ONE"){av="MAIL#TEST#Friend...'OUT'TEST";an.messageID="100";an.type=v;an.cookedID="100_"+v;an.read=false;if(!ag(av,an)){return;}an.date=new Date().getTime();ah(an);E(an);}else{if(au==="clear"){L();}}}}}}}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.PVROptionsUtil=(function(){var f=new a.apps.core.Log("Helper","PVROptionsUtil"),l=a.platform.system.Preferences,c=a.app.constants,h=a.app.PVRUtil,e,g,m,d,b;function k(){var n=a.app.PVROptionsUtil;if(!l.get(c.PREF_BEFORE_PADDING)){n.setBeforePadding(c.DEFAULT_BEFORE_PADDING);}else{e=parseInt(l.get(c.PREF_BEFORE_PADDING),10);}if(!l.get(c.PREF_AFTER_PADDING)){n.setAfterPadding(c.DEFAULT_AFTER_PADDING);}else{g=parseInt(l.get(c.PREF_AFTER_PADDING),10);}if(!l.get(c.PREF_EPISODIC_BEFORE_PADDING)){n.setBeforePaddingEpisodic(c.DEFAULT_BEFORE_PADDING);}else{m=parseInt(l.get(c.PREF_EPISODIC_BEFORE_PADDING),10);}if(!l.get(c.PREF_EPISODIC_AFTER_PADDING)){n.setAfterPaddingEpisodic(c.DEFAULT_AFTER_PADDING);}else{d=parseInt(l.get(c.PREF_EPISODIC_AFTER_PADDING),10);}if(!l.get(c.PREF_EPISODIC_MAX_NOF_EPISODES)){n.setMaxEpisodicRecordings(c.DEFAULT_EPISODIC_MAX_NOF_EPISODES);}else{b=parseInt(l.get(c.PREF_EPISODIC_MAX_NOF_EPISODES),10);}if(!l.get(c.PREF_DEFAULT_KEEP_UNTIL)){l.set(c.PREF_DEFAULT_KEEP_UNTIL,c.KEEP_UNTIL_OPTION_SPACE_NEEDED);}if(!l.get(c.PREF_EPISODIC_KEEP_UNTIL)){l.set(c.PREF_EPISODIC_KEEP_UNTIL,c.KEEP_UNTIL_OPTION_SPACE_NEEDED);}if(!l.get(c.PREF_NON_EPISODIC_BLOCK_PLAYBACK)){l.set(c.PREF_NON_EPISODIC_BLOCK_PLAYBACK,"true");}if(!l.get(c.PREF_EPISODIC_TYPE_OF_EPISODES)){l.set(c.PREF_EPISODIC_TYPE_OF_EPISODES,c.TYPE_OF_EPISODE_OPTION_ALL_EPISODE);}}return{initialise:function(){k();},getBeforePadding:function(){return e;},setBeforePadding:function(n){l.set(c.PREF_BEFORE_PADDING,String(n));e=n;},getAfterPadding:function(){return g;},setAfterPadding:function(n){l.set(c.PREF_AFTER_PADDING,String(n));g=n;},getBeforePaddingEpisodic:function(){return m;},setBeforePaddingEpisodic:function(n){l.set(c.PREF_EPISODIC_BEFORE_PADDING,String(n));m=n;},getAfterPaddingEpisodic:function(){return d;},setAfterPaddingEpisodic:function(n){l.set(c.PREF_EPISODIC_AFTER_PADDING,String(n));d=n;},getMaxEpisodicRecordings:function(){return b;},setMaxEpisodicRecordings:function(n){l.set(c.PREF_EPISODIC_MAX_NOF_EPISODES,String(n));b=n;},addNonEpisodicRecordingMetaData:function(n){var o=a.app.DateTimeUtil,p=l.get(c.PREF_NON_EPISODIC_BLOCK_PLAYBACK)||false;n=n||{};if(!a.app.StringUtil.isNullOrUndefined(n.softPrepaddingDuration)){n.softPrepaddingDuration=o.convertMinutesToMs(n.softPrepaddingDuration);}else{n.softPrepaddingDuration=o.convertMinutesToMs(e);}if(!a.app.StringUtil.isNullOrUndefined(n.softPostpaddingDuration)){n.softPostpaddingDuration=o.convertMinutesToMs(n.softPostpaddingDuration);}else{n.softPostpaddingDuration=o.convertMinutesToMs(g);}if(p==="true"||p==="1"){n.PlayedBlocked=h.PLAYBACK_STATE.UNPLAYED_BLOCKED;}return n;},addEpisodicRecordingMetaData:function(n){var o=a.app.DateTimeUtil,p=l.get(c.PREF_EPISODIC_BLOCK_PLAYBACK)||false;n=n||{};if(!a.app.StringUtil.isNullOrUndefined(n.softPrepaddingDuration)){n.softPrepaddingDuration=o.convertMinutesToMs(n.softPrepaddingDuration);}else{n.softPrepaddingDuration=o.convertMinutesToMs(m);}if(!a.app.StringUtil.isNullOrUndefined(n.softPostpaddingDuration)){n.softPostpaddingDuration=o.convertMinutesToMs(n.softPostpaddingDuration);}else{n.softPostpaddingDuration=o.convertMinutesToMs(d);}if(b>0){n.maxEpisodicRecordings=parseInt(b,10);}if((p==="true"||p==="1")){n.PlayedBlocked=h.PLAYBACK_STATE.UNPLAYED_BLOCKED;}return n;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.HotPlug=(function(){var f=new a.apps.core.Log("Helper","HotPlug"),H=a.platform.system.Preferences,F=a.app.constants,b=null,m=null,e,al,af,aK=null,M,x=null,ao,L,n=false,A=false,ag=function(){},D=function(){},r=function(){},N=function(){},P=function(){},E=function(){},z=function(){},aB=1,au=2,ax=3,o=4,y=5,R=6,aw=7,ar=8,aM=9,am=10,aN=11,ad=12,aI=13,T=[],q=false,G,U={USBMEDIA:1,DVR:2},O=null,p=null,h=false,az=false,V="NOFSLABEL";E=function(aR){var aQ=null;switch(aR){case o:aQ=[{name:a.app.HotPlug.getString("cancel"),action:au},{name:a.app.HotPlug.getString("format"),action:aB}];break;case aw:aQ=[{name:a.app.HotPlug.getString("no"),action:au},{name:a.app.HotPlug.getString("yes"),action:aB}];break;case aN:aQ=[{name:a.app.HotPlug.getString("no"),action:aI},{name:a.app.HotPlug.getString("yes"),action:ad}];break;case y:aQ=[{name:a.app.HotPlug.getString("cancel"),action:au},{name:a.app.HotPlug.getString("cont"),action:ax}];break;case R:aQ=[{name:a.app.HotPlug.getString("ok"),action:au}];break;case ar:aQ=[{name:a.app.HotPlug.getString("reboot"),action:ar}];break;case aM:aQ=[{name:a.app.HotPlug.getString("browseContentMessage"),action:"MEDIA"}];break;case am:aQ=[{name:a.app.HotPlug.getString("browseContentMessage"),action:"MEDIA"},{name:a.app.HotPlug.getString("formatForDVRmessage"),action:"DVR"}];break;}return aQ;};function ay(){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_DRIVE_ATTACHED,undefined,undefined,E(o),z);}function S(){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_STB_ASSOCIATED,a.app.HotPlug.getString("usbRecordingPresentTitle"),a.app.HotPlug.getString("usbRecordingPresentMessage"),E(o),z,P);}function J(aR){var aQ=0;if(aR){T.forEach(function(aS){if(aS.mode===aR){aQ+=1;}});return aQ;}else{return T.length;}}function aE(){var aQ=J(U.DVR);if(L&&aQ){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_STB_ALREADY_ASSOCIATED,undefined,undefined,E(R),z,null,null,null,null,true);return;}if(af){S();}else{ay();}}ag=function(){var aQ=1;A=true;e=a.app.PVRCapability.getCurrentMediaId()||ao||-1;M.associateMedium(String(e),aQ);if(x===null){x=new a.apps.dialog.ConfirmationDialogue("formatSelectedCallback",a.app.HotPlug.getString("diskDrivePleaseWait"),a.app.HotPlug.getString("diskDriveFormattingMessage"),null,null,null,null,null,"customise/resources/images/net/loading.png");}a.apps.dialog.DialogManager.showPersistentDialog(x);};r=function(){if(!e){e=a.app.PVRCapability.getCurrentMediaId()||-1;}if(e&&e!==-1){M.removeMedium(String(e));}};function ai(){var aQ=function(aR){var aS=((aR&&aR.action===aB)||(aR.key&&aR.key.action===aB));if(aS){ag(aR);}};a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_UNPLUG_HARDDISK,a.app.HotPlug.getString("diskDriveFormattingConfirmationTitle"),a.app.HotPlug.getString("diskDriveFormattingConfirmationMessage"),E(aw),aQ);}function Q(){var aQ;if(a.app.PVRUtil.areRecordingsInProgress()){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_SAFE_REMOVE_HARDDISK_RECORDING_IN_PROGRESS,a.app.HotPlug.getString("mediaRemoveDiskTitle"),a.app.HotPlug.getString("mediaRemoveDiskRecordingInProgressDesc"));}else{aQ=function(aR){var aS=((aR&&aR.action===ad)||(aR.key&&aR.key.action===ad));if(aS){r(aR);}};a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_SAFE_REMOVE_HARDDISK,a.app.HotPlug.getString("mediaRemoveDiskTitle"),a.app.HotPlug.getString("mediaRemoveDiskDesc"),E(aN),aQ);}}z=function(aQ){if(aQ&&aQ.action){switch(aQ.action){case aB:n=true;A=false;a.app.DialogueHelper.hideUSBDialogues();ag();break;case ax:if(af){S();}else{ay();}break;case au:break;}}};function Z(aR,aT){var aS,aQ=T.length;for(aS=0;aS<aQ;aS++){if(T[aS].mediumId===aR){return;}}T.push({mediumId:aR,mode:aT});}function g(){var aQ=(aK&&aK===M.MEDIUM_READY)?F.PVR_CAPABILITY.ENABLED:F.PVR_CAPABILITY.CONNECTED;Z(ao,U.DVR);a.app.PVRCapability.setPVRCapabilityState(aQ,ao);}function l(){ao=null;O=null;p=null;a.app.PVRCapability.setPVRCapabilityState(F.PVR_CAPABILITY.DISCONNECTED);}function ap(){a.apps.dialog.DialogManager.hideDialog(x);a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.hideDialogueWithId(a.app.constants.DLG_USB_FORMAT_COMPLETE);a.app.DialogueHelper.hideDialogueWithId(a.app.constants.DLG_ATA_FORMAT_COMPLETE);a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_FORMAT_ERROR,a.app.HotPlug.getString("usbFormatErrorTitle"),a.app.HotPlug.getString("usbFormatErrorMessage"));n=false;l();}function aq(aQ){return aQ===M.BUS_TYPE_USB;}function aD(){var aQ=true,aR=null;a.app.DialogueHelper.hideUSBDialogues();aR=a.common.helper.PowerManager.reboot(aQ);if(aR&&aR.error&&aR.error.name){}}function ak(aR){f("associateMediumOKListener",JSON.stringify(aR));var aQ=al&&aq(al);n=false;a.apps.dialog.DialogManager.hideDialogWithId("formatSelectedCallback");a.app.DialogueHelper.hideUSBDialogues();if(aQ){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_FORMAT_COMPLETE,a.app.HotPlug.getString("usbFormatCompleteTitle"),a.app.HotPlug.getString("usbFormatCompleteMessage"));g();}else{a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_ATA_FORMAT_COMPLETE,a.app.HotPlug.getString("ataFormatCompleteTitle"),a.app.HotPlug.getString("ataFormatCompleteMessage"),E(ar),aD);}}function aJ(aQ){f("associateMediumFailedListener",JSON.stringify(aQ));setTimeout(ap,955);}function aj(aQ){f("getAssociatedMediaIdOKListener",JSON.stringify(aQ));L=aQ.mediaId;aE();}function s(aQ){L=null;aE();}function aF(aR){var aQ;for(aQ=0;aQ<aR.length;aQ++){if(aR[aQ].fileSysCode===M.SFS){return true;}}return false;}function w(){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_MEDIA_UNPLUGGED,a.app.DialogueHelper.getString("usbMediaUnpluggedTitle"),a.app.DialogueHelper.getString("usbMediaUnpluggedMessage"));l();}function at(){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_INCOMPATIBLE,a.app.HotPlug.getString("usbIncompatibleTitle"),a.app.HotPlug.getString("usbIncompatibleMsg"));}function C(){at();l();}function aC(){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_MEDIA_DETECTED,a.app.HotPlug.getString("ataMediaDetectedTitle"),a.app.HotPlug.getString("ataMediaDetectedMessage"));g();}function aO(){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_USB_MEDIA_DETECTED,a.app.HotPlug.getString("usbMediaDetectedTitle"),a.app.HotPlug.getString("usbMediaDetectedMessage"));g();}function u(aQ){return aQ===M.BUS_TYPE_ATA;}function v(){a.apps.dialog.DialogManager.hideDialog(G);a.app.UsbBrowserHelper.setMediaPlaybackStatus(false);a.app.UsbBrowserHelper.resetFileSystem();}function ab(aQ){e=aQ.medium.mediumID;al=aQ.medium.busType;af=aF(aQ.medium.partitionList);}function aa(aQ){ab(aQ);M.getAssociatedMediaId();}function Y(aQ){var aR=0;a.app.DialogueHelper.hideUSBDialogues();if(T.length>0){for(aR=0;aR<T.length;aR++){if(T[aR].mediumId===aQ&&T[aR].mode===U.USBMEDIA){T.splice(aR,1);v();a.apps.util.EventManager.fire("usbMediaPlaybackDisabled",true);a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_MEDIA_DEVICE_SAFE_REMOVE);break;}else{if(T[aR].mediumId===aQ&&T[aR].mode===U.DVR){a.app.DialogueHelper.hideUSBDialogues();T.splice(aR,1);a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_SAFE_REMOVE_HARDDISK_OK,a.app.DialogueHelper.getString("mediaDisabledTitleOk"),a.app.DialogueHelper.getString("mediaDisabledMessageOk"));l();break;}}}}}function k(aS){var aR,aQ=T.length;if(!a.app.PVRCapability.isOperatorPVREnabled()){if(aS.eventType===M.PLUGGED){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_DVR_OPERATOR_DISABLED,a.app.HotPlug.getString("dvrOperatorDisabledTitle"),a.app.HotPlug.getString("dvrOperatorDisabledMessage"),E(R),null);}l();return false;}if(a.app.EnvironmentUtil.isSTBEnvironmentIP()||a.app.Config.getConfigValue("pvr.enabled")!=="true"){return true;}if(aS.eventType===M.MEDIUM_READY){if(aS.medium.whiteListStatus===M.NOT_IN_LIST){C();return;}if(aS.associated){ab(aS);switch(aS.stbMode){case M.PVR:case M.ZAPPER1:if(aq(aS.medium.busType)){aO();}else{if(u(aS.medium.busType)){aC();}}break;default:}}else{aa(aS);}}else{if(M.UNPLUGGED===aS.eventType){a.app.DialogueHelper.hideUSBDialogues();if(T.length>0){for(aR=0;aR<T.length;aR++){if(T[aR].mediumId===aS.medium.mediumID&&T[aR].mode===U.USBMEDIA){T.splice(aR,1);v();a.apps.util.EventManager.fire("usbMediaPlaybackDisabled",false);a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_MEDIA_DEVICE_UNPLUGGED);break;}else{if(T[aR].mediumId===aS.medium.mediumID&&T[aR].mode===U.DVR){T.splice(aR,1);w();break;}}}}}else{if(M.SAFESHUTDOWNCOMPLETE===aS.eventType){Y(aS.medium.mediumID);}}}}function I(aS){var aQ={mode:"UsbMediaPlayback",helper:a.app.UsbBrowserHelper},aR="";if(aS&&aS.action){switch(aS.action){case"MEDIA":Z(O.medium.mediumID,U.USBMEDIA);q=true;a.app.UsbBrowserHelper.setMediaPlaybackStatus(true,O.medium.mediumID);a.app.UsbBrowserHelper.setPartitionList(p);if(p&&p[0].fileSysLabel!==V){aR=p[0].fileSysLabel;}a.app.UsbBrowserHelper.setMediumName(aR);M.loadMedium(O.medium.mediumID,true,true);a.app.UsbBrowserHelper.setMediaContentLoading(true);a.apps.util.EventManager.fire("usbMediaPlaybackEnabled",true);a.app.ContextHelper.openContext("MEDIABROWSER",{activationContext:aQ});break;case"DVR":a.app.UsbBrowserHelper.setMediaPlaybackStatus(false);a.apps.util.EventManager.fire("usbMediaPlaybackDisabled",false);al=O.medium.busType;ag();break;}}}function W(){var aQ=J(U.DVR)===0?E(am):E(aM);a.app.DialogueHelper.hideUSBDialogues();G=a.app.DialogueHelper.createAndShowDialogue(F.DLG_USB_DEVICE_DETECTED,undefined,undefined,aQ,I,null,"VERTICAL",null,null,null,undefined,null,function(aR){I({action:"MEDIA"});});a.app.DialogueHelper.updateDialogueOptions(F.DLG_USB_DEVICE_DETECTED,aQ);}function B(aQ){var aR=(aQ===M.FAT16_OVER_32M||aQ===M.FAT32X||aQ===M.FAT16_UPTO_32M||aQ===M.FAT32);return aR;}function ah(aQ){var aT=-1,aS,aR=T.length;for(aS=0;aS<aR;aS++){if(T[aS].mediumId===aQ){return T[aS].mode;}}f("getConnectedMediumMode","Exit 2, returning NOT_IN_ARRAY (-1)");return aT;}function K(aQ){switch(aQ.reason){case M.NOT_HOME_DOMAIN:aa(aQ);S();break;case M.PARTITIONS_NOT_RECOGNIZED:aa(aQ);break;case M.TOO_MANY_DRIVES:aa(aQ);break;default:f("handleRejectedReason","default (uncaught e.reason)");at();break;}}function ae(aQ){f("mediaHandledListener",JSON.stringify(aQ));if(aQ&&aQ.actionType===M.ASSOCIATE){if(aQ.status===1){ap();}}}function c(aW){var aT=[],aX=[],aV,aU,aS,aR=T.length,aQ=aW.medium.partitionList.length;for(aV=0;aV<aQ;aV++){if(a.app.FeatureManager.getMediaPlaybackFeatureStatus()&&(B(aW.medium.partitionList[aV].fileSysCode))){aT.push(aW.medium.partitionList[aV]);}}O=aW;p=aT;if(aT.length>0){for(aU=0;aU<aR;aU++){if(T[aU].mode===U.USBMEDIA){return;}}if(a.common.helper.PowerManager.getCurrentPowerMode()===a.common.helper.PowerManager.SYSTEM_POWER_STANDBY){h=true;}else{W();}}else{if(aW.medium.mediumID===ao&&ah(ao)===U.DVR){for(aS=0;aS<aQ;aS++){aX.push(aW.medium.partitionList[aS].partitionName);}a.platform.system.Device.setDiskPartitions(aX);g();}else{k(aW);}}}function av(aQ){f("mediaChangedListener",JSON.stringify(aQ));switch(aQ.eventType){case M.PLUGGED:aK=M.PLUGGED;ao=aQ.medium.mediumID;break;case M.UNPLUGGED:aK=M.UNPLUGGED;ao=null;O=null;p=null;k(aQ);break;case M.MEDIUM_REJECTED:aK=M.MEDIUM_REJECTED;K(aQ);break;case M.MEDIUM_READY:aK=M.MEDIUM_READY;ao=aQ.medium.mediumID;c(aQ);break;case M.SAFESHUTDOWNCOMPLETE:aK=M.SAFESHUTDOWNCOMPLETE;ao=null;O=null;p=null;k(aQ);break;case M.MEDIUM_WAITING_FOR_EVENT:if(aQ.reason&&aQ.reason===M.CANNOT_DETERMINE_HOME_DOMAIN){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(F.DLG_USB_DOMAIN_UNCERTAIN);}break;default:break;}}function aA(aY,aS){var aW,aU=[],aV,aQ=T.length,aR=aS.partitionList.length,aX="",aT={};ao=null;for(aW=0;aW<aR;aW++){if(B(aS.partitionList[aW].fileSysCode)){aU.push(aS.partitionList[aW]);}else{Z(aS.mediumID,U.DVR);return false;}}for(aV=0;aV<aQ;aV++){if(aU.length>0&&T[aV].mode===U.USBMEDIA){return true;}}q=false;ao=aS.mediumID;aT.medium=aS;m=a.apps.util.EventManager.subscribe("contextsLoaded",function(){if(m){a.apps.util.EventManager.unSubscribe(m);m=null;}if(aU.length>0){if(az&&aU.length>0){M.loadMedium(ao,true,true);}else{O=aT;p=aU;W();}}},a.app.HotPlug);if(aU.length>0){Z(ao,U.USBMEDIA);a.app.UsbBrowserHelper.setMediaPlaybackStatus(true,ao);a.app.UsbBrowserHelper.setPartitionList(aU);if(aU&&aU[0].fileSysLabel!==V){aX=aU[0].fileSysLabel;}a.app.UsbBrowserHelper.setMediumName(aX);return true;}return false;}function an(aQ){var aR={};if(aQ&&aQ.mediumID){aR.eventType=aQ.lastEvent;aR.medium=aQ;if(aR.eventType===M.MEDIUM_REJECTED){aR.reason=M.PARTITIONS_NOT_RECOGNIZED;}else{if(aR.eventType===M.SAFESHUTDOWNCOMPLETE){aR={};return;}}az=true;b=a.apps.util.EventManager.subscribe("contextsLoaded",function(){if(b){a.apps.util.EventManager.unSubscribe(b);b=null;}if(aR.eventType===M.MEDIUM_READY){ao=aR.medium.mediumID;}av(aR);},a.app.HotPlug);}}function aL(aQ){if(aQ.scanState===M.SCAN_STOPPED){a.app.UsbBrowserHelper.setMediaContentList();if(q){q=false;}}}function X(aQ,aR){aR=aR||function(){};M.addEventListener(aQ,aR);}function aH(aQ,aR){aR=aR||function(){};M.removeEventListener(aQ,aR);}function t(){var aR,aQ=T.length;for(aR=0;aR<aQ;aR++){if(T[aR].mode===U.USBMEDIA){return T[aR].mediumId;}}return null;}function d(aQ){}function aG(aQ){a.app.DialogueHelper.hideUSBDialogues();a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_SAFE_REMOVE_HARDDISK_FAILED,a.app.DialogueHelper.getString("mediaDisabledTitleFailed"),a.app.DialogueHelper.getString("mediaDisabledMessageFailed"));l();}function ac(){if(h){W();h=false;}}function aP(aQ){CCOM.MediaLibrary.removeMedium(aQ);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.HotPlug);M=CCOM.MediaLibrary;this.registerUSBEventListener();a.apps.util.EventManager.subscribe("SYSTEM_POWER_NORMAL",ac,this);},registerUSBEventListener:function(){X("onMediaChanged",av);X("onMediaHandled",ae);X("associateMediumOK",ak);X("associateMediumFailed",aJ);X("removeMediumOK",d);X("removeMediumFailed",aG);X("getAssociatedMediaIdOK",aj);X("getAssociatedMediaIdFailed",s);X("onMediaScanned",aL);},unregisterUSBEventListener:function(aQ){aH("onMediaChanged",av);aH("onMediaHandled",ae);aH("associateMediumOK",ak);aH("associateMediumFailed",aJ);aH("removeMediumOK",d);aH("removeMediumFailed",aG);aH("getAssociatedMediaIdOK",aj);aH("getAssociatedMediaIdFailed",s);aH("onMediaScanned",aL);},setDialogShownCallback:function(aQ){if(aQ){N=aQ;}else{N=function(){};}},setDialogTimedOutCallback:function(aQ){P=aQ||function(){};},keyHandler:function(aQ,aR){return this._isFormatInProgress;},getCurrentMediumId:function(){return this.currentMediumId;},getOptions:E,registerSingleUSBEventListener:X,removeSingleUSBEventListener:aH,setUpDiskDriveFormatting:ai,setUpRemoveDiskDrive:Q,handlePlaybackOnBoot:aA,handlePVROnBoot:an,getConnectedUSBMediumID:t,safelyRemoveUSBMedia:aP};}());}($N||{}));(function(b){function a(c,d){this._maxChannelNumberDigits=c;this._channelNumberString="";this._channelNumberTimeoutMS=d;this._channelNumberTimeout=null;this._channelEnteredCallback=function(){};this._invalidClassName="invalidChannelNumber";this._channelNumberText={};this._cursorObj=null;this._active=false;this._callCancelChannelEntry=false;this._allowZero=false;this.CURSOR_STR="_";this.ANIMATION_DURATION="500ms";this.NON_ZERO_NUMBER="1";this.ZERO_NUMBER=0;this.CHANGE_IMMEDIATE_TIMEOUT=200;}a.prototype.allowZero=function(c){this._allowZero=c;};a.prototype.setChannelEnteredCallback=function(c){this._channelEnteredCallback=c;};a.prototype.cancelEntry=function(c){if(this.isActive()){this.clearTimer();if(this._cursorObj&&this._channelNumberString.length>0){this._cursorObj.hide();this._cursorObj._attributeAnim.opacity.cancelAnimation();}if(c){this._channelEnteredCallback(null);}this._channelNumberString="";this._callCancelChannelEntry=false;this._callChannelEntryWait=false;this._active=false;}};a.prototype._setChannelNumberTimeout=function(){this._callCancelChannelEntry=this._callCancelChannelEntry||false;this._callChannelEntryWait=this._callChannelEntryWait||false;var c=this;if((this._callCancelChannelEntry||this._callChannelEntryWait)&&this._active){this._channelNumberTimeout=setTimeout(function(){if(c._callChannelEntryWait&&c._channelNumberString){c._showChannelEntered();}else{c.cancelEntry(true);}},this._channelNumberTimeoutMS);}};a.prototype._removeChannelDigit=function(){this._channelNumberString=this._channelNumberString.substring(0,this._channelNumberString.length-1);if(this._channelNumberString.length>0){this._setChannelNumberText(this._channelNumberString);if(this._cursorObj){this.updateCursorPostion(this._channelNumberString);}this._callChannelEntryWait=true;}else{if(this._cursorObj){this._setChannelNumberText("_");}else{this._setChannelNumberText("");}this._callCancelChannelEntry=true;}};a.prototype._addChannelDigit=function(d){var c=b.apps.core.KeyInterceptor.getKeyMap();this._active=true;d-=c.KEY_ZERO;if(this._channelNumberString.length<this._maxChannelNumberDigits){this._channelNumberString+=d.toString();if(this._channelNumberString.length<=this._maxChannelNumberDigits){this._setChannelNumberText(this._channelNumberString);if(this._cursorObj){this.updateCursorPostion(this._channelNumberString);}}this._callChannelEntryWait=true;}};a.prototype.updateChannelDigits=function(g,c,f){var e=b.apps.core.KeyInterceptor.getKeyMap(),d;this._channelNumberText=c;if(f){this.configureCursor(f);}this.clearTimer();if(g===e.KEY_LEFT){if(!this._active){return false;}this._removeChannelDigit();}else{this._addChannelDigit(g);}if(this._channelNumberString.length===this._maxChannelNumberDigits){d=this;setTimeout(function(){d.okKeyHandler();},d.CHANGE_IMMEDIATE_TIMEOUT);}else{this._setChannelNumberTimeout();}return true;};a.prototype._showChannelEntered=function(){if(!this._allowZero&&parseInt(this._channelNumberString,10)===this.ZERO_NUMBER){this._channelNumberString=this.NON_ZERO_NUMBER;}this._setChannelNumberText(this._channelNumberString);this._channelEnteredCallback(parseInt(this._channelNumberString,10));this._channelNumberString="";if(this._cursorObj){this._cursorObj.hide();this._cursorObj._attributeAnim.opacity.cancelAnimation();}this._callCancelChannelEntry=false;this._callChannelEntryWait=false;this._active=false;};a.prototype.clearTimer=function(){if(this._channelNumberTimeout){clearTimeout(this._channelNumberTimeout);}};a.prototype.isActive=function(){return this._active;};a.prototype._setChannelNumberText=function(c){if(c===this.CURSOR_STR&&this._cursorObj){this.configureCursor(this._channelNumberText);this._channelNumberText.show();}else{this._channelNumberText.setText(c);}};a.prototype.updateCursorPostion=function(c){if(c.length<this._maxChannelNumberDigits){this._cursorObj.setX(this._channelNumberText.getTrueX()+this._channelNumberText.getTrueTextLength());this._cursorObj.show();}};a.prototype.configureCursor=function(c){this._cursorObj=c;this._cursorObj.setText(this.CURSOR_STR);this._cursorObj.hide();this._cursorObj.setY(this._channelNumberText.getTrueY());this.animateCursor();};a.prototype.animateCursor=function(){this._cursorObj.setAnimationDuration(this.ANIMATION_DURATION);this._cursorObj.addFadeAnimation();this._cursorObj.doFade(0,true,false);};a.prototype.okKeyHandler=function(){if(this.isActive()){this.clearTimer();if(this._channelNumberString){this._showChannelEntered();}else{this.cancelEntry(true);}return true;}return false;};b.app=b.app||{};b.app.DirectChannelEntry=a;}($N||{}));(function(a){a.app=a.app||{};a.app.SMSInput=function(){var c=0,f=false,d=[],h,g=100,b=function(m){var k=m.split(","),l=0;this.getCharacterAndMoveNext=function(){var n=k[l];l=(l<(k.length-1))?++l:0;return n;};this.getPreviousCharacter=function(){return(l>0)?k[l-1]:k[0];};this.resetPointer=function(){l=0;};this.getCharacterLength=function(){return k.length;};},e=function(){clearTimeout(h);f=false;};this.setMaxChars=function(k){g=k;};this.initKeypad=function(l){var k;for(k=0;k<l.length;k++){d[k]=new b(l[k]);}};this.inputChar=function(k,m){var o=null,n=null,l=null;if((d[k].getCharacterLength()>1)&&(k===c)&&f){e();o=d[k].getPreviousCharacter();n=d[k].getCharacterAndMoveNext();l=m.substring(0,m.length-o.length)+n;}else{e();d[c].resetPointer();n=d[k].getCharacterAndMoveNext();l=(m.length<g)?m+n:m;}f=true;h=setTimeout(e,a.app.SMSInput.CYCLE_TIMEOUT);c=k;return l;};};a.app.SMSInput.CYCLE_TIMEOUT=1000;}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.BrandHelper=(function(){var f=new a.apps.core.Log("CommonGUI","BrandHelper"),l={},p=0,n=1,e=2,h=3,d=4,k=5,c=6,b=7;function o(q){l=q;}function g(){l.hide();}function m(q){q=q||p;l.show(q);}return{initialise:o,hideAll:g,show:m,DEFAULT_BACKGROUND_ID:p,AGORA_BACKGROUND_ID:n,GUIDE_BACKGROUND_ID:e,MOSAIC_BACKGROUND_ID:h,MUSIC_BACKGROUND_ID:d,SYNOPSIS_BACKGROUND_ID:k,SEARCH_BACKGROUND_ID:c,SEARCH_VOD_BACKGROUND_ID:b};}());}($N||{}));(function(b){b.app=b.app||{};function a(e,h,f,l,d,k){var g=this;this.pinDialog=null;this._whichPin="master";this._showUntilAuthenticated=true;this._timesToShow=b.app.constants.MAX_PIN_ENTRY_ATTEMPTS;this._dialogManager=b.apps.dialog.DialogManager;this._onAuthenticationCancel=l||null;this._onUserInvalidPin=h||function(){this.customiseDialog({description:a.getString("wrongPin")+a.getString("tryAgain"),reset:true});};this._onUserAuthenticationSuccess=e||null;this._onUserAuthenticationFailure=f||null;this._hideTime=!isNaN(d)?d:this._dialogManager.DEFAULT_AUTO_CLOSE_TIMEOUT;this._keepCurrentUser=k||false;this._pinPathObject={purchase:b.app.constants.PURCHASE_PIN_PATH,facebook:b.app.constants.SOCIAL_FACEBOOK_PIN};}a.prototype.setDialogProperties=function(e){var d=this;b.apps.core.Language.adornWithGetString(a);e.id=e.id||"pinDialog";e.title=e.title||"";e.subTitle=e.subTitle||"";e.description=e.description||"";e.eventImage=e.eventImage||"";e.pinEntryY=e.pinEntryY||"";this.pinDialog=new b.apps.dialog.PinDialog(e.id,null,null,null,null,function(f){d.validatePin(f);},function(){if(d._onAuthenticationCancel){d._onAuthenticationCancel();}d.hideDialog();},850,980,null,null,false,true);this.customiseDialog(e);};a.prototype.setTitle=function(d){this.pinDialog.setTitle(d);};a.prototype.setDescription=function(d){this.pinDialog.setDescription(d);};a.prototype.showPinDialog=function(g,e,d,f){b.app.VolumeControl.setIsEnabled(false);if(f){this._dialogManager.showPersistentDialog(this.pinDialog);}else{b.app.DialogueHelper.displayDialogue(this.pinDialog,b.app.DialogueHelper.PIN_ENTRY,this._hideTime);}this._whichPin=g;this._showUntilAuthenticated=e;this._timesToShow=d||this._timesToShow;};a.prototype.hideDialog=function(){b.app.VolumeControl.setIsEnabled(true);if(this.pinDialog){this._dialogManager.hideDialog(this.pinDialog);this.customiseDialog({reset:true});}};function c(e,d,g,h){var f=b.platform.system.Preferences.get(e._pinPathObject[e._whichPin.toLowerCase()],h);g(f.toString()===d.toString());}a.prototype.validatePin=function(e){var f=this,g=function(h){if(h){if((f._whichPin.toLowerCase()==="master")&&(!b.platform.ca.ParentalControl.isCurrentUserMaster())){b.platform.ca.ParentalControl.setPolicyModifier([{type:b.platform.ca.ParentalControl.PolicyModifiers.TIMEOUT,data:b.app.constants.MASTER_EXPIRATION_TIME}]);}if(!f.pinDialog._dialogGUIObject._inProgressAppearance){f.hideDialog();}f._onUserAuthenticationSuccess();}else{f._onUserInvalidPin();}},d=false;switch(this._whichPin.toLowerCase()){case"master":b.platform.ca.PINHandler.validateParentalPin(e,g,this._keepCurrentUser);break;case"ca":d=b.platform.ca.PINHandler.validateCAPurchasePin(e);g(d);break;case"install":g(e===b.app.Config.getConfigValue("first.install.pin"));break;case"purchase":c(this,e,g,true);break;case"facebook":c(this,e,g,false);break;default:b.platform.ca.PINHandler.validatePurchasePin(e,g);}};a.prototype.isPinShowing=function(){if(this.pinDialog&&this._dialogManager.getCurrentDialog()&&this._dialogManager.getCurrentDialog().id===this.pinDialog.id){return true;}return false;};a.prototype.setHideTime=function(d){this._hideTime=d;};a.prototype.customiseDialog=function(d){this.pinDialog.customise(d);};a.prototype.setAuthenticationCancelCallback=function(d){this._onAuthenticationCancel=d;};a.prototype.setInvalidPinCallback=function(d){this._onUserInvalidPin=d;};a.prototype.setAuthenticationSuccessCallback=function(d){this._onUserAuthenticationSuccess=d;};a.prototype.setAuthenticationFailureCallback=function(d){this._onUserAuthenticationFailure=d;};a.prototype.handlePinKeyPressCallback=function(e,g){var f=b.apps.core.KeyInterceptor.getKeyMap(),d=(isNaN(parseInt(e,10))&&e!==f.KEY_LEFT&&e!==f.KEY_OK&&e!==f.KEY_RIGHT&&e!==f.KEY_VOL_DOWN&&e!==f.KEY_VOL_UP&&e!==f.KEY_MUTE);if((d&&g)){g();}};a.prototype.keyHandler=function(d){return this.pinDialog.keyHandler(d);};b.app.PinHelper=a;}($N||{}));(function(a){a.app=a.app||{};a.app.SearchCriteriaUtil=(function(){var e=new a.apps.core.Log("Helper","SearchCriteriaUtil");function h(m){var p,q=[],r,s,o,n="",l;r=m.toLowerCase();s=m.toUpperCase();n=a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE)+a.app.constants.DIACRITICTERMSSUFFIX;l=a.app.constants[n];for(p=0;p<m.length;p++){if(l&&l[r[p]]){q.push(l[r[p]]);}else{o="["+r[p]+s[p]+"]";q.push(o);}}return q.join("");}function k(n,o,p){var q="",m=a.app.PVRCapability.getCurrentMediaId()||-1,l=h(n);if(o){q+="title GLOB '"+l+"'";}else{q+="(title GLOB '"+l+"*' OR title GLOB'* "+l+"*')";}if(!p){q+=" AND parentalRating<18";}q+=" AND taskType='REC' AND objectState<6 AND objectState>0 AND objectState!=2 AND inactive=0 AND isAuthorized = 1 AND mediumID = '"+m+"'";return q;}function f(n,o,p){var q="",m=a.app.PVRCapability.getCurrentMediaId()||-1,l=h(n);if(o){q+="(shortDesc GLOB '"+l+"' OR longDesc GLOB '"+l+"' OR title GLOB '"+l+"' OR netActorCast GLOB '"+l+"' OR netDirector GLOB '"+l+"')";}else{q+="(shortDesc GLOB '"+l+"*' OR shortDesc GLOB'* "+l+"*' OR longDesc GLOB '"+l+"*' OR longDesc GLOB'* "+l+"*' OR title GLOB '"+l+"*' OR title GLOB'* "+l+"*' OR netActorCast GLOB '"+l+"*' OR netActorCast GLOB'* "+l+"*' OR netDirector GLOB '"+l+"*' OR netDirector GLOB'* "+l+"*')";}if(!p){q+=" AND parentalRating<18";}q+=" AND taskType='REC' AND objectState<6 AND objectState>0 AND objectState!=2 AND inactive=0 AND isAuthorized = 1 AND mediumID = '"+m+"'";return q;}function c(n,o,p){var q="",m=a.app.PVRCapability.getCurrentMediaId()||-1,l=h(n);if(o){q+="(netActorCast GLOB '"+l+"' OR netDirector GLOB '"+l+"')";}else{q+="(netActorCast GLOB '"+l+"*' OR netActorCast GLOB'* "+l+"*' OR netDirector GLOB '"+l+"*' OR netDirector GLOB'* "+l+"*')";}if(!p){q+=" AND parentalRating<18";}q+=" AND taskType='REC' AND objectState<6 AND objectState>0 AND objectState!=2 AND inactive=0 AND isAuthorized = 1 AND mediumID = '"+m+"'";return q;}function b(m,n,o){var q="",p,l=h(m);if(n){q+="title GLOB '"+l+"'";}else{q+="(title GLOB '"+l+"*' OR title GLOB'* "+l+"*')";}q+=" AND ";q+="endTime > "+String(new Date().getTime());if(!o){q+=" AND parentalRating < 18";}return q;}function g(m,n,o){var q="",p,l=h(m);p=a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE);if(n){q+="(shortDesc GLOB '"+l+"' OR longDesc GLOB '"+l+"')";}else{q+="(shortDesc GLOB '"+l+"*' OR shortDesc GLOB'* "+l+"*' OR longDesc GLOB '"+l+"*' OR longDesc GLOB'* "+l+"*')";}q+=" AND ";q+="endTime > "+String(new Date().getTime());if(!o){q+=" AND parentalRating < 18";}return q;}function d(m,n,o){var p="",l=h(m.toLowerCase());p="(extInfoKey='Actors' OR extInfoKey='Director') AND endTime > "+String(new Date().getTime());if(!o){p+=" AND parentalRating < 18";}if(n){p+=" AND extInfoValue GLOB '"+l+"'";}else{p+=" AND (extInfoValue GLOB '"+l+"*' OR extInfoValue GLOB '* "+l+"*')";}return p;}return{getDiacriticisedKeyword:h,getNonExpiredEventsByTitleCriteria:b,getNonExpiredEventsByActorsDirectorCriteria:d,getNonExpiredEventsByKeywordCriteria:g,getLocalPlayableRecordingsByTitleCriteria:k,getLocalPlayableRecordingsByKeywordCriteria:f,getLocalPlayableRecordingsByActorsDirectorCriteria:c};}());}($N||{}));(function(a){a.common=a.common||{};a.common.helper=a.common.helper||{};a.common.helper.SearchUtil=(function(){var g=new a.apps.core.Log("Helper","SearchUtil"),E=a.services.sdp.MetadataService,m=[],B=[],k=[],F=[],M=[],N=false,t=false,u=false,y=false,o=0,z=0,e=0,c=0,h=0,l=0,I=0,b=function(){},q=this;q._counterUpdated=false;function v(Q){if(N&&t&&u&&y){if(b){var P={btvResultsReturned:N,vodResultsReturned:t,catchupResultsReturned:u,dvrResultsReturned:y,btvSearchResultsArray:m,vodSearchResultsArray:B,catchupSearchResultsArray:F,dvrSearchResultsArray:M,suggestionArray:k,totalDVRRresults:o,totalBTVResults:z,totalCatchUpResults:e,totalVODResults:c};b(P);}else{}}else{}}function O(Q){var P=function(U){if(U&&U.response.docs){var W=U.response.docs,V=0;for(V=0;V<W.length;V++){switch(W[V].scope){case"vod":W[V]=W[V].editorialAsset||W[V];W[V].type=a.app.constants.SEARCH_TYPE.VOD;B.push(W[V]);break;case"btv":W[V].type=a.app.constants.SEARCH_TYPE.MDSEPG;m.push(W[V]);break;}k.push(W[V]);}v(true);}},S=function(U){v();},T=[],R=Q.searchCriteria;if(Q.searchType==="title"){T.push("entity:content");}else{if(Q.searchType==="actors"){T.push("entity:actors");R='"'+R+'"';}else{if(Q.searchType==="keyword"){T.push("entity:(content OR actors)");}}}if(!Q.allowAdult){T.push('-descendantsOf:"021d14e5-d439-4038-94bd-c78023242950"');T.push("rating.precedence:[* TO 17]");}E.fetchSuggestions(this,P,S,R,T);}function D(T,S,Q,Z,Y,V,W){var X=[],R,P,U;U=1000;if(!Z){X.push("rating.precedence:[* TO 17]");}X.push("scope:vod");W=W||"uid,title,id";R="title desc";P="title";T='title:"'+T+'"';E.doSearch(this,S,Q,T,X,W,R,null,U,Y,P);}function H(P){var R,S=function(U){var T=U.length;for(R=0;R<T;R++){U[R].type=a.app.constants.SEARCH_TYPE.PVR;M.push(U[R]);}y=true;o=M.length;v();},Q=function(){y=true;v();};if(a.app.FeatureManager.isPVREnabled()){if(P.searchType==="title"){a.platform.btv.PVRManager.getPlayableRecordingsByTitle(P.searchCriteria,null,S,Q,false,null,P.allowAdult);}else{if(P.searchType==="actors"){a.platform.btv.PVRManager.getPlayableRecordingsByActorsDirector(P.searchCriteria,null,S,Q,false,null,P.allowAdult);}else{if(P.searchType==="keyword"){a.platform.btv.PVRManager.getPlayableRecordingsByKeyword(P.searchCriteria,null,S,Q,false,null,P.allowAdult);}}}}else{y=true;v();}}function r(S,R){var P=a.app.MDSUtil.isServerAvailable(),Q;if(P){if(a.app.FeatureManager.isVODEnabled()){D(S,function(T){var V=T.docs,U=V.length;for(Q=0;Q<U;Q++){V[Q]=V[Q].editorialAsset||V[Q];V[Q].type=a.app.constants.SEARCH_TYPE.VOD;B.push(V[Q]);}t=true;v();},function(){t=true;v();},R);}else{}}else{}}function d(T,P,W){var U=[],R={},V=["id","eventId","serviceRef","period","Title","Description","editorial.seriesRef","editorial.episodeNumber","isCatchUp","isStartOver","editorial.Rating","Actors","Directors","PromoImages","Year","Countries","DvbCategories","PrivateMetadata"],X=T,S=function(Y){g("fetchContentFromMDSbyIds success ----->","processSucess response = "+JSON.stringify(Y));if(Y&&Y.programmes&&Y.programmes.length>0){U=a.services.sdp.EPGEventFactory.mapArray(Y.programmes);W(X,U);}else{W(X,[]);}},Q=function(Y){g("fetchContentFromMDSbyIds failure ----->","processFailure response = "+JSON.stringify(Y));W(X,[]);};if(P.length===0){W(X,[]);}else{if(P.length===1){R.id=P[0];}else{R.id={"$in":P};}E.getData(this,S,Q,E.RequestType.Events,R,[["period.start",1]],V,null,0);}}function w(X){var S=[],Q={},W=[],V=["id","period","technical.Title","technical.episodeNumber"],R=function(Z){g("performVODSearchEpisodeSort success ----->","processSucess response = "+JSON.stringify(Z));c=Z.total_records;if(Z&&Z.editorials&&Z.editorials.length>0){var Y=Z.editorials,aa;for(aa=0;aa<Y.length;aa++){Y[aa].type=a.app.constants.SEARCH_TYPE.VOD;Y[aa].title=Y[aa].technicals[0].Title;Y[aa].episodeNumber=Y[aa].technicals[0].episodeNumber;}h=(Y.length>0)?h+Y.length:c;B=B.concat(Y);t=true;v();}else{t=true;v();}},P=function(Y){g("performVODSearchEpisodeSort failure ----->","processFailure response = "+JSON.stringify(Y));t=true;v();},T=X.limit||a.app.constants.SEARCH_PAGE_SIZE,U=((!X.startRow||(X.startRow===0))?0:X.startRow-1)||0;switch(X.searchType){case"title":W=[{"editorial.title":encodeURIComponent(X.searchCriteria)}];break;case"actors":W=[{"editorial.Directors":encodeURIComponent(X.searchCriteria)},{"editorial.Actors":encodeURIComponent(X.searchCriteria)}];break;case"keyword":W=[{"editorial.title":encodeURIComponent(X.searchCriteria)},{"editorial.Directors":encodeURIComponent(X.searchCriteria)},{"editorial.Actors":encodeURIComponent(X.searchCriteria)},{"editorial.Description":encodeURIComponent(X.searchCriteria)}];break;}Q.$or=W;E.getData(this,R,P,E.RequestType.Assets,Q,[["editorial.episodeNumber",1],["period.start",1]],V,T,U);}function p(T,P,W){var U=[],R={},V=["id","eventId","serviceRef","period","Title","Description","editorial.seriesRef","editorial.episodeNumber","isCatchUp","isStartOver","editorial.Rating","Actors","Directors","PromoImages","Year","Countries","DvbCategories","PrivateMetadata"],X=T,S=function(Y){g("fetchCatchupContentFromMDSbyIds success ----->","processSucess response = "+JSON.stringify(Y));if(Y&&Y.programmes&&Y.programmes.length>0){U=a.services.sdp.EPGEventFactory.mapArray(Y.programmes);W(X,U);}else{W(X,[]);}},Q=function(Y){g("fetchCatchupContentFromMDSbyIds failure ----->","processFailure response = "+JSON.stringify(Y));W(X,[]);};if(P.length===0){W(X,[]);}else{if(P.length===1){R["editorial.id"]=P[0];}else{R["editorial.id"]={"$in":P};}E.getData(this,S,Q,E.RequestType.Events,R,[["period.start",1]],V,null,0);}}function s(T){var Q=T.docs||[],S=[],P,R;for(R=0;R<Q.length;R++){if(Q[R].scope==="btv"){S.push(Q[R].id);}}z=T.numberFound;P=function(W,V){g("btvSearchCallback::successCallback","return Object"+JSON.stringify(V));var U=V.concat();for(R=0;R<U.length;R++){U[R].type=a.app.constants.SEARCH_TYPE.MDSEPG;}m=U;l=(U.length>0)?l+U.length:z;N=true;v();};if(Q.length>0){if(S.length>0){d(T,S,P);}else{N=true;v();}}else{N=true;v();}}function A(Q){var S,W=Q.filterQuery||[],T,U=Q.sortOrder||"title desc",P=a.app.constants.SEARCH_PAGE_SIZE,R=Q.startRow||0,V=Q.queryFields||"title";if((Q.limit!==null)&&(typeof(Q.limit)!=="undefined")){P=Q.limit;}if(!Q.allowAdult){W.push("rating.precedence:[* TO 18]");W.push('-category:"Adult"');}W.push("scope:btv");W.push("eventEnd:["+String(Math.ceil(new Date().getTime()/1000))+" TO *]");W.push("entity:programme");if(Q.searchType==="title"){W.push('title_o:"'+Q.searchCriteria+'"');S='title:"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,eventStart,eventEnd";V=Q.queryFields||"title";}else{if(Q.searchType==="actors"){S='"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,actors,directors,eventStart,eventEnd";V=Q.queryFields||"directors actors";}else{if(Q.searchType==="keyword"){S='description:"'+Q.searchCriteria+'"title:"'+Q.searchCriteria+'""'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,catchupStart,catchupEnd";V="description directors actors title";}}}if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){W.push("eventStart:[1413504000 TO *]");}else{W.push("eventStart:["+String(Math.ceil(new Date().getTime()/1000))+" TO *]");}E.doSearch(this,s,s,S,W,T,U,null,P,R,V);}function G(T){var Q=T.docs||[],S=[],P,R;for(R=0;R<Q.length;R++){switch(Q[R].scope){case"btv":S.push(Q[R].id);break;default:g("catchUpSearchCallback",JSON.stringify(Q[R]));break;}}e=T.numberFound;P=function(W,V){g("catchUpSearchCallback::successCallback","return Object"+JSON.stringify(V));var U=V.concat();for(R=0;R<U.length;R++){U[R].type=a.app.constants.SEARCH_TYPE.CATCHUP;}F=U;I=(U.length>0)?I+U.length:e;u=true;v();};if(Q.length>0){if(S.length>0){p(T,S,P);}else{u=true;v();}}else{u=true;v();}}function x(Q){var S,W=Q.filterQuery||[],T,U=Q.sortOrder||"title desc",P=a.app.constants.SEARCH_PAGE_SIZE,R=Q.startRow||0,V=Q.queryFields||"title";if((Q.limit!==null)&&(typeof(Q.limit)!=="undefined")){P=Q.limit;}if(a.app.FeatureManager.isCatchUpEnabled()){if(!Q.allowAdult){W.push("rating.precedence:[* TO 18]");W.push('-category:"Adult"');}W.push("scope:btv");W.push("catchupEnd:["+String(Math.ceil(new Date().getTime()/1000))+" TO *]");W.push("catchupStart:[0 TO "+String(Math.ceil(new Date().getTime()/1000))+"]");W.push("entity:content");if(Q.searchType==="title"){W.push('title_o:"'+Q.searchCriteria+'"');S='title:"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,catchupStart,catchupEnd";V=Q.queryFields||"title";}else{if(Q.searchType==="actors"){S='"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,actors,directors,catchupStart,catchupEnd";V=Q.queryFields||"directors actors";}else{if(Q.searchType==="keyword"){S='description:"'+Q.searchCriteria+'"title:"'+Q.searchCriteria+'""'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,catchupStart,catchupEnd";V="description directors actors title";}}}E.doSearch(this,G,G,S,W,T,U,null,P,R,V);}else{u=true;v();}}function f(V,X){var S=[],Q={},U=["id","period","technical.Title","technical.episodeNumber"],R=function(Y){g("fetchVODContentFromMDS success ----->","processSucess response = "+JSON.stringify(Y));if(Y&&Y.editorials&&Y.editorials.length>0){X(Y.editorials);}else{X([]);}},P=function(Y){g("fetchVODContentFromMDS failure ----->","processFailure response = "+JSON.stringify(Y));X([]);},T=V.limit||a.app.constants.SEARCH_PAGE_SIZE,W=V.startRow||0;Q["editorial.id"]={"$in":V.ids};E.getData(this,R,P,E.RequestType.Assets,Q,[["period.start",1]],U,T,W);}function J(T){var Q=T.docs||[],S=[],P,R;for(R=0;R<Q.length;R++){Q[R].type=a.app.constants.SEARCH_TYPE.VOD;}B=B.concat(Q);c=T.numberFound;t=true;v();}function n(U){var Q=U.docs||[],T=[],P,S,R={};for(S=0;S<Q.length;S++){if(Q[S].scope==="vod"){T.push(Q[S].id);}}c=U.numberFound;P=function(W){var V=[];for(S=0;S<W.length;S++){W[S].type=a.app.constants.SEARCH_TYPE.VOD;W[S].title=W[S].technicals[0].Title;W[S].episodeNumber=W[S].technicals[0].episodeNumber;}h=(W.length>0)?h+W.length:c;B=B.concat(W);t=true;v();};R.ids=T;if(Q.length>0){if(T.length>0){f(R,P);}else{J(U);}}else{t=true;v();}}function K(Q){var S,W=Q.filterQuery||[],T,U=Q.sortOrder||"title desc",P=a.app.constants.SEARCH_PAGE_SIZE,R=Q.startRow||0,V=Q.queryFields||"title";if((Q.limit!==null)&&(typeof(Q.limit)!=="undefined")){P=Q.limit;}if(a.app.FeatureManager.isVODEnabled()){if(!Q.allowAdult){W.push("rating.precedence:[* TO 17]");}W.push("scope:vod");W.push("entity:content");if(Q.searchType==="title"){W.push('title_o:"'+Q.searchCriteria+'"');S='title:"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,scope";V=Q.queryFields||"title";}else{if(Q.searchType==="actors"){S='"'+Q.searchCriteria+'"';T=Q.fieldList||"id,title,actors,directors";V=Q.queryFields||"directors actors";}else{if(Q.searchType==="keyword"){S='description:"'+Q.searchCriteria+'"title:"'+Q.searchCriteria+'""'+Q.searchCriteria+'"';T=Q.fieldList||"uid,title,id";V=Q.queryFields||"description directors actors title";}}}E.doSearch(this,n,n,S,W,T,U,null,P,R,V);}else{t=true;v();}}function C(Q){var P=Q.concat(),R;for(R=0;R<P.length;R++){P[R].type=a.app.constants.SEARCH_TYPE.MDSEPG;}m=P;N=true;v();}function L(W){var T=[],R={},V=["id","eventId","serviceRef","period","Title","Description","editorial.seriesRef","editorial.episodeNumber","isCatchUp","isStartOver","editorial.Rating","PrivateMetadata","Actors","Directors","PromoImages","Year","Countries","DvbCategories"],S=function(Y){if(Y&&Y.programmes&&Y.programmes.length>0){T=a.services.sdp.EPGEventFactory.mapArray(Y.programmes);z=Y.total_records;C(T);}else{C([]);}},P=function(Y){g("fetchRerunContentFromMDS failure ----->","processFailure response = "+JSON.stringify(Y));C([]);},U=W.limit||a.app.constants.SEARCH_PAGE_SIZE,X=W.startRow||0,Q=W.startTime||new Date().getTime();if(W.searchType==="reruns"){if(W.episodeId){R["editorial.seriesRef"]=W.seriesId;R["editorial.episodeNumber"]=parseInt(W.episodeId,10);}else{R.Title=encodeURIComponent(W.searchCriteria);}}else{R["editorial.seriesRef"]=W.seriesId;}R["period.start"]={"$gte":Math.ceil(Q/1000)};if(!W.allowAdult){R.DvbCategories={"$nin":a.app.constants.MDS_EPG_ADULT_CATEGORIES};}E.getData(this,S,P,E.RequestType.Events,R,[["period.start",1]],V,U,X);}return{getSearchCriteriaObject:function(){var P={includeVOD:false,includeBTV:false,includeCatchUp:false,includePVR:false,requestSuggestions:false,searchType:"title",searchCriteria:"",allowAdult:false,fieldList:null,sortOrder:null,startRow:0,maxRows:20,seriesId:null,episodeId:null,searchCompleteCallback:null};return P;},resetSearchProperties:function(){q._counterUpdated=false;o=0;z=0;e=0;c=0;l=0;I=0;h=0;},hasMoreItemsToScroll:function(){var P=true;if((h>=c)&&(I>=e)&&(l>=z)&&(M.length>=o)){P=false;}return P;},getFetchedResultsCount:function(){return{vodCount:h,catchupCount:I,btvCount:l};},performSearch:function(P){var Q=[];m=[];B=[];F=[];M=[];k=[];N=P.includeBTV?false:true;t=P.includeVOD?false:true;u=P.includeCatchUp?false:true;y=P.includePVR?false:true;b=P.searchCompleteCallback;if(P){if(P.includePVR){H(P);}if(P.requestSuggestions){N=true;u=true;t=true;O(P);}else{if(P.searchType==="reruns"||P.searchType==="series"){u=true;t=true;L(P);}else{if(P.includeBTV){A(P);}if(P.includeCatchUp){x(P);}if(P.includeVOD){w(P);}}}}}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.CatchUpHelper=(function(){var o=new a.apps.core.Log("Helper","CatchUpHelper"),w=a.app.constants.VOD_ASSET_TYPE,n=a.app.FeatureManager,y=a.app.MDSUtil,e=null,f=null,k="0001007201f5a7fb_VIDEO",h=0,d=0,B={backgroundClass:"dialogueBackground",basicGradientTopClass:"dialogueGlowUpper",basicGradientBottomClass:"dialogueGlowLower",solidLineTopClass:"loadingBarSolidDivider",solidLineBottomClass:"loadingBarSolidDivider",barBackgroundClass:"dialogueBackplate",textClass:"dialogMessage"},g=0,t=null,A=0,b=null,c=false;b=function(){c=false;};t=function(){c=true;};function v(C){e=C;c=n.isCatchUpEnabled();g=a.apps.util.EventManager.subscribe("CatchUpEnabled",t,a.app.CatchUpHelper);A=a.apps.util.EventManager.subscribe("CatchUpDisabled",b,a.app.CatchUpHelper);}function x(C){return c&&a.app.EventUtil.isPastEvent(C)&&C.isCatchUp;}function r(D,C){if(D.action===h){}}function z(F,H,D,E){var C=null,G=null;C=a.app.DialogueHelper.createAndShowDialogue(H,a.app.CatchUpHelper.getString("currentlyUnsubscribed"),(D)?a.app.CatchUpHelper.getString(D):null,E,null,null,"VERTICAL",null);G=function(I){a.apps.dialog.DialogManager.hideDialog(C);r(I,F);};C._dialogGUIObject.configure({selectedCallback:G});}function l(C){if(e!==null){if(C===true){e.setCss(B);e.setTextX(863);e.setText(a.app.CatchUpHelper.getString("loading"));}e.setLoading(C);}}function q(D){if(D!==403){l(false);a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_CATCHUP_SYSTEM_MSG);a.app.DialogueHelper.updateDialogueTitleAndMessage(a.app.constants.DLG_CATCHUP_SYSTEM_MSG,a.app.CatchUpHelper.getString("catchupSystemErrorDialogueTitle"),a.app.CatchUpHelper.getString("catchupSystemErrorDialogueMessage")+"\n\nError code: "+D);}else{var C=[{name:a.app.CatchUpHelper.getString("launchSubscription"),action:h},{name:a.app.CatchUpHelper.getString("cancel"),action:d}];l(false);z(D,a.app.constants.DLG_PPV_CHANNEL_SUBSCRIPTION,"subscriptionMessageText",C);}}function s(C){C.eventId=f.eventId;C.serviceId=f.serviceId;C.startTime=f.startTime;C.endTime=f.endTime;C.parentalRating=f.parentalRating;C.shortDesc=f.shortDesc;C.longDesc=f.longDesc;C.seriesId=f.seriesId;C.episodeId=f.episodeId;C.displaySeasonEpisode=f.displaySeasonEpisode;C.actors=f.actors;C.directors=f.directors;C.originalName=f.originalName;C.epOriginalName=f.epOriginalName;C.year=f.year;C.country=f.country;C.genres=f.genres||a.app.genreUtil.getGenreObjectFromGenreString(f.netEventGenres);}function p(F,G,E){var C=false,D=false;l(false);if(F&&F.Content&&F.Content.EntitledProduct){F.title=f.title;F.Rating={code:f.parentalRating,precedence:f.parentalRating};F.type=f.type;F.fileName=G;s(F);a.app.NowPlayback.playAsset(F,F.Content.EntitledProduct,function(){},C,D,E);}else{q(403);}}function m(C,E){var G=0,D,F;if(C&&C.Contents&&C.Contents.Content&&C.Contents.Content[0]&&C.Contents.Content[0].Tstv){D=C.Contents.Content[0].Tstv;for(F in D){if(D.hasOwnProperty(F)){if(!E&&D[G].model==="CatchUp"){return D[G].id;}else{if(E&&D[G].model==="StartOver"){return D[G].id;}}G++;}}}return"";}function u(F,E){var D=a.app.ConditionalAccessCAK73.getCASmartCardInfo().smartcardInfo?true:false,C,G;if(D===false){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_CA_SMART_CARD_REMOVED);}else{if(y.isServerAvailable()===false){a.app.DialogueHelper.showEthernetDisconnectedDialogue();}else{l(true);f=F;f.type=E?w.STARTOVER:w.CATCHUP;a.app.TraxisUtil.getCatchUpForPlayback(F.uniqueEventId,function(H){C=H.crid;G=H.fileName;if(a.platform.system.Preferences.get("traxis.developer.mode",false)==="on"){C=k;}a.app.TraxisUtil.getEntitlementForCatchUp(C,function(I){p(I,G,E);},function(){q(403);});},function(H){q(H||403);});}}}return{initialise:v,isCatchUp:x,playCatchUp:u};}());a.apps.core.Language.adornWithGetString(a.app.CatchUpHelper);}($N||{}));(function(a){a.app=a.app||{};a.app.StartOverHelper=(function(){var n=new a.apps.core.Log("Helper","StartOverHelper"),w=a.app.CatchUpHelper,m=a.app.FeatureManager,z=null,f=null,e=null,x=a.app.constants.VOD_ASSET_TYPE,k="0001007201f5a7fb_VIDEO",h=0,d=0,C={backgroundClass:"dialogueBackground",basicGradientTopClass:"dialogueGlowUpper",basicGradientBottomClass:"dialogueGlowLower",solidLineTopClass:"loadingBarSolidDivider",solidLineBottomClass:"loadingBarSolidDivider",barBackgroundClass:"dialogueBackplate",textClass:"dialogMessage"},g=0,t=null,B=0,b=null,c=false;b=function(){c=false;};t=function(){c=true;};function v(D){e=D;c=m.isStartOverEnabled();g=a.apps.util.EventManager.subscribe("StartOverEnabled",t,a.app.StartOverHelper);B=a.apps.util.EventManager.subscribe("StartOverDisabled",b,a.app.StartOverHelper);}function p(D){return c&&a.app.EventUtil.isEventShowingNow(D)&&D.isStartOver;}function r(E,D){if(E&&E.action===h){}}function A(G,I,E,F){var D=null,H=null;D=a.app.DialogueHelper.createAndShowDialogue(I,a.app.CatchUpHelper.getString("currentlyUnsubscribed"),(E)?a.app.CatchUpHelper.getString(E):null,F,null,null,"VERTICAL",null);H=function(J){a.apps.dialog.DialogManager.hideDialog(D);r(J,G);};D._dialogGUIObject.configure({selectedCallback:H});}function l(D){if(e!==null){if(D===true){e.setCss(C);e.setTextX(863);e.setText(a.app.CatchUpHelper.getString("loading"));}e.setLoading(D);}}function s(D){D.eventId=f.eventId;D.serviceId=f.serviceId;D.startTime=f.startTime;D.endTime=f.endTime;D.parentalRating=f.parentalRating;D.shortDesc=f.shortDesc;D.longDesc=f.longDesc;D.seriesId=f.seriesId;D.episodeId=f.episodeId;D.displaySeasonEpisode=f.displaySeasonEpisode;D.actors=f.actors;D.directors=f.directors;D.originalName=f.originalName;D.epOriginalName=f.epOriginalName;D.year=f.year;D.country=f.country;D.genres=f.genres||a.app.genreUtil.getGenreObjectFromGenreString(f.netEventGenres);}function q(D){var E=[{name:a.app.CatchUpHelper.getString("launchSubscription"),action:h},{name:a.app.CatchUpHelper.getString("cancel"),action:d}];l(false);A(D,a.app.constants.DLG_PPV_CHANNEL_SUBSCRIPTION,"subscriptionMessageText",E);}function o(G,H,F){var D=false,E=true;l(false);if(G&&G.Content&&G.Content.EntitledProduct){G.title=f.title;G.Rating={code:f.parentalRating,precedence:f.parentalRating};G.type=f.type;G.fileName=H;s(G);a.app.NowPlayback.playAsset(G,G.Content.EntitledProduct,function(){},D,E,F);}else{q(G);}}function u(G,F){var E=a.app.ConditionalAccessCAK73.getCASmartCardInfo().smartcardInfo?true:false,D,H;if(E===false){a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_CA_SMART_CARD_REMOVED);}else{if(a.app.MDSUtil.isServerAvailable()===false){a.app.DialogueHelper.showEthernetDisconnectedDialogue();}else{l(true);f=G;f.type=F?x.STARTOVER:x.CATCHUP;a.app.TraxisUtil.getStartOverForPlayback(G.uniqueEventId,function(I){if(I){D=I.crid;H=I.fileName;if(a.platform.system.Preferences.get("traxis.developer.mode",false)==="on"){D=k;}a.app.TraxisUtil.getEntitlementForCatchUp(D,function(J){o(J,H,F);},q);}else{q();}});}}}function y(F,K){var J,D=true,H=1,G=2,E=[{name:a.app.StartOverHelper.getString("yes"),action:H},{name:a.app.StartOverHelper.getString("no"),action:G}],I=function(L){if(L){if(L.action===H){u(F,D);}else{if(L.action===G&&K){K();}}}};J=F.title;if(F.episodeId){J+=a.app.epgUtil.getSeasonEpisodeShort(F," ");}z=a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_STARTOVER_PLAYBACK_CONFIRM,J,a.app.StartOverHelper.getString("confirmStartoverPlaybackMessage"),E,null,null,null,null,{title:J});z.setSelectedCallback(I);}return{initialise:v,isStartOver:p,playStartOver:y};}());a.apps.core.Language.adornWithGetString(a.app.StartOverHelper);}($N||{}));(function(a){a.gui=a.gui||{};a.gui.ResolutionManager=(function(){var h="720p",g="1080p",c={width:1280,height:720},f={width:1920,height:1080},d=null,e=null;function b(){return a.platform.system.Preferences.get(a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,true)||h;}function l(n){var m=null,p=a.platform.output.AV,o=2;switch(n){case a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480I,o):p.setResolution(p.VideoResolution.HDMI_VIDEO_FORMAT_480I);break;case a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480P,o):p.setResolution(p.VideoResolution.HDMI_VIDEO_FORMAT_480P);break;case a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_720P,o):p.setResolution(p.VideoResolution.HDMI_VIDEO_FORMAT_720P);break;case a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080I,o):p.setResolution(p.VideoResolution.HDMI_VIDEO_FORMAT_1080I);break;case a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080P,o):p.setResolution(p.VideoResolution.HDMI_VIDEO_FORMAT_1080P);break;}a.app.constants.VIEWBOX="0 0 1280 720";a.gui.Image.resolution=h;a.gui.GUIObject.prototype.resolutionHorizontalFactor=c.height/f.height;a.gui.GUIObject.prototype.resolutionVerticalFactor=c.width/f.width;e=c;m=h;return m;}function k(o,n){var m=o.createElement("style");m.setAttribute("xlink:href",n);o.documentElement.appendChild(m);}return{initialiseResolution:function(m){d=m?l(m):l(b());},setCss:function(n,m){k(n,m);},initialiseContext:function(o,m){var n=navigator.userAgent.indexOf("Ekioh")>-1?"svg":"html";if(!m){m="../../../customise/resources/css/"+a.gui.Image.resolution+"/common.css";}if(n==="svg"){o.getElementsByTagName("svg")[0].setAttribute("viewBox",a.app.constants.VIEWBOX);}k(o,m);},getResolution:function(){return d;},getResDimensions:function(){return e;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.ParentalControlUtil=(function(){var h=new a.apps.core.Log("Conditional-Access","ParentalControlUtil"),e=a.platform.ca.ParentalControl,g=true,d=null,b=18,l=18;function c(){d.push({title:"parentalRatingFreeForPublic",morality:7,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(7)});d.push({title:"parentalRatingTen",morality:9,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(10)});d.push({title:"parentalRatingTwelve",morality:11,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(12)});d.push({title:"parentalRatingFourteen",morality:13,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(14)});d.push({title:"parentalRatingSixteen",morality:15,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(16)});d.push({title:"parentalRatingEighteen",morality:17,ratingIcon:a.app.ImageUtil.getParentalRatingIconHref(18)});d.push({title:"parentalRatingNoBlock",morality:254,ratingIcon:"../../../customise/resources/images/%RES/icons/sem_bloqueio.png"});}function m(){if(!d||d.length===0){d=[];c();}return d;}function f(){var n={};if(a.app.EnvironmentUtil.isIPEnabled()){n=a.services.sdp.Ratings.getRatingLookupOrderedByPrecedence();if(n&&n[0]){return n[0].precedenceValue;}}return 0;}function k(q,o,n,v,r){var p=a.app.epgUtil.getServiceById(q.serviceId),t=a.app.ParentalControlUtil.isChannelLocked(p),u=new a.app.PinHelper(function(){o(q);},null,null,null,n,0,false),y=(r===true)?a.app.ParentalControlUtil.getString("programUnlocked"):"",s=(r===true)?a.app.ParentalControlUtil.getString("lockShow"):"",w=t?a.app.ParentalControlUtil.getString("channelLocked"):a.app.ParentalControlUtil.getString("programLocked"),x=t?a.app.ParentalControlUtil.getString("unlockChannel"):a.app.ParentalControlUtil.getString("unlockShow");u.setDialogProperties({x:0,y:0,width:1920,height:1080,id:"PinDialog",title:(r===true)?y:w,description:(r===true)?s:x,keyPressedCallback:v,titleCssClass:"pinEntryTitle"});u.showPinDialog("master",false);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.ParentalControlUtil);},isBTVLocked:function(){return g;},isProgramLocked:function(o){var n=(o&&!o.parentalRating)?{parentalRating:b}:null;if(o.eventId&&o.eventId===a.app.epgUtil.BAD_EVENT_ID){return false;}if(e.isEventPermitted(n||o)){return false;}return true;},isChannelLocked:function(n){return e.isServiceIdRestricted(n.serviceId);},isChannelLockedAsAdult:function(n){return(!e.isUserAdult()&&a.app.genreUtil.isAdultChannel(n));},isChannelOrProgramLocked:function(o){var n;if(!o||!o.serviceId){return false;}if(e.isCurrentUserMaster()){return false;}n=a.app.epgUtil.getServiceById(o.serviceId);if(o.eventId===a.app.epgUtil.BAD_EVENT_ID){if(e.isServicePermitted(n)){return false;}return true;}return !e.isServiceAndEventPermitted(n,o);},updateVideoBlocker:function(n){a.app.fullScreenPlayer.applyParentalControl(n);},populateRatingLookUp:c,getRatingLookUp:m,parentalDialog:k,PARENTAL_RATING_ADULT_VALUE:l};}());}($N||{}));(function(a){a.app=a.app||{};a.app.TimerUtil=(function(){var c="general",g={timeId:0,items:[]},d={general:g},b,f=function(k){var h=k||c;if(d[h]&&d[h].items){d[h].items=[];clearInterval(d[h].timerId);d[h].timerId=0;}},e=function(m){var k=m||c,l=0,h=d[k].items.length;if(h===0){f(k);}else{b=!b;for(l=0;l<h;l++){if(d[k].items[l].blink){d[k].items[l].blink(b);}else{if(d[k].items[l].update){d[k].items[l].update();}}}}};return{getItems:function(k){var h=k||c;return(d[h]&&d[h].items)?d[h].items:[];},addItem:function(l,k){var h=k||c;if(!d[h]){d[h]=g;}d[h].items.push(l);},removeItem:function(m,l){var k=l||c,h=0;if(d[k]&&d[k].items){h=d[k].items.indexOf(m);if(h>-1){d[k].items.splice(h,1);}}},startTimer:function(l,k){var h=k||c;if(!d[h].timerId&&d[h].items.length>0){d[h].timerId=setInterval(function(){e(h);},l||a.app.constants.MINUTE_IN_MS);}},stopTimer:f};}());}($N||{}));(function(b){var a=function(e){var c=this,d=function(f){c._callbackListeners(f);};this._granularitySeconds=e;this._clock=new b.apps.util.Clock(this._granularitySeconds,d);this._listeners=[];this._clock.activate();};a.prototype._callbackListeners=function(c){var d;for(d in this._listeners){if(this._listeners.hasOwnProperty(d)&&this._listeners[d].enabled&&this._listeners[d].callback){this._listeners[d].callback(c);}}};a.prototype.register=function(d,e,c){if(!this._listeners[d]){this._listeners[d]={callback:e,enabled:(c)?true:false};}};a.prototype.unregister=function(c){if(this._listeners[c]){delete this._listeners[c];}};a.prototype.enable=function(c){if(this._listeners[c]){this._listeners[c].enabled=true;}};a.prototype.disable=function(c){if(this._listeners[c]){this._listeners[c].enabled=false;}};b.app=b.app||{};b.app.SubscribableTimer=a;}($N||{}));(function(a){a.app=a.app||{};a.app.StandardTimers=(function(){var c=60,b=new a.app.SubscribableTimer(c);return{minuteTimer:b};}());}($N||{}));(function(a){a.app=a.app||{};a.app.SettingsAPI=(function(){var q=3000,o=new a.apps.core.Log("Helper","SettingsAPI"),A=a.app.ParentalControlUtil,b="/system/devices/tnrmgr",l={lnbLowFrequency:"lnbFreqLoKhz",lnbHighFrequency:"lnbFreqHiKhz",lnbSwitchingFrequency:"lnbFreqSwKhz",lnbPower:"lnbPower"},B=[a.app.constants.PREF_TV_CURRENT_SERVICE_ID,a.app.constants.PREF_RECENT_SEARCH_TERMS,a.app.constants.PREF_LANGUAGE,a.app.constants.PREF_ISINSTALLED,a.app.constants.PREF_USER_RATING,a.app.constants.PREF_ZAPPING_BANNER_TIMEOUT,a.app.constants.PREF_RECENT_SEARCH_TERMS,a.app.constants.PREF_TV_CATEGORY,a.app.constants.PREF_TV_SORT,a.app.constants.PREF_HARD_OF_HEARING,a.app.constants.PREF_GUIDE_TEXT_SIZE,a.app.constants.PREF_AUDIO_LANGUAGE,a.app.constants.PREF_SUBTITLE_STATE,a.app.constants.PREF_DEFAULT_AUDIO_FORMAT,a.app.constants.PREF_DEFAULT_ASPECT_RATIO_HD,a.app.constants.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,a.app.constants.PREF_DEFAULT_AUDIO_DELAY,a.app.constants.PREF_NETWORK_HTTP_PROXY,a.app.constants.PREF_BEFORE_PADDING,a.app.constants.PREF_AFTER_PADDING,a.app.constants.PREF_ASPECT_RATIO,a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,a.app.constants.DISPLAY_GUIDE_MODE,a.app.constants.SOCIAL_FACEBOOK_PIN],E={hdmiPillarBox:a.platform.output.AV.VideoAspectMode.HDMI_PILLAR_BOX,hdmiStretch:a.platform.output.AV.VideoAspectMode.HDMI_STRETCH},n={analogueLetterBox:a.platform.output.AV.VideoAspectMode.ANALOGUE_LETTER_BOX,analoguePanScan:a.platform.output.AV.VideoAspectMode.ANALOGUE_PAN_SCAN,analogueCenterCut:a.platform.output.AV.VideoAspectMode.ANALOGUE_CENTER_CUT,analogueStretch:a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH},g={mono:a.platform.system.Device.AUDIO_CHANNELS_MONO,stereo:a.platform.system.Device.AUDIO_CHANNELS_STEREO,surround:a.platform.system.Device.AUDIO_CHANNELS_SURROUND},m=null,h={lnbPolarization:a.platform.system.Scan.DVBS_Polarization.LINEAR_HORIZONTAL,fecInner:a.platform.system.Scan.DVBS_InnerFEC._3_4,fecOuter:a.platform.system.Scan.DVBC_OuterFEC.AUTO,symbolRate:27500,frequency:11953000,modulation:a.platform.system.Scan.DVBS_ModulationType.QPSK,lnbLowFrequency:9750,lnbHighFrequency:10600,lnbSwitchingFrequency:11700,lnbPower:true,rollOff:a.platform.system.Scan.DVBS_RollOff._0_20,isDVBS2:false,isDVBC2:false},u=null,D=null,y=null,s=[],z={action:"NETWORK_CONNECT",url:"../../../customise/resources/images/%RES/actionIcons/Icn_actionConnect.png",title:""},c={action:"ADVANCED_SETTINGS",url:"../../../customise/resources/images/%RES/actionIcons/Icn_actionConnect.png",title:"ADVANCED SETTINGS"},v={action:"ENTER_PASSWORD",url:"../../../customise/resources/images/%RES/actionIcons/Icn_actionConnect.png",title:""},k={action:"SHOW",url:"../../../customise/resources/images/%RES/actionIcons/Icn_actionConnect.png",title:""},r={protocol:14,security:null,ssid:"Join Other",encryptMode:null,quality:100,key:"",type:"",name:"Join Other"};function x(){var F=[];F.push(z);return F;}function e(){var F=[];F.push(c);return F;}function p(G){var F=0;u=G.networks;for(F=u.length-1;F>=0;F--){u[F].type=a.platform.system.Network.NetworkType.WIFI;u[F].name=u[F].ssid;}u.sort(function(I,H){return H.quality-I.quality;});s=s.concat(u).concat(r);}function w(F){s=[];s=s.concat(r);}function t(){var F=a.app.DVBScanUtil.getDVBCProfilePath();h.frequency=a.platform.system.Preferences.get(F+"/frequency",true);h.fecInner=a.platform.system.Preferences.get(F+"/fecInner",true);h.modulation=a.platform.system.Preferences.get(F+"/modulation",true);h.isDVBC2=a.platform.system.Preferences.get(F+"/isDvbC2",true);h.symbolRate=a.platform.system.Preferences.get(F+"/symbolRate",true);h.fecOuter=a.platform.system.Preferences.get(F+"/fecOuter",true);}function f(){var F=null;for(F in l){if(l.hasOwnProperty(F)&&l[F]){h[F]=a.platform.system.Preferences.get(b+"/"+l[F],true);}}}function C(G){var F={};F.frequency=h.frequency;F.fecInner=h.fecInner;F.symbolRate=h.symbolRate;F.modulation=h.modulation;if(G){F.fecOuter=h.fecOuter;F.isDVBC2=h.isDVBC2;F.networkId=a.platform.system.Scan.NetworkType.DVBC;}else{F.lnbPolarization=h.lnbPolarization;F.rollOff=h.rollOff;F.isDVBS2=h.isDVBS2;F.networkId=a.platform.system.Scan.NetworkType.DVBS;F.lnbLowFrequency=h.lnbLowFrequency;F.lnbHighFrequency=h.lnbHighFrequency;F.lnbSwitchingFrequency=h.lnbSwitchingFrequency;F.lnbPower=h.lnbPower;}return F;}function d(G,F){a.platform.system.Preferences.set(b+"/"+G,F,true);}return{initialise:function(){var G=a.platform.btv.ChannelCategories.getCurrentCategory(),F,H;r.type=a.platform.system.Network.NetworkType.WIFI;s=[];m=a.platform.system.Preferences.get(a.app.constants.PREF_EXCLUDE_UNSUBSCRIBED_CHANNELS)==="true"?a.app.constants.FAVOURITE_SUBSCRIBED_CHANNELS:a.app.constants.FAVOURITE_ALL_CHANNELS;if(G!==m&&(G===a.app.constants.FAVOURITE_SUBSCRIBED_CHANNELS||G===a.app.constants.FAVOURITE_ALL_CHANNELS)){a.platform.btv.ChannelCategories.setCurrentCategory(m);}a.apps.core.Language.adornWithGetString(this);if(a.platform.system.Network.isEthernetAvailable()&&a.platform.system.Network.isNetworkAvailable(a.platform.system.Network.NetworkType.ETHERNET)){y=a.platform.system.Network.getNetworkByType(a.platform.system.Network.NetworkType.ETHERNET);s.push(y);y.type=a.platform.system.Network.NetworkType.ETHERNET;z.title=this.getString("menuConnect");}},getDefaultFavourite:function(){return m;},availableSubtitleStates:function(){return a.app.constants.AVAILABLE_SUBTITLE_STATES;},availableAudioLanguages:function(){return a.app.constants.LANG_AVAILABLE_AUDIO;},availableLanguages:function(){return a.app.constants.LANG_AVAILABLE_MENU_LOCALES;},availableSurferDurations:function(){return a.app.constants.POSSIBLE_SURFER_DURATIONS;},getAvailableTransitionEffects:function(){return a.app.constants.USBDLNA_PHOTO_TRANSITION_EFFECTS_AVAILABLE;},availPlaybackPlayerOptions:function(){return a.app.constants.POSSIBLE_PLAYBACK_PLAYER_TIMEOUTS;},setMoralityLevel:function(F){a.platform.ca.ParentalControl.setUserRatingValue(F);a.platform.system.Preferences.set(a.app.constants.PREF_USER_RATING,String(F));A.updateVideoBlocker();},getMoralityLevel:function(){var F=a.platform.ca.ParentalControl.getUserRatingValue();return F;},isChannelLocked:function(F){return a.platform.ca.ParentalControl.isServiceIdRestricted(F);},isCurrentUserMaster:function(){return a.platform.ca.ParentalControl.isCurrentUserMaster();},clearChannelsAndPrefs:function(){a.platform.system.Device.deletePrefs(B);a.platform.btv.EPG.removeAllChannels();a.platform.btv.Favourites.deleteAll();a.app.ChannelManager.removeAllChannelsFromBlockedList();},setAudioFormat:function(F,G){a.platform.system.Device.setPreferredAudioChannels(F);a.platform.system.Preferences.set(a.app.constants.PREF_DEFAULT_AUDIO_FORMAT,G);},setHdVideoAspectMode:function(F,H){var G=a.platform.output.AV.setHDVideoAspectMode(F);if(!G){H=a.platform.output.AV.getHDVideoAspectMode();a.platform.output.AV.setHDVideoAspectMode(H);return false;}else{a.platform.system.Preferences.set(a.app.constants.PREF_DEFAULT_ASPECT_RATIO_HD,H);return true;}},setSdVideoAspectMode:function(F,H){var G=a.platform.output.AV.setAnalogueVideoAspectMode(F);if(!G){H=a.platform.system.Preferences.get(a.app.constants.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,true);a.platform.output.AV.setAnalogueVideoAspectMode(H);return false;}else{a.platform.system.Preferences.set(a.app.constants.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,H,true);return true;}},setAspectRatio:function(F,H){var G=a.platform.output.AV.setAspectRatio(F);if(!G){H=a.platform.system.Preferences.get(a.app.constants.PREF_ASPECT_RATIO,true);a.platform.output.AV.setAspectRatio(H);return false;}else{a.platform.system.Preferences.set(a.app.constants.PREF_ASPECT_RATIO,H,true);return true;}},setHdmiAudioType:function(G,F){if(F===a.app.constants.HDMI_AUDIO_PCM_STRING){a.platform.system.Preferences.set(a.app.constants.PREF_HDMI_AUDIO_TYPE,a.app.constants.HDMI_AUDIO_PCM,true);}else{a.platform.system.Preferences.set(a.app.constants.PREF_HDMI_AUDIO_TYPE,a.app.constants.HDMI_AUDIO_DOLBY,true);}a.app.AudioManager.setPreferredAudioType(G);return true;},setSpdifAudioType:function(G,F){if(F===a.app.constants.HDMI_AUDIO_PCM_STRING){a.platform.system.Preferences.set(a.app.constants.PREF_SPDIF_AUDIO_TYPE,a.app.constants.HDMI_AUDIO_PCM,true);}else{a.platform.system.Preferences.set(a.app.constants.PREF_SPDIF_AUDIO_TYPE,a.app.constants.HDMI_AUDIO_DOLBY,true);}a.platform.system.Preferences.set(a.app.constants.PREF_SPDIF_AUDIO_OUTPUT,F);return true;},setHdmiVideoResolution:function(F,G){var H=a.platform.output.AV.setResolution(F);if(!H){G=a.platform.system.Preferences.get(a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,true);a.platform.output.AV.setResolution(G);return false;}else{a.platform.system.Preferences.set(a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,G,true);return true;}},availableStandbyDurations:function(){return a.app.constants.POSSIBLE_STANDBY_DURATIONS;},setAudioDelay:function(){var F,G=a.platform.system.Preferences.get(a.app.constants.PREF_AUDIO_LIPSYNC_DELAY,true);if(G){F=parseInt(G,10);a.platform.output.AV.setAudioDelay(F);}},initialiseAVOptions:function(){var I=a.platform.system.Preferences.get(a.app.constants.PREF_DEFAULT_AUDIO_FORMAT),K=a.platform.system.Preferences.get(a.app.constants.PREF_ASPECT_RATIO,true),F=a.platform.output.AV.getHDVideoAspectMode(),H=a.platform.system.Preferences.get(a.app.constants.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,true),G=a.platform.system.Preferences.get(a.app.constants.PREF_HDMI_VIDEO_RESOLUTION,true),L=a.platform.system.Preferences.get(a.app.constants.PREF_HDMI_AUDIO_OUTPUT),J=a.platform.system.Preferences.get(a.app.constants.PREF_AUDIO_LIPSYNC_DELAY,true);if(I){a.platform.system.Device.setPreferredAudioChannels(g[I]);}if(K===a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3){this.setAspectRatio(a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3,K);}else{this.setAspectRatio(a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_16_9,K);}if(H===a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH){this.setSdVideoAspectMode(a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH,H);}else{this.setSdVideoAspectMode(a.platform.output.AV.VideoAspectMode.ANALOGUE_LETTER_BOX,H);}if(F===a.platform.output.AV.VideoAspectMode.HDMI_STRETCH){this.setHdVideoAspectMode(a.platform.output.AV.VideoAspectMode.HDMI_STRETCH,F);}else{this.setHdVideoAspectMode(a.platform.output.AV.VideoAspectMode.HDMI_PILLAR_BOX,F);}if(G===1){this.setHdmiVideoResolution(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480I,G);}else{if(G===2){this.setHdmiVideoResolution(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480P,G);}else{if(G===5){this.setHdmiVideoResolution(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_720P,G);}else{if(G===6){this.setHdmiVideoResolution(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080I,G);}else{if(G===7){this.setHdmiVideoResolution(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080P,G);}}}}}if(L===a.app.constants.HDMI_AUDIO_PCM){this.setHdmiAudioType(CCOM.System.HDMI_AUDIO_TYPE_PCM,L);}else{this.setHdmiAudioType(CCOM.System.HDMI_AUDIO_TYPE_DDPLUS,L);}if(J){this.setAudioDelay();}},cancelScan:function(){a.common.helper.ScanManager.stopScan();},getDefaultScanningParams:function(){if(a.app.DVBScanUtil.getIsDVBCTuner()){t();}else{f();}return h;},storeSdpPin:function(G){if(G){var F=a.platform.ca.PINHandler.getAccountMasterPin();if(!F||F!==G){a.platform.ca.PINHandler.setAccountMasterPin(G);a.platform.ca.PINHandler.setLocalMasterPin(G);a.platform.ca.PINHandler.setLocalSlavePin(G);}}},getAvailableNetworks:function(){return s;},getActionsForNetwork:x,getActionsForWifi:e,connectToWirelessNetwork:function(J,I,L,H,K,G,F){if(G){CCOM.IpNetwork.addEventListener("connectToWirelessNetworkOK",G);}if(F){CCOM.IpNetwork.addEventListener("connectToWirelessNetworkFailed",F);}CCOM.IpNetwork.connectToWirelessNetwork(J,I,L,H,K);},controlInterface:function(I,G,F,H){if(F){CCOM.IpNetwork.addEventListener("controlInterfaceOK",F);}if(H){CCOM.IpNetwork.addEventListener("controlInterfaceFailed",H);}CCOM.IpNetwork.controlInterface(I,G);},setWirelessConfig:function(H,F){var G=CCOM.IpNetwork.setWirelessConfig(H,F);},setInterfaceConfig:function(K,H,J,F,G){var I=CCOM.IpNetwork.setInterfaceConfig(K,H,J,F,G);},setIpAddressAndGateway:function(J,H,F,G){var I=CCOM.IpNetwork.setIpAddressAndGateway(J,H,F,G);},getVersion:function(){var F="",G=a.platform.system.Preferences.get("/system/softwareMajorVersion",true),I=a.platform.system.Preferences.get("/system/softwareMinorVersion",true),H=a.platform.system.Preferences.get("/system/softwareBuildType",true);if(G!==undefined&&I!==undefined&&H!==undefined){F=String(G)+"."+I+" "+H;}else{F="Unavailable";}return F;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.SystemUtil=(function(){var k=new a.apps.core.Log("Util","SystemUtil"),f=a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT,h=a.app.constants.FRONTPANEL_DISPLAY_MODES.DEFAULT,l=a.app.constants.FRONTPANEL_DISPLAY_MODES.STAND_BY,g=a.app.constants.FRONTPANEL_DISPLAY_MODES.PVR_PLAY_BACK,d=a.app.constants.FRONTPANEL_DISPLAY_MODES.MUSIC,c=null,o=null,r,m=null,p=null,e=false,n=(10*1000),s=a.app.StandardTimers.minuteTimer;function t(u){a.apps.dialog.DialogManager.hideDialogWithId("standByConfirmDialogue");if(u){if(u.action===true){if(c){clearTimeout(c);c=null;r.setAndRefreshStandbyTimer();}}}}function q(){if(c){clearTimeout(c);a.common.helper.PowerManager.enterStandby();}}function b(){if(o){clearTimeout(o);var u=new a.apps.dialog.ConfirmationDialogue("standByConfirmDialogue",r.getString("autoStandby"),r.getString("standByConfirmationMessage"),[{action:true,name:r.getString("cancel")}],t);a.app.DialogueHelper.displayDialogue(u,a.app.constants.DLG_STANDBY_CONFIRMATION,60000,null,t);c=setTimeout(q,60000);}}return{initialise:function(){a.apps.core.Language.adornWithGetString(this);r=this;},setAndRefreshStandbyTimer:function(){var u,v;if(o){clearTimeout(o);o=null;c=null;}u=parseInt(a.platform.system.Preferences.get(a.app.constants.PREF_AUTO_STANDBY),10);if(u!==-1){v=u*60000;o=setTimeout(b,(v-60000));}},doFactoryReset:function(){a.app.fullScreenPlayer.tuner.disconnect();a.platform.system.Preferences.set(a.app.constants.PREF_ISINSTALLED,"false");a.platform.system.Preferences.set(a.app.constants.PREF_NOW_DISCLAIMER_ACCEPTED,"false");CCOM.ConfigManager.setValue("/network/siconfig/scans/cable_persistent/enabled",false);CCOM.System.reset();}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.Reminders=(function(){var g=1,h=2,o=3,k=4,s=function(){},q=function(){},n=function(){},m=60,x=null,u=[],f={JOB_OP_STATE_CREATED:0,JOB_OP_STATE_CREATED_DELETING:1,JOB_OP_STATE_READY:2,JOB_OP_STATE_TASK_DELETING:3,JOB_OP_STATE_DELETED:4},l=new a.apps.core.Log("app","Reminders");function p(){return a.app.Reminders.getString("autoTune")+parseInt(m/60,10)+" "+a.app.Reminders.getString("tuneMinutes");}function r(A){var z,y;if(A&&A.action){switch(A.action){case g:y=a.platform.btv.EPG.getEventById(A.eventId);z=a.app.Reminders.getString("immediatelyTune")+"'"+y.title.replace(/^\s+|\s+$/g,"").replace(/(\r\n|\n|\r)/gm,"")+"'. "+a.app.Reminders.getString("selectToContinue");break;case h:z=p();break;case o:z=a.app.Reminders.getString("selectToCancel");break;}}if(z){u[A.eventId].customise({description:z});}}function v(z){var A=a.platform.btv.EPG.getEventById(z),y=A?a.app.epgUtil.getServiceById(A.serviceId):x;if(A){a.platform.btv.Reminders.cancelReminder(A);}if(a.apps.core.ContextManager.getActiveContext().getId()!=="ZAPPER"){y.showBanner=true;a.app.ContextHelper.openContext("ZAPPER",{activationContext:y});}else{a.apps.core.ContextManager.getActiveController().updateBannerAndTuneIfNeeded(y);}x=null;}function t(y){a.platform.btv.PVRManager.deleteJob(y);}function b(z){if(z&&z.action){switch(z.action){case g:v(z.eventId);t(z.jobId);break;case o:a.platform.btv.Reminders.cancelReminder(a.platform.btv.EPG.getEventById(z.eventId));break;case k:var y;for(y=0;y<z.tasks.length;y++){a.platform.btv.Reminders.cancelReminder(a.platform.btv.EPG.getEventById(z.tasks[y].eventId));}break;}}if(z&&z.eventId){u[z.eventId]=null;}}function d(y){if(y){var z=y.length,A;for(A=0;A<z;A++){if((y[A].action!==o)&&(y[A].action!==k)){t(y[A].jobId);}}}}function c(A){var D,y,C,F=a.app.Reminders.getString("titleReminders"),G=a.app.Reminders.getString("RemindersStartMessage"),H=[],E,z={name:a.app.Reminders.getString("cancelReminderMessage"),action:k,tasks:A},B;H.push(z);for(B=0;B<A.length;B++){D=a.app.epgUtil.getServiceById(A[B].serviceId);y=a.platform.btv.EPG.getEventById(A[B].eventId);C=(a.app.ParentalControlUtil.isChannelOrProgramLocked(y)&&(a.app.epgUtil.isAdultEvent(y)||a.app.genreUtil.isAdultChannel(D)))?a.app.Reminders.getString("adultContent"):A[B].title;H.push({name:C,action:g,eventId:A[B].eventId,jobId:A[B].jobId});}if(D){E=new a.apps.dialog.ConflictDialogue("autoTuneDialogue"+A[0].serviceId,F,G,H,b);u[A[0].serviceId]=E;E.setExitCallback(d);if(a.common.helper.PowerManager.getCurrentPowerMode()===a.common.helper.PowerManager.SYSTEM_POWER_NORMAL){a.app.DialogueHelper.displayDialogue(E,a.app.constants.DLG_AUTO_TUNE,m*1000,null,function(){v(A[0].eventId);u[A[0].serviceId]=null;q();});}}}function w(C){var B=0,z=0,A=[],y;for(y=0;y<C.length;y++){if(!C[y].eventId){B++;}else{if(C[y].eventId){z++;A.push(C[y]);}}}if(z>0){c(A);}else{if(z===0&&B>0){a.app.AutoTuneHelper.autoTuneConflictCallback(C);}}}function e(E){if(E.task.title===a.app.constants.FACEBOOK_FEATURE_AVAILABILITY_SCHEDULER_TITLE){a.app.SocialActivityFactory.getSocialAccountObject(a.app.SocialAccount.FACEBOOK).facebookFeatureAvailabilityCallback();}else{if(E.task.title===a.app.constants.FACEBOOK_TOKEN_RENEWAL_SCHEDULER_TITLE){a.app.SocialActivityFactory.getSocialAccountObject(a.app.SocialAccount.FACEBOOK).getTemporaryCodeFromServerCallback();}else{if(!E.task.eventId){a.app.AutoTuneHelper.autoTuneCallback(E);}else{var D=a.platform.btv.EPG.getEventById(E.task.eventId),y=a.app.epgUtil.getServiceById(E.task.serviceId),z=((a.app.ParentalControlUtil.isChannelOrProgramLocked(D)&&(a.app.epgUtil.isAdultEvent(D)||a.app.genreUtil.isAdultChannel(y)))?a.app.Reminders.getString("adultContent"):E.task.title),F=a.app.Reminders.getString("titleReminders"),C=a.app.Reminders.getString("RemindersStartMessage"),A=[{name:a.app.Reminders.getString("cancelReminderMessage"),action:o,eventId:E.task.eventId,jobId:E.task.jobId},{name:z,action:g,eventId:E.task.eventId,jobId:E.task.jobId}],B;if(a.common.helper.PowerManager.getCurrentPowerMode()!==a.common.helper.PowerManager.SYSTEM_POWER_NORMAL){return false;}if(y){B=new a.apps.dialog.ConfirmationDialogue("reminderDialogue"+E.task.serviceId,F,C,A,b,null,false);u[E.task.serviceId]=B;B.setExitCallback(d);if(a.common.helper.PowerManager.getCurrentPowerMode()===a.common.helper.PowerManager.SYSTEM_POWER_NORMAL){a.app.DialogueHelper.displayDialogue(B,a.app.constants.DLG_REMINDER,m*1000,null,function(){v(E.task.eventId);t(E.task.jobId);u[E.task.serviceId]=null;q();});}}}}}}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.Reminders);a.platform.btv.Reminders.init(a.app.constants.DEFAULT_REMINDER_TIME,e);a.platform.btv.Reminders.setGenericReminderConflictHandler(w);a.platform.btv.Reminders.setTaskOccuredCallback(function(y){if(x){v();}});this.setReminderDeleteOKCallback(function(){a.apps.util.EventManager.fire("genericReminderJobUpdated");});this.setReminderDeleteFailedCallback(function(){a.apps.util.EventManager.fire("genericReminderJobUpdated");});},setShowDialogCallback:function(y){s=y;},setDialogTimedOutCallback:function(y){q=y||function(){};},setcancelReminderdialogTimedOutCallback:function(y){n=y||function(){};},setReminderDeleteOKCallback:function(y){a.platform.btv.PVRManager.addEventListener("deleteJobOK",y);},setReminderDeleteFailedCallback:function(y){CCOM.Scheduler.addEventListener("deleteJobFailed",y);},setReminders:function(I,M){var C,z,K,L,F={},B,A,J="ONE_TIME",G=1,H=60000,y,E,D;C=I.startTime-H;K=I.title;L=I.serviceId;z=a.app.epgUtil.getServiceById(I.serviceId).uri;y=I.eventId;A=J;E=I.parentalRating;D=I.episodeId;B={eventId:y,serviceId:L,sourceURL:z,startTime:C,duration:G,title:K,extraInfo:JSON.stringify({parentalRating:E,episodeId:D})};if(a.gui.GUIObject.mode!=="HTML"){if(I.source===a.data.EPGEvent.SOURCE.MDS){a.app.epgUtil.addMdsEventToEPG(I,function(){a.platform.btv.Reminders.setGenericReminder(A,B,M);},function(N){});}else{a.platform.btv.Reminders.setGenericReminder(A,B,M);}}},getAllActiveReminders:function(){var y="jobId,serviceId,startTime,extraInfo,eventId,title";return a.platform.btv.PVRManager.getAllTimedReminders("eventId IS NOT NULL AND jobOpState>="+String(f.JOB_OP_STATE_CREATED)+" AND jobOpState<="+String(f.JOB_OP_STATE_READY),y);},reminderCallback:e};}());}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.AutoTuneHelper=(function(){var m=1,s=2,n=3,t=function(){},w=60000,v=[],l=" ",p={frequency:null,date:null,time:null,channel:null,jobId:null,isPresentTime:true},g={JOB_OP_STATE_CREATED:0,JOB_OP_STATE_CREATED_DELETING:1,JOB_OP_STATE_READY:2,JOB_OP_STATE_TASK_DELETING:3,JOB_OP_STATE_DELETED:4};function x(B,C){var y=a.app.epgUtil.getServiceById(B),A={},z={};a.app.epgUtil.storeChannelToPrefs(B);if(!C){if(a.apps.core.ContextManager.getActiveContext().getId()!=="ZAPPER"){y.showBanner=true;a.app.ContextHelper.openContext("ZAPPER",{activationContext:y});}else{a.apps.core.ContextManager.getActiveController().updateBannerAndTuneIfNeeded(y);}}else{A={casId:(y.conditionalAccessIDs)?y.conditionalAccessIDs[0]:null};z={url:y.uri,isLive:true,isMusic:a.platform.btv.EPG.isRadioChannel(y),serviceId:y.serviceId};a.app.fullScreenPlayer.requestPlayout(z,true,A);}}function u(y){a.platform.btv.PVRManager.deleteJob(y);}function b(A){var y,z;if(A&&A.action){switch(A.action){case m:x(A.eventId);if("once"===A.autoTuneType){u(A.jobId);}break;case s:if("once"===A.autoTuneType){u(A.jobId);}break;case n:for(y=0;y<A.tasks.length;y++){z=a.app.GeneralUtil.ParseJSON(y.tasks[y].extraInfo);if(z&&z.jobType&&"once"===z.jobType){u(A.tasks[y].jobId);}}break;}}if(A&&A.eventId){v[A.eventId]=null;}}function c(y){if(y){var z=y.length,A;for(A=0;A<z;A++){if((y[A].action!==s)&&(y[A].action!==n)){if("once"===y[A].autoTuneType){u(y[A].jobId);}}}}}function d(B){var A=a.app.epgUtil.getServiceById(B.task.serviceId),E=a.app.AutoTuneHelper.getString("menuAutoTune"),D=new Date(B.task.startTime+w),F=a.app.AutoTuneHelper.getString("autoTuneStartMessageWithTime")+a.app.DateTimeUtil.getFormattedTimeString(D,a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT)+a.app.AutoTuneHelper.getString("autoTuneSelectMessage"),y=a.app.GeneralUtil.ParseJSON(B.task.extraInfo),z=(y&&y.jobType)?y.jobType:"",G=[{name:a.app.AutoTuneHelper.getString("menuAutoTuneChannel")+l+a.app.GeneralUtil.padNumberWithZeroes(A.logicalChannelNum,3)+l+A.serviceName,action:m,eventId:B.task.serviceId,jobId:B.task.jobId,autoTuneType:z},{name:a.app.AutoTuneHelper.getString("cancelAutoTuneMessage"),action:s,eventId:B.task.serviceId,jobId:B.task.jobId,autoTuneType:z}],C;if(A){C=new a.apps.dialog.ConfirmationDialogue("autoTuneDialogue"+B.task.jobId,E,F,G,b,null,false);v[B.task.jobId]=C;C.setExitCallback(c);if(a.common.helper.PowerManager.getCurrentPowerMode()===a.common.helper.PowerManager.SYSTEM_POWER_STANDBY){a.common.helper.PowerManager.wakeUp();}a.app.DialogueHelper.displayDialogue(C,a.app.constants.DLG_AUTO_TUNE_START,w,null,function(){x(B.task.serviceId);v[B.task.jobId]=null;t();});}}function f(z){var B,E=a.app.AutoTuneHelper.getString("menuAutoTune"),D=new Date(z[0].startTime+w),F=a.app.AutoTuneHelper.getString("autoTuneStartMessageWithTime")+a.app.DateTimeUtil.getFormattedTimeString(D,a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT)+a.app.AutoTuneHelper.getString("autoTuneSelectMessage"),G=[],C,A,y;G.push({name:a.app.AutoTuneHelper.getString("cancelAutoTuneMessage"),action:n,tasks:z});for(A=0;A<z.length;A++){B=a.app.epgUtil.getServiceById(z[A].serviceId);y=a.app.GeneralUtil.ParseJSON(z[A].extraInfo);G.push({name:a.app.AutoTuneHelper.getString("menuAutoTuneChannel")+l+a.app.GeneralUtil.padNumberWithZeroes(B.logicalChannelNum,3)+l+B.serviceName,action:m,eventId:z[A].serviceId,jobId:z[A].jobId,autoTuneType:(y&&y.jobType)?y.jobType:""});}if(B){C=new a.apps.dialog.ConflictDialogue("autoTuneDialogue"+z[0].jobId,E,F,G,b);v[z[0].jobId]=C;C.setExitCallback(c);if(a.common.helper.PowerManager.getCurrentPowerMode()===a.common.helper.PowerManager.SYSTEM_POWER_STANDBY){a.common.helper.PowerManager.wakeUp();}a.app.DialogueHelper.displayDialogue(C,a.app.constants.DLG_AUTO_TUNE_CONFLICT,w,null,function(){x(z[0].serviceId);v[z[0].jobId]=null;t();});}}function o(y,z,A){a.platform.btv.Reminders.setGenericReminder(y,z,A);}function e(){var y=a.app.epgUtil.getServiceById(a.app.epgUtil.getChannelFromPrefs());p={frequency:"once",date:a.apps.util.Util.formatDate(new Date(),"dd/mm/yyyy"),time:a.app.DateTimeUtil.getFormattedTimeString(new Date(),a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT),channelInfo:y,logicalChannelNum:y.logicalChannelNum,channel:a.app.FormatUtils.formatChannelNumber(y.logicalChannelNum)+" "+y.serviceName,jobId:null,isPresentTime:true};}function q(z,y){p[z]=y;}function k(y){return p[y];}function h(){return p;}function r(){var y="jobId,serviceId,startTime,extraInfo";return a.platform.btv.PVRManager.getAllTimedReminders("eventId IS NULL AND serviceId IS NOT NULL AND jobOpState>="+String(g.JOB_OP_STATE_CREATED)+" AND jobOpState<="+String(g.JOB_OP_STATE_READY),y);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.AutoTuneHelper);},setDialogTimedOutCallback:function(y){t=y||function(){};},setAutoTuneDeleteOKCallback:function(y){a.platform.btv.PVRManager.addEventListener("deleteJobOK",y);},autoTuneCallback:d,setAutoTune:o,cancelAutoTune:u,resetAutoTuneProperties:e,setAutoTuneProperty:q,getAutoTuneProperty:k,getAllAutoTuneProperties:h,getAllActiveAutoTune:r,autoTuneConflictCallback:f,tuneToChannel:x};}());}($N||{}));(function(a){a.app=a.app||{};a.app.RemindersMock=(function(c){var b=120,m=function(){},q=function(){},n=null,g=[],f=[],l=[];function k(r){if(g[r]){clearTimeout(g[r]);}}function p(s){var r;k(s);f[s]=null;}function e(r,s){if(!s){s=n*1000;}k(r);g[r]=setTimeout(function(){q({task:{eventId:r}});p(r);},s);}function o(r,s){g[r]=setTimeout(function(){m({task:{eventId:r}});e(r);},s);}function d(){var r;for(r=0;r<l.length;r++){l[r].listener.call(l[r].callFunc);}}function h(s){var t=c.platform.btv.EPG.getEventById(s),u=0,r=n*1000;if(t){u=t.startTime-new Date().getTime()-r;if(u>0){f[s]=true;d();o(s,u);}}}return{init:function(t,r,s){n=t||b;if(r){this.setReminderCallback(r);}},setReminderCallback:function(r){m=r;},setTaskOccuredCallback:function(r){q=r;},setReminder:function(r){if(!this.isReminderSetForEventId(r)){h(r);}},cancelReminder:function(r){if(r){p(r);}},isReminderSetForEventId:function(r){if(f[r]){return true;}return false;},registerUIRefreshListener:function(s,r){l.push({listener:s,callFunc:r});},unregisterUIRefreshListener:function(s){var r;for(r=0;r<l.length;r++){if(l[r].listener===s){l.splice(r,1);break;}}},setAutoTunePlayer:function(r){}};}(a||{}));}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.Conflicts=(function(){var g=new $N.apps.core.Log("HELPER","Conflicts"),n=$N.apps.dialog.DialogManager,h=$N.platform.btv.PVRManager,k=$N.app.PVRUtil,p=function(){};function c(r){if($N.app.PVRUtil.isTaskBlockedTitle(r)){return $N.app.PVRUtil.getString("adultContent");}else{if($N.app.ManualRecordingHelper.isManualRecordingTask(r)){var q=$N.platform.btv.EPG.getChannelByServiceId(r.serviceId);return q.serviceName;}else{return r.title;}}}function d(q,r){return new $N.apps.dialog.ConflictDialogue("conflictResolutionDialogue",$N.app.Conflicts.getString("cancelSpecificRecordingTitle"),$N.app.Conflicts.getString("cancelSpecificRecordingMessage"),q,r,null,null,$N.gui.FixedList.consts.ORIENTAION_VERTICAL);}function o(r,u){var s=[],q=$N.app.Conflicts.getString("cancelSpecificRecordingStub")+' "',v=r.length,t;for(t=0;t<v;t++){s.push({name:q+c(r[t])+'"',action:t});}if(u===k.RECORD_CONFLICT_WITH_RE_TUNE){s.push({name:$N.app.Conflicts.getString("reTuneTo")+c(r[0]),action:t});}else{if(u===k.RECORD_CONFLICT_WITH_VOD_RE_TUNE){s.push({name:$N.app.Conflicts.getString("stopPlaybackAndTuneTo")+c(r[0]),action:t});}else{if(u===k.WATCH_CONFLICT){s.push({name:$N.app.Conflicts.getString("doNotTune"),action:t});}else{if(u===k.VOD_PLAYBACK_CONFLICT){s.push({name:$N.app.Conflicts.getString("cancelPlayback"),action:t});}}}}return s;}function f(r,s,q){h.cancelRecordingByTask(r);if(q){$N.app.AutoTuneHelper.tuneToChannel(s);}}function b(w,q,r,t,x,s){var z=w.action<r.length,u=r[w.action]?r[w.action].eventId:0,v=u?$N.app.EventUtil.isEventPlayingNow($N.platform.btv.EPG.getEventById(u)):false,y=w.action&&w.action===1?0:1;if(t===k.WATCH_CONFLICT){if(z){if($N.apps.core.ContextManager.getActiveContext().getId()==="MOSAIC"||$N.apps.core.ContextManager.getActiveContext().getId()==="MUSIC"){h.cancelRecordingByTask(r[w.action]);x();}else{f(r[w.action],q.serviceId,true);}}else{if(s){s();}}}else{if((t===k.RECORD_CONFLICT_WITH_RE_TUNE||t===k.RECORD_CONFLICT_WITH_VOD_RE_TUNE)&&x){if(z){f(r[w.action],r[y].serviceId,v);x();}else{$N.app.AutoTuneHelper.tuneToChannel(r[0].serviceId);}}else{if(t===k.VOD_PLAYBACK_CONFLICT){if(z){h.cancelRecordingByTask(r[w.action]);x();}}else{f(r[w.action],r[y].serviceId,v);}}}}function m(r,s,w,x,t){var y=o(s,w),v,q,u;u=function(){var z;if(w===k.RECORD_CONFLICT){z=s.pop();h.cancelRecordingByTask(z);}else{if(w===k.RECORD_CONFLICT_WITH_RE_TUNE||w===k.RECORD_CONFLICT_WITH_VOD_RE_TUNE||w===k.WATCH_CONFLICT){$N.app.AutoTuneHelper.tuneToChannel(s[0].serviceId);}}};q=function(z){if(z){b(z,r,s,w,x,t);}else{u();$N.apps.dialog.DialogManager.hideDialog(v);}};v=d(y,q);v.setExitCallback(u);$N.app.DialogueHelper.displayDialogue(v,$N.app.constants.DLG_CONFLICT_RESOLUTION,n.DEFAULT_AUTO_CLOSE_TIMEOUT,p,u);}function l(t,q){var s=q.length,r;for(r=0;r<s;r++){if(t===q[r].serviceId){return true;}}return false;}function e(t,v,q){var w=1.5*$N.app.constants.MINUTE_IN_MS,s=t[0],r=$N.platform.btv.EPG.getEventById(s.eventId),A=($N.app.Config.getConfigValue("faked.playback")==="true")?($N.app.StringUtil.isStringStartsWith($N.app.fullScreenPlayer.getSource(),"rtsp://")||($N.app.fullScreenPlayer.getSource()===$N.app.Config.getConfigValue("faked.playback.serviceUri"))):($N.app.StringUtil.isStringStartsWith($N.app.fullScreenPlayer.getSource(),"rtsp://")),z=(((r.startTime-w)<=Date.now())&&((r.endTime+w)>=Date.now())),x,y=k.RECORD_CONFLICT,u=[];u=v.concat(t);$N.app.ArrayUtil.sortAndRemoveDuplicates(u,$N.app.SortUtil.compareTasks);if(A){y=k.RECORD_CONFLICT_WITH_VOD_RE_TUNE;}else{if(z){x=$N.apps.core.ContextManager.getDefaultContext().getController().getCurrentServiceId();if(!l(x,u)){y=k.RECORD_CONFLICT_WITH_RE_TUNE;}}}$N.app.Conflicts.showConflictDialog(r,u,y,q);}function a(r){var q=$N.app.constants.CA_PLAY_ERRORS.contentStartFailedReason;if(r&&r.contentStartFailedInfo){switch(r.contentStartFailedInfo.reason){case q.LACK_OF_RESOURCES:case q.CONFLICT:return true;}}return false;}return{initialise:function(){$N.apps.core.Language.adornWithGetString($N.app.Conflicts);},setDialogShownCallback:function(q){if(q){p=q;}else{p=function(){};}},onRecordingFailed:function(r,q){$N.apps.core.ContextManager.dismissPreview();$N.app.Conflicts.recordingRequestConflictsCallback(r,q,function(){});},recordingRequestConflictsCallback:e,showConflictDialog:m,isConflictError:a};}());(function(a){a.app=a.app||{};a.app.ErrorMessageType={noSignal:"noSignal",wifiDisconnected:"wifiDisconnected",conditionalAccessError:"conditionalAccessError",reconnecting:"reconnecting",deviceLost:"deviceLost",usbMedia:"usbMedia",noVideo:"noVideo",renewalIp:"renewalIp",saveFavoritesError:"saveFavoritesError",savingFavorites:"savingFavorites",fetchingFavoritesError:"fetchingFavoritesError",saveBlockChannelsError:"saveBlockChannelsError",folderNameExists:"folderNameExists",noFolderName:"noFolderName",reminderDeleteError:"reminderDeleteError",purchasePinChangeSuccess:"purchasePinChangeSuccess",parentalPinChangeSuccess:"parentalPinChangeSuccess",pinMismatch:"pinMismatch",pinChangeFailure:"pinChangeFailure",authenticationFailure:"authenticationFailure",invalidDate:"invalidDate",invalidTime:"invalidTime",facebookPinChangeSuccess:"facebookPinChangeSuccess",facebookPinChangeFailure:"facebookPinChangeFailure",facebookPinMismatch:"facebookPinMismatch",facebookAccountAuthorised:"facebookAccountAuthorised",authFacebookAccountTitle:"authFacebookAccountTitle",authenticationSuccess:"authenticationSuccess",accountLinked:"accountLinked",postToWall:"postToWall",authorisationError:"authorisationError",usbWaitingDialog:"usbWaitingDialog",errorCode:"errorCode"};a.app.ErrorMessage=(function(){var R=function(){},N=function(){a.app.ErrorMessage.hideDialog();},F=N,e=null,L=a.app.ErrorMessageType.noSignal,ao=a.app.ErrorMessageType.wifiDisconnected,d=a.app.ErrorMessageType.conditionalAccessError,ay=a.app.ErrorMessageType.reconnecting,Z=a.app.ErrorMessageType.deviceLost,aJ=a.app.ErrorMessageType.usbMedia,M=a.app.ErrorMessageType.noVideo,aq=a.app.ErrorMessageType.renewalIp,aK=a.app.ErrorMessageType.saveFavoritesError,G=a.app.ErrorMessageType.saveBlockChannelsError,ae=a.app.ErrorMessageType.savingFavorites,ak=a.app.ErrorMessageType.fetchingFavoritesError,g=a.app.ErrorMessageType.folderNameExists,q=a.app.ErrorMessageType.invalidDate,c=a.app.ErrorMessageType.invalidTime,aH=a.app.ErrorMessageType.noFolderName,ar=a.app.ErrorMessageType.reminderDeleteError,h=a.app.ErrorMessageType.purchasePinChangeSuccess,f=a.app.ErrorMessageType.parentalPinChangeSuccess,C=a.app.ErrorMessageType.pinChangeFailure,u=a.app.ErrorMessageType.pinMismatch,t=a.app.ErrorMessageType.authenticationFailure,x=a.app.ErrorMessageType.facebookPinChangeSuccess,ac=a.app.ErrorMessageType.facebookPinChangeFailure,aD=a.app.ErrorMessageType.facebookPinMismatch,Q=a.app.ErrorMessageType.facebookAccountAuthorised,z=a.app.ErrorMessageType.authFacebookAccountTitle,aL=a.app.ErrorMessageType.authenticationSuccess,n=a.app.ErrorMessageType.accountLinked,af=a.app.ErrorMessageType.postToWall,aG=a.app.ErrorMessageType.usbWaitingDialog,av=false,aa=false,an=null,ap=2,ax=null,al=null,at=null;function aA(){av=false;an=null;}function aE(aN,aP,aO,aM){a.app.DialogueHelper.createAndShowDialogue(aN,aP,aO,null,F,null,null,aM,null,true);av=true;ax=aP;al=aO;an=a.app.DialogueHelper.mapDialogueID(aN);}function am(aS,aR,aQ,aM,aP){if(!an){var aN=[{name:a.app.HotPlug.getString("ok"),action:ap}],aO=new a.apps.dialog.ConfirmationDialogue(aS,aR,aQ,aN,F,null,null,null,aM);if(aP!==undefined){aO._dialogGUIObject.setErrorCode(a.app.DialogueHelper.getString("errorCode")+aP);}a.app.DialogueHelper.displayDialogue(aO,a.apps.dialog.DialogManager.LOW_PRIORITY,0,R);av=true;ax=aR;al=aQ;an=aS;}}function ai(){var aM={};aM.title=ax;aM.subtitle=al;aM.id=an;return aM;}function I(aM,aN){if(!an){aa=true;a.app.DialogueHelper.createAndShowDialogue(aM,null,aN,[],R);av=true;an=a.app.DialogueHelper.mapDialogueID(aM);}}function W(aM){if(aM){F=aM;}else{F=function(){};}}function r(aM){if(an===aM){a.apps.dialog.DialogManager.hideDialogWithId(an);aA();W(N);return true;}}function T(){aE(a.app.constants.DLG_RECONNECTING,a.app.ErrorMessage.getString("playbackDisrupted"),a.app.ErrorMessage.getString("attemptingReconnect"));}function D(){an=null;var aN=a.app.ErrorMessage.getString("errorTitle"),aM=a.app.ErrorMessage.getString("noFolderName");W(null);am(aH,aN,aM);}function Y(){an=null;var aN=a.app.ErrorMessage.getString("errorTitle"),aM=a.app.ErrorMessage.getString("couldnotDeleteReminder");W(null);am(ar,aN,aM);}function b(aM){if(aM==="master"){aE(a.app.constants.DLG_PARENTAL_PIN_CHANGE,a.app.ErrorMessage.getString("parentalPinChangeSuccess"),null);}else{if(aM==="purchase"){aE(a.app.constants.DLG_PURCHASE_PIN_CHANGE,a.app.ErrorMessage.getString("purchasePinChangeSuccess"),null);}}}function y(){if(an===C){a.apps.dialog.DialogManager.hideDialogWithId(C);aA();W(N);}}function X(){var aN=a.app.ErrorMessage.getString("errorTitle"),aM=a.app.ErrorMessage.getString("pinChangeFailure");W(y);am(C,aN,aM);}function l(){if(an===aD){a.apps.dialog.DialogManager.hideDialogWithId(aD);aA();W(N);}}function au(){var aO=a.app.ErrorMessage.getString("errorTitle")+" "+a.app.ErrorMessage.getString("facebookPinMismatch"),aN=a.app.ErrorMessage.getString("facebookPinMismatchTip"),aM="customise/resources/images/%RES/icons/fb_icon.png";W(l);am(aD,aO,aN,aM);}function U(){var aO=a.app.ErrorMessage.getString("authFacebookAccountTitle"),aN=a.app.StringUtil.join("",[a.app.ErrorMessage.getString("authenticationSuccess"),"\n","\n",a.app.ErrorMessage.getString("accountLinked"),a.app.ErrorMessage.getString("postToWall")]),aM="customise/resources/images/%RES/icons/fb_icon.png";am(Q,aO,aN,aM);}function v(aO){var aP=a.app.ErrorMessage.getString("authFacebookAccountTitle"),aN=a.app.StringUtil.join("",[a.app.ErrorMessage.getString("authorisationError"),a.app.ErrorMessage.getString("errorCode"),aO.toString()]),aM="customise/resources/images/%RES/icons/fb_icon.png";am(Q,aP,aN,aM);}function S(){if(an===x){a.apps.dialog.DialogManager.hideDialogWithId(x);aA();W(N);}}function o(){var aN=a.app.ErrorMessage.getString("facebookPinChangeSuccess"),aM="customise/resources/images/%RES/icons/fb_icon.png";W(S);am(x,aN,null,aM);}function aC(){if(an===ac){a.apps.dialog.DialogManager.hideDialogWithId(ac);aA();W(N);}}function ag(){var aN=a.app.ErrorMessage.getString("errorTitle"),aM=a.app.ErrorMessage.getString("facebookPinChangeFailure");W(aC);am(ac,aN,aM);}function aB(){if(an===t){a.apps.dialog.DialogManager.hideDialogWithId(t);aA();W(N);}}function A(aM){var aO=a.app.ErrorMessage.getString("errorTitle"),aN=a.app.ErrorMessage.getString("authenticationFailure");W(aM||aB);am(t,aO,aN);}function P(){if(an===u){a.apps.dialog.DialogManager.hideDialogWithId(u);aA();W(N);}}function aI(aM){W(function(){P();if(aM){aM();}});aE(a.app.constants.DLG_PIN_MISMATCH,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("pinMisMatch"));}function E(){an=null;var aN=a.app.ErrorMessage.getString("errorTitle"),aM=a.app.ErrorMessage.getString("folderNameExists");W(null);am(g,aN,aM);}function J(aM){an=null;W(aM);aE(a.app.constants.DLG_INVALID_DATE,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("invalidDate"));}function B(aM){an=null;W(aM);aE(a.app.constants.DLG_INVALID_TIME,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("invalidTime"));}function ah(){I(a.app.constants.DLG_IP_RENEWAL,a.app.ErrorMessage.getString("ipRenewalText"));}function p(){I(a.app.constants.DLG_USB_WAITING,a.app.ErrorMessage.getString("USBWaitingText"));}function ab(){if(an===ay){r(ay);}aE(a.app.constants.DLG_WIFI_DISCONNECTED,a.app.ErrorMessage.getString("noWifiConnectivity"),a.app.ErrorMessage.getString("navigateNetworkMenu"));}function s(){if(an===ao){a.apps.dialog.DialogManager.hideDialogWithId(ao);aA();}}function O(){var aN=a.app.ErrorMessage.getString("currentDeviceLost"),aM=a.app.ErrorMessage.getString("checkServer");am(Z,aN,aM);}function aj(){if(an===Z){a.apps.dialog.DialogManager.hideDialogWithId(Z);aA();}}function aF(){r(G);aE(a.app.constants.DLG_SAVE_BLOCKED_CHANNELS,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("couldnotSaveBlockChannels"));}function m(){aE(a.app.constants.DLG_SAVE_FAVOURITES_ERROR,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("couldnotSaveFavorites"));}function ad(){I(a.app.constants.DLG_SAVING_FAVOURITES,a.app.ErrorMessage.getString("savingPleaseWait"));}function k(){if(an===ae){a.apps.dialog.DialogManager.hideDialogWithId(ae);aA();}}function H(){aE(a.app.constants.DLG_FETCHING_FAVORITES_ERROR,a.app.ErrorMessage.getString("errorTitle"),a.app.ErrorMessage.getString("favoriteListNotAvailable"));}function az(){aa=false;}function w(){return aa;}function V(){if(e){clearTimeout(e);e=null;}e=setTimeout(function(){if(an===L){r(L);}if(!a.app.fullScreenPlayer.isPlayerConnectFailed()&&(a.apps.core.ContextManager.getActiveContext().getId()==="ZAPPER")){at();}else{clearTimeout(e);e=null;V();}},a.app.constants.NO_TUNER_LOCK_CHANNEL_RETUNE_TIMEOUT);}at=function(){if(a.apps.core.ContextManager.getActiveContext().getId()==="ZAPPER"){a.apps.core.ContextManager.getActiveController().showNoSignalDialogue();}else{V();}a.app.fullScreenPlayer.tuner.hideVideo();};function aw(){a.apps.util.EventManager.fire("HideNoSignalDialogue");if(e){clearTimeout(e);e=null;}r(L);a.app.fullScreenPlayer.tuner.showVideo();}function K(){var aN=a.app.ErrorMessage.getString(a.app.DialogueHelper.mapDialogueID(a.app.constants.DLG_CHANNEL_UNSUBSCRIBED)+"Title"),aM=a.app.ErrorMessage.getString(a.app.DialogueHelper.mapDialogueID(a.app.constants.DLG_CHANNEL_UNSUBSCRIBED)+"Message");a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_CHANNEL_UNSUBSCRIBED,aN,aM);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.ErrorMessage);},registerListeners:function(){a.app.fullScreenPlayer.tuner.registerQosDegradedListener(at);a.app.fullScreenPlayer.tuner.registerQosImprovedListener(aw);a.app.NetworkUtil.registerEthernetStateChangeCallbacks();},showErrorDialog:function(aM){if(!an){switch(aM){case L:at();break;case ao:ab();break;case d:setTimeout(K,1);break;case ay:T();break;case aq:ah();break;case aK:m();break;case ae:ad();break;case ak:H();break;case G:aF();break;case g:E();break;case q:J();break;case c:B();break;case aH:D();break;case ar:Y();break;case aG:p();break;}}},hideDialog:function(){var aM=false;if(an){aM=r(an);if(!aM){switch(an){case L:aw();break;case ao:s();break;case Z:aj();break;case ae:k();break;}}}},setOptionSelectedCallback:W,setDialogShownCallback:function(aM){if(aM){R=aM;}else{R=function(){};}},keyHandler:function(aM){if(aa){return true;}return false;},isErrorMessageDisplayed:function(){return av;},showWifiDisconnectedDialog:ab,hideWifiDisconnectedDialog:s,showDeviceLostdDialog:O,showErrorMessageDialog:am,getAnyProgress:w,resetBlockingUI:az,showIpRenewalDialog:ah,showSaveFavoritesErrorDialog:m,showSavingFavoritesDialog:ad,hideSavingFavoritesDialog:k,showFavoritesFetchErrorDialog:H,showSaveBlockChannelsErrorDialog:aF,showDuplicateFolderNameDialog:E,showNoFolderNameDialog:D,showReminderDeleteFailedDialog:Y,showPinChangeSuccessDialog:b,showPinMismatchDialog:aI,hidePinMismatchDialog:P,showPinChangeFailureDialog:X,hidePinChangeFailureDialog:y,showAuthenticationFailureDialog:A,hideAuthenticationFailureDialog:aB,showInvalidDateDialog:J,showInvalidTimeDialog:B,hideFacebookPinChangeSuccessDialog:S,showFacebookPinChangeSuccessDialog:o,hideFacebookPinChangeFailureDialog:aC,showFacebookPinChangeFailureDialog:ag,hideFacebookPinMismatchDialog:l,showFacebookPinMismatchDialog:au,hideErrorMessageDialogWithId:r,showFacebookAccountAuthorisedDialog:U,showFacebookAccountAuthorisationErrorDialog:v,getCurrentErrorMessageObject:ai,showNoSignalDialogue:at,hideNoSignalDialogue:aw,showUsbWaitingDialog:p};}());}($N||{}));(function(a){a.app=a.app||{};a.app.DateTimeUtil=(function(){var l=new a.apps.core.Log("Helper","DateTimeUtil"),g=a.app.constants.TWELVE_HOUR_TIME_FORMAT,b=a.app.constants.DAY_MONTH_YEAR_DATE_FORMAT,F=a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT,G=86400000,d=10,I,C,x,r,c,M,s,u,P,v,k,O,A,q,f,o,y,h,w,p,J,e,E,D,z,N,K,n,B;I=function(Q){return Q*1000;};C=function(Q){return(Number(Q)===1)?a.app.DateTimeUtil.getString("minute"):a.app.DateTimeUtil.getString("minutes");};x=function(Q){return parseInt(Q,10)*60000;};r=function(){var Q={am:a.app.DateTimeUtil.getString("am"),pm:a.app.DateTimeUtil.getString("pm")};return Q;};c=function(R,Q){Q=Q||g;return a.apps.util.Util.formatTime(R,Q,r());};M=function(Q,R){R=R||b;return a.apps.util.Util.formatDate(Q,R);};u=function(S,V){var Y,T,Q="",R=false,X=0,U,W;if(!V){V=V||":";}Y=S.split(".");T=Y[0].split(V);W=T.length;if(W>=2){for(U=0;U<W;U++){if(R){Q=Q+":"+T[U];X++;}else{if(parseInt(T[U],10)){Q=parseInt(T[U],10);R=true;X++;}}}if(X>=2){return Q;}else{return"00:"+Q;}}else{return S;}};v=function(S){var R;function Q(T){if(T<10){T="0"+T;}return T;}if(typeof S==="string"){R=new Date(parseInt(S,10));}else{if(typeof S==="number"){R=new Date(S);}else{return null;}}return Q(R.getDate())+"/"+Q((R.getMonth()+1))+", "+Q(R.getHours())+":"+Q(R.getMinutes());};k=function(Q){var S,R;S=a.apps.util.Util.formatDate(Q,"DY DD/MM",null,null,null,a.app.ClockDisplay.getString("shortDays"));R=a.apps.util.Util.formatTime(Q,"HH:MM");return S+", "+R;};P=function(S){var Q=Math.floor(S/3600000),R=Math.floor(S/60000)-Math.round(Q*60),T=Math.floor(S/1000)-Math.round(R*60),U="";if(S===0){return"";}if(Q>0){U+=String(Q)+" "+a.app.DateTimeUtil.getString("hoursShort")+" ";}if(R===1){U+=String(R)+" "+a.app.DateTimeUtil.getString("min")+" ";}else{U+=String(R)+" "+a.app.DateTimeUtil.getString("mins")+" ";}if(Q<1){if(T===1){U+=String(T)+" "+a.app.DateTimeUtil.getString("sec");}else{U+=String(T)+" "+a.app.DateTimeUtil.getString("secs");}}return U;};O=function(Q){Q=a.apps.util.Util.formatTime(Q,g);Q=Q.split(" ");return Q[0];};s=function(S,Q,T){Q=Q||b;T=T||F;var R="";if(S){R+=a.apps.util.Util.formatDate(new Date(S),Q)+" ";R+=a.apps.util.Util.formatTime(new Date(S),T);}return R;};A=function(R){var S,Q;R=a.apps.util.Util.formatTime(R,g);S=R.split(":");Q=S[1].split(" ");if(Q[0]==="00"){return S[0]+" "+Q[1];}return R;};q=function(R,Q,S){return c(R,S)+" - "+c(Q,S);};f=function(Q){var S=a.app.GeneralUtil.padNumberWithZeroes,R=Q.getMonth()+1;return S(Q.getDate(),2)+"/"+S(R,2);};w=function(T){var Q=new Date(parseInt(T,10)),S=a.app.DateTimeUtil.getString("days")[Q.getDay()],R=c(Q);return S+", "+R;};p=function(R){var Q=new Date(parseInt(R,10));return a.apps.util.Util.formatDate(Q,"MONTH DD, YYYY");};J=function(S,R){var Q=new Date(parseInt(S,10));return c(Q,R);};z=function(Q){return(Q===0);};N=function(R){var Q=new Date(parseInt(R,10));return(Q>new Date());};K=function(Q){return(Q>0&&Q<7);};n=function(Q){return(Q>6);};D=function(S){var R=new Date(S),Q=S-R.setHours(0,0,0,0);R=null;return S-Q;};E=function(Q){return parseInt(Math.abs(D(Date.now())-D(Q))/G,d);};e=function(R){var Q,T=E(R),S="";if(!z(T)){Q=new Date(R);if(K(T)){S=a.app.DateTimeUtil.getString("days")[Q.getDay()];}else{if(n(T)){S=a.apps.util.Util.formatDate(Q,"DD/MM/YYYY");}}Q=null;}return S;};o=function(Q){var R;R=new Date(Q);return a.apps.util.Util.formatDate(R,"DD MONTH YYYY");};h=function(Q){var R;R=new Date(Q);return a.apps.util.Util.formatDate(R,"DD/MM");};y=function(Q){var R;R=new Date(Q);return a.apps.util.Util.formatDate(R,"MM/YYYY");};B=function(U){var T=a.app.DateTimeUtil,R=new Date(U),V=f(R),S=c(R,"HH:MM"),Q;if(!U){return"";}return T.getString("recordedOn")+V+T.getString("at")+S;};function t(R){var Q=(!((R%4)&&(R%100))||(R%400===0));return Q;}function L(R,S,Q){var T=[31,28,31,30,31,30,31,31,30,31,30,31];if(!R||!S||!Q||S>12){return false;}if(t(R)&&S===2){T[1]++;}if(Q>T[S-1]){return false;}return true;}function m(S,W,R){var Q=new Date(),V=Q.getFullYear(),U=Q.getMonth()+1,T=Q.getDate();if(S>V){return true;}else{if((S===V)&&(W>U)){return true;}else{if((S===V)&&(W===U)&&(R>=T)){return true;}}}return false;}function H(Q,T){var R=24,S=60;Q=parseInt(Q,10);T=parseInt(T,10);return(Q<R&&T<S);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.DateTimeUtil);},convertEpochDateToMilliseconds:I,getMinutesString:C,convertMinutesToMs:x,getFormattedTimeString:c,getFormattedDateString:M,getFormattedDateTimeString:s,getFormattedStartEndTimeString:q,getFormattedAmPmTimeStringWithoutSuffix:O,getFormattedTimeStringWithoutZeroMinutes:A,getDayMonthStringWithSlashFromDate:f,getDateDescriptionString:e,getDayMonthYearStringFromDate:o,getDayTimeStringFromTime:w,getMonthDayYearStringFromTime:p,getFormattedTimeStringFromTime:J,getFormattedDurationString:u,getFormattedDurationStringFromMS:P,getMonthYearStringFromDate:y,getDayMonthStringFromDate:h,getDayMonthTimeStringFromMS:v,getWeekdayDayMonthTimeStringFromDate:k,isEventToday:z,isEventBetweenOneAndSixDays:K,isEventAfterSixDays:n,isTimeInFuture:N,getTimeAtMidnight:D,getDateDiffInDaysToToday:E,getRecordedOnString:B,isValidDate:L,isValidTime:H,isDateInFuture:m};}());}($N||{}));(function(a){a.app=a.app||{};a.app.GeneralUtil=(function(){var f=new a.apps.core.Log("Helper","GeneralUtil");function s(x,w){var y=String(x),u=w-y.length,v;for(v=0;v<u;v++){y="0"+y;}return y;}function c(w,u){var x=a.app.DateTimeUtil.getDayMonthStringWithSlashFromDate(u),v=a.app.DateTimeUtil.getFormattedTimeString(u);return String(w)+" "+x+" "+v;}function n(u,w,x){var v;x=x||2;v=u.toFixed(x);v=v.replace(".",w);return v;}function o(u){var w=["Bytes","KB","MB","GB","TB"],v=parseInt(Math.floor(Math.log(u)/Math.log(1024)),10);if(u===0){return"n/a";}if(v===0){return u+" "+w[v];}return(u/Math.pow(1024,v)).toFixed(1)+" "+w[v];}function k(u,v){if(u.hasOwnProperty(v)){return u[v];}return false;}function p(v){var u=a.app.constants.KEY_RELEASE_SUFFIX;return(v.indexOf(u)>0);}function q(v,u){return(v&u);}function h(v,u){return(v|u);}function r(v,u){return(v<<u);}function m(v,u){return(v>>u);}function g(v){var u=parseInt(v,16);return(u||u===0)?u:-1;}function b(v,w){var u=s(v.toString(16),w);return u||"";}function l(v,u){try{return JSON.parse(v,u);}catch(w){return null;}}function d(x,w){var u=w||2;try{}catch(v){return null;}}function e(u){if(Math.floor(u)!==u){return true;}return false;}function t(x,w,u){var v;for(v in w){if(w.hasOwnProperty(v)&&(!u||!x.hasOwnProperty(v))){x[v]=w[v];}}return x;}return{padNumberWithZeroes:s,createRecordingTitle:c,getPriceString:n,bytesToSize:o,memoiser:k,bitwiseAnd:q,bitwiseOr:h,bitShiftLeft:r,bitShiftRight:m,convertHexStringToNumber:g,convertNumberToHexString:b,ParseJSON:l,isKeyReleaseEvent:p,getExponentValue:d,isFloat:e,mixin:t};}());}($N||{}));(function(a){a.app=a.app||{};a.app.DebugUtil=(function(){var w,v,h,A={RESET:"\x1B[0m",BLACK:"\x1B[30m",RED:"\x1B[31m",GREEN:"\x1B[32m",YELLOW:"\x1B[33m",BLUE:"\x1B[34m",MAGENTA:"\x1B[35m",CYAN:"\x1B[36m",WHITE:"\x1B[37m"};function s(){var B=0,C;alert("##################################");alert("global objects:");alert("##################################");for(C in window){if(window.hasOwnProperty(C)){alert(C);B++;}}alert("##################################");alert("global objects: "+B);alert("##################################\n\n");}function z(){return Math.round((window.jsHeapUsed/window.jsHeapMax)*10000,2)/100;}function n(){alert("Percentage jsHeap usage: "+z()+"%");}function r(){var B=new Date(),C=B.toISOString();C=C.substring(0,10);alert(C+","+B.toLocaleTimeString()+","+window.jsHeapUsed);}function e(B){var C=B||document;alert("##################################");alert("DOM node count: "+C.getElementsByTagName("*").length);alert("##################################\n\n");}function m(){alert("##################################");alert("Starting timer");w=new Date();alert("##################################\n\n");}function t(){alert("##################################");h=v-w;alert("timerDifference: "+h+" ms");alert("##################################\n\n");}function d(){alert("##################################");alert("Reseting timer");w=null;v=null;h=null;alert("##################################\n\n");}function q(){alert("##################################");alert("Stopping timer");v=new Date();t();d();alert("##################################\n\n");}function p(E,D){var C=new a.apps.core.AjaxHandler(),B=D||"http://10.8.2.54:2020/log",F={"Content-Type":"application/json"};C.responseCallback=function(){};C.postData(B,F,JSON.stringify(E));}function x(){var B=[];B=B.concat.apply(B,arguments);return B;}function c(D,B){var C=Array.prototype.slice.call(arguments,2);console.debug.apply(console,x(B+D+A.RESET,C));}function u(D,B){var C=Array.prototype.slice.call(arguments,2);console.debug(B+"*************************************************"+A.RESET);console.debug.apply(console,x(B+D+A.RESET,C));console.debug(B+"*************************************************"+A.RESET);}function y(D,E,B){var C=Array.prototype.slice.call(arguments,3);if(E){c.apply(null,x(D,B,C));}else{u.apply(null,x(D,B,C));}}function o(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.GREEN,B));}function g(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.RED,B));}function b(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.BLUE,B));}function k(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.WHITE,B));}function f(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.YELLOW,B));}function l(C,D){var B=Array.prototype.slice.call(arguments,2);y.apply(null,x(C,D,A.CYAN,B));}return{green:o,red:g,blue:b,white:k,yellow:f,cyan:l,outputGlobalObjects:s,outputMemoryUsage:n,outputDOMNodeCount:e,getPercentMemoryUsage:z,outputJsHeapUsed:r,startTimer:m,stopTimer:q,writeToExternalLog:p};}());}($N||{}));(function(a){a.app=a.app||{};a.app.TracksUtil=(function(){var d=new a.apps.core.Log("Helper","TracksUtil");a.platform.system.Preferences.set(a.app.constants.PREF_SUBTITLE_STATE,null);function b(l){var g=a.app.fullScreenPlayer.tracks.getSubtitleTracks(),k=g.length,h;for(h=0;h<k;h++){if(g[h].language===l){return true;}}return false;}function c(l){var g=a.app.fullScreenPlayer.tracks.getAudioTracks(),k=g.length,h;for(h=0;h<k;h++){if(g[h].language===l){return true;}}return false;}function f(){var h,g=a.app.fullScreenPlayer.tracks.getAudioTracks(),k=g.length;for(h=0;h<k;h++){if(g[h].iaudio.InvalidStreamFormat){return true;}}return false;}function e(g){switch(g){case a.app.constants.SUBTITLE_CATEGORIES.POR:case a.app.constants.SUBTITLE_CATEGORIES.ENG:if(b(g)){return g;}else{return null;}case a.app.constants.SUBTITLE_CATEGORIES.CC:if(b(g)){return g;}else{if(b(a.app.constants.SUBTITLE_CATEGORIES.POR)){return a.app.constants.SUBTITLE_CATEGORIES.POR;}else{if(b(a.app.constants.SUBTITLE_CATEGORIES.LEG)){return a.app.constants.SUBTITLE_CATEGORIES.LEG;}else{if(b(a.app.constants.SUBTITLE_CATEGORIES.ENG)){return a.app.constants.SUBTITLE_CATEGORIES.ENG;}else{return null;}}}}}}return{deactivateCurrentSubtitleTrack:function(){var g=a.app.fullScreenPlayer?a.app.fullScreenPlayer.tracks.getActiveSubtitleTrack():false;if(g){a.app.fullScreenPlayer.tracks.deactivateTrack(g);}},activateCurrentPrefSubtitleTrack:function(){var h=a.platform.system.Preferences.get(a.app.constants.PREF_SUBTITLE_STATE)||a.app.constants.SUBTITLE_STATE_DEFAULT,g;if(h!==a.app.constants.SUBTITLE_STATE_OFF){g=e(h);if(g){a.app.fullScreenPlayer.tracks.activateSubtitleTrackByLanguage(g);}else{this.deactivateCurrentSubtitleTrack();}}},getLanguageforSubtitleTrack:function(){var h,g;h=a.app.fullScreenPlayer.tracks.getSubtitleTracks();g=a.app.fullScreenPlayer.tracks.getLanguage(h[0]);return g;},getSubtitleTrackList:function(){var g=a.app.fullScreenPlayer.tracks.getSubtitleTracks(),k=g.length,l=[],h;for(h=0;h<k;h++){l.push(g[h].language);}return l;},activateCurrentPrefAudioTrack:function(){var g=a.platform.system.Preferences.get(a.app.constants.PREF_AUDIO_LANGUAGE)||a.app.constants.AUDIO_LANGUAGE_DEFAULT;if(c(g)){a.app.fullScreenPlayer.tracks.activateAudioTrackByLanguage(g);}},getCurrentPrefSubtitleState:function(){return a.platform.system.Preferences.get(a.app.constants.PREF_SUBTITLE_STATE);},isAudioTrackSelectable:function(){return(a.app.fullScreenPlayer&&a.app.fullScreenPlayer.tracks.getAudioTracks().length>1);},isSubtitleTrackSelectable:function(){var g=a.app.fullScreenPlayer.tracks.getSubtitleTracks();if(g.length!==0){return true;}else{return false;}},toggleSubtitles:function(){var g=a.app.fullScreenPlayer.tracks.getActiveSubtitleTrack();if(g){a.app.fullScreenPlayer.tracks.deactivateTrack(g);}else{a.app.fullScreenPlayer.tracks.activateSubtitleTrackByLanguage(this.getLanguageforSubtitleTrack());}},hideSubtitles:function(){var g=a.app.fullScreenPlayer.tracks._player.setStreamControl("subtitle-hide",{hide:true});if(g&&g.error){}return g;},showSubtitles:function(){var g=a.app.fullScreenPlayer.tracks._player.setStreamControl("subtitle-hide",{hide:false});if(g&&g.error){}return g;},initialise:function(){a.apps.core.Language.adornWithGetString(this);},getAudioLanguageFromPreferences:function(){var k=a.platform.system.Preferences.get(a.app.constants.PREF_AUDIO_LANGUAGE)||a.app.constants.AUDIO_LANGUAGE_DEFAULT,h=a.app.fullScreenPlayer.tracks.getAudioTracks(),g=h.length,l;for(l=0;l<g;l++){if((this.getString("audioLanguage")[h[l].language])===(this.getString("audioLanguage")[k])){k=h[l].language;return k;}}},deactivateAudioTrack:function(){var g=a.app.fullScreenPlayer.tracks.getActiveAudioTrack();if(g){a.app.fullScreenPlayer.tracks.deactivateTrack(g);}},activateAudioTrack:function(){var h=a.app.fullScreenPlayer.tracks.getAudioTracks(),g;if(h[0]){if(h.length>1){g=this.getAudioLanguageFromPreferences();a.app.fullScreenPlayer.tracks.activateAudioTrackByLanguage(g);}else{a.app.fullScreenPlayer.tracks.activateAudioTrackByLanguage(h[0].language);}}},isInvalidAudioTrackAvailable:f,getLanguageForSubtitleTrackBasedOnPreference:e};}());}($N||{}));(function(a){a.app=a.app||{};a.app.MemoryUtil=(function(){var c=new a.apps.core.Log("Helper","MemoryUtil"),e,h,g=0;function f(){return Math.round((window.jsHeapUsed/window.jsHeapMax)*10000,2)/100;}function k(){c("collectGarbage","Enter - "+f()+"%");if(window.gc&&(f()>g)){window.gc();}g=f();c("collectGarbage","Exit - "+f()+"%");}function b(n){if(a.app.MemoryUtil.garbageCollectTimeout){window.clearTimeout(a.app.MemoryUtil.garbageCollectTimeout);a.app.MemoryUtil.garbageCollectTimeout=null;}a.app.MemoryUtil.garbageCollectTimeout=window.setTimeout(k,n||a.app.constants.DEFAULT_GARBAGE_COLLECTION_TIMEOUT_DELAY);}function l(n){if(a.app.MemoryUtil.garbageCollectInterval){window.clearInterval(a.app.MemoryUtil.garbageCollectInterval);a.app.MemoryUtil.garbageCollectInterval=null;}a.app.MemoryUtil.garbageCollectInterval=window.setInterval(k,n||a.app.constants.DEFAULT_GARBAGE_COLLECTION_INTERVAL);}function d(o,n){b(o);l(n);}function m(){if(a.app.MemoryUtil.garbageCollectInterval){window.clearInterval(a.app.MemoryUtil.garbageCollectInterval);a.app.MemoryUtil.garbageCollectInterval=null;}if(a.app.MemoryUtil.garbageCollectTimeout){window.clearTimeout(a.app.MemoryUtil.garbageCollectTimeout);a.app.MemoryUtil.garbageCollectTimeout=null;}}return{setOrUpdateGarbageCollectTimeout:b,setOrUpdateGarbageCollectInterval:l,setOrUpdateGarbageCollectTimeoutAndInterval:d,clearGarbageCollectTimeoutAndInterval:m,garbageCollectTimeout:e,garbageCollectInterval:h,collectGarbage:k};}());}($N||{}));(function(a){a.app=a.app||{};a.app.EnvironmentUtil=(function(){return{isSTBEnvironmentDVB:function(){return(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_DVB)?true:false;},isSTBEnvironmentIP:function(){return(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_IP)?true:false;},isSTBEnvironmentHybrid:function(){return(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_HYBRID)?true:false;},isDVBEnabled:function(){return((a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_HYBRID)||(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_DVB))?true:false;},isIPEnabled:function(){return((a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_HYBRID)||(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE)===a.app.constants.STB_ENVIRONMENT_IP))?true:false;},getSTBEnvironmentType:function(){return a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_ENVIRONMENT_TYPE);}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.DVBScanUtil=(function(){var k=new a.apps.core.Log("Helper","DVBScanUtil"),d,o="/network/siconfig/networkClasses/CableEITPFOnly/transponders/0/dvbc",l=[{option:"auto"},{option:"manual"}],f=[{option:"horizontal",value:a.platform.system.Scan.DVBS_Polarization.LINEAR_HORIZONTAL},{option:"vertical",value:a.platform.system.Scan.DVBS_Polarization.LINEAR_VERTICAL}],h=[{option:"symbolRate1",value:"1725"},{option:"symbolRate2",value:"3450"},{option:"symbolRate3",value:"6000"},{option:"symbolRate4",value:"6875"},{option:"symbolRate5",value:"6900"},{option:"symbolRate6",value:"22000"},{option:"symbolRate7",value:"27000"},{option:"symbolRate8",value:"27500"},{option:"symbolRate28888",value:"28888"},{option:"symbolRate45000",value:"45000"}],b=[{option:"symbolRate1",value:"1725"},{option:"symbolRate2",value:"3450"},{option:"symbolRate3",value:"6000"},{option:"symbolRate4",value:"6875"},{option:"symbolRate5",value:"6900"}],e=[{option:"fecOption1",value:a.platform.system.Scan.DVBS_InnerFEC._1_2},{option:"fecOption2",value:a.platform.system.Scan.DVBS_InnerFEC._2_3},{option:"fecOption3",value:a.platform.system.Scan.DVBS_InnerFEC._3_4},{option:"fecOption4",value:a.platform.system.Scan.DVBS_InnerFEC._5_6},{option:"fecOption5",value:a.platform.system.Scan.DVBS_InnerFEC._7_8},{option:"fecOptionAuto",value:a.platform.system.Scan.DVBS_InnerFEC.NONE}],n=[{option:"fecOption1",value:a.platform.system.Scan.DVBS_InnerFEC._1_2},{option:"fecOption2",value:a.platform.system.Scan.DVBS_InnerFEC._2_3},{option:"fecOption3",value:a.platform.system.Scan.DVBS_InnerFEC._3_4},{option:"fecOption4",value:a.platform.system.Scan.DVBS_InnerFEC._5_6},{option:"fecOption5",value:a.platform.system.Scan.DVBS_InnerFEC._7_8},{option:"fecOption6",value:a.platform.system.Scan.DVBS_InnerFEC._8_9},{option:"fecOption7",value:a.platform.system.Scan.DVBS_InnerFEC._3_5},{option:"fecOption8",value:a.platform.system.Scan.DVBS_InnerFEC._4_5},{option:"fecOption9",value:a.platform.system.Scan.DVBS_InnerFEC._9_10},{option:"fecOptionAuto",value:a.platform.system.Scan.DVBS_InnerFEC.NONE}],m=[{option:"fecOuterOptionAuto",value:a.platform.system.Scan.DVBC_OuterFEC.NONE},{option:"fecOuterOptionReed",value:a.platform.system.Scan.DVBC_OuterFEC.REED}],c=[{option:"modulationOption16",value:a.platform.system.Scan.DVBC_Modulation.QAM16},{option:"modulationOption32",value:a.platform.system.Scan.DVBC_Modulation.QAM32},{option:"modulationOption64",value:a.platform.system.Scan.DVBC_Modulation.QAM64},{option:"modulationOption128",value:a.platform.system.Scan.DVBC_Modulation.QAM128},{option:"modulationOption256",value:a.platform.system.Scan.DVBC_Modulation.QAM256}],g=[{option:"lnbPowerOn",value:true},{option:"lnbPowerOff",value:false}];return{initialise:function(){switch(a.app.Config.getConfigValue(a.app.constants.CONFIG_STB_TUNER_TYPE)){case"DVBS":d=false;break;case"DVBC":d=true;break;default:d=false;}},getIsDVBCTuner:function(){return d;},getScanTypeOptions:function(){return l;},getPolarisationValues:function(){return f;},getSymbolRates:function(){return d?b:h;},getFecInnerValues:function(){return d?n:e;},getFecOuterValues:function(){return m;},getModulationValues:function(){return c;},getLnbPowerValues:function(){return g;},getDVBCProfilePath:function(){return o;},getModulationType:function(q){var p;switch(q){case 1:p="16 QAM";break;case 2:p="32 QAM";break;case 3:p="64 QAM";break;case 4:p="128 QAM";break;case 5:p="256 QAM";break;default:break;}return p;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.MenuUtil=(function(){var g=[{x:37,y:-180},{x:37,y:-60},{x:37,y:60},{x:37,y:180},{x:37,y:300},{x:37,y:420},{x:37,y:540},{x:37,y:660},{x:37,y:780},{x:37,y:900},{x:37,y:1020}],d=[{x:0,y:-180},{x:0,y:-60},{x:0,y:60},{x:0,y:180},{x:0,y:300},{x:100000,y:420},{x:0,y:724},{x:0,y:844},{x:0,y:964},{x:0,y:1084},{x:0,y:1204}],h=[{x:23,y:-180},{x:23,y:-60},{x:23,y:60},{x:23,y:180},{x:23,y:300},{x:100000,y:420},{x:23,y:724},{x:23,y:844},{x:23,y:964},{x:23,y:1084},{x:23,y:1204}],e=[{x:0,y:0},{x:156,y:0},{x:312,y:0},{x:468,y:0},{x:624,y:0},{x:780,y:0},{x:936,y:0},{x:1092,y:0},{x:1284,y:0}],f=[1,1,1,1,1,1,1,1,1,1,1],c=[0,0.2,0.2,0.5,0.8,1,0.8,0.5,0.2,0.2,0],b=200;return{getItemPositionsPreview:function(){return g;},getItemPositionsActive:function(){return d;},getItemPositionsActiveStrip:function(){return h;},getItemPositions:function(){return[g,d];},getItemPositionsStrip:function(){return[g,h];},getItemPositionsOptionsMenu:function(){return e;},getOpacityValues:function(){return f;},getOpacityValuesSelector:function(){return c;},getTimeout:function(){return b;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.ImageUtil=(function(){var h=new a.apps.core.Log("Helper","ImageUtil"),f=300,b=300,g=140,n=140,m=null,d=null,o,k={},s="../../../customise/resources/images/%RES/thumbnails/Icn_showCardTitle.png",e="../../../customise/resources/images/%RES/thumbnails/Icn_showcardLockedCover.png",p="../../../customise/resources/images/%RES/icons/Icn_lock.png";function l(t,u){if(t>=b&&u>=f){if(u>t){o=u/t;t=b;u=t*o;m=(f-u)/2;d=0;}else{o=t/u;u=f;t=u*o;m=0;d=(b-t)/2;}}if(t>=b&&u<f){t=b;m=(f-u)/2;d=0;}if(t<b&&u>=f){u=f;m=0;d=(b-t)/2;}if((t<b&&t>=n)&&(u<f&&u>=g)){m=(f-u)/2;d=(b-t)/2;}k.height=t;k.width=u;k.xPos=m;k.yPos=d;return k;}function c(t){return"../../../customise/resources/images/720p/icons/audioVideoFlags/"+t+".png";}function q(u){var t="../../../customise/resources/images/%RES/icons/parentalRatings/";switch(u){case 4:case 5:case 6:case 7:return t+"L.png";case 10:case 12:case 14:case 16:case 18:return t+u+".png";}return"";}function r(t){var u=q(t);return u.substring(u.indexOf("customise"),u.length);}return{calculateThumbnailProperties:l,getAudioVideoFlagUrl:c,getParentalRatingIconHref:q,getParentalRatingIconHrefInHelpers:r,DEFAULT_TITLE_IMAGE:s,LOCK_ICON:e,LOCK_ICON_SMALL:p};}());}($N||{}));(function(a){a.app=a.app||{};a.app.StringUtil=(function(){function c(r,q){return r.indexOf(q)===0;}function o(r,q){return r.indexOf(q,r.length-q.length)!==-1;}function m(q){return((q===null)||(q===undefined));}function p(q){if(q){return q.toString().replace(/^0+/,"");}return"";}function g(s){var q=s.toLowerCase(),r=function(t){return t.toUpperCase();};return q.replace(/(^| )(\w)/g,r);}function e(q){if(q[0]===q[0].toLowerCase()){return q.replace(/\b[a-z]/,function(r){return r.toUpperCase();});}else{return q;}}function h(q){if(q[0]===q[0].toUpperCase()){return q.replace(/\b[A-Z]/,function(r){return r.toLowerCase();});}else{return q;}}function b(t,u){var r=[],v,q="",s;if(Object.prototype.toString.call(u)==="[object Array]"){r=u;}else{r=Array.prototype.slice.call(arguments,1);}s=r.length;for(v=0;v<s;v++){if(r[v]&&typeof r[v]==="string"){q+=r[v]+t;}}return q.substring(0,q.lastIndexOf(t));}function l(w,v,u){var q={},x,r,t,s=0;if(v&&u){x=w.split(v);r=x.length;for(s=0;s<r;s++){t=x[s].split(u);q[t[0]]=t[1];}}return q;}function d(q){return q.replace("'","''");}function k(q){if(q&&q.substring(0,1)!=="/"){q="/"+q;}return q;}function f(q){if(q&&q.substring(0,1)==="/"){q=q.substring(1);}return q;}function n(r,t){var q=0,s=0;if(r&&t){s=t.length;for(q=0;q<s;q++){if(r===t[q]){return true;}}}return false;}return{isStringStartsWith:c,isStringEndsWith:o,isStringInArray:n,isNullOrUndefined:m,firstLetterPerWordCapitol:g,removeLeadingZeros:p,upcaseFirstLetter:e,lowercaseFirstLetter:h,join:b,escapeApostrophes:d,addLeadingForwardSlash:k,removeLeadingForwardSlash:f,extractObject:l};}());}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.ArrayUtil=(function(){var d=0,l=1,e=-1;function b(s,r){var o,q,p;q=s.length;for(o=0;o<q;o++){p=s[o];if(r(p)){return o;}}return -1;}function c(q){var o=[],p;for(p=0;p<q.length;p++){if(q[p]){o.push(q[p]);}}return o;}function f(r){var q=r.slice(),o=q.length,u=o,v,s;while(u--){v=parseInt(Math.random()*o,10);s=q[u];q[u]=q[v];q[v]=s;}return q;}function g(s,r,p){var t=[],q,o=0;for(q=0;q<s.length;q++){if(r.indexOf(s[q])===-1){t[o]=s[q];o++;}}if(t.length===0&&!p){return g(r,s,true);}return t;}function n(q,o){var p;for(p=1;p<q.length;p){if(o(q[p-1],q[p])===d){q.splice(p,1);}else{p++;}}return q;}function m(p,o){p.sort(o);return n(p,o);}function h(s,p,q,o){var r=function(u,t){if(q){return o&&typeof o==="Function"?o(t[p])-o(u[p]):t[p]-u[p];}return o&&typeof o==="Function"?o(u[p])-o(t[p]):u[p]-t[p];};s.sort(r);}function k(r,o,p){var q=function(t,s){if(t[o]===s[o]){return d;}if(p){if(s[o]>t[o]){return l;}}else{if(t[o]>s[o]){return l;}}return e;};r.sort(q);}return{getIndex:b,removeEmptyElementsFromArray:c,arrayShuffle:f,removeDuplicates:n,sortAndRemoveDuplicates:m,sortByProperty:h,sortByStringProperty:k,arrayDifference:g,EQUAL:d,GREATER_THAN:l,LESS_THAN:e};}());}($N||{}));(function(a){a.app=a.app||{};a.app.SortUtil=(function(s){var m=0,p=1,u=-1;function o(H,G){if(H===G){return m;}if(H>G){return p;}return u;}function d(H,G){return o(H._data.taskId,G._data.taskId);}function A(J,G){var H=J.uiFolder||J._data.uiFolder,I=G.uiFolder||G._data.uiFolder;H=s.app.StringUtil.removeLeadingForwardSlash(H);I=s.app.StringUtil.removeLeadingForwardSlash(I);return o(H,I);}function l(J,H){var G=s.app.FolderUtil.isInFolder(J),I=s.app.FolderUtil.isInFolder(H);return o(I,G);}function x(H,G){if(H.precedenceValue===G.precedenceValue){return m;}if(H.precedenceValue>G.precedenceValue){return p;}if(H.precedenceValue<G.precedenceValue){return u;}}function n(H,G){return o(G.startTime,H.startTime);}function D(H,G){return o(H.startTime,G.startTime);}function e(H,G){return o(H.title,G.title);}function h(H,G){return o(H.sortTitle,G.sortTitle);}function c(H,G){return o(H.episodeId,G.episodeId);}function q(H,G){return l(H,G)||n(H,G);}function k(H,G){return A(H,G)||e(H,G);}function b(H,G){return h(H,G)||c(H,G);}function F(H,G){return s.platform.btv.EPG.getChannelByServiceId(H.serviceId).logicalChannelNum>s.platform.btv.EPG.getChannelByServiceId(G.serviceId).logicalChannelNum;}function C(H,G){return(H.logicalChannelNum-G.logicalChannelNum);}function g(H,G){return o(H._data.channelKey,G._data.channelKey);}function B(H,G){var I=s.platform.btv.EPG.getChannelByServiceId(G.serviceId);if(I!==undefined){return s.platform.btv.EPG.getChannelByServiceId(H.serviceId).logicalChannelNum>I.logicalChannelNum;}}function z(H,G){var I=s.platform.btv.EPG.getChannelByServiceId(G.serviceId);if(I!==undefined){return s.platform.btv.EPG.getChannelByServiceId(H.serviceId).logicalChannelNum<I.logicalChannelNum;}}function y(H,G){var I=s.platform.btv.EPG.getChannelByServiceId(G.serviceId);if(I!==undefined){return s.platform.btv.EPG.getChannelByServiceId(H.serviceId).serviceName>I.serviceName;}}function v(H,G){var I=s.platform.btv.EPG.getChannelByServiceId(G.serviceId);if(I!==undefined){return s.platform.btv.EPG.getChannelByServiceId(H.serviceId).serviceName<I.serviceName;}}function w(H,G){return H.title>G.title;}function f(H,G){return H.logicalChannelNum>G.logicalChannelNum;}function E(H,G){return H.logicalChannelNum<G.logicalChannelNum;}function t(H,G){return H.serviceName>G.serviceName;}function r(H,G){return H.serviceName<G.serviceName;}return{compareTasks:d,compareRatingPrecedenceValues:x,sortByUiFolder:A,sortByDateDesc:n,sortByDateAsc:D,sortByTitle:e,sortByChannel:F,sortByLogicalChannelNum:C,sortByChannelKey:g,sortByIsFolderThenDate:q,sortByFolderThenTitle:k,sortBySortTitleThenEpisodeId:b,eventListChannelSortNumberAsc:B,eventListChannelSortNumberDec:z,eventListChannelSortNameAsc:y,eventListChannelSortNameDec:v,eventListEventSortNameAsc:w,channelSortNumberAsc:f,channelSortNumberDec:E,channelSortNameAsc:t,channelSortNameDec:r,EQUAL:m,GREATER_THAN:p,LESS_THAN:u};}(a));}($N||{}));(function(a){a.app=a.app||{};a.app.NetworkUtil=(function(){var b=20000,c=new a.apps.core.Log("Helper","NetworkUtil");return{isUrlValid:function(d){var e=null;if(!d||String(d).trim()===""){return false;}e=/((((http|https|ftp):(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9.\-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[\-\+=&;%@.\w_]*)#?(?:[\w]*))?)/g;return e.test(d);},isNetworkAvailable:function(){return a.platform.system.Network.isNetworkAvailable(a.platform.system.Network.NetworkType.ETHERNET)||a.platform.system.Network.isNetworkAvailable(a.platform.system.Network.NetworkType.WIFI);},ajaxRequest:function(e,d,g){var f=new a.apps.core.AjaxHandler();f.setResponseCallback(function(h){if(!h||h.status!==200){if(g){g(h);}else{throw ("Ajax request failed! URL: "+e);}}else{d(h.responseText);}});f.requestData(e,b);},setWiredInterfaceName:function(){if(a.gui.GUIObject.mode!=="HTML"){a.platform.system.Network.configure("eth9");}else{a.platform.system.Network.configure("eth0");}},ethernetUpCallback:function(){a.platform.btv.EPG.setEthernetConnected(true);a.app.DialogueHelper.hideEthernetDisconnectedDialogue();},ethernetDownCallback:function(){a.platform.btv.EPG.setEthernetConnected(false);a.app.DialogueHelper.showEthernetDisconnectedDialogue();},registerEthernetStateChangeCallbacks:function(){a.platform.system.Network.StateChange.setEthDownCallBack(this.ethernetDownCallback);a.platform.system.Network.StateChange.setEthUpCallBack(this.ethernetUpCallback);}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.PortalUtil=(function(){var f=new a.apps.core.Log("Helper","PortalUtil"),h=false,e;function g(k){if(!h){e=a.app.NetworkUtil.isUrlValid(k);h=true;}return e;}function d(m){var l=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true),k=null;if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){l=a.app.Config.getConfigValue("mds.developer.server");}k=l+a.app.Config.getConfigValue("portal.url");if(g(k)){if(a.app.StringUtil.isStringEndsWith(k,"/")){k=k+m;}else{k=k+"/"+m;}return k;}return null;}function c(o,p){var l,k,n,m=null;switch(o){case"settings":p(a.app.SettingsPortalData.getSettingsPortalData(),o);return;case"music":p(a.app.MusicCategoriesData.getMusicPortalData(),o);return;case"messages":p(a.app.MessageUtil.getMessageMails(40),o,true);return;case"search":return;default:l=d(o+".js");}k=function(q){m=JSON.parse(q);p(m,o);};n=function(q){p(null,o);};if(l&&a.app.NetworkUtil.isNetworkAvailable()){a.app.NetworkUtil.ajaxRequest(l,k,n);}else{p(null,o);}}function b(p,t){var m=true,u=a.app.PVRUtil.getLatestPlayableRecordings(),k=u.length,s=false,q="",l={gridSize:{width:2,height:5},items:[]},r=l.items,n,o=0;if(!u||u.length===0){t(null,p,m);return;}s=(k>=a.app.constants.PORTAL_RECORDINGS_LIMIT);if(s){k-=1;}for(n=0;n<k;n++){if((!a.app.PVRUtil.isTaskBlockedTitle(u[n]))&&u[n].netDisplaySeasonEpisode){q=a.app.PVRUtil.getRecordedSeasonEpisodeShort(u[n]);}else{q="";}r.push({y:o,x:0,width:1,height:1,data:{recordingObj:u[n],gotoDVRLibrary:false,serviceId:u[n].serviceId,taskId:u[n].taskId,eventId:u[n].eventId,eventDetails:q,text:a.app.PVRUtil.isTaskBlockedTitle(u[n])?a.app.PortalUtil.getString("adultContent"):u[n].title,href:"",startTime:u[n].startTime}});if(n%2){r[n].x=1;o++;}else{r[n].x=0;}}if(s){r.push({y:o,x:0,width:1,height:1,data:{gotoDVRLibrary:true,serviceId:1,taskId:null,eventId:null,eventDetails:"",text:a.app.PortalUtil.getString("DVRMenuSeeAllRecordings")}});if(n%2){r[n].x=1;}else{r[n].x=0;}}t(l,p,m);}return{formatRequestUrl:d,getWindowData:c,getWindowDataForRecordings:b};}());a.apps.core.Language.adornWithGetString(a.app.PortalUtil,"apps/now/common/");}($N||{}));(function(a){function b(){this._log=new a.apps.core.Log("ca","CAKHandler");}b.prototype.SmartcardRemovedListener=function(){};b.prototype.SmartcardInsertedListener=function(){};b.prototype.SmartcardUpdatedListener=function(){};b.prototype._showError=function(){};a=a||{};a.app=a.app||{};a.app.CAKHandler=b;}($N||{}));(function(b){var c,d=null;function a(){c=this;this._log=new b.apps.core.Log("ca","CAKALMEHandler");this.contentStartFailed=b.app.constants.CA_PLAY_ERRORS.contentStartFailedReason;this.contentError=b.app.constants.CA_PLAY_ERRORS.contentErrorReason;this.streamDisabled=b.app.constants.CA_PLAY_ERRORS.streamDisabledReason;b.app.fullScreenPlayer.setStreamEnabledCallback(this.streamEnabledCallback);this.errorMessage=b.app.ErrorMessage;this.conditionalAccessErrorId=b.app.ErrorMessageType.conditionalAccessError;this._currentSmartCardState=null;}b.apps.util.Util.extend(a,b.app.CAKHandler);a.prototype.SmartcardRemovedListener=function(e){if(b.common.helper.PowerManager.getCurrentPowerMode()===b.common.helper.PowerManager.SYSTEM_POWER_NORMAL){c.errorMessage.hideErrorMessageDialogWithId(c.conditionalAccessErrorId);if(c.getStreamDisabled()){b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_REMOVED);}}};a.prototype.SmartcardInsertedListener=function(e){if(b.common.helper.PowerManager.getCurrentPowerMode()===b.common.helper.PowerManager.SYSTEM_POWER_NORMAL){if(CCOM.ConditionalAccess.OK===e.state){b.app.DialogueHelper.hideCADialogues();}else{if(c.getStreamDisabled()){c.showError(e.state);}}}};a.prototype.SmartcardUpdatedListener=function(e){if(CCOM.ConditionalAccess.OK===e.state){b.app.DialogueHelper.hideCADialogues();}else{if(c.getStreamDisabled()){c.showError(e.state);}}};a.prototype.setStreamDisabled=function(e){if(!e){b.app.fullScreenPlayer.tuner.showVideo();}d=e;};a.prototype.getStreamDisabled=function(){return d;};a.prototype.streamEnabledCallback=function(){b.app.DialogueHelper.hideCADialogues();};a.prototype.isAccessDenied=function(){if((c.getStreamDisabled()!==false)&&((this._currentSmartCardState===CCOM.ConditionalAccess.DENIED)||(this._currentSmartCardState===b.app.constants.CA_PLAY_ERRORS.contentStartFailedReason.CA_ACCESS_DENIED)||(this._currentSmartCardState===b.app.constants.CA_PLAY_ERRORS.contentErrorReason.CA_ACCESS_DENIED)||(this._currentSmartCardState===b.app.constants.CA_PLAY_ERRORS.streamDisabledReason.CA_ACCESS_DENIED))){return true;}else{return false;}};a.prototype.showError=function(l){if(b.common.helper.PowerManager.getCurrentPowerMode()===b.common.helper.PowerManager.SYSTEM_POWER_NORMAL){var n,q,f=null,k=null,e=null,m=null,h=false,g=this.errorMessage.getCurrentErrorMessageObject(),o=b.app.ConditionalAccessCAK73.getCASmartCardInfo(),p=null;this._currentSmartCardState=l;switch(l){case CCOM.ConditionalAccess.EXPIRED:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_EXPIRED);h=true;break;case CCOM.ConditionalAccess.INCOMPATIBLE:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_INCOMPATIBLE);h=true;break;case CCOM.ConditionalAccess.ERROR:case CCOM.ConditionalAccess.NOT_CERTIFIED:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_NOT_CERTIFIED);h=true;break;case CCOM.ConditionalAccess.INVALID:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_INVALID);h=true;break;case CCOM.ConditionalAccess.MUTE:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_MUTE);h=true;break;case CCOM.ConditionalAccess.SUSPENDED:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_SUSPENDED);h=true;break;case CCOM.ConditionalAccess.BLACKLISTED:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_BLACKLISTED);h=true;break;case this.streamDisabled.CA_ACCESS_PAIRING_REQUIRED:case this.contentStartFailed.CA_ACCESS_PAIRING_REQUIRED:case this.contentError.CA_ACCESS_PAIRING_REQUIRED:if(o.smartcardInfo.state===CCOM.ConditionalAccess.NEVER_PAIRED){b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_NEVER_PAIRED);}else{b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_NOT_PAIRED);}h=true;break;case this.streamDisabled.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:case this.contentStartFailed.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:case this.contentError.CA_ACCESS_CHIPSET_PAIRING_REQUIRED:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_NEEDS_CHIPSET_PAIRING);h=true;break;case this.streamDisabled.CA_ACCESS_BLACKED_OUT:case this.contentStartFailed.CA_ACCESS_BLACKED_OUT:case this.contentError.CA_ACCESS_BLACKED_OUT:case CCOM.ConditionalAccess.BLACKED_OUT:b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_BLACKOUT);h=true;break;case this.streamDisabled.CA_ACCESS_DENIED:case this.contentStartFailed.CA_ACCESS_DENIED:case this.contentError.CA_ACCESS_DENIED:case CCOM.ConditionalAccess.DENIED:f=CCOM.ConditionalAccess.getSmartcardInfo();if(f&&(CCOM.ConditionalAccess.OK===f.smartcardInfo.state)){k=b.app.epgUtil.getServiceById(b.app.epgUtil.getChannelFromPrefs()).serviceId;p=b.app.PPVHelper.getCurrentEvent();if(p&&(p.serviceId!==k)){p=null;}e=p||b.app.epgUtil.getEvent("current",k);m=(e!==null)?CCOM.ConditionalAccess.getEventInfo(e.eventId):null;if(b.app.ParentalControlUtil.isChannelOrProgramLocked(e)){h=true;}else{if(m&&b.app.PPVHelper.isPurchasable(e,m)){b.apps.util.EventManager.fire("caPPVAccessDenied");h=true;}}if(h===false){b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_ACCESS_DENIED);h=true;}}else{this.showError(f.smartcardInfo.state);}break;case this.streamDisabled.CA_NO_VALID_SECURE_DEVICE:case this.contentStartFailed.CA_NO_VALID_SECURE_DEVICE:case this.contentError.CA_NO_VALID_SECURE_DEVICE:case CCOM.ConditionalAccess.NO_VALID_SECURE_DEVICE:f=CCOM.ConditionalAccess.getSmartcardInfo();if(f&&f.error){b.app.DialogueHelper.createAndShowCADialogue(b.app.constants.DLG_CA_SMART_CARD_REMOVED);h=true;}else{this.showError(f.smartcardInfo.state);}break;}if(h){b.app.fullScreenPlayer.tuner.hideVideo();}}};b.app=b.app||{};b.app.CAKALMEHandler=a;}($N||{}));(function(a){function b(c){this._log=new a.apps.core.Log("ca","ConditionalAccessCAK73");this.handler=c;CCOM.ConditionalAccess.addEventListener("onSmartcardRemoved",this.handler.SmartcardRemovedListener);CCOM.ConditionalAccess.addEventListener("onSmartcardInserted",this.handler.SmartcardInsertedListener);CCOM.ConditionalAccess.addEventListener("onSmartcardUpdated",this.handler.SmartcardUpdatedListener);}b.prototype.getCASmartCardInfo=function(){return CCOM.ConditionalAccess.getSmartcardInfo();};b.prototype.getCASystemSerialNumber=function(){var d=CCOM.ConditionalAccess.getSystemInfo(),c;if(d.error){c=null;}else{c=d.systemInfo.serialNumber;}return c;};b.prototype.getCASmartCardSerialNumber=function(){var d=CCOM.ConditionalAccess.getSmartcardInfo(),c;if(d.error){c=null;}else{c=d.smartcardInfo.serialNumber;}return c;};b.prototype.getCAServiceAccess=function(d){var c=CCOM.ConditionalAccess.getServiceAccess(String(d));if(c.error){return"CCOMERROR";}switch(c.caAccess){case CCOM.ConditionalAccess.CLEAR:case CCOM.ConditionalAccess.FREE:case CCOM.ConditionalAccess.GRANTED:return"GRANTED";default:return"ACCESS DENIED";}};b.prototype.getCASystemInfo=function(){return CCOM.ConditionalAccess.getSystemInfo();};b.prototype.getIrdAllMail=function(){return CCOM.ConditionalAccess.getIrdAllMail();};b.prototype.getIrdMail=function(c){return CCOM.ConditionalAccess.getIrdMail(c);};b.prototype.getIrdPopupMessage=function(){return CCOM.ConditionalAccess.getIrdPopupMessage();};b.prototype.isCCOMallowConditionalAccess=function(){var c=false;if(CCOM.ConditionalAccess.getSmartcardInfo!==undefined){c=true;}return c;};b.prototype.handleError=function(c){this.handler.showError(c);};b.prototype.setStreamDisabled=function(c){this.handler.setStreamDisabled(c);};b.prototype.isAccessDenied=function(){return this.handler.isAccessDenied();};a=a||{};a.app=a.app||{};a.app.ConditionalAccessNagraCAK73=b;}($N||{}));(function(a){a.app=a.app||{};a.app.FavouritesUtil=(function(){function b(h){var d,f=0,c=a.app.constants.FAVOURITE_FOLDER_NAME,g=a.apps.core.ContextManager.getActiveContext(),e;if(!h){a.apps.util.EventManager.fire("favouritesListUpdated");}if(g&&(g.getId()==="SETTINGS")&&a.apps.core.ContextManager.getActiveController().isFavouritesActive()){return true;}d=a.platform.btv.Favourites.getFavouriteChannels(c);for(f=0;f<d.length;f++){e=a.app.epgUtil.getServiceById(d[f].serviceId);if(!e.serviceId){d.splice(f,1);}else{d[f]=e;}}a.platform.btv.Favourites.setFavouriteChannels(c,d);if((d.length===0)&&(a.platform.btv.ChannelCategories.getCurrentCategory()===c)){a.app.FavouritesUtil.setToAllChannels();}return true;}return{initialise:function(){a.platform.btv.EPG.registerRefreshCallback(b,this);},toggleFavourites:function(){if(a.platform.btv.ChannelCategories.getCurrentCategory()===a.app.constants.FAVOURITE_FOLDER_NAME){this.setToAllChannels();}else{this.setToFavouriteChannels();}a.apps.util.EventManager.fire("favouritesToggled");},setToFavouriteChannels:function(){a.platform.btv.ChannelCategories.setCurrentCategory(a.app.constants.FAVOURITE_FOLDER_NAME);},setToAllChannels:function(){a.platform.btv.ChannelCategories.resetCurrentCategory();},launchFavoritesApp:function(){a.app.ContextHelper.openContext("SETTINGS",{activationContext:{id:"portalMenuFavorites",isFromPortal:true}});},refreshFavoriteChannels:b};}());}($N||{}));(function(a){a.app=a.app||{};a.app.DialogueHelper=(function(){var m=new a.apps.core.Log("Helper","DialogueHelper"),K=a.app.constants,F=null,S=null,y=null,r={},N=14,g=23,J=36,V=37,H=60,U=63,n=64,B=65,Y=60000,X,z;function G(aa){switch(aa){case K.NEW_POPUP_CA:case K.DLG_CHANNEL_UNSUBSCRIBED:case K.DLG_CA_SMART_CARD_EXPIRED:case K.DLG_CA_SMART_CARD_NOT_PAIRED:case K.DLG_CA_SMART_CARD_NEVER_PAIRED:case K.DLG_CA_SMART_CARD_REMOVED:case K.DLG_CA_SMART_CARD_MUTE:case K.DLG_CA_SMART_CARD_INVALID:case K.DLG_CA_SMART_CARD_INCOMPATIBLE:case K.DLG_CA_SMART_CARD_SUSPENDED:case K.DLG_CA_SMART_CARD_NOT_CERTIFIED:case K.DLG_CA_SMART_CARD_BLACKOUT:case K.DLG_CA_SMART_CARD_ACCESS_DENIED:case K.DLG_CA_SMART_CARD_NEEDS_CHIPSET_PAIRING:case K.DLG_CA_SMART_CARD_BLACKLISTED:return a.apps.dialog.DialogManager.VERY_HIGH_PRIORITY;case K.DLG_CONFLICT_RESOLUTION:case K.DLG_REMINDER:case K.DLG_AUTO_TUNE:case K.DLG_AUTO_TUNE_CONFLICT:case K.DLG_AUTO_TUNE_START:case K.DLG_STANDBY_CONFIRMATION:case K.DLG_FACTORY_RESET_RECORDING:case K.DLG_FACTORY_RESET_SCHEDULED:case K.DLG_FACTORY_RESET_CONFIRMATION:return a.apps.dialog.DialogManager.HIGH_PRIORITY;case K.DLG_DVR_DISC_NOT_PRESENT:case K.DLG_RECORD_CONFIRMATION:case K.DLG_CANCEL_RECORD:case K.DLG_CANCEL_LIVE_RECORD:case K.DLG_CANCEL_SERIES:case K.DLG_DISK_SPACE:case K.DLG_MORE_ON_NOW:return a.apps.dialog.DialogManager.MEDIUM_PRIORITY;default:return a.apps.dialog.DialogManager.LOW_PRIORITY;}}function Q(aa){switch(aa){case K.DLG_DISK_SPACE:return K.MINUTE_IN_MS*2;case K.DLG_AUTO_TUNE_START:case K.DLG_AUTO_TUNE_CONFLICT:return K.MINUTE_IN_MS;case K.DLG_USB_DEVICE_DETECTED:return K.SECOND_IN_MS*30;case K.DLG_PPV_PURCHASE_SUCCESS:return K.SECOND_IN_MS*15;default:return 0;}}function x(aa){switch(aa){case K.DLG_CA_SMART_CARD_SUSPENDED:return"C01";case K.DLG_CHANNEL_UNSUBSCRIBED:case K.DLG_CA_SMART_CARD_ACCESS_DENIED:return"C02";case K.DLG_PPV_PURCHASE_ERROR:return"C03";case K.DLG_CA_SMART_CARD_BLACKOUT:return"C05";case K.DLG_NO_SIGNAL:return"T01";case K.DLG_ETHERNET_DISCONNECTED:return"T02";case K.DLG_CA_SMART_CARD_MUTE:return"T04";case K.DLG_CA_SMART_CARD_REMOVED:return"T05";case K.DLG_CA_SMART_CARD_NEVER_PAIRED:return"T06";case K.DLG_CA_SMART_CARD_INVALID:return"T07";case K.DLG_CA_SMART_CARD_NOT_CERTIFIED:return"T08";case K.DLG_CA_SMART_CARD_NOT_PAIRED:return"T09";case K.DLG_CA_SMART_CARD_NEEDS_CHIPSET_PAIRING:return"T09-2";case K.DLG_CA_SMART_CARD_EXPIRED:return"T10";case K.DLG_CA_SMART_CARD_INCOMPATIBLE:return"T11";case K.DLG_CHANNEL_SUBSCRIPTION:return"10";case K.DLG_CA_SMART_CARD_BLACKLISTED:return"24";case K.DLG_MORE_ON_NOW:return"X99";case K.DLG_CATCHUP_SYSTEM_MSG:return"SYS-CAT";case K.DLG_PVR_JOB_FAILED_MSG:return"SYS-PVR";case K.DLG_PVR_INVALID_EVENT_MSG:return"SYS-PVR-INV-EVT";default:return null;}}function l(aa){switch(aa){case K.DLG_STOP_PLAYBACK_GO_TO_MUSICA:return"stopPlaybackGotoMusica";case K.DLG_STOP_PLAYBACK_GO_TO_MOSAIC:return"stopPlaybackGotoMosaic";case K.DLG_REMOTE_ACCESS_AUTH:return"remoteAccessAuthorisation";case K.DLG_USB_FORMAT_COMPLETE:return"usbFormatCompleteDialog";case K.DLG_ATA_FORMAT_COMPLETE:return"ataFormatCompleteDialog";case K.DLG_DISK_SPACE:return"diskSpaceDialogue";case K.DLG_USB_INCOMPATIBLE:return"usbIncompatibleDialog";case K.DLG_USB_MEDIA_DETECTED:return"usbMediaDetected";case K.DLG_USB_DRIVE_ATTACHED:return"usbDriveAttached";case K.DLG_USB_STB_ALREADY_ASSOCIATED:return"usbSTBalreadyAssociated";case K.DLG_USB_STB_ASSOCIATED:return"usbAssociatedDialogue";case K.DLG_UNAUTHORISED_RECORDING:return"unauthorizedRecordingDialogue";case K.DLG_PPV_CHANNEL_SUBSCRIPTION:return"ppvAndChannelSubscription";case K.DLG_CHANNEL_SUBSCRIPTION:return"ppvChannelSubscription";case K.DLG_PPV_PURCHASE_ERROR:return"ppvPurchaseError";case K.DLG_FACEBOOK_AUTH_ERROR:return"facebookOAuthError";case K.DLG_FACEBOOK_DISCONNECT_ACCOUNT:return"facebookDisconnectAccount";case K.DLG_FACEBOOK_POST_ACCOUNT:return"facebookPostAccount";case K.DLG_SOCIAL_ACCOUNT_AUTHORISED:return"facebookAccountAuth";case K.DLG_ETHERNET_DISCONNECTED:return"ethernetDisconnected";case K.DLG_FACTORY_RESET_RECORDING:return"factoryResetRecordingConfirmation";case K.DLG_FACTORY_RESET_SCHEDULED:return"factoryResetScheduledConfirmation";case K.DLG_MEDIA_DEVICE_UNPLUGGED:return"mediaDeviceUnplugged";case K.DLG_WHPVR_SWITCH:return"WHPVRSwitch";case K.DLG_USB_FORMAT_ERROR:return"usbFormatError";case K.DLG_IP_RENEWAL:return"renewalIp";case K.DLG_USB_WAITING:return"usbWaitingDialog";case K.DLG_SAVING_FAVOURITES:return"savingFavorites";case K.DLG_WIFI_DISCONNECTED:return"wifiDisconnected";case K.DLG_INVALID_DATE:return"invalidDate";case K.DLG_INVALID_TIME:return"invalidTime";case K.DLG_CA_SMART_CARD_EXPIRED:return"caErrorSmartcardExpired";case K.DLG_CA_SMART_CARD_INCOMPATIBLE:return"caErrorSmartcardIncompatible";case K.DLG_CA_SMART_CARD_NOT_CERTIFIED:return"caErrorSmartcardNotCertified";case K.DLG_CA_SMART_CARD_INVALID:return"caErrorSmartcardInvalid";case K.DLG_CA_SMART_CARD_MUTE:return"caErrorSmartcardMute";case K.DLG_CA_SMART_CARD_SUSPENDED:return"caErrorSmartcardSuspended";case K.DLG_CA_SMART_CARD_BLACKLISTED:return"caErrorSmartcardBlacklisted";case K.DLG_CA_SMART_CARD_NOT_PAIRED:return"caErrorSmartcardNotPaired";case K.DLG_CA_SMART_CARD_NEVER_PAIRED:return"caErrorSmartcardNeverPaired";case K.DLG_CA_SMART_CARD_NEEDS_CHIPSET_PAIRING:return"caErrorSmartcardNeedsChipsetPairing";case K.DLG_CA_SMART_CARD_BLACKOUT:return"caErrorSmartcardBlackout";case K.DLG_CA_SMART_CARD_ACCESS_DENIED:return"caErrorSmartcardAccessDenied";case K.DLG_CA_SMART_CARD_REMOVED:return"caErrorSmartcardRemoved";case K.DLG_RECONNECTING:return"reconnecting";case K.DLG_PARENTAL_PIN_CHANGE:return"parentalPinChangeSuccess";case K.DLG_PURCHASE_PIN_CHANGE:return"purchasePinChangeSuccess";case K.DLG_SAVE_BLOCKED_CHANNELS:return"saveBlockChannelsError";case K.DLG_FETCHING_FAVORITES_ERROR:return"fetchingFavoritesError";case K.DLG_DLNA_COMMUNICATION_ERROR:return"dlnaCommunicationError";case K.DLG_CHANNEL_UNSUBSCRIBED:return"unsubscribedChannel";case K.DLG_DVR_DUPLICATE_FOLDER_ERROR:return"dvrDuplicateFolderError";case K.DLG_YES_NO_CONFIRMATION:return"yesNoConfirmationDialogue";case K.DLG_STARTOVER_PLAYBACK_CONFIRM:return"startoverPlaybackConfirm";case K.DLG_DUPLICATE_FOLDER_NAME:return"duplicateFolderName";case K.DLG_MANUAL_REC_MSG:return"manualRecordingDialog";case K.DLG_INVALID_FOLDER_NAME:return"invalidFolderName";case K.DLG_PPV_EVENT:return"PPVEventDialog";case K.DLG_PORTAL_RESUME_RECORDING:return"PortalResumeRecordingDialogue";case K.DLG_NO_VIDEO:return"noVideo";case K.DLG_USB_MEDIA:return"usbMedia";case K.DLG_ACCOUNT_LINKED:return"accountLinked";case K.DLG_USB_MEDIA_UNPLUGGED:return"usbMediaUnplugged";case K.DLG_SAFE_REMOVE_HARDDISK_RECORDING_IN_PROGRESS:return"safeRemoveHardDiskRecordingInProgress";case K.DLG_SAFE_REMOVE_HARDDISK:return"safeRemoveHardDisk";case K.DLG_SAFE_REMOVE_HARDDISK_OK:return"safeRemoveHardDiskOK";case K.DLG_SAFE_REMOVE_HARDDISK_FAILED:return"safeRemoveHardDiskFailed";case K.DLG_WHPVR_SERVER_NOT_PRESENT:return"WHPVRServerNotPresent";case K.DLG_WHPVR_PLAY_ERROR:return"whpvrPlaybackErrorDialogue";case K.DLG_WHPVR_RECORD_ERROR:return"whpvrRecordingErrorDialogue";case K.DLG_PPV_RECORDING_BLOCKED:return"ppvEventRecordingBlocked";case K.DLG_PPV_PURCHASE_SUCCESS:return"PPVPurchaseSuccessDialogue";case K.DLG_DVR_OPERATOR_DISABLED:return"dvrOperatorDisabled";case K.DLG_DVR_DISC_NOT_PRESENT:return"usbDVRDiscNotPresent";case K.DLG_ONDEMAND_PLAYER:return"onDemandPlayer";case K.DLG_STOP_PVR_PLAYBACK:return"StopPvrPlayback";case K.DLG_UNPLUG_HARDDISK:return"unplugHardDisk";case K.DLG_STOP_RECORDING:return"StopRecording";case K.DLG_NOW_RESUME_OR_STARTOVER:return"nowResumeOrStartOverDialog";case K.DLG_STOP_RECORDING_PLAYBACK:return"stopRecordingPlayback";case K.DLG_MORE_ON_NOW:return"moreOnNow";case K.DLG_PIN_MISMATCH:return"pinMisMatch";case K.DLG_USB_DEVICE_DETECTED:return"usbDeviceDetected";case K.DLG_CANCEL_RECORD:return"CancelRecordConfirmation";case K.DLG_CANCEL_LIVE_RECORD:return"CancelLiveRecordConfirmation";case K.DLG_CANCEL_SERIES:return"CancelSeriesConfirmation";case K.DLG_DELETE_RECORD:return"DeleteRecordConfirmation";case K.DLG_MANUAL_REC_FAIL_MSG:return"manualRecordingIsNotSet";case K.DLG_FACTORY_RESET_CONFIRMATION:return"factoryResetConfirmationDialogue";case K.DLG_CATCHUP_SYSTEM_MSG:return"catchupSystemErrorDialogue";case K.DLG_PVR_JOB_FAILED_MSG:return"pvrJobFailedDialogue";case K.DLG_PVR_INVALID_EVENT_MSG:return"pvrInvalidEventDialogue";case K.DLG_STARTOVER_RESUME_OR_STARTOVER:return"startoverResumeOrStartOverDialog";case K.DLG_CONFIRM_LEAVE_INSTALLER:return"confirmLeaveInstaller";case K.DLG_TS_SIGNAL_LOSS:return"timeShiftSignalLoss";case K.DLG_MEDIA_DEVICE_SAFE_REMOVE:return"mediaDeviceSafeRemove";case K.DLG_RECORD_CONFIRMATION:return"RecordConfirmationDialogue";case K.DLG_AT_TASK_FAILED_MSG:return"autotuneTaskFailedDialogue";case K.DLG_TUNE_FAILED_MSG:return"tuneFailedDialogue";case K.DLG_USB_DOMAIN_UNCERTAIN:return"domainUncertainDialogue";default:return null;}}function W(){var aa=a.apps.dialog.DialogManager.getCurrentDialog();if(aa&&aa.id.substring(0,3)==="usb"){a.apps.dialog.DialogManager.hideDialogWithId(aa.id);return true;}return false;}function t(){var aa=a.apps.dialog.DialogManager.getCurrentDialog();if(aa&&(aa.id.substring(0,3).toLowerCase()==="ppv")){a.apps.dialog.DialogManager.hideDialogWithId(aa.id);return true;}return false;}function O(){var ab=0,aa=false;for(ab=K.DLG_CA_SMART_CARD_EXPIRED;ab<=K.DLG_MORE_ON_NOW;ab++){aa=aa||a.apps.dialog.DialogManager.hideDialogWithId(l(ab));}return aa;}function k(){var aa=a.apps.dialog.DialogManager.getCurrentDialog();if(aa&&aa.id.substring(0,5)==="whpvr"){a.apps.dialog.DialogManager.hideDialogWithId(aa.id);return true;}return false;}function p(aa,ad,ab,ac){var ae=0;if(aa>0){ae=ad;if(ac){ae+=(ad+ab)*(aa-1);}}return ae;}function h(aD,au,aA,ai,ax,ah,aw,ag,ao){var ak=30,ad=44,aB=42,ac=1920,av=0,ab=0,aj=0,aC=aA.getText().split("\n"),ar=aC.length,am=0,ap=null,af=null,ay=400,ae=200,az=350,an=598,aq=236,aa=608,al=186,at=842;if(au){am=au.getTrueHeight();}if(ao){ab=aA.getTrueHeight();}else{ab=ad*ar;}if(ar>0){ab+=ak;}if(ax>0){aj=p(ax,ah,aw,ag);}if(!aD.getText()){ai=0;aB=0;}av=ai+aj+aB+ab+am;ap={backplateY:ay,backplateH:ae,backplateUpperGlow:az,backplateLowerGlow:an,overallHeightOfContent:av,heightOfButtons:aj,messageTextConfig:{x:0,width:ac,cssClass:"noMailText"}};af={backplateY:aq,backplateH:aa,backplateUpperGlow:al,backplateLowerGlow:at,overallHeightOfContent:av,heightOfButtons:aj};if(av===ab){return ap;}else{return af;}}function w(aa){if(aa){if(aa.action===a.app.constants.YES_OPTION){return true;}else{if(aa.key&&aa.key.action===a.app.constants.YES_OPTION){return true;}}}return false;}function u(aa,ab){return function(ac){if(w(ac)){aa();}else{ab();}};}function e(ab,ad,aa){var ac=null;if(!ab){return false;}ac=l(ab);if(ac===null){return false;}if(!r[ac]){return false;}if(ad){r[ac]._dialogGUIObject.setTitle(ad);}if(aa){r[ac]._dialogGUIObject.setMessage(aa);}return true;}function Z(aa,ac){var ab=null;if(!aa){return false;}ab=l(aa);if(ab===null){return false;}if(!r[ab]){return false;}if(ac){r[ab]._dialogGUIObject.setOptions(ac);}return true;}function P(aa){var ab=l(aa);if(ab===null){return null;}return r[ab];}function E(aa){var ab=l(aa);if(ab===null){return false;}r[ab]=null;return true;}function D(ar,am,aw,ay,ai,az,al,ad,ae,ax,aq,av,af){var ag=ay||[{name:a.app.DialogueHelper.getString("ok"),action:a.app.constants.OK_OPTION}],ak=x(ar),ab=ai||null,ap=az||null,at=al||"HORIZONTAL",ac=av||null,an=ad||null,au=ae||null,ah=ax||false,aj=af||null,aa=l(ar),ao;if(!aa){return null;}if(!r[aa]){if((am===undefined)&&(aw===undefined)){am=a.app.HotPlug.getString(aa+"Title");aw=a.app.HotPlug.getString(aa+"Message");}if((am===undefined)&&(aw===undefined)){return null;}r[aa]=new a.apps.dialog.ConfirmationDialogue(aa,am,aw,ag,ab,ap,ac,at,an,aq);}else{r[aa]._dialogGUIObject.selectDefaultItem();r[aa].setSelectedCallback(ab);r[aa].setHighlightedCallback(ap);}if(au){r[aa]._dialogGUIObject.configure(au);}r[aa]._dialogGUIObject.setAlertBigVisibility(ah);if(ak){r[aa]._dialogGUIObject.setErrorCode(a.app.DialogueHelper.getString("errorCode")+ak);}ao=a.apps.dialog.DialogManager.showDialog(r[aa],G(ar),Q(ar),null,null,aj);return r[aa];}function A(ac){var aa=0,ab=a.apps.dialog.DialogManager.getCurrentDialog();if(ab){if(ab.id.substring(0,7).toLowerCase()==="caerror"){if(ab.id===l(ac)){return true;}else{a.apps.dialog.DialogManager.hideDialogWithId(ab.id);}}}return D(ac);}function R(aa){var ab=a.app.DialogueHelper.getString("whpvrPlaybackErrorMessage");if(F===null){ab=ab.replace("%TVNAME",aa);F=new a.apps.dialog.ConfirmationDialogue("whpvrPlaybackErrorDialogue",a.app.DialogueHelper.getString("whpvrPlaybackErrorTitle"),ab,[{name:a.app.DialogueHelper.getString("ok"),action:1}],null);}k();a.app.DialogueHelper.displayDialogue(F,a.app.constants.DLG_WHPVR_PLAY_ERROR);}function s(aa){var ab=a.app.DialogueHelper.getString("whpvrRecordingErrorMessage");if(S===null){ab=ab.replace("%TVNAME",aa);S=new a.apps.dialog.ConfirmationDialogue("whpvrRecordingErrorDialogue",a.app.DialogueHelper.getString("whpvrRecordingErrorTitle"),ab,[{name:a.app.DialogueHelper.getString("ok"),action:1}],null);}k();a.app.DialogueHelper.displayDialogue(S,a.app.constants.DLG_WHPVR_RECORD_ERROR);}function q(am,an,aj,ab,ad,ak,ag,aa,al){var ah=0,ap=0,af=0,ao=0,ai=30,aq=44,ac=0,ae=0;if(an){ae=an.getTrueHeight();}ac=(ak-al)/2;if(!am.getText()){if(aa===0){af=ad+((ak/2)-(aq/2));}else{ap=ad+ac;af=ap+ae;ao=ad+ak-(ac+aa);}}else{ah=ad+ac+ag;ap=ah+ai;af=ap+ae;ao=ad+ak-(ac+aa);}am.setY(ah);if(an){an.setY(ap);}aj.setY(af);ab.setY(ao);}function c(aa){var ab=l(aa);if(!ab){return false;}return a.apps.dialog.DialogManager.hideDialogWithId(ab);}function d(ah,aa,ac,ae,ad){var ag=ac||0,af=ae||null,ai=ad||null,ak=G(aa),aj=x(aa),ab;if(aj){ah._dialogGUIObject.setErrorCode(a.app.DialogueHelper.getString("errorCode")+aj);}ab=a.apps.dialog.DialogManager.showDialog(ah,ak,ag,null,af,ai);if(!ab){a.apps.dialog.DialogManager.hideDialogWithId(ah.id);ab=a.apps.dialog.DialogManager.showDialog(ah,ak,ag,null,af,ai);}return ab;}function T(){F=null;S=null;r={};a.app.MemoryUtil.collectGarbage();}function I(){var aa=a.apps.dialog.DialogManager.getCurrentDialog();if(aa===null){return false;}if(l(a.app.constants.DLG_ETHERNET_DISCONNECTED)===aa.id){a.app.DialogueHelper.hideDialogueWithId(a.app.constants.DLG_ETHERNET_DISCONNECTED);}return true;}function L(){D(a.app.constants.DLG_ETHERNET_DISCONNECTED,a.app.ErrorMessage.getString("noEthernetConnectivity"),a.app.ErrorMessage.getString("pleaseCheckConnection"),null,null,null,null,null,null,true);}function M(){return a.apps.dialog.DialogManager.getCurrentDialog()?true:false;}function f(){a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.NowConfirmationDialog;X=new a.apps.dialog.ConfirmationDialogue("nowResumeOrStartOverDialog","-");a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.ConfirmationDialog;}function v(ah,ac,ab,aa,ae,ag){var ad,af=function(aj,ai){if(ag){ag(aj,ai);}a.apps.dialog.DialogManager.hideDialog(X);};if(!X){f();}ad=function(ai){if(ai&&ai.simpleExit){a.apps.dialog.DialogManager.hideDialog(X);}else{af();}if(ai&&ai.action){ai.action();}};X.customise({title:ah,options:ab,priceText:aa,message:ac,errorCode:ae,defaultButton:1,buttonPressedCallback:ad,exitCallback:af});a.app.DialogueHelper.displayDialogue(X,a.app.constants.DLG_NOW_RESUME_OR_STARTOVER,Y,null,af);}function b(){a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.SocialAccountAuthDialog;z=new a.apps.dialog.ConfirmationDialogue(a.app.constants.DLG_SOCIAL_ACCOUNT_AUTHORISED,"-");a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.ConfirmationDialog;}function o(ag,ah,ad,ai,aa,af,ac,ab){var ae=[{name:a.app.DialogueHelper.getString("cancel"),action:a.app.constants.NO_OPTION},{name:a.app.DialogueHelper.getString("cont"),action:a.app.constants.YES_OPTION}];if(!z){b();}z.customise({title:ag,options:ae,message:ah,selectedCallback:function(aj){a.apps.dialog.DialogManager.hideDialog(z);ad(aj);},exitCallback:ab,titleImage:ai,alertImageTextConfig:{text:aa,visible:true},alertImageSubTextConfig:{text:af,visible:true},qrCode:ac});z._dialogGUIObject.reconfigure();a.app.DialogueHelper.displayDialogue(z,a.app.constants.DLG_SOCIAL_ACCOUNT_AUTHORISED,0);}function C(ag){var ab=1,aa=2,ac=[{name:a.app.DialogueHelper.getString("yes"),action:ab},{name:a.app.DialogueHelper.getString("no"),action:aa}],af=a.app.DialogueHelper.getString("attention"),ad=a.app.DialogueHelper.getString("confirmExitMessage"),ae=function(ah){if(ah&&(ah.action===ab)){ag();}};if(y===null){y=new a.apps.dialog.ConfirmationDialogue("ConfirmExitDialog",af,ad,ac,null,null,null,"HORIZONTAL");y.customise({defaultButton:ab});}else{y.customise({title:af,message:ad,options:ac});}y.setSelectedCallback(ae);a.app.DialogueHelper.displayDialogue(y,a.app.constants.DLG_EXIT_APP);}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.DialogueHelper);a.apps.core.Language.importLanguageBundleForObject(a.app.DialogueHelper,null,"customise/resources/","LanguageBundle.js",T,window);},calculateMenuHeight:p,layoutConfirmationDialog:q,configureBackPlateUsingContent:h,displayDialogue:d,hideUSBDialogues:W,hidePPVDialogue:t,hideCADialogues:O,hideDialogueWithId:c,showEthernetDisconnectedDialogue:L,hideEthernetDisconnectedDialogue:I,showWHPVRPlaybackErrorDialogue:R,showWHPVRRecordingErrorDialogue:s,createAndShowDialogue:D,createAndShowCADialogue:A,updateDialogueTitleAndMessage:e,updateDialogueOptions:Z,mapDialogueID:l,getDialogue:P,deleteDialogue:E,mapDialogueErrorCode:x,isDialogueCurrentlyShown:M,showNowDialog:v,showSocialAccountAuthorisationDialog:o,displayExitAppDialog:C};}());}($N||{}));(function(a){a.app=a.app||{};a.app.FormatUtils=(function(){function g(o,m){var n;for(n=0;n<o.length;n++){o[n].configs=m[o[n].title];}return o;}function e(o){var m=o.toString().length,n="";if(m===1){n="00"+o;}else{if(m===2){n="0"+o;}else{n=o;}}return n;}function l(){return(a.app.FeatureManager.getMediaPlaybackFeatureStatus()&&(a.app.UsbBrowserHelper.getMediaPlaybackStatus()||(a.app.DlnaHelper.getAvailableDevices().length>0)?true:false));}function f(){return[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isAvailable:a.app.FormatUtils.getMediaMenuStatus,scrollComponent:"scrollIndicatorFirstMenu",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}];}function d(){return[{dataMapper:"Settings",itemTemplate:"MenuItemWithHighlight",component:"firstSubMenuList",isAvailable:a.app.PVRCapability.isPVREnabled,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"5"}],componentConfig:[{setter:"itemHeight",value:"77"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}];}function b(){return[{dataMapper:"Settings",changeTitle:false,itemTemplate:"MenuItemWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"265"},{setter:"backgroundConfig",value:{y:"-235"}}]},showSubMenuTitle:"false",subMenuTitleConfig:{defaultConfig:{x:745,y:90},modifiedConfig:{x:715,y:150,visible:true}},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}];}function k(){return[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"5"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}];}function h(){var m=[{dataMapper:"BasicSettingsSubMenuMapper",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"3"}],componentConfig:[{setter:"itemHeight",value:"120"},{setter:"itemConfig",value:{width:"661"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}];return m;}function c(){var m=[{dataMapper:"MenuRecordingsFolder",itemTemplate:"RecordingFolderMenuItem",component:"secondSubMenuList",scrollComponent:"scrollIndicator",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}},{setter:"itemConfig",value:{width:"661",textWidth:520}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]},{component:"greenKey",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:(a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE)===a.app.constants.LANG_PORTUGUESE_BR)?"1070":"1135"}]},{component:"greenSelectLabel",componentConfig:[{setter:"text",value:"menuNewFolder"},{setter:"X",value:(a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE)===a.app.constants.LANG_PORTUGUESE_BR)?"1110":"1175"}]}]}}];return m;}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.FormatUtils);},getBlockChannelMenuConfig:function(){var m=[{dataMapper:"AllChannelsForBlockedView",itemTemplate:"ChannelListIconItem",component:"firstSubMenuList",scrollType:"item",title:"allChannels",titleId:"firstSubMenuTitle",directChannelEntryEnabled:true,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"125"},{setter:"backgroundConfig",value:{y:"-95"}}]},isClearView:"true",showSubMenuTitle:"true",itemSelected:"doubleMenuItemSelected",scrollComponent:"scrollIndicatorFirstMenu"},{dataMapper:"Favourites",itemTemplate:"DoubleTextItem",component:"secondSubMenuList",scrollType:"item",title:"menuBlockChannelsTitle",titleId:"secondSubMenuTitle",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"125"},{setter:"backgroundConfig",value:{y:"-95"}}]},showSubMenuTitle:"true",itemSelected:"doubleMenuItemSelected",scrollComponent:"scrollIndicator"}];return m;},getDefaultFolderConfig:c,getAlphaNumKeypadConfig:function(){return[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"0"}]},isClearView:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"greenKey",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"400"}]},{component:"greenSelectLabel",componentConfig:[{setter:"text",value:"menuCreateFolder"},{setter:"X",value:"440"}]}]}}];},getParentalRatingsConfig:function(){return[{dataMapper:"MenuParentalRatings",itemTemplate:"RecordingFolderMenuItem",component:"firstSubMenuList",uiConfigs:{dataConfig:[{setter:"visibleRows",value:"7"}],componentConfig:[{setter:"backgroundConfig",value:{width:"1346",y:"-30"}},{setter:"itemConfig",value:{width:"1346",highlightWidth:"1310",x:"18",textWidth:1000}},{setter:"y",value:"60"}]},isClearView:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:(a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE)===a.app.constants.LANG_PORTUGUESE_BR)?"1020":"1090"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuBlockContentLabel"},{setter:"x",value:(a.platform.system.Preferences.get(a.app.constants.PREF_LANGUAGE)===a.app.constants.LANG_PORTUGUESE_BR)?"1070":"1140"}]}]}}];},getBlocksSubMenuConfig:function(){return[{dataMapper:"Settings",changeTitle:false,itemTemplate:"MenuItemWithHighlight",component:"secondSubMenuList",isClearView:false,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},showSubMenuTitle:false,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"1310"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"1190"}]}]}}];},formatRecorderSettingsMenuData:function(n){var m;m={menuNonEpisodicRecording:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",isClearView:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuEpisodicRecording:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",isClearView:"true",itemTemplate:"MultipleTitleSubtitleItem",scrollComponent:"scrollIndicatorFirstMenu",component:"firstSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}],dataConfig:[{setter:"VisibleRows",value:"4"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuPlaybackPlayer:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",isClearView:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuDiskDrive:[{dataMapper:"Settings",changeTitle:true,isClearView:true,itemTemplate:"MenuItemWithHighlight",component:"firstSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"2"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},showSubMenuTitle:false,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuWholeHomePvr:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:true,isClearView:true,itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isAvailable:true,uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuDefaultFolder:c(),paddingBeforeNonEpisodic:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],paddingBeforeEpisodic:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuNonEpisodicKeepUntil:[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuEpisodicKeepUntil:[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuTypeOfEpisodes:[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuNonEpisodicBlockPlayback:[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuEpisodicBlockPlayback:[{dataMapper:"RecordingsSubMenuListData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],pvrPlaybackPlayer:[{dataMapper:"PlaybackPlayerSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"visibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuLocalServerName:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]},{component:"greenKey",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"1135"}]},{component:"greenSelectLabel",componentConfig:[{setter:"text",value:"menuokSaveLabel"},{setter:"X",value:"1175"}]}]}}],menuRecordLocation:[{dataMapper:"WHPvrRecordServerData",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"visibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}]};n=g(n,m);return n;},formatSystemMenuData:function(){var m=[{title:"menuIPConnections",drawMenuCallback:"systemViewDrawMenuCallback",configs:[{dataMapper:"SettingsSTBInfoViewDataMapper",itemTemplate:"SettingsSystemMenuItem",component:"secondMultiItemTypeSubMenuList",isClearView:"true",scrollType:"page",scrollComponent:"scrollIndicator",isMultiplePageSupported:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"yellowKey",componentConfig:[{setter:"X",value:"715"},{setter:"visible",value:"true"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuIpRenewLabel"},{setter:"X",value:"757"}]}]},uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"10"}],componentConfig:[{setter:"ItemHeight",value:"54"},{setter:"Y",value:"70"},{setter:"X",value:"0"},{setter:"backgroundConfig",value:{Width:"1342",y:"-40"}}]}}]},{title:"menuSTBinfo",drawMenuCallback:"systemViewDrawMenuCallback",configs:[{dataMapper:"SettingsSTBInfoViewDataMapper",itemTemplate:"SettingsSystemMenuItem",component:"secondMultiItemTypeSubMenuList",isClearView:"true",scrollType:"page",scrollComponent:"scrollIndicator",isMultiplePageSupported:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]}]},uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"10"}],componentConfig:[{setter:"ItemHeight",value:"54"},{setter:"Y",value:"70"},{setter:"X",value:"0"},{setter:"backgroundConfig",value:{Width:"1342",y:"-40"}}]}}]},{title:"menuDiagnostics",drawMenuCallback:"systemViewDrawMenuCallback",configs:[{dataMapper:"SettingsSTBInfoViewDataMapper",itemTemplate:"SettingsSystemMenuItem",component:"secondMultiItemTypeSubMenuList",scrollType:"page",isClearView:"true",scrollComponent:"scrollIndicator",isMultiplePageSupported:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]}]},uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"7"}],componentConfig:[{setter:"ItemHeight",value:"54"},{setter:"Y",value:"70"},{setter:"X",value:"0"},{setter:"backgroundConfig",value:{Width:"1342",y:"-40"}}]}}]}];if(a.app.FeatureManager.isWHPVREnabled()){m.push({title:"menuWHPVR",drawMenuCallback:"systemViewDrawMenuCallback",configs:[{dataMapper:"WHPvrServersData",itemTemplate:"SettingsSystemMenuItem",component:"secondMultiItemTypeSubMenuList",isClearView:"true",scrollType:"page",scrollComponent:"scrollIndicator",isAvailable:true,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]}]},uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"10"}],componentConfig:[{setter:"ItemHeight",value:"54"},{setter:"Y",value:"70"},{setter:"X",value:"0"},{setter:"backgroundConfig",value:{Width:"1342",y:"-40"}}]}}]});}return m;},formatSTBInfoData:function(m){var p=[],o,n;for(o=0;o<m.length;o++){n={title:m[o].key,subTitle:m[o].value};if(m[o].templateConfig){n.template=m[o].templateConfig.template;n.dataMapper=m[o].templateConfig.dataMapper;n.itemConfig=m[o].templateConfig.itemConfig;}p.push(n);}return p;},formatPreferencesSettingsMenuData:function(n){var m;m={menuLanguages:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",scrollComponent:"scrollIndicatorFirstMenu",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuMenuLanguage:[{dataMapper:"MenuLanguageSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",title:"menuLanguages",titleId:"secondSubMenuTitle",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuAudioLanguage:[{dataMapper:"AudioLanguageSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuSubtitle:[{dataMapper:"SubtitleSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuMedia:f(),menuPhotoDisplayDuration:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuPhotoTransition:[{dataMapper:"TransitionEffectsSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuPlayerDuration:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuMiniguide:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",scrollComponent:"scrollIndicatorFirstMenu",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuMiniguideDuration:[{dataMapper:"MiniguideDurationSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuTipsFromNet:[{dataMapper:"TipsFromNetSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"73"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuPrefStb:[{dataMapper:"Settings",changeTitle:false,itemTemplate:"MenuItemWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},showSubMenuTitle:false,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"1310"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"1190"}]}]}}],menuTv:[{dataMapper:"Settings",changeTitle:false,itemTemplate:"MenuItemWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},showSubMenuTitle:false,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"1310"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"1190"}]}]}}],menuRecorder:d(),menuMoCA:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"bigMenuItemList",scrollComponent:"scrollIndicatorFirstMenu",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"},{setter:"y",value:"95"},{setter:"backgroundConfig",value:{y:"-65"}}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}]};n=g(n,m);return n;},formatPreferencesStbMenuData:function(n){var m;m={menuAutoTune:[{dataMapper:"AutoTuneList",itemTemplate:"GenericReminderListItem",errorText:"noReminders",component:"fullViewMenuList",scrollComponent:"scrollIndicator",scrollType:"item",isClearView:"true",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"114"},{setter:"Y",value:"98"},{setter:"backgroundConfig",value:{y:"-68"}},{setter:"itemConfig",value:{cssClassTitle:"dialogSubtitle",cssClassSubtitle:"menuSubTitle"}}]},footerConfig:this.getAutoTuneFooterConfig(true)}],menuAutoTuneEdit:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",isClearView:"true",component:"firstSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuAutoTuneChannel:[{title:"autoTuneAllChannels",dataMapper:"AutoTuneAllChannels",itemTemplate:"ChannelListIconItem",component:"secondSubMenuList",scrollComponent:"scrollIndicator",scrollType:"item",directChannelEntryEnabled:true,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuAutoTuneFrequency:[{dataMapper:"AutoTuneFrequencySubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",scrollType:"item",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuAutoTuneStartDate:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuAutoTuneStartTime:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuFrontPanel:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isClearView:true,uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuFrontPanelDisplay:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuFrontPanelIntensity:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuAutoShutdown:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isClearView:true,uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuAutoStandbyAfter:[{dataMapper:"OptionWindowItemsLookUp",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"6"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}]};n=g(n,m);return n;},formatPreferencesTvMenuData:function(n){var m;m={menuSdOutput:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isClearView:true,uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuAspectRatio:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuDisplayFormat:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuVideoSystem:[{dataMapper:"VideoSystemSubMenu",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuHdOutput:[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",component:"firstSubMenuList",isClearView:true,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}],menuHdDisplayFormat:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuHdmiAudioOutput:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuResolution:[{dataMapper:"OptionWindowItems",itemTemplate:"MenuItemIconWithHighlight",component:"secondSubMenuList",uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"5"}],componentConfig:[{setter:"itemHeight",value:"70"},{setter:"y",value:"150"},{setter:"backgroundConfig",value:{y:"-120"}}]},showSubMenuTitle:"true",footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}],menuLipSync:[{component:"settingsKeypad",uiConfigs:{component:"backgroundConfig",componentConfig:[{setter:"X",value:"685"}]},showSubMenuTitle:false,footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"menuokSelectLabel"},{setter:"X",value:"755"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]}]}}]};n=g(n,m);return n;},formatRecordingsFolderListData:function(o){var m=[{title:a.app.FormatUtils.getString("pvrSettingsRecordingHighlights"),value:a.app.constants.ROOT_PVR_FOLDER_VALUE}],p=o.length,n;for(n=0;n<p;n++){if(!a.app.FolderUtil.isFolderRootFolder(o[n])){m.push({title:a.app.StringUtil.removeLeadingForwardSlash(o[n]),value:o[n]});}}return m;},formatBlockedData:function(m){var p=[],o=null,n=null;for(o in m){if(m.hasOwnProperty(o)&&o){n={title:m[o].serviceName,channelNumber:e(m[o].logicalChannelNum),channelInfo:m[o],serviceId:m[o].serviceId};p.push(n);}}return p;},formatFavouriteBlockChannelsData:function(m){var p=[],o,n;for(o=0;o<m.length;o++){n={title:m[o].serviceName,channelNumber:e(m[o].logicalChannelNum),channelInfo:m[o],serviceId:m[o].serviceId};p.push(n);}return p;},getAutoTuneEditConfig:function(){return[{dataMapper:"BasicSettingsSubMenuMapper",changeTitle:"true",itemTemplate:"MultipleTitleSubtitleItem",isClearView:"true",component:"firstSubMenuList",uiConfigs:{componentConfig:[{setter:"itemHeight",value:"114"}]},footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"661"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"627"}]},{component:"greenKey",componentConfig:[{setter:"x",value:"250"},{setter:"visible",value:true}]},{component:"greenSelectLabel",componentConfig:[{setter:"text",value:"manualRecordingSave"},{setter:"x",value:"295"},{setter:"visible",value:true}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"508"}]}]}}];},getFavoriteFooterConfig:function(p,m){var o,q,n;if(m!=="allChannelsList"){o=(p==="allChannels")?"40":"710";q=(p==="favorites")?"755":"90";n=(p==="allChannels")?"addToFavorites":"deleteFromListOfFavorites";}else{o=40;q=90;n=(p==="allChannels")?"addToFavorites":"deleteFromFavorites";}return{footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1350"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:n},{setter:"X",value:q}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:o}]}]}};},getBlockFooterConfig:function(p,m,r){var o,s,n,q=null;if(m!=="allChannelsList"){n=(p==="allChannels")?"block":"unBlock";}else{n=(p==="allChannels")?"block":"unBlock";}q={allChannels:{footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1350"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"greenKey",componentConfig:[{setter:"X",value:"390"},{setter:"visible",value:"true"}]},{component:"greenSelectLabel",componentConfig:[{setter:"X",value:"440"},{setter:"text",value:"filterChannels"}]}]}},blocked:{footerConfig:{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1350"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:n},{setter:"X",value:"755"}]}]}}};if(p!=="empty"){q.allChannels.footerConfig.uiConfigs.push({component:"okIcon",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"710"}]});q.allChannels.footerConfig.uiConfigs.push({component:"selectLabel",componentConfig:[{setter:"text",value:n},{setter:"X",value:"755"}]});}if(r===true){q.allChannels.footerConfig.uiConfigs.push({component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"1310"}]});q.allChannels.footerConfig.uiConfigs.push({component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"1190"}]});}if(m!=="allChannelsList"){return q.blocked;}else{return q.allChannels;}},getAutoTuneFooterConfig:function(m){return{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]},{component:"rightArrow",componentConfig:[{setter:"visible",value:"true"},{setter:"x",value:"1310"}]},{component:"forwardLabel",componentConfig:[{setter:"text",value:"menuSettingsForward"},{setter:"x",value:"1190"}]},{component:"selectLabel",componentConfig:[{setter:"text",value:"editString"},{setter:"X",value:"957"},{setter:"visible",value:m}]},{component:"okIcon",componentConfig:[{setter:"Visible",value:false},{setter:"X",value:"915"},{setter:"visible",value:m}]},{component:"greenKey",componentConfig:[{setter:"visible",value:"true"},{setter:"X",value:"265"}]},{component:"greenSelectLabel",componentConfig:[{setter:"text",value:"addMenuText"},{setter:"X",value:"307"}]},{component:"yellowKey",componentConfig:[{setter:"X",value:"575"},{setter:"visible",value:m}]},{component:"yellowSelectLabel",componentConfig:[{setter:"text",value:"deleteString"},{setter:"X",value:"617"},{setter:"visible",value:m}]}]};},formatChannelNumber:e,getSocialAccountOptionsConfig:h,getSocialAccountPinSettingOptionsConfig:k,getSocialAccountInformationConfig:b,getMediaMenuStatus:l,formatRecordLocationData:function(m){var n=[],p,o;for(p=0;p<m.length;p++){o={title:m[p].key,value:m[p].value};n.push(o);}return n;},getPurchasesConfig:function(){return[{dataMapper:"PurchaseItemData",itemTemplate:"PurchaseListItem",component:"fullViewMenuList",scrollComponent:"scrollIndicator",errorText:"noPurchases",scrollType:"item",isClearView:true,uiConfigs:{dataConfig:[{setter:"VisibleRows",value:"4"}],componentConfig:[{setter:"itemHeight",value:"110"},{setter:"Y",value:"68"},{setter:"backgroundConfig",value:{y:"-38"}},{setter:"itemConfig",value:{}}]},footerConfig:this.getPurchasesFooterConfig()}];},getPurchasesFooterConfig:function(){return{group:"firstMenuFooter",uiConfigs:[{component:"footerBackgroundBox",componentConfig:[{setter:"Width",value:"1346"}]},{component:"leftArrow",componentConfig:[{setter:"visible",value:"true"}]},{component:"backLabel",componentConfig:[{setter:"text",value:"menuSettingsBack"}]}]};},getShortCutConfigsMenuRecorderPreferences:d,getShortCutConfigsMenuMediaPreferences:f};}());}($N||{}));(function(a){a.app=a.app||{};a.app.SettingsPortalData=(function(b){var c=null;return{initialise:function(){},getSettingsPortalData:function(){c={gridSize:{width:2,height:3},items:[{x:0,y:0,width:1,height:1,data:{href:"../../../customise/resources/images/net/menu_portal_preferencias.png",text:b.app.SettingsPortalData.getString("portalMenuPreferences"),id:"portalMenuPreferences"}},{x:0,y:1,width:1,height:1,data:{href:"../../../customise/resources/images/net/config_01_favoritos.png",text:b.app.SettingsPortalData.getString("portalMenuFavorites"),id:"portalMenuFavorites"}},{x:0,y:2,width:1,height:1,data:{href:"../../../customise/resources/images/net/menu_portal_lembretes.png",text:b.app.SettingsPortalData.getString("portalMenuReminders"),id:"portalMenuReminders"}},{x:1,y:0,width:1,height:1,data:{href:"../../../customise/resources/images/net/menu_portal_compras.png",text:b.app.SettingsPortalData.getString("portalMenuPurchases"),id:"portalMenuPurchases"}},{x:1,y:1,width:1,height:1,data:{href:"../../../customise/resources/images/net/menu_portal_sistema.png",text:b.app.SettingsPortalData.getString("portalMenuSystem"),id:"portalMenuSystem"}}]};return c;}};}(a));a.apps.core.Language.adornWithGetString(a.app.SettingsPortalData);}($N||{}));(function(a){a.app=a.app||{};a.app.MusicCategoriesData=(function(){var d=new a.apps.core.Log("MusicCategoriesData","MusicCategoriesData"),h=[["Aerosmith & Whitesnake","Anos 60","Anos 70","Anos 80","Anos 90","Axé","Baladas","Blues","Bossa Nova","CBN SP","Clássica","Disco","Easy Listening","Eletrônica","Festa","Forró","Globo FM","Hip Hop","Jazz Clássico","Jazz Contemporâneo","Kids","Latino","Lounge","MPB","New Rock","Pagode","RFI","Reggae","Rhythm & Blues","Rock Clássico","Rádio Gaúcha","Rádio Globo RJ","Rádio Globo SP","Samba de Raiz","Sertanejo","Standards","Trilhas Sonoras"],["MPB","Bossa Nova","Pagode","Samba de Raiz","Axé","Sertanejo","Forró"],["New Rock","Rock Clássico"],["Aerosmith & Whitesnake","Baladas","Disco","Festa","Eletrônica"],["Blues","Rhythm & Blues","Jazz Clássico","Jazz Contemporâneo"],["Clássica","Easy Listening"],["Hip Hop","Latino"],["Kids","Anos 60","Anos 70","Anos 80","Anos 90","Reggae","Lounge","Standards","Trilhas Sonoras"],["Rádio Globo RJ","Globo FM","CBN SP","Rádio Globo SP","Rádio Gaúcha","RFI"]],g=[],f=true;function b(l,k){if(l.name>k.name){return 1;}if(l.name<k.name){return -1;}return 0;}function c(l,k){if(l.serviceName>k.serviceName){return 1;}if(l.serviceName<k.serviceName){return -1;}return 0;}function e(){var o=0,n=0,k={},m=null,l=null;k.contentNibbleLevel1=0;k.userByte=0;g=[];g[0]=[];f=true;for(o=1;o<=8;o+=1){k.contentNibbleLevel2=o;if(CCOM.EPG.getServicesRSByGenre){m=CCOM.EPG.getServicesRSByGenre("serviceId, name, uri",k,"type=2","serviceId");}else{return;}if(m.error){return;}else{l=m.getNext(100);g[o]=[];for(n=0;n<l.length;n+=1){g[o].push(l[n]);}g[o].sort(b);if(l.length===0){f=false;}}}g[0]=a.platform.btv.EPG.getRadioChannels();g[0].sort(c);h=g;}return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.MusicCategoriesData);e();},getMusicPortalData:function(){var n=0,k=0,o=this.getGenreData(),m=o.length,l={gridSize:{width:3,height:3},items:[{x:0,y:0,width:1,height:1,data:o[0]},{x:0,y:1,width:1,height:1,data:o[1]},{x:0,y:2,width:1,height:1,data:o[6]},{x:1,y:0,width:1,height:1,data:o[3]},{x:1,y:1,width:1,height:1,data:o[5]},{x:1,y:2,width:1,height:1,data:o[2]},{x:2,y:0,width:1,height:1,data:o[7]},{x:2,y:1,width:1,height:1,data:o[4]},{x:2,y:2,width:1,height:1,data:o[8]}]};if(!f){for(k=0;k<m;k+=1){if(h[k]&&h[k].length>0){l.items[n].data=o[k];n+=1;}}if(n<m){l.items.splice(n);}}return l;},getActualGenreData:function(){var k=0,n=this.getGenreData(),m=n.length,l=[];for(k=0;k<m;k+=1){if(h[k]&&h[k].length>0){l.push(n[k]);}}return l;},getGenreData:function(){return[{hrefBg:"../../../customise/resources/images/net/musicIcons/todos_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_01.png",text:a.app.MusicCategoriesData.getString("musicCategoryAll"),id:"musicCategoryAll"},{hrefBg:"../../../customise/resources/images/net/musicIcons/brazil_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_02.png",text:a.app.MusicCategoriesData.getString("musicCategoryBrasilian"),id:"musicCategoryBrasilian"},{hrefBg:"../../../customise/resources/images/net/musicIcons/rock_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_03.png",text:a.app.MusicCategoriesData.getString("musicCategoryRock"),id:"musicCategoryRock"},{hrefBg:"../../../customise/resources/images/net/musicIcons/pop_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_04.png",text:a.app.MusicCategoriesData.getString("musicCategoryPopDance"),id:"musicCategoryPopDance"},{hrefBg:"../../../customise/resources/images/net/musicIcons/jazz_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_05.png",text:a.app.MusicCategoriesData.getString("musicCategoryJazzRnB"),id:"musicCategoryJazzRnB"},{hrefBg:"../../../customise/resources/images/net/musicIcons/instrumental_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_06.png",text:a.app.MusicCategoriesData.getString("musicCategoryInstrumental"),id:"musicCategoryInstrumental"},{hrefBg:"../../../customise/resources/images/net/musicIcons/mundo_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_07.png",text:a.app.MusicCategoriesData.getString("musicCategoryWorldMusic"),id:"musicCategoryWorldMusic"},{hrefBg:"../../../customise/resources/images/net/musicIcons/outros_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_08.png",text:a.app.MusicCategoriesData.getString("musicCategoryOthers"),id:"musicCategoryOthers"},{hrefBg:"../../../customise/resources/images/net/musicIcons/radio_merged.png",href:"../../../customise/resources/images/net/musicIcons/musica_gd_white_09.png",text:a.app.MusicCategoriesData.getString("musicCategoryRadio"),id:"musicCategoryRadio"}];},getSubCategoriesData:function(k){if(k<h.length){return h[k];}return[];},checkGenreIndex:function(l){var k=0,m=this.getGenreData();for(k=0;k<m.length;k+=1){if(l===m[k].id){break;}}return k;},refreshRadioChannels:e};}());}($N||{}));(function(a){a.app=a.app||{};a.app.SignalInfoUtil=(function(){var c=new a.apps.core.Log("Helper","SignalInfoUtil"),o=false,m="cable_signal_strength",k=null,b=null,p=null,f=null,g=null,h=null,n;function e(q){CCOM.SINetwork.removeEventListener("onScanError",n);CCOM.SINetwork.removeEventListener("getScanProgressOK",g);g=null;if(f){clearInterval(f);f=null;}a.common.helper.ScanManager.stopScan();o=null;if(h){h(q);}}function l(q){k=q.connectionInfo;if(b){b(k);}}function d(q){k=null;if(p){p(k);}}n=function(q){c("scanError",JSON.stringify(q));e(q);};return{initialise:function(){CCOM.SINetwork.addEventListener("getConnectionInfoOK",l);CCOM.SINetwork.addEventListener("getConnectionInfoFailed",d);},startMonitorSignal:function(s,r,t){var q,u=function(){};g=s;h=r;u=function(v){if(h){h(v);}};a.common.helper.ScanManager.setScanProgressCallback(g);o=a.common.helper.ScanManager.triggerScan("signalstrength",null,u);if(!o){if(h){h(q);}}else{if(f){window.clearInterval(f);f=null;}f=setInterval(function(){o=a.common.helper.ScanManager.triggerScan("signalstrength",null,u);a.common.helper.ScanManager.getCurrentScanProgress(null);},t);}},stopMonitorSignal:function(){e();},getConnectionInfo:function(){var q;q=a.app.fullScreenPlayer.tuner.getCurrentUri();CCOM.SINetwork.getConnectionInfo(q);},setConnectionInfoSuccessCallBack:function(q){b=q;},setConnectionInfoFailureCallBack:function(q){p=q;},convertSignalStrengthTodBmV:function(t){var v,u=0,r=-16,s=65,q=a.app.constants.PREF_IMPEDENCE_VALUE;if(t){v=(t*(40/100))-s;u=v+(10*((Math.log(q*1000))/(Math.log(10))));}else{u=r;}return u;}};}());}($N||{}));(function(a){a.app=a.app||{};a.app.TraxisUtil=(function(){var f=new a.apps.core.Log("Helper","TraxisUtil"),u={PRICES:1,GET_BOOKMARK:2,SET_BOOKMARK:3,START_PURCHASE:4,COMPLETE_PURCHASE:5,PURCHASED_PRODUCTS:6,GET_FAVOURITES:7},b=function(){var y="";if(a.app.Config.getConfigValue("traxis.developer.mode")==="off"){y=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/teleIdeaTraxis",true);}else{y=a.app.Config.getConfigValue("traxis.developer.server");}return y;},w=function(){var y=a.app.ConditionalAccessCAK73.getCASmartCardInfo(),z=y.smartcardInfo?y.smartcardInfo.serialNumber:"";return z.replace(/\s/g,"");},o=function(B,E,D){var F=b()+"/",z,G,A,y,C=false;switch(B){case u.PRICES:z="GetPrices";G="ProductIds";break;case u.GET_BOOKMARK:z="GetBookmark";G="AssetId";break;case u.SET_BOOKMARK:z="StoreBookmark";G="AssetId";A="Bookmark";break;case u.START_PURCHASE:z="StartPurchase";G="TicketId";y="Signature=&PurchaseChannel=IMP";break;case u.COMPLETE_PURCHASE:z="CompletePurchase";G="EntitlementId";y="Signature=";break;case u.PURCHASED_PRODUCTS:z="GetPurchasedProducts";break;case u.GET_FAVOURITES:z="web/WishList/props/name";C=true;y="Output=json";break;}F=F+z;if(C){F=F+"?CpeId="+w();}else{F=F+".traxis?STBId="+w();}if(E){F=F+"&"+G+"="+E;}if(D||D===0){F=F+"&"+A+"="+D;}if(y){F=F+"&"+y;}return F;},v=function(z){var F=[],D,A,y,E,C,B;if(z){A=z.split(/\s+/);for(C=0;C<A.length;C++){if(A[C]!==""){D={};y=A[C].split("|");for(B=0;B<y.length;B++){E=y[B].split("=");if(E[1]){D[E[0].toLowerCase()]=E[1];}}F.push(D);}}}return F;},t=function(z,y,C,A){var B=new a.apps.core.AjaxHandler();B.responseCallback=function(D){if(D&&D.status===200&&y){if(A){y(JSON.parse(D.responseText));}else{y(v(D.responseText));}}else{if(C){if(D){f("makeRequest",JSON.stringify(D));C(D.status);}else{C(654);}}}};B.requestData(z,5000);},d=function(A,y,D,B){var C=new a.apps.core.AjaxHandler(),z="Content-Type:text/xml";C.responseCallback=function(E){if(E&&E.status===200&&y){y(JSON.parse(E.responseText));}else{if(D){if(E){f("makeBodySyntaxRequest",JSON.stringify(E));D(E.status);}else{D(654);}}}};C.postData(A,z,B);},q=(function(){var y=[],I=[],B=function(S,M,R){var N=b()+"/web/content/"+S+"/titles?AliasIdType=VodBackOfficeId&Output=json",P=true,O,Q=function(T){if(T.Titles&&T.Titles.Title&&T.Titles.Title.length){O=T.Titles.Title[0].id;I[S]=O;M(O);}};O=I[S];if(O){M(O);}else{t(N,Q,R,P);}},G=function(M){var N;for(N in I){if(I.hasOwnProperty(N)&&I[N]===M){return N;}}return null;},A=function(O,M,R){var N=b()+"/web/Title/"+O+"/contents/props/aliases/filter/isViewableOnCpe==true?&Output=json",Q=true,S,P=function(W){var T,X,V,U;if(W.Contents&&W.Contents.Content&&W.Contents.Content.length&&W.Contents.Content[0].Aliases){T=W.Contents.Content[0].Aliases.Alias;X=T?T.length:0;for(U=0;U<X;U++){V=T[U];if(V.type==="VodBackOfficeId"){S=V.Value;I[S]=O;M(S);return;}}}R();};S=G(O);if(S){M(S);}else{t(N,P,R,Q);}},D=function(O){var M,N=(O)?O.length:0;for(M=0;M<N;M++){y[O[M].fileName]={crid:O[M].crid,fileName:O[M].fileName};}},E=function(O,R,M,T){var P=b()+"/web/Title/"+R+"/WishList?CpeId="+w(),N,S=function(U){if(M){M(U);}},Q=function(U){if(T){T(U);}};N=new a.apps.core.XssRequest(O,P,S,Q);N.send();},C=function(V){var T=[],U,P,M,S,N,O,R,Q;if(V&&V.Titles&&V.Titles.Title){P=V.Titles.Title;M=P.length||0;for(R=0;R<M;R++){U=P[R];if(U&&U.Contents&&U.Contents.Content&&U.Contents.Content.length&&U.Contents.Content[0].Aliases){N=U.Contents.Content[0].Aliases.Alias;O=N.length||0;for(Q=0;Q<O;Q++){S=N[Q];if(S&&S.type==="VodBackOfficeId"){if(S.Value){T.push({crid:U.id,fileName:S.Value});}}}}}}return T;},z=function(N,O){var Q='<?xml version="1.0" encoding="utf-8"?><Request xmlns="urn:eventis:traxisweb:1.0"><Parameters><Parameter name="Output">JSON</Parameter></Parameters><Identity><CpeId>'+w()+'</CpeId></Identity><RootRelationQuery relationName="Wishlist"><Options><Option type="Limit">100</Option><Option type="Props">Name,IsViewableOnCpe,isAdult</Option></Options><SubQueries><SubQuery relationName="Contents"><Options><Option type="props">aliases</Option><Option type="filter">IsViewableOnCpe==true</Option></Options></SubQuery></SubQueries></RootRelationQuery></Request>',M=b()+"/web",P=function(R){var S;if(R){S=C(R);D(S);if(N){N(S);}}};y=[];d(M,P,O,Q);},L=function(M){return(y[M])?true:false;},K=function(N,P,M,O){E("PUT",N,function(Q){y[P]={crid:N,fileName:P};M(Q);},O);},H=function(N,P,M,O){E("DELETE",N,function(Q){if(L(P)){delete y[P];}if(M){M(Q);}},O);},J=function(O,M,N){B(O,function(P){K(P,O,M,N);},N);},F=function(O,M,N){B(O,function(P){H(P,O,M,N);},N);};return{getFavourites:z,isInFavourites:L,addFavouriteByFileName:J,removeFavouriteByFileName:F,getFileNameForCrid:A};}()),n=function(E){var K={},F,D,B,I,J,z,A,C,H,G,y;if(E&&E.Contents&&E.Contents.Content){B=E.Contents.Content;I=B.length;for(F=0;F<I;F++){y=B[F].id;J=B[F].Tstv;if(B[F].Aliases){z=B[F].Aliases.Alias;A=z.length;for(D=0;D<A;D++){if(z[D].type==="VodBackOfficeId"){C=z[D].Value;}}}if(J){K.startover=[];K.catchup=[];H=J.Option;G=H.length;for(D=0;D<G;D++){if(H[D].model==="Restart"){K.startover.push({crid:y,fileName:C});}else{if(H[D].model==="CatchUp"){K.catchup.push({crid:y,fileName:C});}}}}}}return K;},s=function(z,y,A){t(o(u.PRICES,z),function(B){y.price=B[0].price;y.listPrice=B[0].listprice;y.ticketId=B[0].ticketid;y.entitlementId=B[0].entitlementid;if(B[0].entitlementtimeout){y.entitlementTimeout=new Date(B[0].entitlementtimeout);}a.apps.util.EventManager.fire("traxisProductsUpdated",{productId:z,dataObject:y});},A);},e=function(z,B){var y=function(C){B(C[0].bookmark);},A=function(){B(0);};t(o(u.GET_BOOKMARK,z),y,A);},p=function(y,z){t(o(u.SET_BOOKMARK,y,z));},r=function(A,y,z){t(o(u.START_PURCHASE,A),function(B){y(B[0]);},z);},k=function(z,y,A){t(o(u.COMPLETE_PURCHASE,z),y,A);},c=function(y,z){t(o(u.PURCHASED_PRODUCTS),y,z);},x=function(z){var y=b()+"/";y+="web/Event/imi:"+z+"/TstvContents/props/EntitlementState,Tstv,EncodingProfile,Aliases?aliasIdType=IngestedIMI&CPeId="+w()+"&Output=json";return y;},h=function(B,D,A){var C=function(E){A(E);},y=function(E){var F=n(E);if(F&&F.catchup&&F.catchup.length>0){D(F.catchup[0]);}else{A(403);}},z=x(B);t(z,y,C,true);},m=function(A,C){var B=function(){C(null);},y=function(D){var E=n(D);if(E&&E.startover&&E.startover.length>0){C(E.startover[0]);}else{C(null);}},z=x(A);t(z,y,B,true);},g=function(A,y,B){var z=b()+"/web/Content/"+A+"/Props/EntitledProduct?CpeId="+w()+"&Output=json";t(z,function(C){y(C);},B,true);},l=function(z,y){var A="rtsp://"+a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/teleIdeaTraxisRtsp",true)+"/";A=A+z+"?STBId="+w()+"&VODServingAreaId="+a.platform.system.Preferences.get(a.app.constants.PREF_AREA_ID,true);if(y){A=A+"&Entitlement="+y;}return A;};a.apps.util.EventManager.create("traxisProductsUpdated");return{updateProductDetails:s,getBookmark:e,setBookmark:p,favourites:q,purchaseProduct:r,confirmPurchase:k,getPurchasedProducts:c,getCatchUpForPlayback:h,getStartOverForPlayback:m,getEntitlementForCatchUp:g,getPlaybackUrl:l};}());}($N||{}));var $N=$N||{};var GenreUtil=function(){var c=new $N.apps.core.Log("Helper","GenreUtil"),l={},b=[{title:"genreFavorite",channelList:[]},{id:253,title:"genreHD",channelList:[]},{id:2,title:"genreMovies",channelList:[]},{id:3,title:"genreSeries",channelList:[]},{id:4,title:"genreSports",channelList:[]},{id:5,title:"genreInformation",channelList:[]},{id:8,title:"genreOthers",channelList:[]},{id:10,title:"genreEthnic",channelList:[]},{id:6,title:"genreKids",channelList:[]},{id:11,title:"genrePPV",channelList:[]},{id:9,title:"genreAdult",channelList:[]},{id:1,title:"genreOpen",channelList:[]}],m=b.length,a=$N.app.GeneralUtil.convertNumberToHexString,d=$N.app.GeneralUtil.convertHexStringToNumber;$N.apps.core.Language.adornWithGetString(GenreUtil);function f(){var n;for(n=0;n<m;n+=1){b[n].channelList=[];}}function k(){var p,o,r=[],q=0,n=$N.platform.btv.EPG.getVideoChannelsOrderedByChannelNumber()||[];f();for(p=0;p<n.length;p+=1){r=CCOM.EPG.getGenresByServiceId(n[p].serviceId);if(r.length>0){q=$N.app.GeneralUtil.bitShiftLeft(r[0].contentNibbleLevel1,4)+r[0].contentNibbleLevel2;for(o=0;o<m;o+=1){if(q===b[o].id){b[o].channelList.push(n[p]);break;}}}}}function h(t){var s,v=0,u="",o="",r=0,q,p,n=Object.prototype.toString;v=t?t.length:0;q=GenreUtil.getString("mapGenres")||{};for(r;r<v;r++){p=q[t[r].contentNibbleLevel1];if(n.call(p)==="[object Object]"){s=p[t[r].contentNibbleLevel2];if(n.call(s)==="[object String]"){o+=u+s;u=", ";}}}return o;}function g(s){var n=(s)?s.length:0,p,q,r=[],o;for(q=0;q<n;q++){p=s[q];r.push([a(p.contentNibbleLevel1,2),a(p.contentNibbleLevel2,2),a(p.userbyte,2)].join(":"));}return r.join(",");}function e(p){var r,o,n,q,s=[];if(p&&typeof p==="string"){r=p.split(",");}else{r=p||[];}o=r.length;for(q=0;q<o;q++){n=r[q].split(":");if(n&&n.length>=3){s.push({contentNibbleLevel1:d(n[0]),contentNibbleLevel2:d(n[1]),userbyte:d(n[2])});}}return s;}$N.platform.btv.EPG.registerRefreshCallback(k,this);k();return{GENRE_ALLCHANNELS:m,GENRE_FAVORITE:0,GENRE_PPV:9,GENRE_ADULT:10,getAllChannelsByGenre:function(n){if(n===0){return $N.platform.btv.Favourites.getFavouriteChannels($N.app.constants.FAVOURITE_FOLDER_NAME);}else{if(n>0&&n<m){return b[n].channelList;}else{if(n===this.GENRE_ALLCHANNELS){return $N.platform.btv.EPG.getVideoChannelsOrderedByChannelNumber();}}}return[];},getGenreTitle:function(n){if(n>=0&&n<m){return GenreUtil.getString(b[n].title);}return"";},getAmountOfGenres:function(){return m+1;},isAdultChannel:function(n){var q,p=false,r=null,s=0,o=10;if(n){r=this.getAllChannelsByGenre(o);s=r.length;if(s){for(q=0;q<s;q+=1){if(n.serviceId===r[q].serviceId){p=true;break;}}}}return p;},getGenresByEvent:function(p){var n=[],o="";if(p.eventId){n=p.genres||e(p.netEventGenres)||CCOM.EPG.getGenresByEventId(p.eventId);if(!n.error){o=h(n);}}return o;},getGenresByData:h,getGenreStringFromGenreObject:g,getGenreObjectFromGenreString:e};};(function(a){a.app=a.app||{};a.app.KeyboardType={NUMERIC:"numeric",ALPHA_NUMERIC_UPPERCASE:"alphaNumericUpperCase",ALPHA_NUMERIC_LOWERCASE:"alphaNumericLowerCase"};a.app.KeyboardType.ALIGNMENT={LEFT:"left",CENTRE:"centre"};a.app.KeyboardUtils=(function(){var m=null,f=function(){},c=null;function o(p){var q={numeric:{height:1,width:1},alphaNumericUpperCase:{height:1,width:1},alphaNumericLowerCase:{height:1,width:1}};return q[p];}function l(p){var q={numeric:{cssClass:"keyInactive"},alphaNumericUpperCase:{textY:39,cssClass:"keyInactive"},alphaNumericLowerCase:{textY:39,cssClass:"keyInactive"}};return q[p];}function h(r,p){var q=null;for(q=0;q<r.items.length;q++){r.items[q].height=r.items[q].height||p.height;r.items[q].width=r.items[q].width||p.width;r.items[q].cssClass=r.items[q].cssClass||p.cssClass;r.items[q].keyPressCallback=r.items[q].keyPressCallback||p.keyPressCallback;}return r;}function b(q){var p={numeric:{gridSize:{width:3,height:4},items:[{x:0,y:0,data:{text:"1"}},{x:1,y:0,data:{text:"2"}},{x:2,y:0,data:{text:"3"}},{x:0,y:1,data:{text:"4"}},{x:1,y:1,data:{text:"5"}},{x:2,y:1,data:{text:"6"}},{x:0,y:2,data:{text:"7"}},{x:1,y:2,data:{text:"8"}},{x:2,y:2,data:{text:"9"}},{x:0,y:3,data:{text:a.app.KeyboardUtils.getString("keypadSaveButton"),id:"save",labelCssClass:"greyKeypadKey"},keyPressCallback:f,keypadReturnObject:c},{x:1,y:3,data:{text:"0"}},{x:2,y:3,data:{image:"../../../customise/resources/images/%RES/icons/del.png",imageTop:-10,highlightCssClass:"keyActive",id:"delete"},template:"Key"}]},alphaNumericUpperCase:{gridSize:{width:8,height:5},items:[{x:0,y:0,data:{text:"A"}},{x:1,y:0,data:{text:"B"}},{x:2,y:0,data:{text:"C"}},{x:3,y:0,data:{text:"D"}},{x:4,y:0,data:{text:"E"}},{x:5,y:0,data:{text:"F"}},{x:6,y:0,data:{text:"G"}},{x:7,y:0,data:{text:"H"}},{x:0,y:1,data:{text:"I"}},{x:1,y:1,data:{text:"J"}},{x:2,y:1,data:{text:"K"}},{x:3,y:1,data:{text:"L"}},{x:4,y:1,data:{text:"M"}},{x:5,y:1,data:{text:"N"}},{x:6,y:1,data:{text:"O"}},{x:7,y:1,data:{text:"P"}},{x:0,y:2,data:{text:"Q"}},{x:1,y:2,data:{text:"R"}},{x:2,y:2,data:{text:"S"}},{x:3,y:2,data:{text:"T"}},{x:4,y:2,data:{text:"U"}},{x:5,y:2,data:{text:"V"}},{x:6,y:2,data:{text:"W"}},{x:7,y:2,data:{text:"X"}},{x:0,y:3,data:{text:"Y"}},{x:1,y:3,data:{text:"Z"}},{x:2,y:3,data:{text:"1"}},{x:3,y:3,data:{text:"2"}},{x:4,y:3,data:{text:"3"}},{x:5,y:3,data:{text:"4"}},{x:6,y:3,data:{text:"5"}},{x:7,y:3,data:{text:"6"}},{x:0,y:4,data:{text:"7"}},{x:1,y:4,data:{text:"8"}},{x:2,y:4,data:{text:"9"}},{x:3,y:4,data:{text:"0"}},{x:4,y:4,data:{image:"../../../customise/resources/images/%RES/icons/space_bar.png",imageTop:10,imageLeft:36,highlightCssClass:"keyActive",rounding:2,id:"space"},template:"Key",itemConfig:{cssClass:"keyInactive"},width:2},{x:6,y:4,data:{image:"../../../customise/resources/images/%RES/icons/del_for_AlphaNumericKeypad.png",imageTop:8,imageLeft:37,highlightCssClass:"keyActive",rounding:2,id:"delete"},template:"Key",itemConfig:{cssClass:"keyInactive"},width:2}]},alphaNumericLowerCase:{gridSize:{width:8,height:5},items:[{x:0,y:0,data:{text:"a"}},{x:1,y:0,data:{text:"b"}},{x:2,y:0,data:{text:"c"}},{x:3,y:0,data:{text:"d"}},{x:4,y:0,data:{text:"e"}},{x:5,y:0,data:{text:"f"}},{x:6,y:0,data:{text:"g"}},{x:7,y:0,data:{text:"h"}},{x:0,y:1,data:{text:"i"}},{x:1,y:1,data:{text:"j"}},{x:2,y:1,data:{text:"k"}},{x:3,y:1,data:{text:"l"}},{x:4,y:1,data:{text:"m"}},{x:5,y:1,data:{text:"n"}},{x:6,y:1,data:{text:"o"}},{x:7,y:1,data:{text:"p"}},{x:0,y:2,data:{text:"q"}},{x:1,y:2,data:{text:"r"}},{x:2,y:2,data:{text:"s"}},{x:3,y:2,data:{text:"t"}},{x:4,y:2,data:{text:"u"}},{x:5,y:2,data:{text:"v"}},{x:6,y:2,data:{text:"w"}},{x:7,y:2,data:{text:"x"}},{x:0,y:3,data:{text:"y"}},{x:1,y:3,data:{text:"z"}},{x:2,y:3,data:{text:"1"}},{x:3,y:3,data:{text:"2"}},{x:4,y:3,data:{text:"3"}},{x:5,y:3,data:{text:"4"}},{x:6,y:3,data:{text:"5"}},{x:7,y:3,data:{text:"6"}},{x:0,y:4,data:{text:"7"}},{x:1,y:4,data:{text:"8"}},{x:2,y:4,data:{text:"9"}},{x:3,y:4,data:{text:"0"}},{x:4,y:4,data:{image:"../../../customise/resources/images/%RES/icons/space_bar.png",imageTop:10,imageLeft:36,highlightCssClass:"keyActive",rounding:2,id:"space"},template:"Key",itemConfig:{cssClass:"keyInactive"},width:2},{x:6,y:4,data:{image:"../../../customise/resources/images/%RES/icons/del_for_AlphaNumericKeypad.png",imageTop:8,imageLeft:37,highlightCssClass:"keyActive",rounding:2,id:"delete"},template:"Key",itemConfig:{cssClass:"keyInactive"},width:2}]}};return p[q];}function n(r){var s=b(r),p=l(r),q=o(r);s=h(s,q);m.setKeyConfig(p);m.clearKeys();m.setKeys(s);}function k(p,q){m=p;m.initialise(q);}function e(){return m;}function g(p){f=p;}function d(p){c=p;}return{setSaveCallback:g,setKeypadReturnObject:d,showKeypad:n,setKeypad:k,getKeypad:e};}());a.apps.core.Language.adornWithGetString(a.app.KeyboardUtils);}($N||{}));(function(a){a.app=a.app||{};a.app.ChannelManager=(function(){var G=null,t=a.app.constants.FAVOURITE_FOLDER_NAME,p=0,q=new a.apps.core.Log("app","ChannelManager"),d=[],c=[],y=[],E=[],B=[],C=[],e=null,o=[],l={},g={},r=[],u=[],J,L,H=function(){},I={},f=[],b=false;function F(M){if(c.indexOf(M.serviceId)===-1){d.push(M);c.push(M.serviceId);}}function w(M){var N=c.indexOf(M.serviceId);if(N>-1){d.splice(N,1);c.splice(N,1);}}function n(M){CCOM.UserAuth.addEventListener("getAllRestrictedChannelsOK",function(R){var P=null,Q=null,N=[],O,S;N=R.channelList.toString().split(",");c=[];d=[];for(P=0;P<N.length;P++){O=N[P].indexOf("[/age:");if(O!==-1){S=N[P].substring(0,O);}else{if(N[P]){S=N[P];}}if(S){Q=a.platform.btv.EPG.getChannelByServiceId(S);if(Q){d.push(Q);c.push(Q.serviceId);}}}if(M){M(d);}});CCOM.UserAuth.getAllRestrictedChannels();}function k(N){var M=null;if(g.hasOwnProperty(N)){M=g[N];}return M;}J=function(O,T){var M=null,R=null,S=0,P=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true),Q="",N="";if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){P=a.app.Config.getConfigValue("mds.developer.server");}if(e){clearTimeout(e);e=null;}S=O.services.length;if(O&&O.services&&S>0){for(R=0;R<S;R++){M=k(O.services[R].editorial.tvChannel);if(M){if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){if(M._data&&O.services[R].technical&&O.services[R].technical.NetworkLocation){if(O.services[R].technical.NetworkLocation.indexOf("http")===-1){Q=P;}else{Q="";}N=O.services[R].technical.NetworkLocation;}else{N="";}}else{if(M._data&&O.services[R].technical.PromoImages&&O.services[R].technical.PromoImages[0]){N=P+O.services[R].technical.PromoImages[0];}else{N="";}}M._data.channelLogo=Q+N;M._data.shortName=O.services[R].editorial.shortName;y[M.serviceId]=O.services[R].technical.mainChannelId;E[O.services[R].technical.mainChannelId]=M.serviceId;}}}if(T){T();}};L=function(M,N){if(e){clearTimeout(e);}e=setTimeout(function(){H(N);},a.app.constants.MDS_RETRY_TIMEOUT);};H=function(O){var N=this,M=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true);if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){M=a.app.Config.getConfigValue("mds.developer.server");}if(M&&M!==""){a.services.sdp.MetadataService.getData(N,function(P){J(P,O);},function(P){L(P,O);},"btv/services",null,null,["editorial.tvChannel","editorial.shortName","technical.mainChannelId","technical.PromoImages","technical.NetworkLocation"],a.app.constants.MDS_MAX_RECORDS_RETURNED);}else{L(null,O);}};function m(M){return y[M];}function s(M){return E[M];}function D(){var N=a.platform.system.Preferences.get(a.app.constants.PREF_BARKER_CHANNEL_CONFIG_PATH,true),M=null;M=k(parseInt(N,10));if(M){I.uri=M.uri;I.serviceId=M.serviceId;I.channelKey=M.logicalChannelNum;I.type=1;I.name=M.name;}}function K(){var O=a.platform.btv.EPG.getAllChannelsOrderedByChannelNumber(),M=null,N=null;o=[];C={};l={};g={};r=[];u=[];for(M=0;M<O.length;M++){N=O[M];if(N.serviceType===a.data.EPGService.SERVICE_TYPE.TV){o.push(N);g[N.logicalChannelNum]=N;C[N.broadcastServiceId]=N;l[N.serviceId]=N;}}D();}function x(N,M){if(N&&M){B.push({callbackFunction:N,caller:M});}}function z(P,O){var N=null,M=0;if(P){M=B.length;for(N=0;N<M;N++){if(B[N].callbackFunction===P&&B[N].caller===O){B.splice(N,1);break;}}}}function A(){var N=null,M=B.length;for(N=0;N<M;N++){B[N].callbackFunction.call(B[N].caller);}}function v(P){var N=a.app.genreUtil.getAllChannelsByGenre(P),M=null,O=null;if(N&&N.length===0){switch(P){case a.app.genreUtil.GENRE_PPV:O=a.app.constants.CHANNEL_TYPE_PPV;break;default:O=null;}if(O){M=a.platform.btv.EPG.getVideoChannelsOrderedByChannelNumber()||[];N=M.filter(function(Q){return(Q._data.type===O);});}}return N;}function h(M){var O={casId:(I.conditionalAccessIDs)?I.conditionalAccessIDs[0]:null},N={isFromLaunch:M,url:I.uri,isLive:true,isMusic:a.platform.btv.EPG.isRadioChannel(I),serviceId:I.serviceId};a.app.epgUtil.storeChannelToPrefs(I.serviceId);if(M){a.common.helper.FrontPanelManager.setFrontPanelDisplay(a.app.constants.FRONTPANEL_DISPLAY_MODES.WAKE_UP);}a.app.fullScreenPlayer.requestPlayout(N,true,O);}return{getAllChannelsOrderedByChannelNumber:function(){return a.platform.btv.EPG.getVideoChannelsOrderedByChannelNumber();},getBlockedChannelsList:function(){return d;},initialise:function(M){a.platform.btv.EPG.registerRefreshCallback(function(){K();H(null);n();window.setTimeout(A,1);},this);K();a.platform.system.Preferences.monitorValue(a.app.constants.PREF_BARKER_CHANNEL_CONFIG_PATH,D,this,true);I=a.app.Config.getConfigValue("barker.channel.service");window.setTimeout(function(){H(M);},1);n();D();},initialiseFavouritesList:function(){if(!b){f=a.platform.btv.Favourites.getFavouriteChannels(t);b=true;}},addToBlockedList:function(N,M){F(N);this.saveBlockedChannelsList(M);},addMultipleChannelsToBlockedList:function(N,M,P){var O=null;if(N&&N.length>0){for(O=0;O<N.length;O++){F(N[O]);}this.saveBlockedChannelsList(M,P);}},addToFavouritesList:function(M){if(!b){throw ("FavouritesList needs to be intialised first to add to it");}if(f.indexOf(M)===-1){f.push(M);return true;}else{return false;}},removeFromBlockedList:function(N,M){w(N);if(c.length>0){this.saveBlockedChannelsList(M);}else{a.platform.ca.ParentalControl.unsetAllRestrictedServices(function(O){if(O){if(M){M();}}});}},removeAllChannelsFromBlockedList:function(M){d=[];c=[];a.platform.ca.ParentalControl.unsetAllRestrictedServices(function(N){if(N){if(M){M();}}});},removeFromFavouritesList:function(M){var N=null;if(!b){throw ("FavouritesList needs to be intialised first to remove channels");}N=f.indexOf(M);if(N>-1){f.splice(N,1);return true;}else{return false;}},saveBlockedChannelsList:function(M,N){if(c.length>0){a.platform.ca.ParentalControl.setRestrictedServices(c,a.platform.ca.PINHandler.getLocalMasterPin(),function(O){if(O){if(M){M();}}else{a.app.ErrorMessage.showSaveBlockChannelsErrorDialog();if(N){N();}}});}},saveFavouritesList:function(){var N=null,O=2000,M=null;if(!b){return false;}if(f){M=setTimeout(function(){a.app.ErrorMessage.showSavingFavoritesDialog();},O);f.sort(a.app.SortUtil.sortByChannelKey);N=a.platform.btv.Favourites.setFavouriteChannels(t,f);a.app.ErrorMessage.hideSavingFavoritesDialog();clearTimeout(M);M=null;if(!N){a.app.ErrorMessage.showSaveFavoritesErrorDialog();}b=false;f=[];}},getFavouriteChannels:function(){G=a.platform.btv.Favourites.getFavouriteChannels(t);return G.sort(a.app.SortUtil.sortByLogicalChannelNum);},isBlockedChannel:function(M){if(c&&c.indexOf(M.channelInfo.serviceId)>-1){return true;}return false;},isInteractiveChannel:function(N){var M,P=[],O=P.length;for(M=0;M<O;M++){if(P[M]===parseInt(N.logicalChannelNum,10)){return true;}}return false;},isFavouriteChannel:function(N){var M=[];if(!b){M=a.platform.btv.Favourites.getFavouriteServiceIds(t);N=N.serviceId;}else{M=f;}if(M&&M.indexOf(N)>-1){return true;}return false;},getChannelListByGenreIndex:v,toggleChannelsByGenre:function(){var N=v(p),M=a.app.genreUtil.getGenreTitle(p);if(p<a.app.genreUtil.GENRE_ALLCHANNELS){p++;}else{p=0;}return{genreTitle:M,channelList:N};},resetGenreToggling:function(){p=0;},acquireAllServiceRefs:H,getServiceRef:m,getServiceIdFromMainChannelId:s,addServiceUpdatedListener:x,removeServiceUpdatedListener:z,tuneToBarkerChannel:h};}());}($N||{}));(function(p){p.common=p.common||{};p.common.helper=p.common.helper||{};var k=new p.apps.core.Log("FrontPanelManager","FrontPanelManager"),s=null,t=p.app.constants.FRONTPANEL_DISPLAY_MODES,b=p.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT,r=null,f=null,a=false,o=(10*1000),g=p.app.StandardTimers.minuteTimer,q=true;function n(u){var v;if(u&&!a){v=p.app.DateTimeUtil.getFormattedTimeString(u,b);CCOM.System.setFrontPanelString(v);}}function m(){g.enable("FrontPanelManagerClock");n(new Date());}function c(w){var v,u=w?parseInt(w,10):1;v=CCOM.System.setFrontPanelIntensityLevel(u);if(v.error){w=p.platform.system.Preferences.get(p.app.constants.PREF_FRONTPANEL_INTENSITY);CCOM.System.setFrontPanelIntensityLevel(parseInt(w,10));return false;}else{p.platform.system.Preferences.set(p.app.constants.PREF_FRONTPANEL_INTENSITY,w);return true;}}function d(){var u=p.platform.system.Preferences.get(p.app.constants.PREF_FRONTPANEL_DISPLAY);if(p.common.helper.PowerManager.getCurrentPowerMode()===p.common.helper.PowerManager.SYSTEM_POWER_NORMAL){q=true;if(u){s.setFrontPanelString(p.app.constants.PREF_STRING_DURING_BOOT);}}else{q=false;c(1);s.setFrontPanelDisplay(p.app.constants.FRONTPANEL_DISPLAY_MODES.STAND_BY);}}function h(){var u=p.platform.system.Preferences.get(p.app.constants.PREF_FRONTPANEL_INTENSITY);if(u){c(u);}}function l(){q=false;s.setFrontPanelDisplay(p.app.constants.FRONTPANEL_DISPLAY_MODES.STAND_BY);c(1);}function e(){q=true;h();}p.common.helper.FrontPanelManager={initialise:function(){CCOM.System.frontPanelControl(true);g.register("FrontPanelManagerClock",n);p.apps.core.Language.adornWithGetString(this);p.apps.util.EventManager.subscribe("channelChanged",this.updateChannelNumber,this);p.apps.util.EventManager.subscribe("SYSTEM_POWER_STANDBY",l,this);p.apps.util.EventManager.subscribe("SYSTEM_POWER_NORMAL",e,this);s=this;h();d();},setFrontPanelString:function(u){if(p.common.helper.PowerManager.getCurrentPowerMode()===p.common.helper.PowerManager.SYSTEM_POWER_NORMAL){CCOM.System.setFrontPanelString(u);}},displayServiceNumber:function(v){var u;if(v){u=" "+p.app.GeneralUtil.padNumberWithZeroes(v,3);s.setFrontPanelString(u);a=true;}},setChannelNumber:function(w){var u=p.platform.btv.EPG.getChannelByServiceId(w),v;if(u){v=u.logicalChannelNum||u.number||u.channelKey||"";this.displayServiceNumber(v);}},setFrontPanelDisplayToPreference:function(){if(p.common.helper.PowerManager.getCurrentPowerMode()===p.common.helper.PowerManager.SYSTEM_POWER_NORMAL){r=p.platform.system.Preferences.get(p.app.constants.PREF_FRONTPANEL_DISPLAY);if(r===p.app.constants.FRONTPANEL_DISPLAY_TIME){a=false;m();}else{g.disable("FrontPanelManagerClock");this.updateChannelNumber();}}},setFrontPanelDisplay:function(v,u){switch(v){case t.STAND_BY:case t.PVR_PLAY_BACK:a=false;m();break;case t.WAKE_UP:s.updateChannelNumber();break;case t.MUSIC:g.disable("FrontPanelManagerClock");if(f){clearTimeout(f);}s.setFrontPanelString(p.app.constants.PREF_DEFAULT_STRING);break;case t.VOD:g.disable("FrontPanelManagerClock");if(f){clearTimeout(f);}s.setFrontPanelString(p.app.constants.PREF_STRING_VOD);break;case t.CATCHUP_STARTOVER:g.disable("FrontPanelManagerClock");s.setChannelNumber(u);break;default:if(q){s.setFrontPanelDisplayToPreference();}break;}},updateChannelNumber:function(){if(p.common.helper.PowerManager.getCurrentPowerMode()===p.common.helper.PowerManager.SYSTEM_POWER_NORMAL){var v=p.app.epgUtil.getChannelFromPrefs(),u=p.platform.system.Preferences.get(p.app.constants.PREF_FRONTPANEL_DISPLAY);if(f){clearTimeout(f);}if(u===p.app.constants.FRONTPANEL_DISPLAY_TIME){f=setTimeout(this.setFrontPanelDisplayToPreference,o);}if(v){this.setChannelNumber(v);}}},setFrontPanelIntensity:c};}($N||{}));(function(a){a.app=a.app||{};a.app.SocialAccount={FACEBOOK:"facebook"};a.app.SocialActivityFactory=(function(c){var f={facebook:null};function e(g){switch(g){case c.app.SocialAccount.FACEBOOK:f[g]=new c.app.Social.FacebookActivity();break;}}function b(g){if(!f[g]){e(g);}return f[g];}function d(g){return c.app.SocialActivityFactory.getString(c.app.StringUtil.join("",[g,"DisplayValue"]));}return{getSocialAccountObject:b,getPinSettingDisplayValue:d};}(a));a.apps.core.Language.adornWithGetString(a.app.SocialActivityFactory);}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.Social=$N.app.Social||{};(function(z){var h=0,f=1,J="200",p="403",t={dataMismatch:"1",invalidTokenCode:"0",unexpectedError:"-1"},C=null,K=null,F=-1,D=1,e=null,n=null;function B(){z.apps.core.Language.adornWithGetString(B);this._log=new z.apps.core.Log("Social","BaseSocialActivity");this._EMAIL="email";this._LINKED_DATE="linkedDate";this._PROFILE_NAME="profileName";this._PROFILE_IMAGE_URL="profileImageUrl";this._accountAuthTip="socialAccountAuthTip";this._PROFILE_ID="profileId";this._ACCESS_TOKEN="accessToken";this._TOKEN_RENEWAL_SCHEDULER_TIME="timeOfRenewalSchedulerRun";this._PIN_SETTING="pinSetting";this._MACHINE_ID="machineId";this._QRCODE="qrCode";this.FEATURE_AVAILABILITY="featureAvailability";this._postAccountMessage=null;this._socialPostPinTimeout=null;this._accountRemovalCallback=function(){};this.receivedAuthCode=null;e=z.app.Config.getConfigValue(z.app.constants.SHARED_SALT);n=z.app.Config.getConfigValue(z.app.constants.SECRET_KEY);this.JOB_OP_STATE={JOB_OP_STATE_CREATED:0,JOB_OP_STATE_CREATED_DELETING:1,JOB_OP_STATE_READY:2,JOB_OP_STATE_TASK_DELETING:3,JOB_OP_STATE_DELETED:4};K=this;}B.prototype.getCompleteKey=function(M,L){var N=z.app.constants.SOCIAL;return z.app.StringUtil.join(".",[N,M,L]);};B.prototype.isAccountAvailable=function(){if(z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this.FEATURE_AVAILABILITY))&&z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._EMAIL))&&z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._PROFILE_ID))){return true;}else{return false;}};B.prototype.setAccountRemovalListener=function(L){this._accountRemovalCallback=L;};B.prototype.getAccountInformation=function(M){var L={email:z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._EMAIL)),linkedDate:z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._LINKED_DATE)),profileName:z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._PROFILE_NAME)),profileImageUrl:z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._PROFILE_IMAGE_URL))};if(M){return L[M];}else{return L;}};B.prototype.showDisconnectAccountDialog=function(N){var M=[{name:B.getString("yes"),action:h},{name:B.getString("no"),action:f}],L=null;L=z.app.DialogueHelper.createAndShowDialogue(z.app.constants.DLG_FACEBOOK_DISCONNECT_ACCOUNT,B.getString(this._disconnectAccountTitle),B.getString(this._disconnectAccountMessage),M,N,null,null,this._accountTitleImage);};function r(M){var L,O,N=String(Date.now()),P=(N.length<=9)?("0"+N.length):N.length;O=CryptoJS.AES.encrypt(e+M+N+P,n);O=encodeURIComponent(O);L=z.app.StringUtil.join("=",["msg",O]);return L;}function o(N){var M,P,Q,L,O;P=CryptoJS.AES.decrypt(decodeURIComponent(N),n,{format:JsonFormatter});L=CryptoJS.enc.Utf8.stringify(P);M=L.slice(e.length);Q=Number(L.substr(-2,2));O=z.apps.util.JSON.parse(M.slice(0,(M.length-(Q+2))));return O;}function b(L){if(!C){C=new z.app.PinHelper(L.successfullAuthenticationCallback,null,null,null,0,true);}C.setDialogProperties({x:0,y:0,width:1920,height:1080,id:L.pinDialogId,eventImageVisibility:L.eventImageVisibility,titleImage:L.titleImage,title:L.title,description:L.description,cancelCallback:function(){C.hideDialog();},numberOfDigits:L.numberOfDigits,eventImageConfig:L.eventImageConfig,inProgressAppearance:L.inProgressAppearance});if(L.successfullAuthenticationCallback){C.setAuthenticationSuccessCallback(L.successfullAuthenticationCallback);}if(L.okCallback){C.pinDialog._dialogGUIObject.setOkCallback(L.okCallback);}if(z.app.VolumeControl){z.app.VolumeControl.hide();}}function w(){var M=z.platform.system.Preferences.get(K.getCompleteKey(K._accountType,K._PIN_SETTING)),L=null;switch(M){case"socialPinSettingNeverRequest":L=F;break;case"socialPinSettingAlwaysRequest":L=D;break;case"socialPinSettingRequestOneHour":L=z.app.constants.HOUR_IN_MS;break;case"socialPinSettingRequestTwoHour":L=z.app.constants.HOUR_IN_MS*2;break;case"socialPinSettingRequestThreeHour":L=z.app.constants.HOUR_IN_MS*3;break;default:L=null;break;}return L;}function I(){var L=false,M=w();if(M&&(M!==F)&&!K._socialPostPinTimeout){L=true;}return L;}B.prototype.resetPinTimer=function(){if(K&&K._socialPostPinTimeout){clearTimeout(K._socialPostPinTimeout);K._socialPostPinTimeout=null;}};function A(){var L=w();if(L&&L>D&&!K._socialPostPinTimeout){K._socialPostPinTimeout=setTimeout(function(){K.resetPinTimer();},L);}K.postStatusMessage();}function G(M){var N=null,L=I();if(M.action===h&&L){N={successfullAuthenticationCallback:A,pinDialogId:"socialAccountAuthentication",eventImageVisibility:false,titleImage:K._accountTitleImage,title:B.getString(K._postAccountTitle),description:B.getString("enterYourPin")};b(N);C.showPinDialog(K._accountAuthenticationPinType,true,null,true);}else{if(M.action===h&&!L){K.postStatusMessage();}else{}}}function v(){var L=z.app.constants.MINUTE_IN_MS*5;setTimeout(function(){K.getTemporaryCodeFromServer();},L);}function g(L){L=o(L);if(L&&L.tempCode){K.getLongLiveTokenFromFacebook(L.tempCode,L.appId,L.callbackUrl);}else{if(L&&L.error){v();}}}function H(L){v();}B.prototype.getTemporaryCodeFromServerCallback=function(){K.getTemporaryCodeFromServer();};B.prototype.getTemporaryCodeFromServer=function(){var O,P,N,L,M;N=z.platform.system.Preferences.get(K.getCompleteKey(K._accountType,K._ACCESS_TOKEN));L=z.app.StringUtil.join("=",["accessTokenCode",N]);P=r(L);M=z.app.Config.getConfigValue(z.app.constants.SOCIAL_STB_TOKEN_RENEWAL_URL);M=z.app.StringUtil.join("?",[M,P]);if(z.app.NetworkUtil.isUrlValid(M)){z.app.NetworkUtil.ajaxRequest(M,g,H);}};function s(M){var L=false;L=z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._EMAIL),M.email);L=(L&&z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._LINKED_DATE),M.linkedDate));L=(L&&z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._PROFILE_NAME),M.profileName));L=(L&&z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._PROFILE_IMAGE_URL),M.profileImageUrl));L=(L&&z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._PROFILE_ID),M.profileId));L=(L&&z.platform.system.Preferences.set(K.getCompleteKey(K._accountType,K._ACCESS_TOKEN),M.accessToken));if(L===true){z.app.ErrorMessage.showFacebookAccountAuthorisedDialog();K.setSchedulerForTokenRenewal();}}function q(L){L=o(L);if(L.error){switch(L.error.errorId){case t.invalidTokenCode:K.showAccountAuthorisationDialog();break;case t.dataMismatch:z.app.ErrorMessage.showFacebookAccountAuthorisationErrorDialog(J);break;case t.unexpectedError:z.app.ErrorMessage.showFacebookAccountAuthorisationErrorDialog(p);break;default:z.app.ErrorMessage.showFacebookAccountAuthorisationErrorDialog(p);break;}}else{s(L);}}function m(L){var M=(L&&L.status)?L.status:p;z.app.ErrorMessage.showFacebookAccountAuthorisationErrorDialog(M);}B.prototype.fetchAccountInformation=function(O){var L=z.app.Config.getConfigValue(z.app.constants.SOCIAL_STB_URL),M=z.app.StringUtil.join("=",["authenticationCode",O]),N=r(M);L=z.app.StringUtil.join("?",[L,N]);if(z.app.NetworkUtil.isUrlValid(L)){z.app.NetworkUtil.ajaxRequest(L,q,m);}};function y(L){L=o(L);if(!L.status){if(K.isAccountAvailable()===true){K.disconnectAccount();}z.platform.system.Preferences.set(z.app.constants.SOCIAL_FACEBOOK_FEATURE_AVAILABILITY,false);}else{if(z.platform.system.Preferences.get(z.app.constants.SOCIAL_FACEBOOK_FEATURE_FORCE_DISABLE)==="true"){z.platform.system.Preferences.set(z.app.constants.SOCIAL_FACEBOOK_FEATURE_AVAILABILITY,false);}else{z.platform.system.Preferences.set(z.app.constants.SOCIAL_FACEBOOK_FEATURE_AVAILABILITY,true);}}}function l(L){z.platform.system.Preferences.set(z.app.constants.SOCIAL_FACEBOOK_FEATURE_AVAILABILITY,false);}B.prototype.getSocialFeatureAvailabilityStatus=function(){var M,N,L;z.platform.system.Preferences.set(z.app.constants.TIME_OF_FACEBOOK_SCHEDULER_RUN,String(Date.now()));L=z.app.Config.getConfigValue(z.app.constants.SOCIAL_STB_URL);N=r("statuscheck");L=z.app.StringUtil.join("?",[L,N]);if(z.app.NetworkUtil.isUrlValid(L)){z.app.NetworkUtil.ajaxRequest(L,y,l);}};B.prototype.setDailyScheduler=function(){var X,Y,P,N,ab="RPT_TIME",S=1,Z,M=3600000,Q=24,R,aa,W,T=60000,O,V=z.app.constants.FACEBOOK_FEATURE_AVAILABILITY_SCHEDULER_TITLE,L=z.app.Config.getConfigValue(z.app.constants.SOCIAL_STB_URL),U=z.platform.system.Preferences.get(z.app.constants.TIME_OF_FACEBOOK_SCHEDULER_RUN);X=new Date();O=X.getTime();O=O-T;Y=(X.getHours()*3600)+(X.getMinutes()*60);P=z.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(z.platform.btv.PVRManager.Frequency.DAILY);N={startTime:O,duration:S,sourceURL:L,timeOfDay:Y,title:V,repeatDaysArray:P};if(U){Z=Date.now();R=(Z-parseInt(U,10))/M;if(R>=Q){K.getSocialFeatureAvailabilityStatus();}}aa="title= '"+V+"' AND jobOpState = "+K.JOB_OP_STATE.JOB_OP_STATE_READY;W=z.platform.btv.PVRManager.getJobByQuery(aa,"startTime");if(W.length===0){if(z.gui.GUIObject.mode!=="HTML"){z.platform.btv.Reminders.setGenericReminder(ab,N,function(ac,ad){if(!ac){K.getSocialFeatureAvailabilityStatus();}});}}};B.prototype.facebookFeatureAvailabilityCallback=function(){K.getSocialFeatureAvailabilityStatus();};function E(L){var M=null;if(L&&L.action===z.app.constants.YES_OPTION){K.fetchAccountInformation(K.receivedAuthCode);}}function u(L){if(L.slice(-7)==="picture"){L=z.app.StringUtil.join("",[L,"?height=126&width=126"]);}return L;}function d(O){var M=z.platform.system.Preferences.get(O.getCompleteKey(O._accountType,O._LINKED_DATE)),L=null,Q=null,P=null,R=null,N=null;if(M){L=M.split("/");if(L.length===3){Q=parseInt(L[1],10);P=B.getString("shortMonths")[Q-1];R=z.app.StringUtil.join("",["20",L[2]]);N=z.app.StringUtil.join(" ",[L[0],P,R]);}}return{alertImage:{x:1668,y:281,width:126,height:126,href:u(z.platform.system.Preferences.get(O.getCompleteKey(O._accountType,O._PROFILE_IMAGE_URL))),opacity:1,visible:true},alertImageTextConfig:{x:645,y:303.5,text:z.platform.system.Preferences.get(O.getCompleteKey(O._accountType,O._PROFILE_NAME)),width:1000,visible:true,cssClass:"messageListItemTitle rightAlign"},alertImageSubTextConfig:{x:645,y:315.5,text:z.app.StringUtil.join("\n",[z.app.StringUtil.join(" ",[B.getString("socialAccountLinkedDateText"),B.getString("since")]),N]),width:1000,visible:true,cssClass:"fullViewLeftSubtitle fontSize22 rightAlign"},alertImageBackground:{imagePadding:4.5,backgroundConfig:{cssClass:"progressBarInner",rounding:2,visible:true}}};}function c(M,V,aa){var R=M.title,Z=(M&&M.startTime&&(M.startTime>Date.now())),T=null,O=null,ab=null,L=null,W=B.getString("postAccountMessageCurrentEventStart"),X=B.getString("postAccountMessageEnd"),Q=null,P=null,Y=null,U=null,N=58,S=d(V);if(Z){W=B.getString("postAccountMessageFutureEventStart");T=new Date(M.startTime);Y=z.app.GeneralUtil.padNumberWithZeroes(T.getDate(),2).toString();O=z.app.DateTimeUtil.getString("days")[T.getDay()];ab=z.app.DateTimeUtil.getString("shortMonths")[T.getMonth()+1];P=z.platform.btv.EPG.getChannelByServiceId(M.serviceId).logicalChannelNum.toString();Q=z.app.StringUtil.join(" ",[z.app.StringUtil.join("",[B.getString("when"),":"]),O,Y,ab,B.getString("at").trim(),z.app.DateTimeUtil.getFormattedTimeString(T),B.getString("on").toLowerCase(),B.getString("menuAutoTuneChannel").toLowerCase(),P]);X=z.app.StringUtil.join("\n",[X,Q]);X=z.app.StringUtil.join("",[X,"."]);if((W.length+R.length)>N){X=X+"\n";}}else{}R=z.app.StringUtil.join("",['"',R," ",z.app.epgUtil.getSeasonEpisodeShort(M),'"']);V._postAccountMessage=z.app.StringUtil.join(" ",[W,R,X]);S.message=V._postAccountMessage;S.titleImage=V._accountTitleImage;U=z.app.DialogueHelper.createAndShowDialogue(z.app.constants.DLG_FACEBOOK_POST_ACCOUNT,B.getString(V._postAccountTitle),V._postAccountMessage,aa,G,null,"HORIZONTAL",V._accountTitleImage,S);}function a(L,P,T){var M=L.title,Q=B.getString("postAccountMessageCurrentEventStart"),R=B.getString("postAccountMessageNOWEnd"),O=null,S=null,N=d(P);M=z.app.StringUtil.join("",['"',M,'"']);P._postAccountMessage=z.app.StringUtil.join(" ",[Q,M,R]);z.apps.dialog.ConfirmationDialogue.GUITemplateObject=z.gui.NowConfirmationDialog;O=new z.apps.dialog.ConfirmationDialogue(P._postAccountDialogId,B.getString(P._postAccountTitle),P._postAccountMessage,T,G,null,S,"HORIZONTAL",P._accountTitleImage);z.apps.dialog.ConfirmationDialogue.GUITemplateObject=z.gui.ConfirmationDialog;O._dialogGUIObject.configure(N);z.app.DialogueHelper.displayDialogue(O,z.app.constants.DLG_FACEBOOK_POST_ACCOUNT);}function x(R,Q,N){var M=R.title,P=B.getString("postAccountMessageRecordingStart"),S=B.getString("postAccountMessageRecordingEnd"),L=null,O=d(Q);M=z.app.StringUtil.join("",['"',M,'"']);Q._postAccountMessage=z.app.StringUtil.join(" ",[P,M,S]);O.message=Q._postAccountMessage;O.titleImage=Q._accountTitleImage;L=z.app.DialogueHelper.createAndShowDialogue(z.app.constants.DLG_FACEBOOK_POST_ACCOUNT,B.getString(Q._postAccountTitle),Q._postAccountMessage,N,G,null,"HORIZONTAL",Q._accountTitleImage,O);}B.prototype.showPostToSocialAccountDialog=function(N,M){var L=[{name:B.getString("yes"),action:h},{name:B.getString("no"),action:f}];K=this;if(this.isAccountAvailable()===true&&N){switch(M.toLowerCase()){case"now":a(N,K,L);break;case"pvr":x(N,K,L);break;case"epg":c(N,K,L);break;default:break;}}};B.prototype.isPostOptionValid=function(N){var M=z.app.EventUtil.isEventShowingNow(N),L=(N&&N.startTime&&N.startTime>Date.now()),O=z.app.epgUtil.getChannelFromPrefs();return((M&&(N.serviceId===O))||L);};B.prototype.showAccountAuthorisationDialog=function(){var O=B.getString(this._accountAuthTitle),N=z.app.StringUtil.join("",[B.getString(this._accountAuthMessage),"\n",B.getString(this._accountAuthTip)]),M=B.getString(this._timerMessage),L=z.platform.system.Preferences.get(this.getCompleteKey(this._accountType,this._QRCODE))||"customise/resources/images/%RES/icons/qrcode.png",P=z.platform.system.Preferences.get(z.app.constants.SOCIAL_STB_AUTH_CODE_FETCH_URL)||"http://10.12.128.75:3008/authenticationCode";if(z.app.NetworkUtil.isUrlValid(P)){z.app.NetworkUtil.ajaxRequest(P,function(Q){var R=null;Q=o(Q);K.receivedAuthCode=Q.authCode;z.app.DialogueHelper.showSocialAccountAuthorisationDialog(O,N,E,K._accountTitleImage,Q.authCode,M,L,null);},function(Q){var R=(Q&&Q.status)?Q.status:p;z.app.ErrorMessage.showFacebookAccountAuthorisationErrorDialog(R);});}};function k(L){if(L.action===h){K.showAccountAuthorisationDialog();}}B.prototype.showOAuthErrordialog=function(N){var M=z.apps.util.JSON.parse(N.responseText),O=[{name:B.getString("yes"),action:h},{name:B.getString("no"),action:f}],L=null;if(N.status===400&&M.error.type==="OAuthException"){this.disconnectAccount();L=z.app.DialogueHelper.createAndShowDialogue(z.app.constants.DLG_FACEBOOK_AUTH_ERROR,B.getString(this._oAuthErrorTitle),B.getString(this._oAuthErrorMessage),O,k,null,null,this._accountTitleImage);}};B.prototype.disconnectAccount=function(){var M=false,O=z.app.Config.getConfigValue(z.app.constants.SOCIAL_STB_TOKEN_RENEWAL_URL),P,N,L;M=z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._EMAIL));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._LINKED_DATE)));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._PROFILE_NAME)));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._PROFILE_IMAGE_URL)));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._PROFILE_ID)));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._ACCESS_TOKEN)));M=(M&&z.platform.system.Preferences.deletePreference(this.getCompleteKey(this._accountType,this._TOKEN_RENEWAL_SCHEDULER_TIME)));P="sourceURL= '"+O+"' AND jobOpState = "+K.JOB_OP_STATE.JOB_OP_STATE_READY;N=z.platform.btv.PVRManager.getJobByQuery(P,"startTime");if(N.length>0&&N[0]&&N[0]._data){L=N[0]._data.jobId;z.platform.btv.PVRManager.deleteJob(L);}if(this._accountRemovalCallback&&typeof(this._accountRemovalCallback)==="function"){this._accountRemovalCallback();}return M;};z.app.Social.BaseSocialActivity=B;}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.Social=$N.app.Social||{};(function(a){var e=25,d=null,f=null;function b(){a.apps.core.Language.adornWithGetString(b);this._log=new a.apps.core.Log("Social","FacebookActivity");this._accountType=a.app.SocialAccount.FACEBOOK;this._disconnectAccountTitle="disconnectFacebookAccountTitle";this._disconnectAccountMessage="disconnectFacebookAccountMessage";this._postAccountTitle="postFacebookAccountTitle";this._oAuthErrorTitle="errorTitle";this._accountTitleImage="customise/resources/images/%RES/icons/fb_icon.png";this._accountAuthenticationPinType=a.app.SocialAccount.FACEBOOK;this._accountAuthTitle="authFacebookAccountTitle";this._accountAuthMessage="authFacebookAccountMessage";this._oAuthErrorMessage="facebookOAuthErrorMessage";this._accountAuthUrl="authFacebookAccountUrl";this._accountAuthorisationPinType="facebookAuthorisation";this._timerMessage="facebokTimerMessage";this.receivedAuthCode=null;this.JOB_OP_STATE={JOB_OP_STATE_CREATED:0,JOB_OP_STATE_CREATED_DELETING:1,JOB_OP_STATE_READY:2,JOB_OP_STATE_TASK_DELETING:3,JOB_OP_STATE_DELETED:4};b.superConstructor.call(this);f=this;}a.apps.util.Util.extend(b,a.app.Social.BaseSocialActivity);d=b.prototype;function h(m){var l=a.app.constants.MINUTE_IN_MS*5;setTimeout(function(){f.getLongLiveTokenFromFacebook(m);},l);}function k(l,m,n,o){l=JSON.parse(l);if(l&&l.access_token){a.platform.system.Preferences.set(f.getCompleteKey(f._accountType,f._MACHINE_ID),l.machine_id);a.platform.system.Preferences.set(f.getCompleteKey(f._accountType,f._ACCESS_TOKEN),l.access_token);a.platform.system.Preferences.set(a.app.constants.TIME_OF_FACEBOOK_RENEWAL_SCHEDULER_RUN,String(Date.now()));}else{h(m,n,o);}}function c(l,m,n,o){h(m,n,o);}d.getLongLiveTokenFromFacebook=function(p,v,o){var m=a.app.Config.getConfigValue("social.facebook.graph.url"),u=null,l=null,s=null,r=null,q="",t=null,n=null,w=null;m=m+"/oauth/access_token";l=a.app.StringUtil.join("=",["code",p]);s=a.app.StringUtil.join("=",["&client_id",v.toString()]);r=a.app.StringUtil.join("=",["&redirect_uri",o]);if(a.platform.system.Preferences.get(f.getCompleteKey(f._accountType,f._MACHINE_ID))){t=a.platform.system.Preferences.get(f.getCompleteKey(f._accountType,f._MACHINE_ID));q=a.app.StringUtil.join("=",["&machine_id",t]);}m=a.app.StringUtil.join("?",[m,l+s+r+q]);if(a.app.NetworkUtil.isUrlValid(m)){n=new a.apps.core.AjaxHandler();n.setResponseCallback(function(x){if(!x||x.status!==200){if(x){c(x,p,v,o);}else{throw ("Ajax request failed! URL: "+m);}}else{if(x){k(x.responseText,p,v,o);}}});n.postData(m);}};d.setSchedulerForTokenRenewal=function(){var y,v,n,A="RPT_INTERVAL",t=1,z,o=a.app.constants.DAY_IN_MS,p,m,x,s=a.app.Social.TOKEN_RENEWAL_INTERVAL,r=a.app.constants.MINUTE_IN_MS,q,w=a.app.constants.FACEBOOK_TOKEN_RENEWAL_SCHEDULER_TITLE,l=a.app.Config.getConfigValue(a.app.constants.SOCIAL_STB_TOKEN_RENEWAL_URL),u=a.platform.system.Preferences.get(a.app.constants.TIME_OF_FACEBOOK_RENEWAL_SCHEDULER_RUN);y=new Date();q=y.getTime();q=q+r;v=o*s;n={startTime:q,duration:t,sourceURL:l,repeatInterval:v,title:w};if(u){z=Date.now();p=(z-parseInt(u,10))/o;if(p>s){f.getTemporaryCodeFromServer();}}m="title= '"+w+"' AND jobOpState = "+f.JOB_OP_STATE.JOB_OP_STATE_READY;x=a.platform.btv.PVRManager.getJobByQuery(m,"startTime");if(x.length===0){if(a.gui.GUIObject.mode!=="HTML"){a.platform.btv.Reminders.setGenericReminder(A,n,function(B,C){if(!B){f.getTemporaryCodeFromServer();}a.platform.system.Preferences.set(a.app.constants.TIME_OF_FACEBOOK_RENEWAL_SCHEDULER_RUN,String(Date.now()));});}}};function g(l){if(l.responseText){f.showOAuthErrordialog(l);}}d.postStatusMessage=function(p,o){var m=a.app.Config.getConfigValue("social.facebook.graph.url"),s=a.platform.system.Preferences.get(f.getCompleteKey(f._accountType,f._PROFILE_ID)),t=a.platform.system.Preferences.get(f.getCompleteKey(f._accountType,f._ACCESS_TOKEN)),u=null,r=null,l=null,n=null,v=null,q=o||g;v=f._postAccountMessage.replace(/ /g,"%20");u=a.app.StringUtil.join("=",["message",v]);r=a.app.StringUtil.join("=",["access_token",t.toString()]);l=a.app.StringUtil.join("&",[u,r]);m=a.app.StringUtil.join("/",[m,s,"feed"]);m=a.app.StringUtil.join("?",[m,l]);if(a.app.NetworkUtil.isUrlValid(m)){n=new a.apps.core.AjaxHandler();n.setResponseCallback(function(w){if(!w||w.status!==200){if(w&&q){q(w);}else{throw ("Ajax request failed! URL: "+m);}}else{if(w&&p){p(w.responseText);}}});n.postData(m);}};a.app.Social.FacebookActivity=b;a.app.Social.TOKEN_RENEWAL_INTERVAL=e;}($N||{}));(function(a){a.app=a.app||{};a.app.FolderUtil=(function(){var e=new a.apps.core.Log("Helper","FolderUtil"),g=a.app.StringUtil,c=g.escapeApostrophes,d=g.addLeadingForwardSlash,h=g.removeLeadingForwardSlash,f=function(){};function b(m,l){var n=String(m.title).toLowerCase(),k=String(l.title).toLowerCase();return n.localeCompare(k);}f=function(m){var l,k;k=m.splice(0,1);m.sort(b);m.splice(0,0,k[0]);return m;};return{initialise:function(){a.apps.core.Language.adornWithGetString(a.app.FolderUtil);},isFolderRootFolder:function(k){return(k===""||k===null||k===a.app.constants.ROOT_PVR_FOLDER_VALUE||k===a.app.constants.ROOT_PVR_FOLDER_NAME||k===a.app.FolderUtil.getString("pvrSettingsRecordingHighlights")||k===a.app.constants.LEGACY_DEFAULT_NON_EPISODIC_FOLDER_NAME);},isInFolder:function(k){return k&&k.uiFolder&&!this.isFolderRootFolder(k.uiFolder);},getFolderName:function(k){if(this.isInFolder(k)){return h(k.uiFolder);}return"";},getNonEpisodicDefaultFolder:function(){var m=a.platform.system.Preferences.get(a.app.constants.PVR_NON_EPISODIC_DEFAULT_FOLDER),k=a.app.constants.ROOT_PVR_FOLDER_NAME,l=a.app.constants.ROOT_PVR_FOLDER_VALUE;if(m===null){a.platform.system.Preferences.set(a.app.constants.PVR_NON_EPISODIC_DEFAULT_FOLDER,k);return l;}else{if(m===a.app.constants.ROOT_PVR_FOLDER_NAME){return l;}}return m;},getDislayedDefaultNonEpisodicFolderName:function(){var k=this.getNonEpisodicDefaultFolder();if(this.isFolderRootFolder(k)){return this.getString("pvrSettingsRecordingHighlights");}return h(k);},getPlayableRecordingsForFolders:function(){return a.platform.btv.PVRManager.getPlayableRecordings();},getPlayableRecordingsByFolderName:function(k){var l=a.platform.btv.PVRManager.getPlayableRecordingsByFolderName(d(k));if(l&&l.length){return l;}else{return a.platform.btv.PVRManager.getPlayableRecordingsByFolderName(k);}},getRecordingsByFolderName:function(m){var l=null,k="taskType='REC' AND uiFolder = '"+c(d(m))+"'";l=a.platform.btv.PVRManager.getEntriesByQuery(a.platform.btv.PVRManager.WIDE_TASK_FIELD_FILTER,k,"startTime DESC");l=l.concat(a.platform.btv.PVRManager.getRemoteRecordingsByFolder(d(m)));if(l&&l.length){return l;}else{k="taskType='REC' AND uiFolder = '"+c(m)+"'";l=a.platform.btv.PVRManager.getEntriesByQuery(a.platform.btv.PVRManager.WIDE_TASK_FIELD_FILTER,k,"startTime DESC");l=l.concat(a.platform.btv.PVRManager.getRemoteRecordingsByFolder(m));return l;}},getActiveRecordingsByFolderName:function(m){var k=a.app.PVRCapability.getCurrentMediaId()||-1,l="taskType='REC' AND (uiFolder = '"+c(d(m))+"' OR uiFolder = '"+c(m)+"') AND objectState=1 AND inactive=0 AND mediumID = '"+k+"'";return a.platform.btv.PVRManager.getEntriesByQuery("taskId, taskType, scheduleType, objectState, completeStatus, isAuthorized",l,"startTime DESC");},compareDataForFolders:function(n,k){var l=n.uiFolder||n._data.uiFolder,m=k.uiFolder||k._data.uiFolder;l=h(l);m=h(m);if(l&&m){if(l===m){return a.app.ArrayUtil.EQUAL;}if(l>m){return a.app.ArrayUtil.GREATER_THAN;}if(l<m){return a.app.ArrayUtil.LESS_THAN;}}return a.app.ArrayUtil.LESS_THAN;},getDataForFolders:function(){var k=this.getPlayableRecordingsForFolders();a.app.ArrayUtil.removeDuplicates(k,this.compareDataForFolders);return k;},getNumberOfEpisodes:function(m){var k=a.app.PVRCapability.getCurrentMediaId()||-1,l="taskType='REC' AND objectState<6 AND objectState>0 AND  mediumID = '"+k+"' AND (uiFolder = '"+c(d(m))+"' OR uiFolder = '"+c(m)+"')";return a.platform.btv.PVRManager.countTasksByQuery(l)+a.platform.btv.PVRManager.getRemoteRecordingsByFolder(d(m)).length;},updateBlockedStateForFolder:function(n,m){var k=this.getPlayableRecordingsByFolderName(n),o=k.length,l;for(l=0;l<o;l++){a.app.PVRUtil.updateBlockedState(k[l].taskId,m);}},isFolderUserGenerated:function(o){var k=a.platform.system.Preferences.get(a.app.constants.PVR_NON_EPISODIC_FOLDER_LIST),l=k.length,m,n;if(o&&l){n=d(o);for(m=0;m<l;m++){if(n===k[m]||o===k[m]){return true;}}}return false;},renameFolderForRecordings:function(o,n){var k=this.getRecordingsByFolderName(o),m=k.length,l;a.app.PVRUtil.initialiseTasksCallbackCount(m);for(l=0;l<m;l++){a.app.PVRUtil.updateRecordingByTask(k[l],{uiFolder:n});}},renameFolderInPreferences:function(p,n){var k=a.platform.system.Preferences.get(a.app.constants.PVR_NON_EPISODIC_FOLDER_LIST),l=k.length,m,o=d(this.getDislayedDefaultNonEpisodicFolderName());for(m=0;m<l;m++){if(p===k[m]){k[m]=n;break;}}if(o===p){a.platform.system.Preferences.set(a.app.constants.PVR_NON_EPISODIC_DEFAULT_FOLDER,n.toString());}a.platform.system.Preferences.set(a.app.constants.PVR_NON_EPISODIC_FOLDER_LIST,k);},renameFolder:function(l,k){k=a.app.StringUtil.firstLetterPerWordCapitol(k);l=d(l);k=d(k);this.renameFolderInPreferences(l,k);this.renameFolderForRecordings(l,k);},updateKeepForFolder:function(n,l){var k=this.getPlayableRecordingsByFolderName(n),o=k.length,m;for(m=0;m<o;m++){a.app.PVRUtil.updateRecordingByTask(k[m],{keep:l});}},sortFolderList:f,FOLDER_NAME_MAX_CHARACTERS:18};}());}($N||{}));(function(a){a.app=a.app||{};a.app.KeepUtil=(function(){var b=new a.apps.core.Log("Helper","KeepUtil");return{getKeepState:function(d){var e=d.taskId,c=null;if(d&&d.hasOwnProperty("keep")){return d.keep;}c=a.platform.btv.PVRManager.getTask(e,"keep");if(c&&c._data&&c._data.keep){return c._data.keep;}return 0;},KEEP_UNTIL_MANUAL_DELETE:1,KEEP_UNTIL_SPACE_NEEDED:0};}());}($N||{}));(function(a){a.app=a.app||{};a.app.DlnaHelper=(function(){var d=60000,D=null,E=null,R=a.app.constants.USB_MOUNT_POINT,x=[],b=null,P="",Q=[],J=25,X=a.app.constants.SINGLE_SPACE_UNICODE,I=false,l=null,L={AUDIO:1,IMAGE:2,VIDEO:3,FOLDER:4,FILE:5,UNKNOWN:6},V=null,c=null,K=null,q="nagra";function B(aa){var Z;for(Z=0;Z<x.length;Z++){if(x[Z].item&&x[Z].item.resourceUrl===aa){return x[Z];}}}function S(ab){var aa=[],Z=a.app.DlnaHelper.getString("notAvailable");aa.push({title:Z,album:Z,albumArtUri:Z,url:ab,duration:Z,artist:Z,width:null,height:null});return aa;}function g(ar,ag,ac){var ae=null,af="",ap="",ao="",Z=null,aj=[],aa=[],aq,ad="",ak="",ab="",an=null,al=null,ai=null,ah=null,am=a.app.DlnaHelper.getString("notAvailable");aq=B(ar);if(aq){if(aq.item.resource){Z=aq.item.resource[0].duration;an=aq.item.resource[0].resolution;ah=aq.item.resource[0].sizeBytes;}if(aq.item.date){ap=new Date(aq.item.date[0].toString().split("T")[0]);af=a.apps.util.Util.formatDate(ap,"DD MONTH YYYY",a.app.DlnaHelper.getString("longMonths"),null,null,null);ao=af;if(Z&&Z.indexOf(".")>-1){Z=Z.split(".")[0];}ao=ao+X+X+Z;}if(aq.item.album){ak=aq.item.album[0];}if(aq.item.albumArtUri){ad=aq.item.albumArtUri[0].value;}if(aq.item.artist){ab=aq.item.artist[0].name;}if(an&&an.indexOf("x")>-1){al=an.split("x")[0];ai=an.split("x")[1];}aa.push({title:aq.title||am,album:ak||am,albumArtUri:ad,url:aq.item.resourceUrl,duration:Z,artist:ab||am,width:al||null,height:ai||null,fileSize:ah||null});}else{aa=S(ar);ao={data:ao,trackDuration:Z,itemDetails:aa};}return{data:ao,trackDuration:Z,itemDetails:aa};}function G(Z){var aa="jpg|gif|png|mp3|wav|mp4|avi|mkv",ac,ab,ad=Z.split("?")[0];ac=ad.split(".");ab=ac[ac.length-1];if(aa.indexOf(ab.toLowerCase())>-1){return true;}else{return false;}}function T(ac){var aa,Z="",ad="",ab=[];for(aa=0;aa<ac.length;aa++){if(ac[aa].type==="File"){if(ac[aa].album){Z=ac[aa].item.album[0];}if(ac[aa].resource){ad=ac[aa].resource[0].duration;}ab.push(ac[aa].item.resourceUrl);}}return ab;}function m(){var Z,aa=[];if(x.length>0){return T(x);}else{return[];}}function U(ab,aa){var ac=String(ab.title).toLowerCase(),Z=String(aa.title).toLowerCase();return ac.localeCompare(Z);}function o(ab){var aa,ac=[],Z=[];for(aa=0;aa<ab.length;aa++){if(ab[aa].fileType===L.FOLDER){ac.push({title:ab[aa].title,type:"Folder",id:ab[aa].id,parentID:ab[aa].parentId,childCount:(ab[aa].childCount||J)});}else{if((ab[aa].fileType===L.FILE||ab[aa].fileType===b)&&G(ab[aa].resourceUrl)){Z.push({title:ab[aa].title,type:"File",parentID:ab[aa].parentId,item:ab[aa]});}}}ac.sort(U);Z.sort(U);x=ac.concat(Z);ac=[];Z=[];return x;}function F(Z){V=Z;}function C(ad,Z){var ab,ac=[],aa;if(ad&&Z===K){for(ab in ad){if(ad.hasOwnProperty(ab)){ac.push(ad[ab]);}}K=null;V(o(ac));}}function s(ae,aa,af){var ad=aa.title,Z=aa.id,ab=null,ac=null;F(af);if(ad===R){if(!I){I=true;Q=[];ac={id:"0",childCount:J};Q.push(ac);K=a.platform.media.UPnP.getRootContentsForDevice(E,C);}}else{ab=parseInt(aa.childCount,10)||J;K=a.platform.media.UPnP.getContentsForFolder(aa,C,0,ab);}}function u(Z){if(Q.length>1){Q.pop();return true;}else{return false;}}function n(aa,Z,ab){Q.push(Z);s(aa,Z,ab);}function k(){return l;}function w(Z){P=Z;switch(Z){case"Images":b=L.IMAGE;break;case"Audios":b=L.AUDIO;break;case"Videos":b=L.VIDEO;break;}}function e(){var Z={title:Q[Q.length-1].id,id:Q[Q.length-1].id,childCount:Q[Q.length-1].childCount};return Z;}function Y(Z){return Z.item.resourceUrl;}function O(){I=false;}function r(Z){if(Z.manufacturer&&Z.manufacturer.toLowerCase()!==q){return true;}else{return false;}}function z(){var ab=a.platform.media.UPnP.getDevices(),Z=[],aa,ac=ab.length;if(ac>0){for(aa=0;aa<ac;aa++){if(r(ab[aa])){Z.push({name:ab[aa].friendlyName,device:ab[aa]});}}}return Z;}function W(ac,ae,Z){var af=ae,ad=Z,aa=z(),ab;if(aa.length>1){c=new a.apps.dialog.ConflictDialogue("dlnaDialogue",af,ad,aa,ac,null,false);c.setExitCallback(function(){});a.app.DialogueHelper.displayDialogue(c,a.app.DialogueHelper.DLNA,d);}else{if(aa.length===1){ac(aa[0]);}}}function H(Z){E=Z.device;D=Z.device.udn;l=Z.name;}function N(Z){if(Z.item.albumArtUri){return Z.item.albumArtUri[0].value;}else{return"./images/"+P+".png";}}function A(Z,aa){return null;}function h(){return null;}function y(){a.apps.core.Language.adornWithGetString(a.app.DlnaHelper);}function v(Z){CCOM.HomeNetworking.addEventListener("onDeviceLost",Z,false);}function t(Z){CCOM.HomeNetworking.removeEventListener("onDeviceLost",Z,false);}function p(Z){CCOM.HomeNetworking.addEventListener("getDevicesOK",Z,false);}function M(){if(c){a.apps.dialog.DialogManager.hideDialog(c);c=null;}}function f(){return false;}return{initialise:y,getFolderContent:s,showDeviceList:W,navigateToParentFolder:u,getPlayList:m,getMediumName:k,getMediaMetadata:g,setActiveFileSystemMode:w,getCurrentFolderName:e,getCurrentFolderFullyQualifiedName:Y,rewindToBaseFolder:O,setDeviceParameters:H,getThumbnailUrl:N,navigateToSubFolder:n,getAvailableDevices:z,subscribeToDeviceLostEvent:v,unSubscribeToDeviceLostEvent:t,registerGetDevicesOkEvent:p,hideDlnaDeviceListDialog:M,isMediaContentLoading:f,clearImageLoadTimer:h,getActualImageUrlForPreview:A};}());}($N||{}));(function(a){a.app=a.app||{};a.app.UpgradeUtil=(function(){var b={JOB_OP_STATE_CREATED:0,JOB_OP_STATE_CREATED_DELETING:1,JOB_OP_STATE_READY:2,JOB_OP_STATE_TASK_DELETING:3,JOB_OP_STATE_DELETED:4},s=a.app.constants,m=a.platform.system.Preferences,g=new a.apps.core.Log("Helper","UpgradeUtil");function n(){var t="jobId,eventId";return a.platform.btv.PVRManager.getAllTimedReminders("eventId IS NOT NULL AND jobOpState>="+String(b.JOB_OP_STATE_CREATED)+" AND jobOpState<="+String(b.JOB_OP_STATE_READY)+" AND scheduleType IS 'ONE_EVT'",t);}function c(){var u=null,w="jobOpState>="+String(b.JOB_OP_STATE_CREATED)+" AND jobOpState<="+String(b.JOB_OP_STATE_READY)+" AND title IS 'AutoTune'",v="taskType='RMDR' AND "+w,t="sourceURL, taskType, timeOfDay, endTime, startTime, duration, serviceId, repeatDaysArray, jobId, scheduleType, title, extraInfo";u=a.platform.btv.PVRManager.getJobByQuery(v,"startTime",t);return u;}function r(u,t){a.app.Reminders.setReminders(u,function(){a.platform.btv.PVRManager.deleteJob(t);});}function k(){var u=n(),t=0,v=null;for(t=0;t<u.length;t++){v=a.platform.btv.EPG.getEventById(u[t].eventId);if(v){r(v,u[t].jobId);}}}function h(u){var t=0,v=0;if(!u){return"once";}for(t=0;t<u.length;t++){if(u[t]){v++;}}switch(v){case 7:return"daily";default:return"weekly";}}function p(){var x=c(),y=0,C={},v=null,A=null,t=[],D=null,u=null,w=null,B=null,z=60000;for(y=0;y<x.length;y++){w=a.app.epgUtil.getServiceById(x[y].serviceId);u=x[y].startTime-z;v=x[y].scheduleType;A=h(x[y].repeatDaysArray);if(!x[y].timeOfDay){B=new Date(u);D=(B.getHours()*3600)+(B.getMinutes()*60);}else{D=x[y].timeOfDay;}switch(A){case"weekly":t=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.WEEKLY,new Date(u));break;case"daily":t=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.DAILY);break;case"once":t=a.platform.btv.PVRManager.getRepeatDaysArrayForFrequency(a.platform.btv.PVRManager.Frequency.ONCE);break;}C={startTime:u,duration:x[y].duration,sourceURL:x[y].sourceURL,title:w.serviceName,serviceId:x[y].serviceId,timeOfDay:D,repeatDaysArray:t,extraInfo:JSON.stringify({jobType:A})};a.app.AutoTuneHelper.setAutoTune(v,C);a.platform.btv.PVRManager.deleteJob(x[y].jobId);}}function o(){var w=m.get(s.PREF_DEFAULT_KEEP_UNTIL),v=m.get(s.PVR_NON_EPISODIC_FOLDER_LIST),u=m.get(s.PVR_NON_EPISODIC_DEFAULT_FOLDER),t=m.get(s.PREF_BEFORE_PADDING),y=m.get(s.PREF_AFTER_PADDING),x=0;if(w===s.KEEP_UNTIL_OPTION_30_DAYS){m.set(s.PREF_DEFAULT_KEEP_UNTIL,s.KEEP_UNTIL_OPTION_SPACE_NEEDED);}if(t){m.set(s.PREF_EPISODIC_BEFORE_PADDING,t);}if(y){m.set(s.PREF_EPISODIC_AFTER_PADDING,y);}if(u==="/"){m.set(s.PVR_NON_EPISODIC_DEFAULT_FOLDER,s.ROOT_PVR_FOLDER_NAME);}else{u=u.replace(/\//g,"");m.set(s.PVR_NON_EPISODIC_DEFAULT_FOLDER,u);}for(x=0;x<v.length;x++){if(v[x].indexOf("/")>-1){v[x]=v[x].replace(/\//g,"");}}m.set(s.PVR_NON_EPISODIC_FOLDER_LIST,v);}function q(){var y=null,v=null,w="taskType='REC' AND scheduleType='SERIES'",u=null,t=null,x=null;y=a.platform.btv.PVRManager.getTasksByQuery("taskId, jobId, uiFolder, title, episodeId",w,"startTime DESC");v=y.length;for(u=0;u<v;u++){t=parseInt(y[u].episodeId.substr(0,2),10);x=y[u].title+"  Temp.  "+t;x=a.app.StringUtil.addLeadingForwardSlash(y[u].uiFolder);a.app.PVRUtil.updateRecording(y[u].taskId,{uiFolder:x});CCOM.Scheduler.updateJob(y[u].jobId,{uiFolder:x});}}function f(){var x=null,u=null,v="taskType='REC' AND scheduleType!='SERIES'",t=null,w=null;x=a.platform.btv.PVRManager.getTasksByQuery("taskId, jobId, uiFolder, title, episodeId",v,"startTime DESC");u=x.length;for(t=0;t<u;t++){w=a.app.StringUtil.addLeadingForwardSlash(x[t].uiFolder);a.app.PVRUtil.updateRecording(x[t].taskId,{uiFolder:w});CCOM.Scheduler.updateJob(x[t].jobId,{uiFolder:w});}}function l(){var t="/network/siconfig/networkClasses/CableEITPFOnly";CCOM.ConfigManager.unsetValue(t+"/transponders/0/dvbc/networkId");CCOM.ConfigManager.unsetValue(t+"/transponders/0/dvbc/modulation");CCOM.ConfigManager.unsetValue(t+"/transponders/0/dvbc/frequency");CCOM.ConfigManager.unsetValue(t+"/transponders/0/dvbc/symbolRate");CCOM.ConfigManager.unsetValue(t+"/transponders/0/dvbc");CCOM.ConfigManager.unsetValue(t+"/transponders/0");CCOM.ConfigManager.unsetValue(t+"/transponders");CCOM.ConfigManager.unsetValue(t+"/networkClass");CCOM.ConfigManager.unsetValue(t+"/enabled");CCOM.ConfigManager.unsetValue(t+"/persistent");CCOM.ConfigManager.unsetValue(t+"/useConnectedTuners");CCOM.ConfigManager.unsetValue(t+"/automatic");CCOM.ConfigManager.unsetValue(t);CCOM.SINetwork.unlockConfiguration();CCOM.SINetwork.removeEventListener("lockConfigurationOK",l);}function e(){CCOM.SINetwork.addEventListener("lockConfigurationOK",l);CCOM.SINetwork.addEventListener("lockConfigurationFailed",function(){window.setTimeout(e,5000);});CCOM.SINetwork.lockConfiguration();}function d(){o();p();q();f();e();CCOM.ControlCenter.clearCache();a.platform.system.Preferences.set(a.app.constants.PREF_UI_MIGRATION_STATUS,true);}return{runMigrationProcess:d};}());}($N||{}));(function(a){a.app=a.app||{};a.app.UsbBrowserHelper=(function(){var L=false,T=null,Q=5000,R=a.app.constants.USB_MOUNT_POINT,U=a.app.constants.SINGLE_SPACE_UNICODE,E=[],v="",K=[],c=null,n=null,J=false,V=null,C=null,x=null,d=null,D=null,M=300;function A(){var ab=["Audios","Images","Videos"],Z,X,aa=null,Y=[];for(X=0;X<ab.length;X++){aa=CCOM.MediaLibrary.getEntryRSByQuery("fileObjectUrl","mediumID LIKE '"+T+"'",ab[X],"mediumID");Y=aa.getNext(Q);for(Z=0;Z<Y.length;Z++){K.push(Y[Z].fileObjectUrl);}if(K.length>0){switch(ab[X]){case"Images":V=new a.app.FileSystem();V.reinitializeFileSystem();V.setRootMountPath("/"+R+"/"+v);V.addFilesToFileSystem(K);break;case"Audios":C=new a.app.FileSystem();C.reinitializeFileSystem();C.setRootMountPath("/"+R+"/"+v);C.addFilesToFileSystem(K);break;case"Videos":x=new a.app.FileSystem();x.reinitializeFileSystem();x.setRootMountPath("/"+R+"/"+v);x.addFilesToFileSystem(K);break;}}K=[];}a.apps.util.EventManager.fire("usbContentLoaded",false);}function I(Z){var X=Math.floor(Z/3600000),Y=Math.floor(Z/60000)-Math.round(X*60),aa=Math.floor(Z/1000)-Math.round(Y*60),ab="";if(Z===0){return"";}ab+=String(("0"+X).slice(-2))+":";if(Y===1){ab+=String(("0"+Y).slice(-2))+":";}else{ab+=String(("0"+Y).slice(-2))+":";}if(aa===1){ab+=String(("0"+aa).slice(-2));}else{ab+=String(("0"+aa).slice(-2));}return ab;}function S(aa,Z){var Y=[],X=a.app.UsbBrowserHelper.getString("notAvailable");if(aa==="Videos"){Y.push({url:Z,duration:null,fileSize:null});}else{if(aa==="Audios"){Y.push({title:X,album:X,url:Z,duration:X,artist:X,albumArtUri:X});}else{if(aa==="Images"){Y.push({fileName:"",width:null,height:null});}}}return Y;}function h(ae,ad,Y){var af=null,ah,ac="",Z="",ai=null,aa=null,ab=ae.replace("file://",""),X=[],ag=a.app.UsbBrowserHelper.getString("notAvailable");af=CCOM.MediaLibrary.getEntryRSByQuery("*","mediumID LIKE '"+T+"' AND fileObjectUrl LIKE '%"+ab+"%'",ad,"mediumID");if(af&&af.getNext){ai=af.getNext(Q)[0];}if(ai){if(ai.fileModifyDateTime){ac=new Date(ai.fileModifyDateTime);ah=a.apps.util.Util.formatDate(new Date(ai.fileModifyDateTime),"DD MONTH YYYY",a.app.UsbBrowserHelper.getString("longMonths"),null,null,null);Z=ah.toString();}if(ai.duration){aa=I(ai.duration);Z=Z+U+U+aa;}if(ad==="Videos"){X.push({url:ae,duration:aa,fileSize:ai.fileObjectSize||null});}else{if(ad==="Audios"){X.push({title:ai.audioSongTitle||ag,album:ai.audioAlbumTitle||ag,url:ae,duration:aa,artist:ai.audioArtist||ag,fileSize:ai.fileObjectSize||null,albumArtUri:""});}else{if(ad==="Images"){X.push({fileName:ai.fileObjectUrl?(ai.fileObjectUrl.substr(ai.fileObjectUrl.lastIndexOf("/")+1)):"",width:ai.imageWidth||null,height:ai.imageHeight||null,fileSize:ai.fileObjectSize||null});}}}Z={data:Z,trackDuration:aa,itemDetails:X};}else{X=S(ad,ae);Z={data:Z,trackDuration:aa,itemDetails:X};}return Z;}function r(Y){var X,Z=[];for(X=0;X<Y.length;X++){Z.push({title:Y[X].Name,type:Y[X].Type});}return Z;}function F(aa){var X="",Z,Y;switch(c){case"Images":X="jpg|gif|png";break;case"Audios":X="mp3|wav";break;case"Videos":X="mp4|avi|mkv";break;}Z=aa.split(".");Y=Z[Z.length-1];if(X.indexOf(Y.toLowerCase())>-1){return true;}else{return false;}}function o(){var Y=d.getFullyQualifiedFileList(F),X,Z=[];for(X=0;X<Y.length;X++){Z.push("file://"+Y[X]);}return Z;}function u(X){switch(X){case"Images":d=V;break;case"Audios":d=C;break;case"Videos":d=x;break;}}function e(){var X={title:d.getCurrentFolderName()};return X;}function s(aa,X,ab){var Y=[],Z=X.title;c=aa;u(aa);if(d){Y=d.getFolderContents(Z,F);}if(ab){ab(r(Y));}}function t(X){if(d&&e().title!==X){d.gotoParentFolder();return true;}else{return false;}}function p(Z,X,aa){var Y=X.title;if(d){if(Y!==R){d.setCurrentFolderRelative(Y);}}s(Z,X,aa);}function N(Y,X){L=Y;T=null;if(L){T=X;}}function b(){return(a.app.FeatureManager.getMediaPlaybackFeatureStatus()&&L);}function H(X){E=X;if(E){v=E[0].partitionName;}}function m(){return E;}function G(X){n=X;}function l(){return n===""?a.app.UsbBrowserHelper.getString("usbDefaultDeviceName"):n;}function W(X){return"file://"+d.getCurrentFolderFullyQualifiedName()+"/"+X.title;}function P(){if(V){V.rewindFileSystem();}if(C){C.rewindFileSystem();}if(x){x.rewindFileSystem();}}function z(X,Z,Y){Y=Y||this;Z=Z||X||null;var aa=[];aa.push(a.apps.util.EventManager.subscribe("usbMediaPlaybackEnabled",X,Y));aa.push(a.apps.util.EventManager.subscribe("usbMediaPlaybackDisabled",Z,Y));return aa;}function f(Y){Y=Y||[];var X=0;if(Y.length){for(X=0;X<Y.length;X++){a.apps.util.EventManager.unSubscribe(Y[X]);}}return[];}function O(X){return"./images/"+c+".png";}function y(X,Y){if(D){window.clearTimeout(D);D=null;}D=setTimeout(function(){Y(W(X));},M);}function k(){if(D){window.clearTimeout(D);D=null;}}function B(){V=null;C=null;x=null;d=null;}function w(){a.apps.core.Language.adornWithGetString(a.app.UsbBrowserHelper);}function q(X){J=X;}function g(){return J;}return{initialise:w,setMediaContentList:A,getFolderContent:s,getMediaPlaybackStatus:b,setMediaPlaybackStatus:N,setPartitionList:H,getPartitionList:m,navigateToParentFolder:t,getPlayList:o,setMediumName:G,getMediumName:l,getMediaMetadata:h,setActiveFileSystemMode:u,getCurrentFolderName:e,getCurrentFolderFullyQualifiedName:W,rewindToBaseFolder:P,subscribeToUsbMediaPlaybackEvent:z,unSubscribeToUsbMediaPlaybackEvent:f,getThumbnailUrl:O,resetFileSystem:B,navigateToSubFolder:p,setMediaContentLoading:q,isMediaContentLoading:g,clearImageLoadTimer:k,getActualImageUrlForPreview:y};}());}($N||{}));(function(b){function a(){this.ROOT={};this.ROOT_MOUNT_PATH="";this.CurrentFileObj=this.ROOT;this.FileObjStack=[];this.currentFolderName="mnt";this.tab_spacing="";}var c=a.prototype;c.SPACING="    ";c._compareSort=function(f,e){var g=String(f).toLowerCase(),d=String(e).toLowerCase();return g.localeCompare(d);};c._getImmediateSubfolders=function(e){var g=[],f=0,d;for(d in e){if(typeof(e[d])!=="string"){g[f++]=d;}}g.sort(this._compareSort);return(g);};c._getImmediateFiles=function(f){var e=[],g=0,d;for(d in f){if(typeof(f[d])==="string"){e[g++]=d;}}e.sort(this._compareSort);return(e);};c._getImmediateSubfolderObject=function(e,f){var d;for(d in e){if((typeof(e[d])==="object")&&(d===f)){return(e[d]);}}throw {name:"FileSystemException",message:"Cannot get folder object for folder "+f};};c._printDirectory=function(f,e,g){var d;for(d in f){if(f.hasOwnProperty(d)){if(typeof(f[d])==="string"){if(e===true){}else{g.push(this.tab_spacing+d);}}else{if((this.tab_spacing==="")||(this.tab_spacing===undefined)){this.tab_spacing=this.SPACING;}if(e===true){}else{g.push(this.tab_spacing+d);}this.tab_spacing=this.SPACING+this.tab_spacing;if(e===true){this._printDirectory(f[d],true);}else{this._printDirectory(f[d],false,g);}}}}this.tab_spacing=this.tab_spacing.slice(this.SPACING.length,this.tab_spacing.length);};c.getFileSystemRecursiveContents=function(){var d=[];this._printDirectory(this.ROOT,false,d);return(d);};c.addFileToFileSystem=function(d){var f=this.ROOT,g,e;d=d.trim();d=d.replace(this.ROOT_MOUNT_PATH+"/","");g=d.split("/");for(e=0;e<(g.length-1);e++){if(typeof f[g[e]]==="undefined"){f[g[e]]={};}f=f[g[e]];}f[g[e]]=g[e];};c.addFilesToFileSystem=function(e){var d;for(d=0;d<e.length;d++){this.addFileToFileSystem(e[d]);}};c.reinitializeFileSystem=function(){this.ROOT={};this.currentFolderName="mnt";this.CurrentFileObj=this.ROOT;this.FileObjStack=[];};c.rewindFileSystem=function(){while(this.FileObjStack.length>=1){this.gotoParentFolder();}};c.printFileSystemOnConsole=function(){this._printDirectory(this.ROOT,true);};c.getFolderContents=function(f,k){var h=[],e=[],g=[],l=0,d;if(this.currentFolderName!==f){throw {name:"FileSystemException",message:"Asking for contents of directory other than current directory"};}else{h=this._getImmediateSubfolders(this.CurrentFileObj);for(d=0;d<h.length;d++){g.push({Type:"Folder",Name:h[d]});}e=this._getImmediateFiles(this.CurrentFileObj);for(d=0;d<e.length;d++){if((k===undefined)||(k(e[d])===true)){g.push({Type:"File",Name:e[d]});}}return(g);}};c.isFolder=function(d){return((d.Type==="Folder")?true:false);};c.isFile=function(d){return((d.Type==="File")?true:false);};c.getName=function(d){if((d.Type==="File")||(d.Type==="Folder")){return(d.Name);}else{throw {name:"FileSystemException",message:"Undefined file system element"};}};c.printFolderContents=function(e){var d={},f;if(typeof(e)==="object"){for(f=0;f<e.length;f++){console.log((f+1)+": Type = "+e[f].Type+", Name = "+e[f].Name);}}else{throw {name:"FileSystemException",message:"Cannot print contents of folder"};}};c.setCurrentFolderRelative=function(d){if(this._getImmediateSubfolders(this.CurrentFileObj).indexOf(d)!==-1){try{this.FileObjStack.push({FolderName:this.currentFolderName,FolderObj:this.CurrentFileObj});this.CurrentFileObj=this._getImmediateSubfolderObject(this.CurrentFileObj,d);this.currentFolderName=d;}catch(f){}}else{throw {name:"FileSystemException",message:"Cannot set current folder to subfolder not present in current folder"};}};c.setCurrentFolderRelativeAndGetContents=function(d,e){if(this.getCurrentFolderName()!==d){this.setCurrentFolderRelative(d);}return(this.getFolderContents(d,e));};c.getCurrentFolderName=function(){return(this.currentFolderName);};c.getParentFolderName=function(){if(this.FileObjStack.length>=1){return(this.FileObjStack[this.FileObjStack.length-1].FolderName);}else{throw {name:"FileSystemException",message:"No parent exists for current folder. Already at root."};}};c.getCurrentFolderFullyQualifiedName=function(){var e,f,d;if(this.ROOT_MOUNT_PATH===""){throw {name:"FileSystemException",message:"Root mount path not set"};}e=this.ROOT_MOUNT_PATH;if(this.FileObjStack.length>=1){f=[];for(d=1;d<this.FileObjStack.length;d++){f[d]=this.FileObjStack[d].FolderName;}e+=f.join("/");e+="/"+this.currentFolderName;return(e);}else{return(this.ROOT_MOUNT_PATH);}};c.getFullyQualifiedFileList=function(k){var h=this.getCurrentFolderFullyQualifiedName(),f=this._getImmediateFiles(this.CurrentFileObj),g=[],e,d;for(e=0,d=0;e<f.length;e++){if((k===undefined)||(k(f[e])===true)){g[d++]=h+"/"+f[e];}}return g;};c.gotoParentFolder=function(){var d=this.FileObjStack.pop();if(d===undefined){throw {name:"FileSystemException",message:"No parent exists for current folder. Already at root."};}else{this.CurrentFileObj=d.FolderObj;this.currentFolderName=d.FolderName;}};c.setRootMountPath=function(d){if(d!==""){this.ROOT_MOUNT_PATH=d;}else{throw {name:"FileSystemException",message:"Root mount path cannot be empty"};}};b.app=b.app||{};b.app.FileSystem=a;}($N||{}));(function(a){a.app=a.app||{};a.app.PPVHelper=(function(){var L=1,s=null,R=null,d="purchase",m="EVENT",P="CHANNEL",F=0,J=1,A=null,y="camera.png",I=null,e=null;function H(U,T){if(!R){R=new a.app.PinHelper(T,null,null,null,0,true);}U.x=0;U.y=0;U.width=1920;U.height=1080;U.cancelCallback=function(){R.hideDialog();};R.setDialogProperties(U);if(T){R.setAuthenticationSuccessCallback(T);}}function c(){if(R&&R.isPinShowing()){clearTimeout(I);R.hideDialog();}}function O(T){if(((a.app.GeneralUtil.bitwiseAnd(T.flags,CCOM.ConditionalAccess.PURCHASABLE)===CCOM.ConditionalAccess.PURCHASABLE)||(a.app.GeneralUtil.bitwiseAnd(T.flags,CCOM.ConditionalAccess.OFFLINE_PURCHASE)===CCOM.ConditionalAccess.OFFLINE_PURCHASE)||(a.app.GeneralUtil.bitwiseAnd(T.flags,CCOM.ConditionalAccess.SMS_PURCHASE)===CCOM.ConditionalAccess.SMS_PURCHASE))&&((T.caType===CCOM.ConditionalAccess.EVENT)||(T.caType===CCOM.ConditionalAccess.EVENT_PACKAGE))){return true;}else{return false;}}function C(T){if((a.app.GeneralUtil.bitwiseAnd(T.flags,CCOM.ConditionalAccess.PURCHASABLE)===CCOM.ConditionalAccess.PURCHASABLE)&&((T.caType===CCOM.ConditionalAccess.SERVICE)||(T.caType===CCOM.ConditionalAccess.SERVICE_PACKAGE))){return true;}else{return false;}}function z(T,U){if(a.apps.core.ContextManager.getActiveContext().getId()!=="ZAPPER"){a.app.ContextHelper.openContext("ZAPPER",{activationContext:T,navCompleteCallback:U});}else{if(!U){a.apps.core.ContextManager.getActiveController().updateBannerAndTuneIfNeeded(T);}}}function p(Z,V,X,W,Y){var U=null,T=false;if(!Z){Z={eventId:V,products:[]};}Z.isPPVProduct=(!X)?Z.isPPVProduct:X;Z.isSubscriptionProduct=(!W)?Z.isSubscriptionProduct:W;if(Y){for(U=0;U<Z.products.length;U++){if(Z.products[U].id===Y.id){T=true;break;}}if(T===false){Z.products.push(Y);}}return Z;}function v(U,Y){var ad=null,aa=null,ab=0,T=U.eventId,W=null,X=null,ac=null,Z=false,V=false;if(!Y){Y=(U!==null)?CCOM.ConditionalAccess.getEventInfo(U.eventId):null;}if(Y&&Y.products){aa=Y.products;for(W=0;W<aa.length;W++){Z=false;V=false;ad=aa[W];X={id:ad.id,cost:ad.cost};if(O(ad)){X.type=m;Z=true;}else{if(C(ad)){X.type=P;V=true;}}if(Z||V){ac=p(ac,T,Z,V,X);}}}return ac;}function g(U,V){var T=null;if(!V){V=(U!==null)?CCOM.ConditionalAccess.getEventInfo(U.eventId):null;}if(V&&(V.caAccess===CCOM.ConditionalAccess.DENIED)){T=v(U,V);}return T;}function Q(T){var U=a.platform.btv.EPG.getEventById(T.eventId);U.purchaseObject=T;a.app.epgUtil.navigateToSynopsis(U,false,null);}function k(aa,ac){var U=null,ab=null,X=null,Y="CHANNELSUBSCRIPTION",Z=null,T=a.app.epgUtil.getServices(),W=null,ad=null,V=null;if(aa.action===F){Q(ac);}else{if(aa.action===J){ad=a.platform.system.Preferences.getPreferenceObject(a.app.constants.APPLICATION_LAUNCH_CONFIG);for(V in ad){if(ad.hasOwnProperty(V)){if(ad[V]===Y){Z=V;}}}if(Z){for(W=0;W<T.length;W++){if(T[W]._data.channelKey.toString()===Z.toString()){X=a.app.epgUtil.getServiceById(T[W]._data.serviceId);}}}if(X){X.showBanner=true;z(X);}}}}function w(U,aa,X,Y,W){var V=a.app.PPVHelper,T=null,Z=null;T=a.app.DialogueHelper.createAndShowDialogue(aa,V.getString("PPVSubscriptionTitleText"),(X)?V.getString(X):null,Y,null,null,"VERTICAL",null);Z=function(ab){a.apps.dialog.DialogManager.hideDialog(T);k(ab,U);};T._dialogGUIObject.configure({selectedCallback:Z});T.setExitCallback(W);e=T;}function f(V){var U="",T=0.01;if(V||V===0){U=(V*T).toFixed(2);U=U.replace(".",",");U="R$"+U;}return U;}function M(T,U){if(T.products){var V=a.app.ArrayUtil.getIndex(T.products,function(W){return W.type===U;});if(V>-1){return T.products[V];}else{return null;}}else{return null;}}function o(V){var U=CCOM.ConditionalAccess.getServiceAccess(V),T=CCOM.ConditionalAccess.getSmartcardInfo();return((U.caAccess===CCOM.ConditionalAccess.DENIED)&&(T.smartcardInfo.state===CCOM.ConditionalAccess.OK));}function K(aj,al){if(aj){var ac=null,T=CCOM.ConditionalAccess.getEventInfo(aj.eventId),V=g(aj,T),Y=null,Z=null,an=null,ad=null,ae=null,W=null,aa=null,X=null,am=null,ao=null,ak=null,ah=null,U=null,ai=a.app.PPVHelper,ag=o(aj.serviceId),ab=(V)?V.isPPVProduct:false,af=(V)?V.isSubscriptionProduct:false;if((ab||af||ag)&&!a.app.EventUtil.isEventPreviewTime(aj,T)&&a.app.ConditionalAccessCAK73.isAccessDenied()){Y=a.app.epgUtil.getServiceById(aj.serviceId);Z=Y.logicalChannelNum+" "+Y._data.name;an=aj.title;ad=new Date(aj.startTime);ae=a.app.DateTimeUtil.getFormattedTimeString(ad,a.app.constants.TWENTY_FOUR_HOUR_TIME_FORMAT);W=a.app.DateTimeUtil.getDayMonthStringFromDate(ad);aa=a.app.DateTimeUtil.getWeekdayDayMonthTimeStringFromDate(ad);X=a.apps.util.Util.formatTime(new Date(aj.endTime),"HH:MM");am=a.app.StringUtil.join(" ",[aa,"-",X]);ao=a.app.ImageUtil.getParentalRatingIconHrefInHelpers(aj.parentalRating);ak=a.app.genreUtil.getGenresByEvent(aj);if(ab&&(af||ag)){ac=[{name:ai.getString("buyEventButton"),action:F},{name:ai.getString("buyChannelButton"),action:J}];w(V,a.app.constants.DLG_PPV_CHANNEL_SUBSCRIPTION,"PPVSubscriptionMessageText",ac,al);}else{if(ab){U=M(V,m);ah=U.cost;if(!s){a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.PPVConfirmationDialog;s=new a.apps.dialog.ConfirmationDialogue("PPVEventDialog",null,null,null,null);a.apps.dialog.ConfirmationDialogue.GUITemplateObject=a.gui.ConfirmationDialog;}s._dialogGUIObject.configure({title:an,message:am,dialogueTypeLabel:Z,alertImageSubTextConfig:{text:ak},alertImageTextConfig:{text:f(ah)},alertImage:{href:ao},purchaseObject:V,titleImageFromEvent:aj,PPVOkCallback:Q,highlightedItemLabelText:ai.getString("PPVConfirmationText")});s._dialogGUIObject.refreshPPVPositions();if(al){s.setExitCallback(al);}a.app.DialogueHelper.displayDialogue(s,a.app.constants.DLG_PPV_EVENT,0);e=s;}else{if(af||ag){ac=[{name:ai.getString("buyChannelButton"),action:J}];w(V,a.app.constants.DLG_CHANNEL_SUBSCRIPTION,"PPVSubscriptionMessageText",ac,al);}}}}}}function h(X){var W=a.app.PPVHelper,T=null,Y=W.getString("warning")+" !",V=null,U=[{name:W.getString("ok")}];if(X){switch(X.name){case"OutOfPurchaseWindow":V=W.getString("purchaseWindowErrorMessage");break;case"NoCredit":case"LowCredit":V=W.getString("insufficientCreditErrorMessage");break;default:V=W.getString("otherPPVErrorMessage");break;}}else{V=W.getString("otherPPVErrorMessage");}c();T=a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_PPV_PURCHASE_ERROR,Y,V,U,null,null,null,null,{message:V});}function B(U,X){var W=a.app.ConditionalAccessCAK73.getCASmartCardInfo(),Y=W.smartcardInfo.serialNumber,V=a.platform.btv.EPG.getEventById(U),T=a.app.epgUtil.getServiceById(V.serviceId);Y=Y.replace(/ /g,"");return{stbid:Y,channr:T._data.channelKey,channame:T._data.name,isAdult:a.app.epgUtil.isAdultEvent(V),startTime:V.startTime,eventname:V.title,cost:X.cost};}function q(){var T=a.app.DialogueHelper.getDialogue(a.app.constants.DLG_PPV_PURCHASE_SUCCESS);if(!T){T=a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_PPV_PURCHASE_SUCCESS,undefined,undefined,null,null,null,null,null,null,null,a.gui.PPVSuccessConfirmationDialog);}else{a.app.DialogueHelper.createAndShowDialogue(a.app.constants.DLG_PPV_PURCHASE_SUCCESS);}T._dialogGUIObject.refreshPPVSuccessPositions();}function S(V,Y){var U=null,X=null,W=a.platform.btv.EPG.getEventById(V),T=null;U=a.platform.system.Preferences.getPreferenceObject(a.app.constants.PURCHASE_LIST);if(!U){U=[];}X=B(V,Y);U.splice(0,0,X);a.platform.system.Preferences.setPreferenceObject(a.app.constants.PURCHASE_LIST,U);c();if(a.app.EventUtil.isEventShowingNow(W)){T=a.app.epgUtil.getServiceById(W.serviceId);T.showBanner=false;z(T,q);}else{a.app.ContextHelper.closeContext();q();}}function r(T){var U=M(T,m),V={eventId:T.eventId,mode:CCOM.ConditionalAccess.OFFLINE,productId:U.id},W=null;I=setTimeout(function(){W=CCOM.ConditionalAccess.purchaseProduct(V);if(W&&Object.keys(W).length===0){S(T.eventId,U);}else{if(W){h(W.error);}}},500);}function l(V,U){var X=a.app.PPVHelper,Y=null,W=null,T=null;if(V){T=a.platform.btv.EPG.getChannelByServiceId(V.serviceId);if(a.app.ParentalControlUtil.isChannelOrProgramLocked(V)&&a.app.genreUtil.isAdultChannel(T)){W=X.getString("adultContent");}else{W=V.title;}Y={id:"ppvAuthentication",eventImageVisibility:false,title:W,titleCssClass:"nowMenuItemHighlighted",description:f(U)+" - "+a.app.PPVHelper.getString("purchaseMessage"),inProgressAppearance:true,inProgressIndicatorText:X.getString("pleaseWaitText")};if(a.app.EventUtil.isEventShowingNow(V)){Y.subTitle=X.getString("ppvEventBegunMessage");Y.subTitleCssClass="agoraServiceName dullYellowColor";Y.subTitleX=435;Y.subTitleY=810;}}return Y;}function D(U){var X=a.app.PPVHelper,V=(!U.purchaseObject)?(g(U)):U.purchaseObject,Y=M(V,m),T=Y.cost,Z=l(U,T),W=function(){r(V);};if(U){H(Z,W);R.showPinDialog(d,true,null,true);}}function N(W){var V=W.eventBoundaryChangedInfo.eventID,U=a.app.epgUtil.getServiceById(a.app.epgUtil.getChannelFromPrefs()).serviceId,X=a.app.epgUtil.getEvent("current",U),T=true;if(X&&X.eventId===V){T=false;}if(T){A=a.platform.btv.EPG.getEventById(V);a.app.DialogueHelper.hidePPVDialogue();c();}}function n(){return A;}function x(T){var U=M(T,m);return f(U.cost);}function u(){a.app.fullScreenPlayer.registerEventBoundaryChangedListener(N);}function G(){A=null;a.app.fullScreenPlayer.unregisterEventBoundaryChangedListener(N);}function t(U){var V=a.platform.system.Preferences.getPreferenceObject(a.app.constants.PURCHASE_LIST),X=null,Z=null,T=[],Y=null,W=null;if(V){X=a.app.ConditionalAccessCAK73.getCASmartCardInfo();if(X&&X.smartcardInfo&&X.smartcardInfo.serialNumber){Z=X.smartcardInfo.serialNumber.replace(/ /g,"");for(W=0;W<V.length;W++){Y=V[W];if(Z.toString()===Y.stbid.toString()){if(U){if(Y.isAdult){T.push(Y);}}else{if(!Y.isAdult){T.push(Y);}}}}}}return T;}function E(){c();if(e){a.apps.dialog.DialogManager.hideDialog(e);}a.app.DialogueHelper.hidePPVDialogue();}function b(U,T){if(U){if(U.promoImage){T(U);}else{a.app.epgUtil.getEventImageFromMDS(U,function(V){if(V){if(!V.promoImage){V.defaultImage=y;}}else{V={defaultImage:y};}T(V);});}}}return{isPurchasable:g,showPurchaseOptionsIfAvailable:K,initiatePPVEventPurchase:D,intialiseBoundaryChangeListener:u,removeBoundaryChangeListener:G,getCurrentEvent:n,getEventCostString:x,getPPVPurchases:t,hidePPVRelatedDialogs:E,loadEventImage:b,isPPVEvent:v};}());a.apps.core.Language.adornWithGetString(a.app.PPVHelper);}($N||{}));(function(a){a.app=a.app||{};a.app.HDMIManager=(function(){var c=false,e=0,d=new a.apps.core.Log("Helper","HDMIManager");function b(f){if(!f.error){switch(f.eventType){case CCOM.System.HDMI_EVENT_SINK_CONNECTED:case CCOM.System.HDMI_EVENT_SINK_DISCONNECTED:if(CCOM.System.hdmiAudioType!==e){e=CCOM.System.hdmiAudioType;a.apps.util.EventManager.fire("audioCapabilitiesUpdated");}break;}}}return{initialise:function(){if(!c){e=CCOM.System.hdmiAudioType;CCOM.System.addEventListener("onHdmiEvent",b);}},getCurrentAudioCapabilities:function(){return e;}};}());}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.AudioManager=(function(){var c,k,g=50,d=false,e=new a.apps.core.Log("Helper","AudioManager");function h(){if(a.app.GeneralUtil.bitwiseAnd(c,a.app.HDMIManager.getCurrentAudioCapabilities())){k=c;}else{k=a.app.constants.HDMI_AUDIO_PCM_OUTPUT;}CCOM.ConfigManager.setValue(a.app.constants.PREF_HDMI_AUDIO_TYPE,k);a.platform.system.Preferences.set(a.app.constants.PREF_PREFERRED_AUDIO_FORMAT,c);}function f(){if(g!==a.app.constants.VOLUME_MUTE){a.platform.system.Preferences.set(a.app.constants.PREF_CURRENT_VOLUME,String(g));a.platform.system.Device.setVolume(a.app.constants.VOLUME_MUTE);a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.FULL,true);g=a.app.constants.VOLUME_MUTE;}}function b(){if(g===a.app.constants.VOLUME_MUTE){g=a.platform.system.Preferences.get(a.app.constants.PREF_CURRENT_VOLUME);if(g){g=parseInt(g,10);a.platform.system.Device.setVolume(g);if(g<a.app.constants.VOLUME_FULL){a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.VOLUME_FULL-g,true);}else{a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,1,true);}}else{a.platform.system.Device.setVolume(50);a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.VOLUME_HALF,true);}}}return{initialise:function(){var l=a.platform.system.Preferences.get(a.app.constants.PREF_PREFERRED_AUDIO_FORMAT);if(!d){c=a.app.constants.HDMI_AUDIO_PCM_OUTPUT;k=a.app.constants.HDMI_AUDIO_PCM_OUTPUT;if(l&&!l.error){c=l.keyValue;}else{a.platform.system.Preferences.set(a.app.constants.PREF_PREFERRED_AUDIO_FORMAT,c);}h();g=this.getCurrentVolume();d=true;}},getPreferredAudioType:function(){return c;},setPreferredAudioType:function(l){if(l===CCOM.System.HDMI_AUDIO_TYPE_PCM){c=a.app.constants.HDMI_AUDIO_PCM_OUTPUT;}else{c=a.app.constants.HDMI_AUDIO_DOLBY_OUTPUT;}h();},getActualAudioType:function(){return k;},getCurrentVolume:function(){var l=a.platform.system.Preferences.get(a.app.constants.PREF_CURRENT_VOLUME),m;if(!d){if(l===null||l===undefined){l=a.app.constants.VOLUME_HALF;}g=Math.round(parseInt(l,10)/a.app.constants.VOLUME_STEP)*a.app.constants.VOLUME_STEP;a.platform.system.Preferences.set(a.app.constants.PREF_CURRENT_VOLUME,String(g));a.platform.system.Device.setVolume(g);a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.VOLUME_FULL-g,true);}return g;},mute:f,unmute:b,increaseVolume:function(){var l=0;if(g<a.app.constants.VOLUME_FULL){if(g===a.app.constants.VOLUME_MUTE){b();}if(g!==a.app.constants.VOLUME_FULL){l=g+a.app.constants.VOLUME_STEP;a.platform.system.Device.setVolume(l);a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.VOLUME_FULL-l,true);g=l;a.platform.system.Preferences.set(a.app.constants.PREF_CURRENT_VOLUME,String(g));}}return g;},reduceVolume:function(){var m=0,l;if(g===a.app.constants.VOLUME_MUTE){l=a.platform.system.Preferences.get(a.app.constants.PREF_CURRENT_VOLUME);if(l!==undefined){l=parseInt(l,10);}else{l=0;}if(l>a.app.constants.VOLUME_STEP){b();return g;}}if(g>a.app.constants.VOLUME_MUTE){m=g-a.app.constants.VOLUME_STEP;if(m<=a.app.constants.VOLUME_MUTE){f();return a.app.constants.VOLUME_MUTE;}a.platform.system.Device.setVolume(m);a.platform.system.Preferences.set(a.app.constants.PREF_PCM_VOLUME,a.app.constants.VOLUME_FULL-m,true);a.platform.system.Preferences.set(a.app.constants.PREF_CURRENT_VOLUME,String(a.platform.system.Device.getVolume()));g=m;}return g;},toggleMute:function(){if(g===a.app.constants.VOLUME_MUTE){b();}else{f();}}};}());}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.ApplicationLauncher=(function(){var g=new a.apps.core.Log("Helper","ApplicationLauncher"),e=2000,n=null,d=null,c=false,m=null,f=null;function o(){if(m!==null){clearTimeout(m);m=null;}}function q(){var s=null,r=null;if(d&&!c&&!a.app.DialogueHelper.isDialogueCurrentlyShown()){r=a.platform.system.Preferences.getPreferenceObject(a.app.constants.APPLICATION_LAUNCH_CONFIG);if(r){s=r[n];if(s){o();m=setTimeout(function(){a.apps.core.ContextManager.navigate(s,f);c=true;m=null;},e);}}}}function k(){d=true;q();}function l(){o();d=false;}function h(r){o();c=false;f=r.data;n=f.currentService?f.currentService.logicalChannelNum:f.logicalChannelNum;q();}function b(){var s=a.platform.system.Preferences.get("/network/siconfig/CustomDescriptorTags/netMdsServer",true),r="";if(a.app.Config.getConfigValue("mds.developer.mode")==="on"){s=a.app.Config.getConfigValue("mds.developer.server");}if(s){r=s+a.app.Config.getConfigValue(a.app.constants.APPLICATION_LAUNCH_URL)+"/launch_config.json";if(a.app.NetworkUtil.isUrlValid(r)){a.app.NetworkUtil.ajaxRequest(r,function(t){t=JSON.parse(t);if(t){a.platform.system.Preferences.setPreferenceObject(a.app.constants.APPLICATION_LAUNCH_CONFIG,t);}else{}},function(t){});}}else{}}function p(r){b();a.apps.util.EventManager.subscribe("zapperOpened",k,this);a.apps.util.EventManager.subscribe("zapperClosed",l,this);a.apps.util.EventManager.subscribe("channelChanged",h,this);}return{initialise:p};}());}($N||{}));(function(a){a.app=a.app||{};a.app.VODHelper=(function(){var g=new a.apps.core.Log("Helper","VODHelper"),c=null,p=false,l,r=true,q,b,k,h,d,o=false;d=function(){p=false;CCOM.SINetwork.removeEventListener("onScanComplete",h);CCOM.SINetwork.removeEventListener("onScanError",h);if(r&&(a.app.Config.getConfigValue("mds.developer.mode")!=="on")){window.setTimeout(l,5000);}};h=function(){p=false;var s=a.platform.system.Preferences.get(a.app.constants.PREF_AREA_ID,true);s=parseInt(s,10);a.common.helper.ScanManager.setAutomaticScanEnabledCallback(null);a.common.helper.ScanManager.enableAutomaticScans();if(s!==0){if(c!==null){c();}}else{d();}};l=function(){var s,t=function(u){if(u===true){CCOM.SINetwork.addEventListener("onScanComplete",h);CCOM.SINetwork.addEventListener("onScanError",h);s=CCOM.SINetwork.scan("VodDsadScan");if(s.error){d();}else{p=true;}}};a.common.helper.ScanManager.setAutomaticScanEnabledCallback(t);a.common.helper.ScanManager.disableAutomaticScans();};function n(){var s=this;a.services.sdp.MetadataService.getData(s,function(t){if(t&&t.nodes&&t.nodes.length>0){a.app.MDSUtil.setHighlightsFolder(t.nodes[0].id);}else{window.setTimeout(n,a.app.constants.MDS_RETRY_TIMEOUT);}},function(t){window.setTimeout(n,a.app.constants.MDS_RETRY_TIMEOUT);},"vod/nodes",{title:a.app.constants.VOD_HIGHLIGHTS_FOLDER},null,["id"],a.app.constants.MDS_MAX_RECORDS_RETURNED);}function f(){n();}function m(s){r=true;q();window.setTimeout(f,1);}function e(s){r=false;}return{initialise:function(){if(!o){if(a.app.FeatureManager.isVODEnabled()){window.setTimeout(l,1);window.setTimeout(f,1);}b=a.apps.util.EventManager.subscribe("VODEnabled",m,this);k=a.apps.util.EventManager.subscribe("VODDisabled",e,this);o=true;}},waitForVODScanCompletion:function(s){if(p){c=s;}else{s();}},recheckVODConfiguration:function(){if(!p){window.setTimeout(l,1);}},enableAreaScan:function(){r=true;q();},disableAreaScan:function(){r=false;if(p){a.platform.system.Scan.cancelScan();}}};}());}($N||{}));(function(a){function b(c){this._configData=c;}b.prototype.getStatus=function(){if(this._configData.enabled){return"Enabled";}else{return"Disabled";}};b.prototype.setStatus=function(c){if(c==="Enabled"){this._configData.enabled=true;}else{this._configData.enabled=false;}};a.app.MoCADataMapper=b;}($N||{}));(function(a){a.app=a.app||{};a.app.MoCAManager=(function(){var e=new a.apps.core.Log("Helper","MoCAManager"),c=false,b=false,d=null;return{initialise:function(){var g={},h=a.app.constants,f=a.platform.system.Preferences;if(!c){b=f.get(h.PREF_MOCA_ENABLED,true);g={enabled:f.get(h.PREF_MOCA_ENABLED,true),privacyEnabled:f.get(h.PREF_MOCA_PRIVACY_ENABLED,true),password:f.get(h.PREF_MOCA_PRIVACY_PASSWORD,true),band:f.get(h.PREF_MOCA_CHANNEL,true),bandMask:f.get(h.PREF_MOCA_CHANNEL_MASK,true),txPower:f.get(h.PREF_MOCA_TX_POWER,true),beaconPower:f.get(h.PREF_MOCA_BEACON_POWER,true),networkController:f.get(h.PREF_MOCA_NETWORK_CONTROLLER,true),phyTargetRate:f.get(h.PREF_MOCA_PHYSICAL_TARGET_RATE,true),phyMargin:f.get(h.PREF_MOCA_PHYSICAL_MARGIN,true)};d=new a.app.MoCADataMapper(g);c=true;}},isEnabled:function(){return b;},getCurrentConfiguration:function(){return d;}};}());}($N||{}));(function(a){a.common=a.common||{};a.common.helper=a.common.helper||{};a.common.helper.ScanManager=(function(){var p=new a.apps.core.Log("system","ScanManager"),h=false,C={},z=null,n=null,b=null,v=null,g=null,f=null,m=null,l=null,w=null,o=false;function q(H){var G,F;G=CCOM.ConfigManager.getSubtree("/network/siconfig/networkClasses/Cable");if(G.error){}else{for(F in G.keyValuePairs){if(G.keyValuePairs.hasOwnProperty(F)){}}}G=CCOM.ConfigManager.getSubtree("/network/siconfig/scans/"+m.name);if(G.error){}else{for(F in G.keyValuePairs){if(G.keyValuePairs.hasOwnProperty(F)){}}}}function x(H,G,I){if(!o){o=true;l=function(N){var J,M,K,L;if(N){for(L in H){if(H.hasOwnProperty(L)){K=H[L];if(!C.scans.hasOwnProperty(L)){C.scans[L]=K;CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/enabled",false);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/networkClass",C.networkClass);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/persistent",K.persistent);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/scanType",K.scanType);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/useConnectedTuners",K.useConnectedTuners);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+K.name+"/automatic",false);}}}a.platform.system.Preferences.set(a.app.constants.PREF_SCAN_CONFIGURATION,JSON.stringify(C),false);CCOM.SINetwork.unlockConfiguration();o=false;if(G){G();}}else{o=false;if(I){I();}}};var F=CCOM.SINetwork.lockConfiguration();if(F&&F.error){p("configureNetwork",JSON.stringify(F.error));o=false;}else{p("configureNetwork",JSON.stringify(F));}}else{if(I){I();}}}function u(){var H=a.platform.system.Preferences.get(a.app.constants.PREF_SCAN_CONFIGURATION,false),F=false,G="",I=0;if(H&&H!==""){C=JSON.parse(H);}else{C={name:"cable",networkClass:"Cable",networkId:0,modulation:5,frequency:243000,symbolRate:5217,isDVBC2:false,fecOuter:0,fecInner:0,scans:{cableoneshot:{name:"cable_one_shot",defaultScan:false,persistent:false,scanType:2,useConnectedTuners:false,automatic:false,sisources:["dvbSvlSource","dvbEITPFSource"]},mainscan:{name:"cable_persistent",defaultScan:true,persistent:true,scanType:2,useConnectedTuners:true,automatic:true,sisources:["dvbSvlSource","dvbEITPFSource","dvbEITSSource"]},signalstrength:{name:"cable_signal_strength",defaultScan:false,persistent:true,scanType:0,useConnectedTuners:false,automatic:false,sisources:["dvbSvlSource","dvbEITPFSource","dvbEITSSource"]}}};G="/network/siconfig/networkClasses/"+C.networkClass+"/transponders/0/dvbc";I=CCOM.ConfigManager.getValue(G+"/networkId").keyValue;if((typeof I!=="undefined")&&(I!==0)){C.networkId=I;C.modulation=CCOM.ConfigManager.getValue(G+"/modulation").keyValue;C.frequency=CCOM.ConfigManager.getValue(G+"/frequency").keyValue;C.symbolRate=CCOM.ConfigManager.getValue(G+"/symbolRate").keyValue;C.fecOuter=CCOM.ConfigManager.getValue(G+"/fecOuter").keyValue;C.fecInner=CCOM.ConfigManager.getValue(G+"/fecInner").keyValue;}else{F=true;}a.platform.system.Preferences.set(a.app.constants.PREF_SCAN_CONFIGURATION,JSON.stringify(C),false);}return F;}function e(F,H){var G=false;if(!o){o=true;G=CCOM.ConfigManager.getValue("/network/siconfig/scans/"+f.name+"/enabled").keyValue;if((G===undefined)||(G!==true)){l=function(J){var I;if(J){l=null;I="/network/siconfig/networkClasses/"+C.networkClass;CCOM.ConfigManager.setValue("/network/siconfig/scans/"+m.name+"/enabled",false);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+f.name+"/enabled",true);if(f.sisources){CCOM.ConfigManager.setValue(I+"/SISources",f.sisources);}CCOM.SINetwork.unlockConfiguration();o=false;if(F){F();}m=f;}else{o=false;if(H){H();}}};CCOM.SINetwork.lockConfiguration();}else{o=false;}}else{if(H){H();}}}function d(F){if(!o){o=true;l=function(I){var H,G;l=null;if(I){for(H in C.scans){if(C.scans.hasOwnProperty(H)){G=C.scans[H];if(G.automatic){CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/automatic",F);}}}o=false;CCOM.SINetwork.unlockConfiguration();if(w){w(true);}}else{o=false;if(w){w(false);}}};CCOM.SINetwork.lockConfiguration();}else{if(w){w(false);}}}function t(F){if(z){if(n){if(g){g(n);}else{}}else{if(b){b(F);}else{}}e();z=null;}}function k(F){var G="";p("scanErrorListener",JSON.stringify(F));switch(F.condition){case CCOM.SINetwork.DATABASE_FULL:G="DATABASE_FULL";n=a.platform.system.Scan.Error.MISC_ERROR;break;case CCOM.SINetwork.TIMEOUT_OCCURRED:G="TIMEOUT_OCCURRED";n=a.platform.system.Scan.Error.MISC_ERROR;break;case CCOM.SINetwork.SI_ERROR:G="SI_ERROR";n=a.platform.system.Scan.Error.MISC_ERROR;break;case CCOM.SINetwork.RESOURCE_UNAVAILABLE:G="RESOURCE_UNAVAILABLE";n=a.platform.system.Scan.Error.UNAVAILABLE;break;case CCOM.SINetwork.CONNECTION_ERROR:G="CONNECTION_ERROR";n=a.platform.system.Scan.Error.UNAVAILABLE;break;case CCOM.SINetwork.BUSY:G="BUSY";n=a.platform.system.Scan.Error.BUSY;break;case CCOM.SINetwork.SCAN_CANCELED:G="SCAN_CANCELED";n=a.platform.system.Scan.Error.CANCELLED;break;case CCOM.SINetwork.UNKNOWN_ERROR:G="UNKNOWN_ERROR";n=a.platform.system.Scan.Error.MISC_ERROR;break;default:G="UNKNOWN_ERROR";n=a.platform.system.Scan.Error.MISC_ERROR;break;}}function E(H){var M=H.progressInfo,L=M.scannedPercent||0,K=0,G=M.tvServicesFoundCount||0,F=M.radioServicesFoundCount||0,J=0,I;p("scanProgressListener",JSON.stringify(H));if(v){I={type:C.networkClass,percentComplete:L,hdServices:K,sdServices:G,radioServices:F,otherServices:J};p("scanProgressListener",JSON.stringify(I));v(H);}}function B(F){}function A(F,I){var G,H;for(H in C.scans){if(C.scans.hasOwnProperty(H)){G=C.scans[H];CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/enabled",false);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/networkClass",C.networkClass);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/persistent",G.persistent);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/scanType",G.scanType);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/useConnectedTuners",G.useConnectedTuners);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+G.name+"/automatic",false);}}if(F){F();}}function c(G,H){if(!o){o=true;l=function(K){var I,J;if(K){l=null;I="/network/siconfig/networkClasses/"+C.networkClass;J=I+"/transponders/0/dvbc/";CCOM.ConfigManager.setValue(J+"networkId",C.networkId);CCOM.ConfigManager.setValue(J+"modulation",C.modulation);CCOM.ConfigManager.setValue(J+"frequency",C.frequency);CCOM.ConfigManager.setValue(J+"symbolRate",C.symbolRate);CCOM.ConfigManager.setValue(J+"isDVBC2",C.isDVBC2);CCOM.ConfigManager.setValue(J+"fecOuter",C.fecOuter);CCOM.ConfigManager.setValue(J+"fecInner",C.fecInner);if(m&&m.sisources){CCOM.ConfigManager.setValue(I+"/SISources",m.sisources);}I="/network/siconfig/networkClasses/VodDsadScan";J=I+"/transponders/0/dvbc/";CCOM.ConfigManager.setValue(J+"networkId",C.networkId);CCOM.ConfigManager.setValue(J+"modulation",C.modulation);CCOM.ConfigManager.setValue(J+"frequency",C.frequency);CCOM.ConfigManager.setValue(J+"symbolRate",C.symbolRate);CCOM.ConfigManager.setValue(J+"isDVBC2",C.isDVBC2);CCOM.ConfigManager.setValue(J+"fecOuter",C.fecOuter);CCOM.ConfigManager.setValue(J+"fecInner",C.fecInner);CCOM.SINetwork.unlockConfiguration();o=false;if(G){G();}}else{o=false;if(H){H();}}};var F=CCOM.SINetwork.lockConfiguration();if(F&&F.error){p("configureNetwork",JSON.stringify(F.error));o=false;}else{p("configureNetwork",JSON.stringify(F));}}else{if(H){H();}}}function y(F,G){if(!o){o=true;l=function(I){var H;if(I){l=null;if(m.sisources){H="/network/siconfig/networkClasses/"+C.networkClass;CCOM.ConfigManager.setValue(H+"/SISources",m.sisources);}CCOM.ConfigManager.setValue("/network/siconfig/scans/"+m.name+"/enabled",true);CCOM.ConfigManager.setValue("/network/siconfig/scans/"+f.name+"/enabled",false);CCOM.SINetwork.unlockConfiguration();o=false;if(F){F();}}else{o=false;if(G){G();}}};CCOM.SINetwork.lockConfiguration();}else{if(G){G();}}}function s(){var F;q();n=null;F=CCOM.SINetwork.scan(m.name);if(F.error){p("performScan","Scan error code: "+JSON.stringify(z.error));z=null;}else{z=F.scanHandle;}}function D(){m=f;e();}function r(){var F;for(F in C.scans){if(C.scans.hasOwnProperty(F)){if(C.scans[F].defaultScan){f=C.scans[F];m=f;}}}e();}return{initialise:function(){var F;if(!h){CCOM.SINetwork.addEventListener("onScanComplete",t);CCOM.SINetwork.addEventListener("onScanError",k);CCOM.SINetwork.addEventListener("onScanProgress",E);CCOM.SINetwork.addEventListener("getScanProgressOK",E);CCOM.SINetwork.addEventListener("getScanProgressFailed",B);CCOM.SINetwork.addEventListener("lockConfigurationOK",function(){if(l){l(true);}});CCOM.SINetwork.addEventListener("lockConfigurationFailed",function(){if(l){l(false);}});m=null;if(u()){c(function(){A(function(){r();});},function(){});}else{r();}h=true;}},triggerScan:function(J,H,I){var G="",F=true;if(z){F=false;}else{if(J){if(C.scans.hasOwnProperty(J)){if(H){b=H;}if(I){g=I;}if(!m||m.name!==C.scans[J].name){m=C.scans[J];y(function(){s();},I);}else{s();}}else{if(I){I(a.platform.system.Scan.Error.MISC_ERROR);}}}else{if(I){I(a.platform.system.Scan.Error.MISC_ERROR);}}}return F;},stopScan:function(){if(z){CCOM.SINetwork.cancelScan(z);z=null;}},setScanCompleteCallback:function(F){b=F;},setScanProgressCallback:function(F){v=F;},getCurrentScanProgress:function(F){if(z){if(F){v=F;}CCOM.SINetwork.getScanProgress(z);}else{}},setScanFailureCallback:function(F){g=F;},getNetworkConfig:function(){return C;},updateNetworkConfig:function(H,F,I){var G={};if(H){C.frequency=parseInt(H.frequency,10);C.networkId=parseInt(H.networkId,10);C.modulation=parseInt(H.modulation,10);C.symbolRate=parseInt(H.symbolRate,10);a.platform.system.Preferences.set(a.app.constants.PREF_SCAN_CONFIGURATION,JSON.stringify(C),false);c(F,I);}},setAutomaticScanEnabledCallback:function(F){w=F;},enableAutomaticScans:function(){d(true);},disableAutomaticScans:function(){d(false);},addScanConfiguration:x};}());}($N||{}));(function(a){a.common=a.common||{};a.common.helper=a.common.helper||{};a.common.helper.PowerManager=(function(){var e=new a.apps.core.Log("system","PowerManager"),b=false,c=0;function d(f){switch(f.pwrmgrMode){case CCOM.Pwrmgr.STANDBY_OFF:c=0;a.apps.util.EventManager.fire("SYSTEM_POWER_NORMAL");break;case CCOM.Pwrmgr.STANDBY_ON:c=1;a.apps.util.EventManager.fire("SYSTEM_POWER_STANDBY");break;case CCOM.Pwrmgr.LOW_POWER:c=2;a.apps.util.EventManager.fire("SYSTEM_POWER_LOW");break;default:c=0;a.apps.util.EventManager.fire("SYSTEM_POWER_UNKNOWN");break;}}return{initialise:function(){if(!b){var f;a.apps.util.EventManager.create("SYSTEM_POWER_LOW");a.apps.util.EventManager.create("SYSTEM_POWER_STANDBY");a.apps.util.EventManager.create("SYSTEM_POWER_NORMAL");a.apps.util.EventManager.create("SYSTEM_POWER_UNKNOWN");CCOM.Pwrmgr.addEventListener("onPwrmgrModeChanged",d);f=CCOM.Pwrmgr.userModeGet();c=f.mode;if(f.mode===CCOM.Pwrmgr.STANDBY_ON){a.apps.util.EventManager.fire("SYSTEM_POWER_STANDBY");c=1;}else{a.apps.util.EventManager.fire("SYSTEM_POWER_NORMAL");c=0;}b=true;}},getCurrentPowerMode:function(){return c;},enterStandby:function(){var f=CCOM.Pwrmgr.userModeSet(CCOM.Pwrmgr.STANDBY_ON);},wakeUp:function(){var f=CCOM.Pwrmgr.userModeSet(CCOM.Pwrmgr.STANDBY_OFF);},togglePowerState:function(){if(c===1){a.common.helper.PowerManager.wakeUp();}else{a.common.helper.PowerManager.enterStandby();}},reboot:function(f){f=f===true;return CCOM.Pwrmgr.userReboot(f);},SYSTEM_POWER_NORMAL:0,SYSTEM_POWER_STANDBY:1,SYSTEM_POWER_LOW:2};}());}($N||{}));(function(a){a=a||{};a.app=a.app||{};a.app.NowMappingUtil=(function(){var b,d;function e(){var g=new XMLHttpRequest(),f=function(){var h;if(g.readyState===4){h=JSON.parse(g.responseText);b=h.Studios;}};g.onreadystatechange=f;g.open("GET","customise/resources/config/StudioFlags.json",true);g.send();}function c(){var g=new XMLHttpRequest(),f=function(){var h;if(g.readyState===4){h=JSON.parse(g.responseText);d=h.Channels;}};g.onreadystatechange=f;g.open("GET","customise/resources/config/MoreOnNow.json",true);g.send();}return{init:function(){e();c();},getStudioFlag:function(f,g){var l,h,k=null;if(!b){return null;}l=b[f]||b.Default;if(typeof l==="string"){k=l||null;}else{h=l[g]||l.Default;k=h||null;}return k;},getChannelNode:function(f){if(!f){return null;}return d[f];}};}());}($N||{}));(function(a){a.common=a.common||{};a.common.helper=a.common.helper||{};a.common.helper.Analytics=(function(){var c=false,b=false,d="";return{initialise:function(){if(!c){b=(a.platform.system.Preferences.get("analytics.enabled")==="true");if(b){d=a.platform.system.Preferences.get("analytics.server");}c=true;}}};}());}($N||{}));(function(a){var b=function(K){var N=a.app.constants,a8=a.platform.system.Preferences,a7=a.app.SettingsAPI,at=a.app.FormatUtils,a3=a.app.PVRUtil,aP=a.app.AutoTuneHelper,E=null,w=null,r=null,a5=100,al=200,aT=null,A=null,U=null,aD=null,ar=570,T=null,aw=null,G=null,O=" ",aq="../../../customise/resources/images/%RES/icons/tick_17x17.png",ad=0,M=a.app.StandardTimers.minuteTimer,f=new a.apps.core.Log("Settings","SettingsMenuHelper");a.apps.core.Language.adornWithGetString(a.app.SettingsMenuHelper);function X(bc){a.apps.core.Language.setLocale(bc);return a.apps.core.Language.refreshLanguageBundles();}function aj(){var be=[],bf=a7.availableLanguages(),bc=bf.length,bd;for(bd=0;bd<bc;bd++){be.push({title:b.getString("isoLocaleLanguage")[bf[bd]],value:bf[bd]});}return be;}function m(){var be=[],bf=a7.availableAudioLanguages(),bc=bf.length,bd;for(bd=0;bd<bc;bd++){be.push({title:b.getString("audioLanguage")[bf[bd]],value:bf[bd]});}return be;}function aH(){var bf=[],bc=a7.availableSubtitleStates(),bd=bc.length,be;for(be=0;be<bd;be++){bf.push({title:b.getString("subtitleStates")[bc[be]],value:bc[be]});}return bf;}function z(){var bf=[],bc=a7.availableSurferDurations(),be=bc.length,bd;for(bd=0;bd<be;bd++){bf.push({title:b.getString("surferDurations")[bc[bd]],value:bc[bd]});}return bf;}function ak(){var be=[],bd,bc=a7.getAvailableTransitionEffects();for(bd in bc){if(bc.hasOwnProperty(bd)){be.push({title:b.getString("transitionEffects")[bc[bd]],value:bc[bd]});}}return be;}function F(bf,bh){var bg=[],bc=N[bf],be=bc.length,bd;for(bd=0;bd<be;bd++){bg.push({title:b.getString(bh)[bc[bd]],value:bc[bd]});}return bg;}function t(){var bf=[],be=a7.availableStandbyDurations(),bd=be.length,bc;for(bc=0;bc<bd;bc++){bf.push({title:b.getString("standbyDurations")[be[bc]],value:be[bc],constant:N.PREF_AUTO_STANDBY});}return bf;}function a0(){var bf=[],be=a7.availPlaybackPlayerOptions(),bc=be.length,bd;for(bd=0;bd<bc;bd++){bf.push({title:b.getString("playbackPlayerTimeouts")[be[bd]],value:be[bd]});}return bf;}function aX(be){var bc=K.getKeypadComponent(),bd=K.getActiveMenuItem();bc.hide();bc.resetKeyPadConfig();bd.configs=at.getDefaultFolderConfig();K.exitKeypad(be,aD);}function B(){var bg=null,bf=18,bc=a.app.KeyboardUtils,be=a.app.KeyboardType,bd=K.getKeypadComponent();bd.resetKeyPadConfig();bd.setExitCallback(function(){aX();});bc.setKeypad(bd,be.ALPHA_NUMERIC_UPPERCASE);bd.clearInput();bd.configure({cursorEnable:true,textInputAlignment:be.ALIGNMENT.LEFT,labelAutoAlign:true,maxCharacters:bf,clippedWidth:ar});bc.showKeypad(be.ALPHA_NUMERIC_UPPERCASE);bd.focus();bd.show();}function aS(bf){var bc=[],bd,be=null;bf=a.app.StringUtil.firstLetterPerWordCapitol(bf);bc=a8.get(N.PVR_NON_EPISODIC_FOLDER_LIST);if((bc.indexOf(bf)>-1)){a.app.ErrorMessage.showDuplicateFolderNameDialog();}else{if(bf===""||bf.match(/^\s*$/)){a.app.ErrorMessage.showNoFolderNameDialog();}else{be=a.app.StringUtil.addLeadingForwardSlash(bf.toString());bc.push(be);a8.set(N.PVR_NON_EPISODIC_DEFAULT_FOLDER,be);bd=bc.splice(0,1);bc.sort();bc.splice(0,0,bd.toString());a8.set(N.PVR_NON_EPISODIC_FOLDER_LIST,bc);aX(bf);}}}function aN(bc,bg,be){var bf={},bd=a.app.epgUtil.getServiceById(bc.serviceId);if(!be){aP.resetAutoTuneProperties();}else{aP.setAutoTuneProperty("frequency",bc.jobType);aP.setAutoTuneProperty("date",bc.startDate);aP.setAutoTuneProperty("time",bc.startTime);aP.setAutoTuneProperty("channel",bc.channelNumber+O+bc.serviceName);aP.setAutoTuneProperty("channelInfo",bd);aP.setAutoTuneProperty("logicalChannelNum",bd.logicalChannelNum);aP.setAutoTuneProperty("jobId",bc.jobId);aP.setAutoTuneProperty("isPresentTime",false);}bf.title="menuAutoTuneEdit";bf.drawMenuCallback="autoTuneTimeUpdate";bf.configs=at.getAutoTuneEditConfig();K.itemSelected(bf);}function p(bc,bd){aN(bc,bd,true);}function aL(bd){var be=K.getActiveComponent(),bc=be.getActualSelectedRowIndex(),bf=null;K.refreshMenu(K.getActiveMenuItem(),bd);bf=be.getData().length;if((bc>=bf)&&bf){be.selectItemAtIndex(bf,true);}else{if((bf!==0)&&bf){be.selectItemAtIndex(bc,true);}}K.scrollIndicatorHandler(be,K.getActiveMenuScrollComponent());}function a4(){var be=K.getActiveComponent(),bd=K.getActiveMenuItem(),bc=be.getActualSelectedRowIndex();K.refreshMenu(bd);be.selectItemAtIndex(bc,true);}function I(bc){aP.cancelAutoTune(bc.jobId);}aw=function(){var bi,bh,bn,bj,be,bo,bf,bg,bc,bd,bp=[],bl=[],bk,bm=60000;bp=aP.getAllActiveAutoTune();if(bp.length>0){for(bk=0;bk<bp.length;bk++){bn=new Date(bp[bk].startTime+bm);bj=bp[bk].jobId;bf=a.app.DateTimeUtil.getFormattedTimeString(bn,N.TWENTY_FOUR_HOUR_TIME_FORMAT);bg=a.apps.util.Util.formatDate(new Date(bn),"DD/MM/YYYY");bo=bp[bk].serviceId;bc=a.app.epgUtil.getChannelLogoUrl(bo);bi=a.app.epgUtil.getServiceById(bo);bh=at.formatChannelNumber(bi.logicalChannelNum);if(!bc){bc=bh.toString();}if(bp[bk].extraInfo){bd=a.app.GeneralUtil.ParseJSON(bp[bk].extraInfo);if(bd){be=bd.jobType||"";}}bl.push({title:bi.serviceName+O+bg+O+bf,channelNumber:bh,serviceName:bi.serviceName,definition:bi.definition,startDate:bg,startTime:bf,channelLogo:bc,serviceId:bo,jobId:bj,jobType:be});}bl.colorKeyCallbacks={green:aN,yellow:I};bl.successCallback=p;}else{bl=null;}return bl;};function ag(){a.app.BrandHelper.show(a.app.BrandHelper.AGORA_BACKGROUND_ID);a.app.ClockDisplay.show();a.apps.util.EventManager.fire("genericReminderJobUpdated");}function s(be){var bf=a.app.epgUtil.getMappedEventById(be.eventId),bd=a.platform.btv.EPG.getChannelByServiceId(bf.serviceId),bg=a.app.ParentalControlUtil.isChannelLocked(bd),bc=new a.app.PinHelper(null,null,null,null,a.app.constants.PIN_DIALOG_SHOW_TIME,false);if(a.app.ParentalControlUtil.isChannelOrProgramLocked(bf)&&a.app.genreUtil.isAdultChannel(bd)){bc.setDialogProperties({x:0,y:0,width:1920,height:1080,id:"reminderPinDialogId",title:bg?b.getString("channelLocked"):b.getString("programLocked"),description:bg?b.getString("unlockChannel"):b.getString("unlockShow"),cancelCallback:function(){bc.hideDialog();}});bc.setAuthenticationSuccessCallback(function(){a.app.epgUtil.navigateToSynopsis(bf,false,ag);});bc.showPinDialog("master",true);}else{a.app.epgUtil.navigateToSynopsis(bf,false,ag);}}function aB(){a.app.ContextHelper.openContext("LISTGUIDE",{navCompleteCallback:ag});}function aA(bc){a.platform.btv.Reminders.cancelReminder(a.platform.btv.EPG.getEventById(bc.eventId));}function am(){var bd=K.getActiveMenuItem(),bc;if(bd.title==="menuReminders"){bc=G();if(bc){aL(bc);}else{K.passivate();}}else{if(bd.title==="menuAutoTune"){aL(aw());}}}G=function(){var bi,bk,bq,bs,be,bl,bh,bc,bj,bn,br,bg=[],bu=[],bp,bo=60000,bm,bf,bt=null,bd=null,bv=null;bg=a.app.Reminders.getAllActiveReminders();if(bg.length>0){for(bp=0;bp<bg.length;bp++){bq=new Date(bg[bp].startTime+bo);bs=bg[bp].jobId;bl=a.app.DateTimeUtil.getFormattedTimeString(bq,N.TWENTY_FOUR_HOUR_TIME_FORMAT);bh=a.app.DateTimeUtil.getDayMonthStringFromDate(bq);bm=bg[bp].eventId;bf=a.platform.btv.EPG.getEventById(bm);bd=a.platform.btv.PVRManager.getTasksForJobId(bs)[0]||null;if(bd||(bf&&bf.serviceId)){be=bg[bp].serviceId||bd.serviceId||bf.serviceId;bv=bg[bp].title||bd.title||bf.title;bc=a.app.epgUtil.getChannelLogoUrl(be);bi=a.app.epgUtil.getServiceById(be);if(bi){bk=at.formatChannelNumber(bi.logicalChannelNum);if(!bc){bc=bk.toString();}if(bg[bp].extraInfo){bj=a.app.GeneralUtil.ParseJSON(bg[bp].extraInfo);if(bj){bn=bj.parentalRating||bd.parentalRating||bf.parentalRating||"";br=bj.episodeId||"";if(bf){bt=a.app.epgUtil.getUniqueEventIdByEvent(bf)||null;}}}bu.push({title:bv,channelNumber:bk,channelName:bi.serviceName,startDate:bh,startTime:bl,channelLogo:bc,serviceName:bi.serviceName,definition:bi.definition,serviceId:be,eventId:bm,jobId:bs,parentalRating:bn,episodeId:br,uniqueEventId:bt});}}}if(bu.length>0){bu.colorKeyCallbacks={yellow:aA,red:s,green:aB,info:s};}}else{bu=null;}return bu;};function ah(bd){var bf=K.getActiveComponent(),be=K.getActiveMenuItem(),bc=K.getKeypadComponent();aD=bf.getActualSelectedRowIndex();bd.configs=at.getAlphaNumKeypadConfig();be.configs=at.getAlphaNumKeypadConfig();K.keypadPanelSettings(bd);B();bc.setKeypadTitle(b.getString("titleNameTheNewFolder"));bc.setColorKeyCallbacks({green:aS});}function e(bq){var bn=null,bi,bd=null,bh=aT.getIndexByUniqueData("title","tunerStatus"),bg=aT.getIndexByUniqueData("title","bitErrorValue"),bm=aT.getIndexByUniqueData("title","signalStrength"),bo=aT.getIndexByUniqueData("title","signalQuality"),bl=aT.getIndexByUniqueData("title","frequency"),bc=aT.getIndexByUniqueData("title","modulation"),bk=aT.getIndexByUniqueData("title","symbolRate"),be=b.getString("no"),bj=-16,bp=20,bf=30;if(bg){bn=b.getString("notAvailable");if(bq&&bq.SNR>bf){be=b.getString("yes");}bd=[{index:bh,newData:{title:"tunerStatus",subTitle:be}},{index:bg,newData:{title:"bitErrorValue",subTitle:bq?bq.BER.toExponential(2):bn}},{index:bm,newData:{title:"signalStrength",subTitle:bq?a.app.SignalInfoUtil.convertSignalStrengthTodBmV(bq.signalStrength):bn,template:"SettingsProgressBarMenuItem",dataMapper:"DiagnosticsSignalStrengthProgress"}},{index:bl,newData:{title:"frequency",subTitle:bq?bq.frequency:bn}},{index:bc,newData:{title:"modulation",subTitle:bq?a.app.DVBScanUtil.getModulationType(bq.modulation):bn}},{index:bk,newData:{title:"symbolRate",subTitle:bq?bq.symbolRate:bn}},{index:bo,newData:{title:"signalQuality",subTitle:bq?bq.SNR:bn,template:"SettingsProgressBarMenuItem",dataMapper:"DiagnosticsProgress",itemConfig:{progressIndicatorText:"dBmV",ProgressBarMinimum:bj,ProgressBarMaximum:bp}}}];for(bi=0;bi<bd.length;bi++){aT.updateDataAtIndex(bd[bi].index,bd[bi].newData);}}}function ab(){var bc=aT.getIndexByUniqueData("title","bitErrorValue");if(bc){a.app.SignalInfoUtil.setConnectionInfoSuccessCallBack(e);a.app.SignalInfoUtil.setConnectionInfoFailureCallBack(null);a.app.SignalInfoUtil.getConnectionInfo();}}function g(bd){var bf,be=b.getString("notAvailable"),bc=-16,bg=23;bf=[{key:"tunerStatus",value:bd?(bd.signalStrength>0)?b.getString("yes"):b.getString("no"):b.getString("no")},{key:"signalStrength",value:bd?a.app.SignalInfoUtil.convertSignalStrengthTodBmV(bd.signalStrength):be,templateConfig:{template:"SettingsProgressBarMenuItem",dataMapper:"DiagnosticsSignalStrengthProgress",itemConfig:{progressIndicatorText:"dBmV",ProgressBarMinimum:bc,ProgressBarMaximum:bg}}},{key:"signalQuality",value:bd?bd.SNR:be,templateConfig:{template:"SettingsProgressBarMenuItem",dataMapper:"DiagnosticsProgress"}},{key:"frequency",value:bd?bd.frequency:be},{key:"modulation",value:bd?a.app.DVBScanUtil.getModulationType(bd.modulation):be},{key:"symbolRate",value:bd?bd.symbolRate:be},{key:"bitErrorValue",value:bd?bd.BER.toExponential():be}];E=at.formatSTBInfoData(bf);if(bd){K.refreshMenu(w,E);}else{return E;}}function a2(){var bj=b.getString("notAvailable"),bl=b.getString("ipConnected"),bc=b.getString("ipDisconnected"),bd=a.platform.system.Network,bg=bd.getDnsServers(),be=bd.isEthernetAvailable(),bk,bh=0,bi=1,bf=CCOM.IpNetwork.cableModem[0];bk=[{key:"decoderIP",value:be?bd.getIpAddress():bj},{key:"dns",value:be?(bg[bh]||bg[bi]):bj},{key:"macAddress",value:(bf&&bf.macAddressExternal)?bf.macAddressExternal:bj},{key:"txPowerLevel",value:(bf&&bf.usPower)?bf.usPower:bj},{key:"rxPowerLevel",value:(bf&&bf.dsPower)?bf.dsPower:bj},{key:"SNR",value:(bf&&bf.snr)?bf.snr:bj},{key:"status",value:(bf&&bf.connectedToCMTS)?bl:bc},{key:"ipMask",value:be?bd.getSubnetMask():bj},{key:"gatewayIP",value:be?bd.getGateway():bj},{key:"macStb",value:bd.getMacAddress()||bj},{key:"ipStb",value:(bf&&bf.ipAddressExternal)?bf.ipAddressExternal:bj}];E=at.formatSTBInfoData(bk);return E;}function ac(){a2();}function ba(){var bc=a.platform.btv.WHPVRManager.getWHPVRServers(),bg=bc.length,be=[],bf=a.platform.btv.WHPVRManager.getLocalName(),bd=0;be.push({key:bf,value:""});for(bd=0;bd<bg;bd++){be.push({key:bc[bd].friendlyName,value:""});}E=at.formatSTBInfoData(be);return E;}function x(){var bc=a.platform.btv.WHPVRManager.getWHPVRServers(),bf=bc.length,be=[],bd=0;be.push({key:b.getString("localLocation"),value:a.platform.btv.WHPVRManager.getLocalServerUdn()});for(bd=0;bd<bf;bd++){be.push({key:bc[bd].friendlyName,value:bc[bd].udn});}E=at.formatRecordLocationData(be);return E;}function au(bc){var bd=a.platform.btv.WHPVRManager.getWHPVRServers(),bf=bd.length,be=0;for(be=0;be<bf;be++){if(bc===bd[be].udn){E=bd[be].friendlyName;return E;}}E=b.getString("localLocation");return E;}function v(bd){var bc,be=[];for(bc=0;bc<bd.length;bc++){if(bd[bc].isVisible){be.push(bd[bc]);}}return be;}function aM(bc,bk,bh){var bg=a.app.PVROptionsUtil,bj,bd=null,bi=true,bl,bf,be;switch(bk.title){case"menuNonEpisodicKeepUntil":a8.set(N.PREF_DEFAULT_KEEP_UNTIL,bc.value);bd=a3.getString(bc.title);break;case"menuNonEpisodicBlockPlayback":a8.set(N.PREF_NON_EPISODIC_BLOCK_PLAYBACK,bc.value);bd=a3.getString(bc.title);break;case"menuMaxNofEpisodes":bg.setMaxEpisodicRecordings(bc.value);bd=b.getString("maxNofEpisodesOptions")[bc.value];break;case"menuEpisodicKeepUntil":a8.set(N.PREF_EPISODIC_KEEP_UNTIL,bc.value);bd=a3.getString(bc.title);break;case"menuTypeOfEpisodes":a8.set(N.PREF_EPISODIC_TYPE_OF_EPISODES,bc.value);bd=a3.getString(bc.title);break;case"menuEpisodicBlockPlayback":a8.set(N.PREF_EPISODIC_BLOCK_PLAYBACK,bc.value);bd=a3.getString(bc.title);break;case"pvrPlaybackPlayer":a8.set(N.PREF_PLAYBACK_PLAYER_TIMEOUT,bc.value);bd=b.getString("playbackPlayerTimeouts")[bc.value];break;case"menuMenuLanguage":if(a8.get(N.PREF_LANGUAGE)!==bc.value){a8.set(N.PREF_LANGUAGE,bc.value);K.refreshMenuLanguage();X(bc.value);K.restorePortalMenuFocus();a.app.ClockDisplay.updateTime();bi=false;}break;case"menuAudioLanguage":if(a8.get(N.PREF_AUDIO_LANGUAGE)!==bc.value){a8.set(N.PREF_AUDIO_LANGUAGE,bc.value);bd=b.getString("audioLanguage")[bc.value];if(a.app.TracksUtil.isAudioTrackSelectable()){a.apps.util.EventManager.fire("settingsUpdated");}}break;case"menuSubtitle":if(a8.get(N.PREF_SUBTITLE_STATE)!==bc.value){a8.set(N.PREF_SUBTITLE_STATE,bc.value);bd=b.getString("subtitleStates")[bc.value];be=a.app.TracksUtil.getLanguageForSubtitleTrackBasedOnPreference(bc.value);if(be&&(bc.value!==a.app.constants.SUBTITLE_STATE_OFF)){a.app.fullScreenPlayer.tracks.activateSubtitleTrackByLanguage(be);}else{a.app.TracksUtil.deactivateCurrentSubtitleTrack();}}break;case"menuPhotoTransition":a8.set(N.PREF_USBDLNA_PHOTO_TRANSITION_EFFECTS,bc.value);bd=b.getString("transitionEffects")[bc.value];break;case"menuMiniguideDuration":a8.set(N.PREF_ZAPPING_BANNER_TIMEOUT,bc.value.toString());bd=b.getString("surferDurations")[bc.value];break;case"menuTipsFromNet":a8.set(N.PREF_DEFAULT_TIPSFROMNET,bc.value);bd=a3.getString(bc.title);break;case"menuDefaultFolder":bf=a.app.FolderUtil.isFolderRootFolder(bc.value);if(bf){a8.set(N.PVR_NON_EPISODIC_DEFAULT_FOLDER,N.ROOT_PVR_FOLDER_NAME);bd=b.getString("pvrSettingsRecordingHighlights");}else{a8.set(N.PVR_NON_EPISODIC_DEFAULT_FOLDER,bc.value);bd=bc.title;}break;case"menuAspectRatio":if(a7.setAspectRatio(bc.value,bc.option)){bd=a3.getString(bc.title);}break;case"menuDisplayFormat":if(a7.setSdVideoAspectMode(bc.value,bc.option)){bd=a3.getString(bc.title);}break;case"menuHdDisplayFormat":if(a7.setHdVideoAspectMode(bc.value,bc.option)){bd=a3.getString(bc.title);}break;case"menuHdmiAudioOutput":a8.set(a.app.constants.PREF_SPDIF_AUDIO_TYPE,"",true);a7.setSpdifAudioType(bc.value,bc.option);if(a7.setHdmiAudioType(bc.value,bc.option)){bd=a3.getString(bc.title);}break;case"menuFrontPanelIntensity":if(a.common.helper.FrontPanelManager.setFrontPanelIntensity(bc.option)){bd=a3.getString(bc.title);}break;case"menuFrontPanelDisplay":a8.set(N.PREF_FRONTPANEL_DISPLAY,bc.option);a.common.helper.FrontPanelManager.setFrontPanelDisplay(a.app.constants.FRONTPANEL_DISPLAY_MODES.DEFAULT);bd=a3.getString(bc.title);break;case"menuResolution":if(a7.setHdmiVideoResolution(bc.value,bc.option)){bd=a3.getString(bc.title);}break;case"menuAutoStandbyAfter":a8.set(bc.constant,bc.value);a.app.SystemUtil.setAndRefreshStandbyTimer();bd=b.getString("standbyDurations")[bc.value];break;case"menuVideoSystem":a8.set(bc.constant,bc.value,bc.absolutePath);bd=a3.getString(bc.title);break;case"menuAutoTuneChannel":bd=at.formatChannelNumber(bc.channelInfo.logicalChannelNum)+O+bc.title;bk.channelInfo=bc.channelInfo;bl=a.app.epgUtil.getServiceById(bc.serviceId);aP.setAutoTuneProperty("channel",bc.channelNumber+O+bc.title);aP.setAutoTuneProperty("channelInfo",bl);aP.setAutoTuneProperty("logicalChannelNum",bl.logicalChannelNum);break;case"menuAutoTuneFrequency":bd=bc.title;bk.frequency=bc.value;aP.setAutoTuneProperty("frequency",bc.value);break;case"facebookPinSetting":a8.set(bc.constant,bc.value);bd=a.app.SocialActivityFactory.getPinSettingDisplayValue(bc.title);a.app.SocialActivityFactory.getSocialAccountObject(a.app.SocialAccount.FACEBOOK).resetPinTimer();break;case"menuLocalServerName":bd=bc.value;a.platform.btv.WHPVRManager.setLocalName(bd);break;case"menuRecordLocation":a.platform.btv.WHPVRManager.setCurrentRecordServer(bc.value);bd=au(bc.value);break;default:a8.set(bc.constant,bc.value);bd=a3.getString(bc.title);break;}bh.updateTickIconData();if(bi){K.passivate();}return bd;}function R(bd,bf){var bc=null,be=null;if(bf==="paddingBeforeNonEpisodic"||bf==="paddingBeforeEpisodic"||bf===null){K.getActiveComponent().getActualSelectedItem().setFirstSubTitle(bd);bc=K.getActiveComponent().getActualSelectedRowIndex()-1;be=K.getActiveComponent().getData();be[bc].firstSubTitle=bd;K.getActiveComponent().updateDataAtIndex(bc,be[bc]);}else{if(bf==="paddingAfterNonEpisodic"||bf==="paddingAfterEpisodic"){K.getActiveComponent().getActualSelectedItem().setSecondSubTitle(bd);bc=K.getActiveComponent().getActualSelectedRowIndex()-1;be=K.getActiveComponent().getData();be[bc].secondSubTitle=bd;K.getActiveComponent().updateDataAtIndex(bc,be[bc]);}}}function bb(bd){var bc=null;bc=aM(bd,K.getActiveMenuItem(),K.getActiveComponent());return bc;}function D(bd){var be=a.app.SocialActivityFactory.getSocialAccountObject(bd.socialAccountType),bc=false;be.showDisconnectAccountDialog(function(bf){if(bf.action===ad){bc=be.disconnectAccount();K.removeSocialAccountHandler(bf);}});}function aW(){}function y(bc){var bd=K.getActiveComponent(),be=a.app.SocialActivityFactory.getSocialAccountObject(bc.socialAccountType);if(be.isAccountAvailable()){bc.configs=at.getSocialAccountOptionsConfig();K.itemSelected(bc,false);}else{be.showAccountAuthorisationDialog();}}function S(bf,bd,be){var bc=null;if(bd){bc=bb(bf);if(bc){R(bc,null);}}}function aC(){var bc=a.app.PVROptionsUtil,be,bd;K.passivate();bd=K.getActiveMenuItem();if(bd.title==="menuNonEpisodicRecording"){be=K.getActiveComponent().getActualSelectedItem();be.setFirstSubTitle(bc.getBeforePadding()+O+b.getString("minutes"));be.setSecondSubTitle(bc.getAfterPadding()+O+b.getString("minutes"));}else{if(bd.title==="menuEpisodicRecording"){be=K.getActiveComponent().getActualSelectedItem();be.setFirstSubTitle(bc.getBeforePaddingEpisodic()+O+b.getString("minutes"));be.setSecondSubTitle(bc.getAfterPaddingEpisodic()+O+b.getString("minutes"));}}}function ax(){var bc=null;K.passivate();bc=K.getActiveComponent().getActualSelectedItem();bc.setFirstSubTitle(aP.getAutoTuneProperty("date"));a4();}function ap(){var bc=null;K.passivate();bc=K.getActiveComponent().getActualSelectedItem();bc.setFirstSubTitle(aP.getAutoTuneProperty("time"));aP.setAutoTuneProperty("isPresentTime",true);a4();}function aV(bh,be){var bi=null,bd=a.app.KeyboardUtils,bg=a.app.KeyboardType,bc,bf=null,bj=bh.customTitle||bh.title;be=be||bh.keypadConfigObject;bf=K.getKeypadComponent();bf.setColorKeyCallbacks({green:null,yellow:null,blue:null,red:null});bi=be.keypadSaveCallback;bd.setKeypad(bf,bg.NUMERIC);bf.setMaxNumericKeypadValue(be.maximumNumericValue);if(be.minimumNumericValue){bf.setMinNumericKeypadValue(be.minimumNumericValue);}bc=(be.maximumNumericValue.toString()).length;bf.setExitCallback(be.keypadExitCallback);bf.setKeypadTitle(b.getString(bj));if(bi){bd.setKeypadReturnObject(be.keypadReturnObject);bd.setSaveCallback(bi);}bf.clearInput();bf.configure({cursorEnable:false,textInputAlignment:bg.ALIGNMENT.CENTRE});bd.showKeypad(bg.NUMERIC);bf.focus();bf.show();}function h(){var bc=K.getKeypadComponent();bc.clearInput();bc.setInputFormat(2,2,":");}function o(){var bc=K.getKeypadComponent();bc.clearInput();bc.setInputFormat(2,2,"/");}function aO(bg,bd){var bh=null,bc=a.app.KeyboardUtils,bf=a.app.KeyboardType,be=null;bd=bd||bg.keypadConfigObject;be=K.getKeypadComponent();be.setColorKeyCallbacks({green:null,yellow:null,blue:null,red:null});be.resetKeyPadConfig();bh=bd.keypadSaveCallback;bc.setKeypad(be,bf.NUMERIC);be.setExitCallback(bd.keypadExitCallback);be.setKeypadTitle(b.getString(bg.title));if(bh){bc.setKeypadReturnObject(bd.keypadReturnObject);bc.setSaveCallback(bh);}o();be.configure({cursorEnable:false,textInputAlignment:bf.ALIGNMENT.CENTRE});bc.showKeypad(bf.NUMERIC);be.setKeypadTitle(b.getString("menuAutoTuneStartDateEdit"));be.focus();be.show();}function aF(bg,bd){var bh=null,bc=a.app.KeyboardUtils,bf=a.app.KeyboardType,be=null;bd=bd||bg.keypadConfigObject;be=K.getKeypadComponent();be.setColorKeyCallbacks({green:null,yellow:null,blue:null,red:null});be.resetKeyPadConfig();bh=bd.keypadSaveCallback;bc.setKeypad(be,bf.NUMERIC);be.setExitCallback(bd.keypadExitCallback);be.setKeypadTitle(b.getString(bg.title));if(bh){bc.setKeypadReturnObject(bd.keypadReturnObject);bc.setSaveCallback(bh);}h();be.configure({cursorEnable:false,textInputAlignment:bf.ALIGNMENT.CENTRE});bc.showKeypad(bf.NUMERIC);be.setKeypadTitle(b.getString("menuAutoTuneStartTimeEdit"));be.focus();be.show();}A=function(bg){var bf=a.app.PVROptionsUtil,bh=null,bd=null,bc=K.getActiveMenuItem(),be=bg.value;if(be){be=parseInt(be,10);K.passivate();bh=K.getActiveComponent().getActualSelectedItem();switch(bg.key){case"paddingBeforeNonEpisodic":bf.setBeforePadding(be);bd=be+O+b.getString("minutes");R(bd,bg.key);K.getActiveComponent()._selectItem(bc);bh.setFirstSubTitle(bd);aV({title:"paddingAfterNonEpisodic"},{keypadReturnObject:{key:"paddingAfterNonEpisodic",value:null},keypadSaveCallback:A,keypadExitCallback:aC,maximumNumericValue:100});break;case"paddingAfterNonEpisodic":bf.setAfterPadding(be);bh.setFirstSubTitle(bf.getBeforePadding()+O+b.getString("minutes"));bd=be+O+b.getString("minutes");R(bd,bg.key);bh.setSecondSubTitle(bd);break;case"paddingBeforeEpisodic":bf.setBeforePaddingEpisodic(be);bd=be+O+b.getString("minutes");R(bd,bg.key);K.getActiveComponent()._selectItem(bc);bh.setFirstSubTitle(bd);aV({title:"paddingAfterEpisodic"},{keypadReturnObject:{key:"paddingAfterEpisodic",value:null},keypadSaveCallback:A,keypadExitCallback:aC,maximumNumericValue:100});break;case"paddingAfterEpisodic":bf.setAfterPaddingEpisodic(be);bh.setFirstSubTitle(bf.getBeforePaddingEpisodic()+O+b.getString("minutes"));bd=be+O+b.getString("minutes");R(bd,bg.key);bh.setSecondSubTitle(bd);break;}}else{aC();}};function aJ(){var bc;K.passivate();bc=K.getActiveComponent().getActualSelectedItem();bc.setFirstSubTitle(a.platform.btv.WHPVRManager.getLocalName());}function H(be){var bd=null,bf=null,bc=null,bg=null;K.passivate();bf=K.getActiveComponent();if(be){bf.getActualSelectedItem().setFirstSubTitle(be);bc=bf.getActualSelectedRowIndex()-1;bg=bf.getData();bg[bc].firstSubTitle=be;K.getActiveComponent().updateDataAtIndex(bc,bg[bc]);a.platform.btv.WHPVRManager.setLocalName(be.toString());}}function aZ(bh){var bi=null,bg=18,bd=bh.keypadConfigObject,bc=a.app.KeyboardUtils,bf=a.app.KeyboardType,be=K.getKeypadComponent(),bj=bh.customTitle||bh.title;be.resetKeyPadConfig();bc.setKeypad(be,bf.ALPHA_NUMERIC_UPPERCASE);be.setExitCallback(bd.keypadExitCallback);be.setKeypadTitle(b.getString(bj));be.setColorKeyCallbacks({green:H});be.clearInput();be.configure({cursorEnable:true,textInputAlignment:bf.ALIGNMENT.LEFT,labelAutoAlign:true,maxCharacters:bg,clippedWidth:ar});bc.showKeypad(bf.ALPHA_NUMERIC_UPPERCASE);be.focus();be.show();}function aY(be,bc,bd){if(bc){a7.setMoralityLevel(be.morality);K.getActiveComponent().displayData();}}function af(bc){if(!T){T=new a.app.PinHelper(bc.successfullAuthenticationCallback,null,null,null,0,true);}T.setDialogProperties({x:0,y:0,width:1920,height:1080,id:bc.pinDialogId,eventImageVisibility:bc.eventImageVisibility,titleImage:bc.titleImage,title:bc.title,description:bc.description,cancelCallback:function(){T.hideDialog();}});if(bc.successfullAuthenticationCallback){T.setAuthenticationSuccessCallback(bc.successfullAuthenticationCallback);}if(bc.okCallback){T.pinDialog._dialogGUIObject.setOkCallback(bc.okCallback);}a.app.VolumeControl.hide();}function ae(bc){var bd={successfullAuthenticationCallback:function(){bc.configs=at.getPurchasesConfig();K.itemSelected(bc,false);},okCallback:null,pinDialogId:"displayAdultPurchases",pinType:"master",showTillAuthenticated:true,title:b.getString("contentBlocked"),description:b.getString("contentBlockedMessage")};af(bd);T.showPinDialog("master",false,null,true);}function aU(){var bd=K.getActiveComponent(),bc=bd.getData()[bd.getSelectedItemIndex()-1];bc.configs=at.getParentalRatingsConfig();K.itemSelected(bc,false);}function aR(be,bc,bd){af(be.pinConfigObject);T.showPinDialog("master",false,null,true);}function an(){var bd=K.getActiveComponent(),bc=bd.getData()[bd.getSelectedItemIndex()-1];bc.configs=at.getBlocksSubMenuConfig();K.itemSelected(bc,false);K.redrawMenuFromActiveStack();K.getActiveComponent().focus();}function aK(bf,bd,be){var bg=(!bf)?a.app.epgUtil.getChannelFromPrefs():bf.channelInfo.serviceId,bh=K.getActiveComponent(),bc=null;if(bg&&(bh.getSize()>0)){bc=bh.getIndexByUniqueData("serviceId",bg.toString());if(bc){bh.selectItemAtIndex(bc+1,true);}}K.scrollIndicatorHandler(bh,K.getActiveMenuScrollComponent());}function Z(){var bd=K.getActiveComponent(),bc=null;if(bd&&bd.getSelectedItemIndex()>=1){bc=bd.getData()[bd.getSelectedItemIndex()-1];bc.configs=at.getBlockChannelMenuConfig();K.itemSelected(bc,false);aK();K.footerUIHandler(K.getDoubleMenufooterConfig("allChannels","allChannelsList").footerConfig);}a.app.ChannelManager.resetGenreToggling();K.setExitCallback(function(){a.app.ChannelManager.saveBlockedChannelsList();});}function ai(be,bc,bd){var bf=a7.getMoralityLevel();if(bf&&bf>0){af(be.pinConfigObject);T.showPinDialog(be.pinConfigObject.pinType,false,null,true);}else{Z();}}function u(){var be=a.app.ChannelManager.toggleChannelsByGenre(),bc=be.genreTitle,bd=be.channelList,bf=K.getActiveComponent();K.setSubMenuTitle(bc,"firstSubMenuTitle");bf.setData(at.formatFavouriteBlockChannelsData(bd));bf.displayData();aK();K.footerUIHandler(K.getDoubleMenufooterConfig("allChannels","allChannelsList").footerConfig);}function ao(bc){var bd=K.getActiveComponent()._data.getSelectedItem().confirmPinConfigObject;if(bc){a.app.ErrorMessage.showPinChangeSuccessDialog(bd.pinType);}T.hideDialog();}function aE(bc){if(bc){a.app.ErrorMessage.showFacebookPinChangeSuccessDialog();}else{a.app.ErrorMessage.showFacebookPinChangeFailureDialog();}T.hideDialog();}function L(){a.app.ErrorMessage.hideFacebookPinMismatchDialog();a.app.ErrorMessage.showFacebookPinMismatchDialog();}function a1(bd){var be=K.getActiveComponent()._data.getSelectedItem().confirmPinConfigObject,bc;T.hideDialog();if(T.newPin===bd){if(be.pinType==="master"){a.platform.ca.PINHandler.setLocalMasterPin(bd,be.pinChangeHandler);}else{bc=be.absolutePath?a8.set(be.pinPath,bd,be.absolutePath):a8.set(be.pinPath,bd);be.pinChangeHandler(bc);}}else{be.pinMismatchHandler();}}function aa(bc){var bd=K.getActiveComponent()._data.getSelectedItem().confirmPinConfigObject;if(bc.length<N.MAX_PIN_DIGITS){T.customiseDialog({description:b.getString("wrongPin")+b.getString("tryAgain"),reset:true});}else{T.hideDialog();af(bd);T.newPin=bc;T.showPinDialog(bd.pinType,false,null,true);}}function Q(bc){var bd=K.getActiveComponent()._data.getSelectedItem().confirmPinConfigObject;if(a8.get(bd.pinPath)!==bc){aa(bc);}else{T.customiseDialog({description:b.getString("enterDifferentPin"),reset:true});}}function Y(){var bc=K.getActiveComponent()._data.getSelectedItem().newPinConfigObject;T.hideDialog();af(bc);T.showPinDialog(bc.pinType,false,null,true);}function q(be,bc,bd){af(be.pinConfigObject);T.showPinDialog(be.pinConfigObject.pinType,be.pinConfigObject.showTillAuthenticated||false,null,true);}function V(){a.app.ErrorMessage.hidePinMismatchDialog();a.app.ErrorMessage.showPinMismatchDialog(Y);}function az(bd){var bf=a.app.SocialActivityFactory.getSocialAccountObject(bd.socialAccountType),bc=true,be=null;if(!bd.configs){bd.configs=at.getSocialAccountInformationConfig();bc=false;}be=bf.getAccountInformation();K.showSocialAccountInformation(bd,be,bc);}function k(bd){var bf=new Date(),be=a.app.DateTimeUtil,bc=K.getKeypadComponent();bd=a.apps.util.Util.removeSpaces(bd);bf=bd;bd=bf.split("/");if(be.isValidDate(parseInt(bd[2],10),parseInt(bd[1],10),parseInt(bd[0],10))){if(!be.isDateInFuture(parseInt(bd[2],10),parseInt(bd[1],10),parseInt(bd[0],10))){bd[2]=parseInt(bd[2],10)+1;}bf=bd.join("/");return bf;}else{a.app.ErrorMessage.showInvalidDateDialog(function(){o();});return false;}}function P(be){var bc=K.getKeypadComponent(),bd=be.split(":");if(a.app.DateTimeUtil.isValidTime(bd[0],bd[1])){return be;}else{a.app.ErrorMessage.showInvalidTimeDialog(function(){h();});return false;}}U=function(be){var bf=null,bd=K.getActiveMenuItem(),bh=null,bc=a.apps.util.Util.removeSpaces(be.value),bg=false;if(bc){if(be.key==="autoTuneStartDate"){bd.date=k(bc.concat("/"+new Date().getUTCFullYear()));bg=bd.date;}else{if(be.key==="autoTuneStartTime"){bd.time=P(bc);bg=bd.time;}}aP.setAutoTuneProperty("isPresentTime",true);if(bg!==false){K.passivate();bf=K.getActiveComponent().getActualSelectedItem();if(be.key==="autoTuneStartDate"){aP.setAutoTuneProperty("date",bd.date);bf.setFirstSubTitle(bd.date);R(bd.date,null);}else{if(be.key==="autoTuneStartTime"){aP.setAutoTuneProperty("time",bc);aP.setAutoTuneProperty("isPresentTime",false);bf.setFirstSubTitle(bc);R(bc,null);}}}}else{if(be.key==="autoTuneStartDate"){ax();}else{if(be.key==="autoTuneStartTime"){ap();}}}a4();};function c(be,bc,bd){bd.setFirstSubTitle("_ _ _ "+b.getString("minutes"));bd.setSecondSubTitle("_ _ _ "+b.getString("minutes"));aV(be);}function aG(bc){var bd,be,bf=[{key:N.KEEP_UNTIL_OPTION_MANUAL_DELETE,value:a3.getString("pvrManualDelete")},{key:N.KEEP_UNTIL_OPTION_SPACE_NEEDED,value:a3.getString("pvrSpaceNeeded")}];for(bd=0;bd<(bf.length);bd++){if(bc===bf[bd].key){be=bf[bd].value;}}return be;}function n(bc){var be,bd,bf=[{key:N.TYPE_OF_EPISODE_OPTION_ALL_EPISODE,value:a3.getString("pvrTypeAllEpisodes")},{key:N.TYPE_OF_EPISODE_OPTION_JUST_THIS_EPISODE,value:a3.getString("pvrJustThisEpisode")}];for(be=0;be<(bf.length);be++){if(bc===bf[be].key){bd=bf[be].value;}}return bd;}function J(be,bc,bd){bd.setFirstSubTitle("_ _ / _ _");aO(be);}function C(be,bc,bd){bd.setFirstSubTitle("_ _ : _ _");aF(be);}function l(be,bc,bd){bd.setFirstSubTitle("_ _ _ "+b.getString("milliSeconds"));aV(be);}function aI(){var bd=null,be,bc=true;K.passivate();be=a8.get(N.PREF_AUDIO_LIPSYNC_DELAY,bc);bd=K.getActiveComponent().getActualSelectedItem();bd.setFirstSubTitle(be+O+b.getString("milliSeconds"));}function W(bh){var be=null,bf=K.getActiveMenuItem(),bg=parseInt(bh.value,10),bd,bc=true;if(!isNaN(bg)){a8.set(N.PREF_AUDIO_LIPSYNC_DELAY,bg,bc);a7.setAudioDelay();K.passivate();be=K.getActiveComponent().getActualSelectedItem();bd=bg+O+b.getString("milliSeconds");R(bd,null);be.setFirstSubTitle(bd);}else{aI();}}function aQ(be,bc,bd){bd.setFirstSubTitle("_ _ "+b.getString("optionSeconds"));aV(be);}function a9(){var bc=a.app.HotPlug.getConnectedUSBMediumID();if(bc){a.app.HotPlug.safelyRemoveUSBMedia(bc);}}function a6(){var bd=null,bc;K.passivate();bc=a8.get(N.PREF_USBDLNA_PHOTO_DISPLAY_DURATION);bd=K.getActiveComponent().getActualSelectedItem();bd.setFirstSubTitle(bc+O+b.getString("optionSeconds"));}function ay(){var bd=null,bc;K.passivate();bc=a8.get(N.PREF_USBDLNA_PLAYER_BANNER_TIMEOUT);bd=K.getActiveComponent().getActualSelectedItem();bd.setFirstSubTitle(bc+O+b.getString("optionSeconds"));}function av(bc){var be=null,bf=K.getActiveMenuItem(),bg=bc.value,bd;if(bg){if(bc.key==="mediaPhotoDisplayDuration"){a8.set(N.PREF_USBDLNA_PHOTO_DISPLAY_DURATION,parseInt(bg,10));}else{if(bc.key==="mediaPlayerDuration"){a8.set(N.PREF_USBDLNA_PLAYER_BANNER_TIMEOUT,parseInt(bg,10));}}K.passivate();be=K.getActiveComponent().getActualSelectedItem();bd=bg+O+b.getString("optionSeconds");R(bd,null);be.setFirstSubTitle(bd);}else{if(bc.key==="mediaPhotoDisplayDuration"){a6();}else{if(bc.key==="mediaPlayerDuration"){ay();}}}}function d(){if(T){return T.isPinShowing();}else{return false;}}return{getData:function(bS,bF,bU){var bV=a.app.PVROptionsUtil,bG,bI,bW=b.getString("notAvailable"),bc,bB,bh,b1,bv,b3,b2,bM,br,bx,bn,bj=0,b0=null,bR,be,bs,bJ,bL,bP,bp,bk,bz,bY,by,bm,bu,bq,bC,bi,bO,bZ,bN,bH,b4,bT,bQ=bF,bA,bl,bK="",bf=true,bd=2,bo=[],bt=[],bw,bX,bE,bD=b.getString("cakRevision"),bg=a.app.MoCAManager.getCurrentConfiguration();switch(bS){case"menuSystem":b0=at.formatSystemMenuData();break;case"menuPosts":b0=a.app.MessageUtil.getMessageMails();break;case"menuRecorderPreferences":b0=[{title:"menuNonEpisodicRecording"},{title:"menuEpisodicRecording"},{title:"menuPlaybackPlayer"},{title:"menuDiskDrive"}];if(a.app.FeatureManager.isWHPVREnabled()){b0.push({title:"menuWholeHomePvr"});}b0=at.formatRecorderSettingsMenuData(b0);break;case"menuNonEpisodicRecording":b1=a8.get(N.PREF_DEFAULT_KEEP_UNTIL);bv=aG(b1);b2=a8.get(N.PREF_NON_EPISODIC_BLOCK_PLAYBACK);if(b2==="1"){b3=a3.getString("pvrRequirePinToPlayback");}else{b3=a3.getString("pvrNone");}b0=[{title:"menuDefaultFolder",firstSubTitle:a.app.FolderUtil.getDislayedDefaultNonEpisodicFolderName()},{title:"paddingBeforeNonEpisodic",firstSubTitle:bV.getBeforePadding()+O+b.getString("minutes"),secondTitle:"paddingAfterNonEpisodic",secondSubTitle:bV.getAfterPadding()+O+b.getString("minutes"),successCallback:c,keypadConfigObject:{keypadReturnObject:{key:"paddingBeforeNonEpisodic",value:null},keypadSaveCallback:A,keypadExitCallback:aC,maximumNumericValue:100}},{title:"menuNonEpisodicKeepUntil",configName:"Padding Left",firstSubTitle:bv},{title:"menuNonEpisodicBlockPlayback",configName:"Default Folder",firstSubTitle:b3}];b0=at.formatRecorderSettingsMenuData(b0);break;case"menuEpisodicRecording":b1=a8.get(N.PREF_EPISODIC_KEEP_UNTIL);bv=aG(b1);b2=a8.get(N.PREF_EPISODIC_BLOCK_PLAYBACK);if(b2==="true"){b3=a3.getString("pvrRequirePinToPlayback");}else{b3=a3.getString("pvrNone");}bN=a8.get(N.PREF_EPISODIC_TYPE_OF_EPISODES);bH=n(bN);b0=[{title:"paddingBeforeEpisodic",firstSubTitle:bV.getBeforePaddingEpisodic()+O+b.getString("minutes"),secondTitle:"paddingAfterEpisodic",secondSubTitle:bV.getAfterPaddingEpisodic()+O+b.getString("minutes"),successCallback:c,keypadConfigObject:{keypadReturnObject:{key:"paddingBeforeEpisodic",value:null},keypadSaveCallback:A,keypadExitCallback:aC,maximumNumericValue:100}},{title:"menuEpisodicKeepUntil",configName:"Padding Left",firstSubTitle:bv},{title:"menuEpisodicBlockPlayback",configName:"Default Folder",firstSubTitle:b3}];b0=at.formatRecorderSettingsMenuData(b0);break;case"menuPlaybackPlayer":b4=a8.get(N.PREF_PLAYBACK_PLAYER_TIMEOUT);b0=[{title:"pvrPlaybackPlayer",configName:"Padding Left",firstSubTitle:b.getString("playbackPlayerTimeouts")[b4]}];b0=at.formatRecorderSettingsMenuData(b0);break;case"menuDiskDrive":b0=[{title:"menuDiskDriveSafelyRemove",successCallback:a.app.HotPlug.setUpRemoveDiskDrive},{title:"menuDiskDriveFormat",successCallback:a.app.HotPlug.setUpDiskDriveFormatting}];b0=at.formatRecorderSettingsMenuData(b0);break;case"menuWholeHomePvr":bK=a.platform.btv.WHPVRManager.getCurrentRecordServerName();if(!bK){bK=b.getString("localLocation");}b0=[{title:"menuLocalServerName",firstSubTitle:a.platform.btv.WHPVRManager.getLocalName(),successCallback:aZ,keypadConfigObject:{keypadReturnObject:{key:"menuLocalServerName",value:null},keypadExitCallback:aJ}},{title:"menuRecordLocation",firstSubTitle:bK}];b0=at.formatRecorderSettingsMenuData(b0);break;case"menuRecordLocation":b0=x();b0.successCallback=S;break;case"menuSTBinfo":bG=a.app.ConditionalAccessCAK73.getCASystemInfo();bI=a.app.ConditionalAccessCAK73.getCASmartCardInfo();bw=CCOM.DRM.getDrmInfo(CCOM.DRM.DRM_TYPE_PRM);bX=bG.systemInfo.chipsetType;bE=bG.systemInfo.chipsetRevision;bc=[{key:"stbModelNo",value:CCOM.System.getStringById(N.SYSTEM_STB_MODEL).string||bW},{key:"firmWareVersion",value:a.app.SettingsAPI.getVersion()||bW},{key:"appVersion",value:a.app.Version.app_version||bW},{key:"updateID",value:a.app.FeatureManager.getUsageId()||bW},{key:"decodeCAID",value:bG.systemInfo.serialNumber||bW},{key:"smartCardNumber",value:bI.smartcardInfo?bI.smartcardInfo.serialNumber||bW:bW},{key:"smartCardSoftware",value:bI.smartcardInfo?bI.smartcardInfo.version||bW:bW},{key:"stbSerial",value:CCOM.System.getStringById(N.SYSTEM_STB_SERIAL_NUMBER).string||bW},{key:"cakVersion",value:bG.systemInfo.version||bW},{key:"caNuid",value:bG.systemInfo.nuid||bW},{key:"chipsetType",value:(bX+" ("+bD+" "+bE+")")||bW},{key:"projectInfo",value:bG.systemInfo.projectInformation||bW},{key:"dvlVersion",value:(bw&&bw.drm&&bw.drm.version)?bw.drm.version:bW},{key:"CSCMaxIndex",value:(typeof(bG.systemInfo.cscMaxIndex)!=="null")?parseInt(bG.systemInfo.cscMaxIndex,10):bW}];b0=at.formatSTBInfoData(bc);break;case"menuDiagnostics":b0=g();a.app.SignalInfoUtil.setConnectionInfoSuccessCallBack(g);a.app.SignalInfoUtil.setConnectionInfoFailureCallBack(g);a.app.SignalInfoUtil.getConnectionInfo();break;case"menuWHPVR":b0=ba();break;case"menuDefaultFolder":b0=a8.get(N.PVR_NON_EPISODIC_FOLDER_LIST);b0=at.formatRecordingsFolderListData(b0);b0=a.app.FolderUtil.sortFolderList(b0);b0.successCallback=S;b0.colorKeyCallbacks={green:ah};break;case"menuNonEpisodicKeepUntil":b0=[{title:"pvrManualDelete",value:N.KEEP_UNTIL_OPTION_MANUAL_DELETE,constant:N.PREF_DEFAULT_KEEP_UNTIL},{title:"pvrSpaceNeeded",value:N.KEEP_UNTIL_OPTION_SPACE_NEEDED,constant:N.PREF_DEFAULT_KEEP_UNTIL}];b0.successCallback=S;break;case"menuNonEpisodicBlockPlayback":b0=[{title:"pvrNone",value:"0",constant:N.PREF_NON_EPISODIC_BLOCK_PLAYBACK},{title:"pvrRequirePinToPlayback",value:"1",constant:N.PREF_NON_EPISODIC_BLOCK_PLAYBACK}];b0.successCallback=S;break;case"menuEpisodicKeepUntil":b0=[{title:"pvrManualDelete",value:N.KEEP_UNTIL_OPTION_MANUAL_DELETE,constant:N.PREF_EPISODIC_KEEP_UNTIL},{title:"pvrSpaceNeeded",value:N.KEEP_UNTIL_OPTION_SPACE_NEEDED,constant:N.PREF_EPISODIC_KEEP_UNTIL}];b0.successCallback=S;break;case"menuTypeOfEpisodes":b0=[{title:"pvrTypeAllEpisodes",value:N.TYPE_OF_EPISODE_OPTION_ALL_EPISODE,constant:N.PREF_EPISODIC_TYPE_OF_EPISODES},{title:"pvrJustThisEpisode",value:N.TYPE_OF_EPISODE_OPTION_JUST_THIS_EPISODE,constant:N.PREF_EPISODIC_TYPE_OF_EPISODES}];b0.successCallback=S;break;case"menuEpisodicBlockPlayback":b0=[{title:"pvrNone",value:"false",constant:N.PREF_EPISODIC_BLOCK_PLAYBACK},{title:"pvrRequirePinToPlayback",value:"true",constant:N.PREF_EPISODIC_BLOCK_PLAYBACK}];b0.successCallback=S;break;case"pvrPlaybackPlayer":b0=a0();b0.successCallback=S;break;case"menuIPConnections":b0=a2();break;case"menuReminders":b0=G();break;case"menuPreferences":b0=[{title:"menuBlocks",successCallback:aR,pinConfigObject:{successfullAuthenticationCallback:an,okCallback:null,pinDialogId:"blocksSubMenu",pinType:"master",eventImageVisibility:false,showTillAuthenticated:true,title:b.getString("menuBlocks"),description:b.getString("enterPasswordToContinue")},isVisible:true},{title:"menuLanguages",isVisible:true},{title:"menuMiniguide",isVisible:true},{title:"menuTv",isVisible:true},{title:"menuPrefStb",isVisible:true},{title:"menuPrefFacebook",successCallback:y,socialAccountType:a.app.SocialAccount.FACEBOOK,isVisible:a.platform.system.Preferences.get(a.app.constants.SOCIAL_FACEBOOK_FEATURE_AVAILABILITY)},{title:"menuMoCA",isVisible:a.app.FeatureManager.isMoCAEnabled()}];b0=v(b0);b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuBlocks":b0=[{title:"menuParentalRatings",successCallback:aU},{title:"menuBlockChannels",href:aq,successCallback:Z},{title:"menuParentalPin",successCallback:q,pinConfigObject:{successfullAuthenticationCallback:Y,okCallback:null,pinDialogId:"parentalRating",pinType:"master",showTillAuthenticated:true,pinChangeHandler:ao,title:b.getString("menuParentalPin"),description:b.getString("enterPasswordToContinueParentalPin")},newPinConfigObject:{okCallback:aa,pinDialogId:"newPinEntry",title:b.getString("menuParentalPin"),description:b.getString("enterNewParentalPin")},confirmPinConfigObject:{okCallback:a1,pinDialogId:"confirmPinEntry",pinType:"master",pinChangeHandler:ao,pinMismatchHandler:V,title:b.getString("menuParentalPin"),description:b.getString("confirmParentalPin")}},{title:"menuPurchasePin",successCallback:q,pinConfigObject:{successfullAuthenticationCallback:Y,okCallback:null,pinDialogId:"purchasePin",pinType:"purchase",showTillAuthenticated:true,eventImageVisibility:false,pinChangeHandler:ao,title:b.getString("menuPurchasePin"),description:b.getString("enterPasswordToContinuePurchasePin")},newPinConfigObject:{okCallback:aa,pinDialogId:"newPinEntry",eventImageVisibility:false,title:b.getString("menuPurchasePin"),description:b.getString("enterNewPurchasePin")},confirmPinConfigObject:{okCallback:a1,pinDialogId:"confirmPinEntry",pinType:"purchase",eventImageVisibility:false,pinPath:N.PURCHASE_PIN_PATH,pinChangeHandler:ao,pinMismatchHandler:V,title:b.getString("menuPurchasePin"),description:b.getString("confirmPurchasePin"),absolutePath:true}}];b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuPrefStb":b0=[{title:"menuFrontPanel"},{title:"menuAutoTune"},{title:"menuAutoShutdown"}];b0=at.formatPreferencesStbMenuData(b0);break;case"menuAutoTune":b0=aw();break;case"menuAutoTuneEdit":bT=aP.getAllAutoTuneProperties();b0=[{title:"menuAutoTuneFrequency",firstSubTitle:b.getString("autoTunefrequencies")[bT.frequency],frequency:bT.frequency},{title:"menuAutoTuneStartDate",date:k(bT.date),firstSubTitle:bT.date,successCallback:J,keypadConfigObject:{keypadReturnObject:{key:"autoTuneStartDate",value:null},keypadSaveCallback:U,keypadExitCallback:ax}},{title:"menuAutoTuneStartTime",firstSubTitle:bT.time,time:bT.time,successCallback:C,keypadConfigObject:{keypadReturnObject:{key:"autoTuneStartTime",value:null},keypadSaveCallback:U,keypadExitCallback:ap}},{title:"menuAutoTuneChannel",successCallback:aK,channelInfo:bT.channelInfo,firstSubTitle:bT.channel}];b0=at.formatPreferencesStbMenuData(b0);break;case"menuAutoTuneFrequency":b0=F("POSSIBLE_AUTOTUNE_FREQUENCY","autoTunefrequencies");b0=at.formatPreferencesStbMenuData(b0);b0.successCallback=S;K.setPassivateCallback(a4);break;case"menuAutoTuneChannel":bz=a.app.ChannelManager.getAllChannelsOrderedByChannelNumber();b0=at.formatFavouriteBlockChannelsData(bz);b0.successCallback=S;K.setPassivateCallback(a4);break;case"menuLanguages":bR=a8.get(N.PREF_LANGUAGE);be=a8.get(N.PREF_AUDIO_LANGUAGE);bs=a8.get(N.PREF_SUBTITLE_STATE)||N.SUBTITLE_STATE_DEFAULT;b0=[{title:"menuMenuLanguage",firstSubTitle:b.getString("isoLocaleLanguage")[bR]},{title:"menuAudioLanguage",firstSubTitle:b.getString("audioLanguage")[be]},{title:"menuSubtitle",firstSubTitle:b.getString("subtitleStates")[bs]}];b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuMenuLanguage":b0=aj();b0.successCallback=S;break;case"menuAudioLanguage":b0=m();b0.successCallback=S;break;case"menuSubtitle":b0=aH();b0.successCallback=S;break;case"menuMediaPreferences":bJ=a8.get(N.PREF_USBDLNA_PHOTO_DISPLAY_DURATION);bL=a8.get(N.PREF_USBDLNA_PHOTO_TRANSITION_EFFECTS);bP=a8.get(N.PREF_USBDLNA_PLAYER_BANNER_TIMEOUT);b0=[{title:"menuPhotoDisplayDuration",isVisible:true,customTitle:"menuDisplayDurationKeyPadTitle",firstSubTitle:bJ+O+b.getString("optionSeconds"),successCallback:aQ,keypadConfigObject:{keypadReturnObject:{key:"mediaPhotoDisplayDuration",value:null},keypadSaveCallback:av,keypadExitCallback:a6,maximumNumericValue:60,minimumNumericValue:1}},{title:"menuPhotoTransition",isVisible:true,firstSubTitle:b.getString("transitionEffects")[bL]},{title:"menuPlayerDuration",customTitle:"menuPlayerDurationKeyPadTitle",firstSubTitle:bP+O+b.getString("optionSeconds"),successCallback:aQ,keypadConfigObject:{keypadReturnObject:{key:"mediaPlayerDuration",value:null},keypadSaveCallback:av,keypadExitCallback:ay,maximumNumericValue:60,minimumNumericValue:1},isVisible:true},{title:"menuDiskDriveSafelyRemove",firstSubTitle:"",successCallback:a9,isVisible:(a.app.FeatureManager.getMediaPlaybackFeatureStatus()&&a.app.UsbBrowserHelper.getMediaPlaybackStatus()&&(bF.getHelperMode&&bF.getHelperMode()===a.app.constants.USB_HELPER_MODE))}];b0=v(b0);b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuPhotoTransition":b0=ak();b0.successCallback=S;break;case"menuMiniguide":bp=a8.get(N.PREF_ZAPPING_BANNER_TIMEOUT);bk=a8.get(N.PREF_DEFAULT_TIPSFROMNET);b0=[{title:"menuMiniguideDuration",firstSubTitle:b.getString("surferDurations")[bp]},{title:"menuTipsFromNet",firstSubTitle:(bk==="true")?b.getString("menuTipsEnable"):b.getString("menuTipsDisable")}];b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuMiniguideDuration":b0=z();b0.successCallback=S;break;case"menuTipsFromNet":b0=[{title:"menuTipsEnable",value:"true"},{title:"menuTipsDisable",value:"false"}];b0.successCallback=S;break;case"menuFavorites":if(bU==="firstSubMenuList"){bz=a.app.ChannelManager.getAllChannelsOrderedByChannelNumber();b0=at.formatFavouriteBlockChannelsData(bz);}else{bY=a.app.ChannelManager.getFavouriteChannels();if(bY.domain==="com.opentv.EPG"){a.app.ErrorMessage.showFavoritesFetchErrorDialog();}else{b0=at.formatFavouriteBlockChannelsData(bY);}}break;case"menuParentalRatings":b0=a.app.ParentalControlUtil.getRatingLookUp();b0.successCallback=aY;break;case"menuBlockChannels":if(bU==="firstSubMenuList"){b0=at.formatFavouriteBlockChannelsData(a.app.ChannelManager.getAllChannelsOrderedByChannelNumber());b0.colorKeyCallbacks={green:u};}else{b0=at.formatFavouriteBlockChannelsData(a.app.ChannelManager.getBlockedChannelsList());b0=b0.sort(a.app.SortUtil.sortByChannel);}break;case"menuTv":b0=[{title:"menuSdOutput"},{title:"menuHdOutput"}];b0=at.formatPreferencesTvMenuData(b0);break;case"menuSdOutput":bq=a8.get(N.PREF_ASPECT_RATIO,true);bC=a8.get(N.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,bf);bu=a8.get(N.PREF_VIDEO_SYSTEM,bf);b0=[{title:"menuAspectRatio",firstSubTitle:(bq===a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3)?b.getString("menuAspectRatioVga"):b.getString("menuAspectRatioWideScreen")},{title:"menuDisplayFormat",firstSubTitle:(bC===a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH)?b.getString("menuStretch"):b.getString("menuLetterbox")},{title:"menuVideoSystem",firstSubTitle:(bu===N.PI_VID_STD_NTSC_M)?b.getString("menuNTSC"):b.getString("menuPAL")}];b0=at.formatPreferencesTvMenuData(b0);break;case"menuAspectRatio":b0=[{title:"menuAspectRatioVga",value:a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3,constant:N.PREF_ASPECT_RATIO,option:a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_4_3,isAbsolute:true},{title:"menuAspectRatioWideScreen",value:a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_16_9,constant:N.PREF_ASPECT_RATIO,option:a.platform.output.AV.VideoAspectRatio.ASPECT_RATIO_16_9,isAbsolute:true}];b0.successCallback=S;break;case"menuDisplayFormat":b0=[{title:"menuStretch",value:a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH,constant:N.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,option:a.platform.output.AV.VideoAspectMode.ANALOGUE_STRETCH,isAbsolute:true},{title:"menuLetterbox",value:a.platform.output.AV.VideoAspectMode.ANALOGUE_LETTER_BOX,constant:N.PREF_DEFAULT_ASPECT_RATIO_ANALOGUE,option:a.platform.output.AV.VideoAspectMode.ANALOGUE_LETTER_BOX,isAbsolute:true}];b0.successCallback=S;break;case"menuVideoSystem":b0=[{title:"menuNTSC",value:N.PI_VID_STD_NTSC_M,constant:N.PREF_VIDEO_SYSTEM,absolutePath:true},{title:"menuPAL",value:N.PI_VID_STD_PAL_M,constant:N.PREF_VIDEO_SYSTEM,absolutePath:true}];b0.successCallback=S;break;case"menuHdOutput":bi=a8.get(N.PREF_HDMI_VIDEO_RESOLUTION,bf);bC=a.platform.output.AV.getHDVideoAspectMode();bO=a8.get(N.PREF_HDMI_AUDIO_OUTPUT);bZ=a8.get(N.PREF_AUDIO_LIPSYNC_DELAY,bf);b0=[{title:"menuResolution",firstSubTitle:b.getString("hdResolutions")[bi]},{title:"menuHdDisplayFormat",firstSubTitle:(bC===a.platform.output.AV.VideoAspectMode.HDMI_STRETCH)?b.getString("menuStretch"):b.getString("menuPillarBar")},{title:"menuHdmiAudioOutput",firstSubTitle:(bO===N.HDMI_AUDIO_PCM)?b.getString("menuPcm"):b.getString("menuDolby")},{title:"menuLipSync",customTitle:"menuLipSyncKeyPadTitle",firstSubTitle:parseInt(bZ,10)+O+b.getString("milliSeconds"),successCallback:l,keypadConfigObject:{keypadReturnObject:{key:"lipsyncDelay",value:null},keypadSaveCallback:W,keypadExitCallback:aI,maximumNumericValue:190}}];b0=at.formatPreferencesTvMenuData(b0);break;case"menuHdmiAudioOutput":b0=[{title:"menuDolby",value:CCOM.System.HDMI_AUDIO_TYPE_DDPLUS,constant:N.PREF_HDMI_AUDIO_OUTPUT,option:N.HDMI_AUDIO_DOLBY_OUTPUT},{title:"menuPcm",value:CCOM.System.HDMI_AUDIO_TYPE_PCM,constant:N.PREF_HDMI_AUDIO_OUTPUT,option:N.HDMI_AUDIO_PCM_OUTPUT}];b0.successCallback=S;break;case"menuHdDisplayFormat":b0=[{title:"menuStretch",value:a.platform.output.AV.VideoAspectMode.HDMI_STRETCH,constant:N.PREF_DEFAULT_ASPECT_RATIO_HD,option:a.platform.output.AV.VideoAspectMode.HDMI_STRETCH,isAbsolute:true},{title:"menuPillarBar",value:a.platform.output.AV.VideoAspectMode.HDMI_PILLAR_BOX,constant:N.PREF_DEFAULT_ASPECT_RATIO_HD,option:a.platform.output.AV.VideoAspectMode.HDMI_PILLAR_BOX,isAbsolute:true}];b0.successCallback=S;break;case"menuFrontPanel":by=a8.get(N.PREF_FRONTPANEL_DISPLAY);bm=a8.get(N.PREF_FRONTPANEL_INTENSITY);bu=null;b0=[{title:"menuFrontPanelDisplay",firstSubTitle:(by===N.FRONTPANEL_DISPLAY_CHANNEL)?b.getString("menuDisplayChannel"):b.getString("menuDisplayTime")},{title:"menuFrontPanelIntensity",firstSubTitle:(bm===N.FRONTPANEL_INTENSITY_BRIGHT)?b.getString("menuIntensityBright"):b.getString("menuIntensityFade")}];b0=at.formatPreferencesStbMenuData(b0);break;case"menuFrontPanelDisplay":b0=[{title:"menuDisplayChannel",option:N.FRONTPANEL_DISPLAY_CHANNEL,constant:N.PREF_FRONTPANEL_DISPLAY},{title:"menuDisplayTime",option:N.FRONTPANEL_DISPLAY_TIME,constant:N.PREF_FRONTPANEL_DISPLAY}];b0.successCallback=S;break;case"menuFrontPanelIntensity":b0=[{title:"menuIntensityBright",option:N.FRONTPANEL_INTENSITY_BRIGHT,constant:N.PREF_FRONTPANEL_INTENSITY},{title:"menuIntensityFade",option:N.FRONTPANEL_INTENSITY_FADE,constant:N.PREF_FRONTPANEL_INTENSITY}];b0.successCallback=S;break;case"menuResolution":b0=[{title:"menu480i",value:a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480I,constant:N.PREF_HDMI_VIDEO_RESOLUTION,isAbsolute:true,option:a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480I,bd)},{title:"menu480p",value:a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480P,constant:N.PREF_HDMI_VIDEO_RESOLUTION,isAbsolute:true,option:a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_480P,bd)},{title:"menu720p",value:a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_720P,constant:N.PREF_HDMI_VIDEO_RESOLUTION,isAbsolute:true,option:a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_720P,bd)},{title:"menu1080i",value:a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080I,constant:N.PREF_HDMI_VIDEO_RESOLUTION,isAbsolute:true,option:a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080I,bd)},{title:"menu1080p",value:a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080P,constant:N.PREF_HDMI_VIDEO_RESOLUTION,isAbsolute:true,option:a.app.GeneralUtil.getExponentValue(a.platform.output.AV.VideoResolution.HDMI_VIDEO_FORMAT_1080P,bd)}];b0.successCallback=S;break;case"menuAutoShutdown":bA=a8.get(N.PREF_AUTO_STANDBY);b0=[{title:"menuAutoStandbyAfter",firstSubTitle:b.getString("standbyDurations")[bA]}];b0=at.formatPreferencesStbMenuData(b0);break;case"menuAutoStandbyAfter":b0=t();b0.successCallback=S;break;case"menuPrefFacebook":bl=a.app.SocialActivityFactory.getSocialAccountObject(a.app.SocialAccount.FACEBOOK);b0=[{title:"socialAccount",firstSubTitle:bl.getAccountInformation("email"),socialAccountType:a.app.SocialAccount.FACEBOOK,successCallback:az},{title:"facebookPinSetting",firstSubTitle:a.app.SocialActivityFactory.getPinSettingDisplayValue(a8.get(N.SOCIAL_FACEBOOK_PIN_SETTING)),configs:at.getSocialAccountPinSettingOptionsConfig()},{title:"facebookChangePin",firstSubTitle:"****",successCallback:q,pinConfigObject:{successfullAuthenticationCallback:Y,okCallback:null,pinDialogId:"facebook",pinType:"facebook",showTillAuthenticated:true,eventImageVisibility:false,titleImage:"customise/resources/images/%RES/icons/fb_icon.png",title:b.getString("changeFacebookPin"),description:b.getString("enterCurrentPin")},newPinConfigObject:{okCallback:Q,pinDialogId:"newPinEntry",eventImageVisibility:false,titleImage:"customise/resources/images/%RES/icons/fb_icon.png",title:b.getString("changeFacebookPin"),description:b.getString("enterNewPin")},confirmPinConfigObject:{okCallback:a1,eventImageVisibility:false,pinChangeHandler:aE,pinMismatchHandler:L,pinType:"facebook",titleImage:"customise/resources/images/%RES/icons/fb_icon.png",pinPath:N.SOCIAL_FACEBOOK_PIN,pinDialogId:"confirmPinEntry",title:b.getString("changeFacebookPin"),description:b.getString("reEnterNewPin")}}];break;case"facebookPinSetting":b0=[{title:"socialPinSettingNeverRequest",value:"socialPinSettingNeverRequest",constant:N.SOCIAL_FACEBOOK_PIN_SETTING},{title:"socialPinSettingAlwaysRequest",value:"socialPinSettingAlwaysRequest",constant:N.SOCIAL_FACEBOOK_PIN_SETTING},{title:"socialPinSettingRequestOneHour",value:"socialPinSettingRequestOneHour",constant:N.SOCIAL_FACEBOOK_PIN_SETTING},{title:"socialPinSettingRequestTwoHour",value:"socialPinSettingRequestTwoHour",constant:N.SOCIAL_FACEBOOK_PIN_SETTING},{title:"socialPinSettingRequestThreeHour",value:"socialPinSettingRequestThreeHour",constant:N.SOCIAL_FACEBOOK_PIN_SETTING}];b0.successCallback=S;break;case"socialAccount":b0=[{title:"menuDisconnectAccount",successCallback:D,socialAccountType:a.app.SocialAccount.FACEBOOK}];break;case"menuPurchases":b0=[{title:"menuHistoryOfPurchases",isAdultCategory:false,configs:at.getPurchasesConfig()},{title:"adultContent",successCallback:ae,isAdultCategory:true,configs:null}];break;case"menuHistoryOfPurchases":case"adultContent":if(bF.isAdultCategory===true){bo=a.app.PPVHelper.getPPVPurchases(true);}else{bo=a.app.PPVHelper.getPPVPurchases();}if(bo.length>0||bt.length>0){b0=bo.concat(bt);}break;case"menuMoCA":b0=[{title:"menuMoCAStatus",firstSubTitle:bg.getStatus()},{title:"menuMoCAPrivacyEnabled",firstSubTitle:"No"},{title:"menuMoCAPassword",firstSubTitle:"*****"},{title:"menuMoCABand",firstSubTitle:"0"},{title:"menuMoCABandMask",firstSubTitle:"0x15554000"},{title:"menuMoCATransmitPower",firstSubTitle:"10"},{title:"menuMoCABeaconPower",firstSubTitle:"10"},{title:"menuMoCANetworkController",firstSubTitle:"2"},{title:"menuMoCAPhyTargetRate",firstSubTitle:"4"},{title:"menuMoCAPhyMargin",firstSubTitle:"6"}];b0=at.formatPreferencesSettingsMenuData(b0);break;case"menuMoCAEnabled":b0=[{title:"menuMoCAEnabled",value:"true"},{title:"menuMoCADisabled",value:"false"}];b0.successCallback=S;break;}return b0;},setData:aM,getAutoTuneData:aw,startAutoRefreshData:function(bd,bc){aT=bc;switch(bd){case"menuDiagnostics":if(r){clearInterval(r);r=null;}r=setInterval(ab,a5);break;case"menuIPConnections":if(r){clearInterval(r);r=null;}r=setInterval(ac,al);break;default:this.stopAutoRefreshData();}},autoTuneTimeUpdate:function(){M.register("SettingsMenuHelperClock",function(){var bc=K.getActiveMenuItem(),bd=K.getActiveComponent(),be=null;if(aP.getAutoTuneProperty("isPresentTime")){aP.setAutoTuneProperty("time",a.app.DateTimeUtil.getFormattedTimeString(new Date(),N.TWENTY_FOUR_HOUR_TIME_FORMAT));if(bc&&bc.title==="menuAutoTuneEdit"){a4();}}});M.enable("SettingsMenuHelperClock");},stopAutoTuneTimeUpdate:function(){M.disable("SettingsMenuHelperClock");},stopAutoRefreshData:function(){clearInterval(r);r=null;},systemViewDrawMenuCallback:function(){K.showBGLines();},isPinDisplayed:d,genericReminderDeletedListener:am};};a.app=a.app||{};a.app.SettingsMenuHelper=b;}($N||{}));(function(a){a.app=a.app||{};a.app.LoadingTimeout=function(b){return{setLoading:function(c){var d=this;if(c){if(this._hideTimeoutId){clearTimeout(this._hideTimeoutId);this._hideTimeoutId=null;}if(!b.isVisible()&&!this._revealTimeoutId){this._revealTimeoutId=setTimeout(function(){clearTimeout(d._revealTimeoutId);d._revealTimeoutId=null;b.show();d._hideEarliestTime=Date.now()+d._revealDelay;},this._revealDelay);}}else{if(this._revealTimeoutId){clearTimeout(this._revealTimeoutId);this._revealTimeoutId=null;}if(b.isVisible()&&!this._hideTimeoutId){this._hideTimeoutId=setTimeout(function(){clearTimeout(d._hideTimeoutId);d._hideTimeoutId=null;b.hide();},Math.max(this._hideEarliestTime-Date.now(),0));}}}};};}($N||{}));var $N=$N||{};$N.app=$N.app||{};$N.app.DataMappers=(function(){var a=new $N.apps.core.Log("Helper","DataMappers");return{initialise:function(){$N.apps.core.Language.adornWithGetString($N.app.DataMappers);},getSettings:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getLogo:function(b){return b.logo;},getLogoHighlight:function(b){return b.logoHighlight;}};},getMessageMails:function(){return{getMailId:function(b){return b.cookedID;},getMailReadStatus:function(b){return b.read;},getMailDate:function(b){return $N.app.DateTimeUtil.getDayMonthTimeStringFromMS(b.date);},getMailTitle:function(b){return b.title;},getMailContent:function(b){return b.content;},setMailReadStatus:function(b){b.read=true;}};},getBasicSettingsSubMenuMapper:function(){return{getFirstTitle:function(b){return $N.app.DataMappers.getString(b.title);},getFirstSubTitle:function(b){return(b.firstSubTitle);},getSecondTitle:function(b){return $N.app.DataMappers.getString(b.secondTitle);},getSecondSubTitle:function(b){return(b.secondSubTitle);}};},getSettingsSTBInfoViewDataMapper:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getSubTitle:function(b){return b.subTitle;}};},getRecordingsSubMenuListData:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getIcon:function(c){var b=$N.platform.system.Preferences.get(c.constant);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getMaxNofEpisodesSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_EPISODIC_MAX_NOF_EPISODES);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getPlaybackPlayerSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_PLAYBACK_PLAYER_TIMEOUT);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getDiagnosticsProgress:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getProgress:function(c){var b=parseInt(c.subTitle,10);if(isNaN(b)){b=0;}return b;}};},getDiagnosticsSignalStrengthProgress:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getProgress:function(c){var b=parseInt(c.subTitle,10);if(isNaN(b)){b=-16;}else{if($N.app.GeneralUtil.isFloat(c.subTitle)){b=Number(c.subTitle).toFixed(1);}}return b;}};},getMenuParentalRatings:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getIcon:function(b){var c=$N.app.SettingsAPI.getMoralityLevel();if((b.morality>=c&&b.title!=="parentalRatingNoBlock")||(b.morality===c&&b.title==="parentalRatingNoBlock")){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}},getAdditionalIcon:function(b){return b.ratingIcon;}};},getMenuRecordingsFolder:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.app.FolderUtil.getNonEpisodicDefaultFolder();if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}},getAdditionalIcon:function(b){return"../../../customise/resources/images/%RES/icons/DVR_pasta_menor.png";}};},getMenuUsbFolder:function(){return{getTitle:function(b){return b.title;},getIcon:function(b){return"";},getAdditionalIcon:function(b){if(b.type==="Folder"){return"../../../customise/resources/images/%RES/icons/DVR_pasta_menor.png";}else{if(b.type==="File"){return"MOVETEXT";}}}};},getMenuLanguageSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_LANGUAGE);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getAutoTuneFrequencySubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.app.AutoTuneHelper.getAutoTuneProperty("frequency");if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getAudioLanguageSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_AUDIO_LANGUAGE);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getSubtitleSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_SUBTITLE_STATE);if(c.value.toLowerCase()===b.toLowerCase()){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getTransitionEffectsSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_USBDLNA_PHOTO_TRANSITION_EFFECTS);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getMiniguideDurationSubMenu:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=parseInt($N.platform.system.Preferences.get($N.app.constants.PREF_ZAPPING_BANNER_TIMEOUT),10);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getTipsFromNetSubMenu:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getIcon:function(c){var b=$N.platform.system.Preferences.get($N.app.constants.PREF_DEFAULT_TIPSFROMNET);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getAllChannelsForBlockedView:function(){return{getTitle:function(b){return b.title;},getIcon:function(b){if($N.app.ChannelManager.isBlockedChannel(b)){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}},getChannelNumber:function(b){return b.channelNumber;}};},getAllChannels:function(){return{getTitle:function(b){return b.title;},getIcon:function(b){if($N.app.ChannelManager.isFavouriteChannel(b.channelInfo)){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}},getChannelNumber:function(b){return b.channelNumber;}};},getFavourites:function(){return{getTitle:function(b){return b.title;},getChannelNumber:function(b){return b.channelNumber;}};},getOptionWindowItems:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getIcon:function(d){var c=d.isAbsolute||false,b=$N.platform.system.Preferences.get(d.constant,c);if(d.option===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getAutoTuneAllChannels:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.app.AutoTuneHelper.getAutoTuneProperty("logicalChannelNum"),d=null;if(typeof(c.channelNumber)==="string"){d=parseInt(c.channelNumber,10);}else{d=c.channelNumber;}if(d===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}},getChannelNumber:function(b){return b.channelNumber;}};},getAutoTuneList:function(){var b={getTitle:function(c){return(c.startDate+", "+c.startTime+", "+$N.app.StringUtil.lowercaseFirstLetter($N.app.DataMappers.getString("autoTunefrequencies")[c.jobType]));},getSubTitle:function(c){return(c.channelNumber+" "+c.serviceName);},getChannelLogo:function(c){return c.channelLogo;},getChannelNumber:function(c){return c.channelNumber;}};return $N.app.GeneralUtil.mixin(b,this.getServiceDataMapper());},getReminderList:function(){var b={getTitle:function(f){var e=$N.app.epgUtil.getExtendedInfoByEventId(f.eventId),d=$N.platform.btv.EPG.getChannelByServiceId(f.serviceId),c=f.episodeId||e.episode;if($N.app.ParentalControlUtil.isChannelOrProgramLocked(f)&&($N.app.epgUtil.isAdultEvent(f)||$N.app.genreUtil.isAdultChannel(d))){return $N.app.DataMappers.getString("adultContent");}if(c){return(f.title+$N.app.epgUtil.getSeasonEpisodeShort(f," "));}return f.title;},getSubTitle:function(c){return(c.startDate+", "+c.startTime);},getChannelLogo:function(c){return c.channelLogo;},getChannelNumber:function(c){return c.channelNumber;}};return $N.app.GeneralUtil.mixin(b,this.getServiceDataMapper());},getOptionWindowItemsLookUp:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.system.Preferences.get(c.constant);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getVideoSystemSubMenu:function(){return{getTitle:function(b){return $N.app.DataMappers.getString(b.title);},getIcon:function(c){var b=$N.platform.system.Preferences.get(c.constant,c.absolutePath);if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getWHPvrRecordServerData:function(){return{getTitle:function(b){return b.title;},getIcon:function(c){var b=$N.platform.btv.WHPVRManager.getCurrentRecordServer();if(c.value===b){return"../../../customise/resources/images/%RES/icons/tick_17x17.png";}else{return"";}}};},getWHPvrServersData:function(){return{getTitle:function(b){a("getWHPvrServersData: ",b.title+" === "+$N.app.DataMappers.getString(b.title));return b.title;},getSubTitle:function(b){return b.subTitle;}};},getPurchaseItemData:function(){return{getTitle:function(c){var d=$N.app.StringUtil.join(" ",[c.channr.toString(),c.channame]),b=$N.app.DateTimeUtil.getWeekdayDayMonthTimeStringFromDate(new Date(c.startTime));return $N.app.StringUtil.join(" | ",[d,b]);},getSubTitle:function(b){return b.eventname;},getAdditionalText:function(c){var b=(c.cost*0.01).toFixed(2);b=b.replace(".",",");return b;}};},getServiceDataMapper:function(){return{getChannelName:function(b){return b.serviceName||"";},getChannelAbbreviation:function(b){if(b.serviceName){return b.serviceName.split(" ")[0].substring(0,5).toUpperCase();}return"";},getDefinition:function(b){return b.definition||"";},getChannelLogo:function(b){return b.channelLogo||$N.app.epgUtil.getChannelLogoUrl(b.serviceId)||"";},getChannelNumber:function(b){return $N.app.GeneralUtil.padNumberWithZeroes(b.logicalChannelNum,3)||"";}};}};}());(function(a){a=a||{};a.app=a.app||{};a.app.Config=(function(){var b={"network.server.qsp.path":{value:"/hue-gateway/gateway/http/js",override:true},"metadata.language":{value:"pt_BR",override:true},"metadata.baseUri":{value:"/metadata/delivery",override:true},"metadata.searchUri":{value:"/metadata/solr",override:true},"metadata.provider":{value:"NET",override:true},"epg.cache.expiry":{value:7200000,override:true},"external.epg.poster.path":{value:"/images/",override:false},"exclude.unsubscribed.channels":{value:"false",override:false},"show.unsubscribed.channels":{value:"true",override:false},"network.http.proxy":{value:"",override:false},"stb.environment":{value:"HYBRID",override:true},"pvr.enabled":{value:"true",override:true},"catchup.enabled":{value:"true",override:false},"startover.enabled":{value:"true",override:false},"whpvr.feature.enabled":{value:"false",override:false},"media.playback.feature.enabled":{value:true,override:false},"moca.enabled":{value:"false",override:true},"pip.enabled":{value:"true",override:false},"mock.pvr.manager":{value:"false",override:true},"prm.enabled":{value:"false",override:true},"stb.tuner.type":{value:"DVBC",override:true},"stb.numberOfTuners":{value:2,override:true},"reminder.enabled":{value:"true",override:true},"barker.channel.service":{value:{serviceId:"0001001901f4",uri:"tv://channel.0001001901f4",type:1,channelKey:500,serviceName:"NET TV HD"},override:true},"portal.url":{value:"/portal",override:true},"now.catalogue.override.url":{value:"/now/nowOverrides.js",override:true},"music.lastPlayed.channel":{value:"0,18",override:false},"pvr.defaultfolder":{value:"/",override:false},"pvr.keep":{value:"1",override:false},"pvr.lock":{value:"0",override:false},"subtitle.language":{value:"por",override:false},"audio.language":{value:"dub",override:false},language:{value:"pt_br",override:false},"pvr.folders":{value:[""],override:false},"usbdlna.photo.display.duration":{value:10,override:false},"usbdlna.photo.transition.effects":{value:-1,override:false},"usbdlna.player.banner.timeout":{value:3,override:false},"zapping.banner.timeout":{value:"5000",override:false},"ti.net.servicetips":{value:"true",override:false},"av.default.aspect_ratio_hd":{value:"hdmiLetterbox",override:false},"audio.prefFormat":{value:6,override:false},"system.frontpanel.intensity":{value:"7",override:false},"system.frontpanel.channel":{value:"2",override:false},"pvr.banner.timeout":{value:"5000",override:false},"pvr.episodic.before.padding":{value:"15",override:false},"pvr.episodic.after.padding":{value:"15",override:false},"before.padding":{value:"15",override:false},"after.padding":{value:"15",override:false},"pvr.episodic.blockPlayback":{value:"false",override:false},"pvr.episodic.typeOfEpisodes":{value:"just_this_episode",override:true},"pvr.episodic.keep.until":{value:"0",override:false},"system.inactivitytimer":{value:"360",override:false},"first.install.pin":{value:"8291",override:false},"social.facebook.pinSetting":{value:"socialPinSettingNeverRequest",override:false},"social.facebook.pin":{value:"0000",override:false},"applicationLaunch.url":{value:"/apps",override:true},"social.stb.url":{value:"http://ssolab1.nagra.com/net/stb-connect",override:true},"social.stb.token.renewal.url":{value:"http://10.12.129.5:3003",override:true},"social.facebook.graph.url":{value:"https://graph.facebook.com",override:false},"social.facebook.featureAvailability":{value:false,override:true},"social.facebook.forceDisable":{value:true,override:true},"social.facebook.sharedSalt":{value:"abc456xyz",override:true},"social.facebook.secretAesKey":{value:"nagrakey",override:true},"mode.viewType":{value:"grid",override:false},"record.server.udn":{value:"",override:false},"traxis.developer.mode":{value:"off",override:false},"traxis.developer.server":{value:"http://172.16.6.134/traxis",override:true},"mds.developer.mode":{value:"off",override:false},"mds.developer.server":{value:"http://ssolab1.nagra.com",override:true},"mds.developer.promo_path":{value:"/net/posters/epg",override:true},"mds.developer.poster_path":{value:"/net/posters/epg/",override:true},"vod.poster.prefix":{value:"/posters/vod_posters",override:true},"faked.playback":{value:"false",override:true},"faked.playback.serviceId":{value:"000100720220",override:true},"faked.playback.serviceUri":{value:"tv://channel.000100720220",override:true},"usageid.manual.override":{value:"false",override:false},"ui.migration.status":{value:false,override:false},"log.config":{value:{enableLogging:false,defaultValues:0,loggingLevels:{error:0,warn:0,debug:0,info:0},moduleLogging:{},classLogging:{},methodLogging:{}},override:true},"ppv.subscriptionApp.launchChannel":{value:{serviceId:"000100010001",uri:"tv://channel.000100010001",type:1,channelKey:1,name:"NOW"},override:true},"dvb.scan.configuration":{value:"",override:false},"analytics.enabled":{value:"false",override:true},"analytics.server":{value:"0.0.0.0",override:true},"build.mode":{value:"RELEASE",override:true}};return{getConfig:function(c){return b[c];},getConfigValue:function(c){return b[c].value;},initialise:function(){var f,c,d=false;for(f in b){if(b.hasOwnProperty(f)&&!b.dontPersist){d=b[f].isAbsolute||false;c=a.platform.system.Preferences.get(f,d);if(c===undefined||(c!==""&&b[f].override)){a.platform.system.Preferences.set(f,b[f].value,d);}}}}};}());}($N||{}));$N=$N||{};$N.app=$N.app||{};$N.app.Version={app_version:"NET-2.0.14-RGN-REL-12-129651",updateSWVersion:function(){var c="/system/softwareUserInterfaceVersion",b=CCOM.ConfigManager.getValue(c).keyValue,a=$N.app.Version.app_version;if(!a||a.substr(0,13)==="__GRAVITY_VER"){return;}if(b!==a){CCOM.ConfigManager.setValue(c,a);}}};var $N=$N||{};$N.app=$N.app||{};var Launch=(function(){var d=new $N.apps.core.Log("Launch","Launch"),f={},g=navigator.userAgent.indexOf("Ekioh")>-1?"svg":"html",k=true,v=null,t=false,x,s,q,p,h,r,m,w,e,n,u,l,b,o,a,c;if(g==="html"){$N.platform.system.Preferences.set($N.app.constants.PREF_ISINSTALLED,"true");$N.platform.system.Preferences.set($N.app.constants.PREF_LANGUAGE,"en_gb");}b=function(){l();if($N.app.LaunchUtil.isSetupWizardRequired()){r();}};x=function(){var y=function(){};$N.services.sdp.Ratings.cacheRatingTable($N.app.locale,y);};s=function(){var y=function(z){$N.app.LaunchUtil.setSDPAccountDetails(z);x();};$N.services.sdp.ServiceFactory.get("ContextService").getCurrentContext(this,y);$N.services.sdp.Signon.unregisterListener(s);};a=function(){$N.app.ContextHelper.openContext("ZAPPER",{activationObject:{quietMode:true}});$N.app.fullScreenPlayer.stopPlayout(true);CCOM.UserAuth.resetUserProfile();CCOM.ControlCenter.clearCache();};c=function(){var y=$N.platform.system.Preferences.get($N.app.constants.PREF_ISINSTALLED)==="true";CCOM.UserAuth.getCurrentUserProfile();if(!y){$N.app.ContextHelper.openContext("FIRSTINSTALL");}else{$N.app.ChannelManager.tuneToBarkerChannel(true);$N.app.ContextHelper.openContext("PORTAL");}$N.app.SocialActivityFactory.getSocialAccountObject($N.app.SocialAccount.FACEBOOK).setDailyScheduler();if($N.app.SocialActivityFactory.getSocialAccountObject($N.app.SocialAccount.FACEBOOK).isAccountAvailable()){$N.app.SocialActivityFactory.getSocialAccountObject($N.app.SocialAccount.FACEBOOK).setSchedulerForTokenRenewal();}};q=function(A){var z=null,y=function(){z=document.getElementById("logo");if(z){z.parentNode.removeChild(z);}if(!A){$N.app.ContextHelper.openContext("PORTAL");}};$N.apps.util.EventManager.subscribe("SYSTEM_POWER_STANDBY",a,Launch);$N.apps.util.EventManager.subscribe("SYSTEM_POWER_NORMAL",c,Launch);$N.apps.core.KeyInterceptor.registerInterceptor(GlobalKeysInterceptor.keyHandler,GlobalKeysInterceptor);$N.apps.core.KeyInterceptor.registerInterceptor(GlobalKeysInterceptor.defaultContextKeyHandler,GlobalKeysInterceptor);$N.common.helper.FrontPanelManager.setFrontPanelDisplayToPreference();if(A){$N.app.ContextHelper.openContext("FIRSTINSTALL",{navCompleteCallback:y});}else{if($N.common.helper.PowerManager.getCurrentPowerMode()===$N.common.helper.PowerManager.SYSTEM_POWER_NORMAL){$N.app.ChannelManager.tuneToBarkerChannel(true);$N.app.MemoryUtil.collectGarbage();window.setTimeout(y,1000);}else{z=document.getElementById("logo");if(z){z.parentNode.removeChild(z);}}}};p=function(){var y=true;$N.apps.core.ContextManager.doPreCache();q(y);};h=function(){$N.apps.core.KeyInterceptor.unregisterInterceptor(GlobalKeysInterceptor.keyHandler);$N.apps.core.KeyInterceptor.unregisterInterceptor(GlobalKeysInterceptor.defaultContextKeyHandler);k=false;if($N.app.NetworkUtil.isNetworkAvailable()){o();}else{l();r();}};r=function(){$N.common.helper.ScanManager.enableAutomaticScans();$N.platform.system.Preferences.set($N.app.constants.PREF_ISINSTALLED,"true");};w=function(){if(v){$N.apps.util.EventManager.unSubscribe(v);v=null;}$N.app.ErrorMessage.registerListeners();$N.app.Version.updateSWVersion();q();};e=function(){$N.app.ErrorMessage.registerListeners();};m=function(){$N.platform.system.Network.StateChange.setEthUpCallBack(e);};u=function(z,y){if(z===y){$N.apps.util.EventManager.fire("contextsLoaded");}};n=function(z,y){switch(z%3){case 0:f.logo.bootProgress1Label.setCssClass("splashScreenProgressHighlight");f.logo.bootProgress2Label.setCssClass("splashScreenProgress");f.logo.bootProgress3Label.setCssClass("splashScreenProgress");break;case 1:f.logo.bootProgress1Label.setCssClass("splashScreenProgress");f.logo.bootProgress2Label.setCssClass("splashScreenProgressHighlight");f.logo.bootProgress3Label.setCssClass("splashScreenProgress");break;case 2:f.logo.bootProgress1Label.setCssClass("splashScreenProgress");f.logo.bootProgress2Label.setCssClass("splashScreenProgress");f.logo.bootProgress3Label.setCssClass("splashScreenProgressHighlight");break;}if(g==="svg"){document.documentElement.forceRedraw();}u(z,y);};l=function(){if(!t){$N.app.LaunchUtil.addContexts(g);if(k){$N.apps.core.ContextManager.setPreCacheProgressCallback(n);}else{$N.apps.core.ContextManager.setPreCacheProgressCallback(u);}$N.app.LaunchUtil.continueNormalInitialisation(g,f);t=true;}else{$N.apps.util.EventManager.fire("contextsLoaded");}};o=function(){$N.platform.system.Network.renewAddress(CCOM.IpNetwork.INTERFACE_TYPE_DOCSIS);if($N.app.NetworkUtil.isNetworkAvailable()){b();}else{m();l();}};return{load:function(){document.getElementById("CCOM");$N.apps.core.Language.loadLanguageBundle(Launch.init,"customise/resources/",null,true);},init:function(){$N.apps.core.Log.Config.configure($N.app.Config.getConfigValue("log.config"));$N.app.LaunchUtil.basicInitialisation(g,f);v=$N.apps.util.EventManager.subscribe("contextsLoaded",w,Launch);$N.app.LaunchUtil.initialiseVOD();$N.app.LaunchUtil.initialiseMDS();$N.app.LaunchUtil.initialiseSDP();$N.apps.core.ContextManager.addContext("FIRSTINSTALL","apps/firstInstall/view/firstInstall."+g,$N.apps.core.ContextManager.CACHE_PRE_CACHE,false);if($N.app.LaunchUtil.isSetupWizardRequired()){p();return;}o();},finaliseInstallation:h};}());var getURL=getURL||function(b,d){var a={},c=new XMLHttpRequest();c.open("GET",b,false);c.send();a.success=true;a.content=c.responseText;d(a);};